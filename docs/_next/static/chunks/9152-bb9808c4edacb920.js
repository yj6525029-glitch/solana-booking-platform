(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9152],{69028:function(e,t,r){"use strict";t._O=t.Jq=t.KB=t.u8=t.cv=void 0,t.Ik=t.A9=t.n_=t.gM=void 0;let i=r(82957);function n(e){if(!(e instanceof Uint8Array))throw TypeError("b must be a Uint8Array")}function s(e){return n(e),i.Buffer.from(e.buffer,e.byteOffset,e.length)}class o{constructor(e,t){if(!Number.isInteger(e))throw TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function a(e,t){return t.property?e+"["+t.property+"]":e}class c extends o{isCount(){throw Error("ExternalLayout is abstract")}}class l extends c{constructor(e,t=0,r){if(!(e instanceof o))throw TypeError("layout must be a Layout");if(!Number.isInteger(t))throw TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof h||this.layout instanceof u}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}class h extends o{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readUIntLE(t,this.span)}encode(e,t,r=0){return s(t).writeUIntLE(e,r,this.span),this.span}}class u extends o{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readUIntBE(t,this.span)}encode(e,t,r=0){return s(t).writeUIntBE(e,r,this.span),this.span}}function d(e){let t=Math.floor(e/4294967296);return{hi32:t,lo32:e-4294967296*t}}function f(e,t){return 4294967296*e+t}class p extends o{constructor(e){super(8,e)}decode(e,t=0){let r=s(e),i=r.readUInt32LE(t);return f(r.readUInt32LE(t+4),i)}encode(e,t,r=0){let i=d(e),n=s(t);return n.writeUInt32LE(i.lo32,r),n.writeUInt32LE(i.hi32,r+4),8}}class g extends o{constructor(e){super(8,e)}decode(e,t=0){let r=s(e),i=r.readUInt32LE(t);return f(r.readInt32LE(t+4),i)}encode(e,t,r=0){let i=d(e),n=s(t);return n.writeUInt32LE(i.lo32,r),n.writeInt32LE(i.hi32,r+4),8}}class m extends o{constructor(e,t,r){if(!(e instanceof o))throw TypeError("elementLayout must be a Layout");if(!(t instanceof c&&t.isCount()||Number.isInteger(t)&&0<=t))throw TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;t instanceof c||!(0<e.span)||(i=t*e.span),super(i,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof c&&(i=i.decode(e,t)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let n=0;for(;n<i;)r+=this.elementLayout.getSpan(e,t+r),++n}return r}decode(e,t=0){let r=[],i=0,n=this.count;for(n instanceof c&&(n=n.decode(e,t));i<n;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return r}encode(e,t,r=0){let i=this.elementLayout,n=e.reduce((e,n)=>e+i.encode(n,t,r+e),0);return this.count instanceof c&&this.count.encode(e.length,t,r),n}}class y extends o{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((e,t)=>e&&t instanceof o,!0)))throw TypeError("fields must be array of Layout instances");for(let i of("boolean"==typeof t&&void 0===r&&(r=t,t=void 0),e))if(0>i.span&&void 0===i.property)throw Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((e,t)=>e+t.getSpan(),0)}catch(e){}super(i,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((r,i)=>{let n=i.getSpan(e,t);return t+=n,r+n},0)}catch(e){throw RangeError("indeterminate span")}return r}decode(e,t=0){n(e);let r=this.makeDestinationObject();for(let i of this.fields)if(void 0!==i.property&&(r[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){let i=r,n=0,s=0;for(let i of this.fields){let o=i.span;if(s=0<o?o:0,void 0!==i.property){let n=e[i.property];void 0!==n&&(s=i.encode(n,t,r),0>o&&(o=i.getSpan(t,r)))}n=r,r+=o}return n+s-i}fromArray(e){let t=this.makeDestinationObject();for(let r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw TypeError("property must be string");let t=0;for(let r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class b{constructor(e){this.property=e}decode(e,t){throw Error("UnionDiscriminator is abstract")}encode(e,t,r){throw Error("UnionDiscriminator is abstract")}}class w extends b{constructor(e,t){if(!(e instanceof c&&e.isCount()))throw TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}class v extends o{constructor(e,t,r){let i;if(e instanceof h||e instanceof u)i=new w(new l(e));else if(e instanceof c&&e.isCount())i=new w(e);else if(e instanceof b)i=e;else throw TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof o))throw TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let n=-1;t&&0<=(n=t.span)&&(e instanceof h||e instanceof u)&&(n+=i.layout.span),super(n,r),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof h||e instanceof u,this.defaultLayout=t,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return s(e)},this.configGetSourceVariant=function(e){s=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let r=this.getVariant(e,t);if(!r)throw Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw Error("unable to infer src variant")}decode(e,t=0){let r;let i=this.discriminator,n=i.decode(e,t),s=this.registry[n];if(void 0===s){let s=this.defaultLayout,o=0;this.usesPrefixDiscriminator&&(o=i.layout.span),(r=this.makeDestinationObject())[i.property]=n,r[s.property]=s.decode(e,t+o)}else r=s.decode(e,t);return r}encode(e,t,r=0){let i=this.getSourceVariant(e);if(void 0===i){let i=this.discriminator,n=this.defaultLayout,s=0;return this.usesPrefixDiscriminator&&(s=i.layout.span),i.encode(e[i.property],t,r),s+n.encode(e[n.property],t,r+s)}return i.encode(e,t,r)}addVariant(e,t,r){let i=new E(this,e,t,r);return this.registry[e]=i,i}getVariant(e,t=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,t):r=e,this.registry[r]}}class E extends o{constructor(e,t,r,i){if(!(e instanceof v))throw TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===i&&(i=r,r=null),r){if(!(r instanceof o))throw TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw Error("variant span exceeds span of containing union");if("string"!=typeof i)throw TypeError("variant must have a String property")}let n=e.span;0>e.span&&0<=(n=r?r.span:0)&&e.usesPrefixDiscriminator&&(n+=e.discriminator.layout.span),super(n,i),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,t+r)),r+i}decode(e,t=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let n=i;if(this.layout&&(this.layout.encode(e[this.property],t,r+i),n+=this.layout.getSpan(t,r+i),0<=this.union.span&&n>this.union.span))throw Error("encoded variant overruns containing union");return n}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function I(e){return 0>e&&(e+=4294967296),e}class _ extends o{constructor(e,t,r){if(!(e instanceof h||e instanceof u))throw TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===r&&(r=t,t=!1),4<e.span)throw RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(e){return i=I(e),this},this._packedGetValue=function(){return i}}decode(e,t=0){let r=this.makeDestinationObject(),i=this.word.decode(e,t);for(let t of(this._packedSetValue(i),this.fields))void 0!==t.property&&(r[t.property]=t.decode(e));return r}encode(e,t,r=0){let i=this.word.decode(t,r);for(let t of(this._packedSetValue(i),this.fields))if(void 0!==t.property){let r=e[t.property];void 0!==r&&t.encode(r)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){let r=new A(this,e,t);return this.fields.push(r),r}addBoolean(e){let t=new S(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}}class A{constructor(e,t,r){if(!(e instanceof _))throw TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw TypeError("bits must be positive integer");let i=8*e.span,n=e.fields.reduce((e,t)=>e+t.bits,0);if(t+n>i)throw Error("bits too long for span remainder ("+(i-n)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=n,this.container.msb&&(this.start=i-n-t),this.wordMask=I(this.valueMask<<this.start),this.property=r}decode(e,t){return I(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==I(e&this.valueMask))throw TypeError(a("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),r=I(e<<this.start);this.container._packedSetValue(I(t&~this.wordMask)|r)}}class S extends A{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}}class C extends o{constructor(e,t){if(!(e instanceof c&&e.isCount()||Number.isInteger(e)&&0<=e))throw TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof c||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),s(e).slice(t,t+r)}encode(e,t,r){let i=this.length;if(this.length instanceof c&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw TypeError(a("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>t.length)throw RangeError("encoding overruns Uint8Array");let n=s(e);return s(t).write(n.toString("hex"),r,i,"hex"),this.length instanceof c&&this.length.encode(i,t,r),i}}t.cv=(e,t,r)=>new l(e,t,r),t.u8=e=>new h(1,e),t.KB=e=>new h(2,e),t.Jq=e=>new h(4,e),t._O=e=>new p(e),t.gM=e=>new g(e),t.n_=(e,t,r)=>new y(e,t,r),t.A9=(e,t,r)=>new m(e,t,r),t.Ik=(e,t)=>new C(e,t)},95589:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function i(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,i,s,o){if("function"!=typeof i)throw TypeError("The listener must be a function");var a=new n(i,s||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1)),a.prototype.eventNames=function(){var e,i,n=[];if(0===this._eventsCount)return n;for(i in e=this._events)t.call(e,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=Array(s);n<s;n++)o[n]=i[n].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},a.prototype.emit=function(e,t,i,n,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,l,h=this._events[a],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,i),!0;case 4:return h.fn.call(h.context,t,i,n),!0;case 5:return h.fn.call(h.context,t,i,n,s),!0;case 6:return h.fn.call(h.context,t,i,n,s,o),!0}for(l=1,c=Array(u-1);l<u;l++)c[l-1]=arguments[l];h.fn.apply(h.context,c)}else{var d,f=h.length;for(l=0;l<f;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),u){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,i);break;case 4:h[l].fn.call(h[l].context,t,i,n);break;default:if(!c)for(d=1,c=Array(u-1);d<u;d++)c[d-1]=arguments[d];h[l].fn.apply(h[l].context,c)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,i,n){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||n&&!a.once||i&&a.context!==i||o(this,s);else{for(var c=0,l=[],h=a.length;c<h;c++)(a[c].fn!==t||n&&!a[c].once||i&&a[c].context!==i)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},80211:function(e,t,r){"use strict";var i=r(73306).Buffer;e.exports=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==t[o])throw TypeError(s+" is ambiguous");t[o]=n}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function u(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return i.alloc(0);for(var r=0,n=0,s=0;e[r]===c;)n++,r++;for(var o=(e.length-r)*l+1>>>0,h=new Uint8Array(o);r<e.length;){var u=e.charCodeAt(r);if(u>255)return;var d=t[u];if(255===d)return;for(var f=0,p=o-1;(0!==d||f<s)&&-1!==p;p--,f++)d+=a*h[p]>>>0,h[p]=d%256>>>0,d=d/256>>>0;if(0!==d)throw Error("Non-zero carry");s=f,r++}for(var g=o-s;g!==o&&0===h[g];)g++;var m=i.allocUnsafe(n+(o-g));m.fill(0,0,n);for(var y=n;g!==o;)m[y++]=h[g++];return m}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=i.from(t)),!i.isBuffer(t))throw TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,n=0,s=0,o=t.length;s!==o&&0===t[s];)s++,r++;for(var l=(o-s)*h+1>>>0,u=new Uint8Array(l);s!==o;){for(var d=t[s],f=0,p=l-1;(0!==d||f<n)&&-1!==p;p--,f++)d+=256*u[p]>>>0,u[p]=d%a>>>0,d=d/a>>>0;if(0!==d)throw Error("Non-zero carry");n=f,s++}for(var g=l-n;g!==l&&0===u[g];)g++;for(var m=c.repeat(r);g<l;++g)m+=e.charAt(u[g]);return m},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw Error("Non-base"+a+" character")}}}},7524:function(e,t,r){var i=r(80211);e.exports=i("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},12238:function(e,t,r){"use strict";function i(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function n(){let e=i();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=i,t.getSubtleCrypto=n,t.isBrowserCryptoAvailable=function(){return!!i()&&!!n()}},33531:function(e,t,r){"use strict";var i=r(25566);function n(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function s(){return void 0!==i&&void 0!==i.versions&&void 0!==i.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=n,t.isNode=s,t.isBrowser=function(){return!n()&&!s()}},13303:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(45161);i.__exportStar(r(12238),t),i.__exportStar(r(33531),t)},45161:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return s},__asyncDelegator:function(){return v},__asyncGenerator:function(){return w},__asyncValues:function(){return E},__await:function(){return b},__awaiter:function(){return h},__classPrivateFieldGet:function(){return S},__classPrivateFieldSet:function(){return C},__createBinding:function(){return d},__decorate:function(){return a},__exportStar:function(){return f},__extends:function(){return n},__generator:function(){return u},__importDefault:function(){return A},__importStar:function(){return _},__makeTemplateObject:function(){return I},__metadata:function(){return l},__param:function(){return c},__read:function(){return g},__rest:function(){return o},__spread:function(){return m},__spreadArrays:function(){return y},__values:function(){return p}});var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function a(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,i){t(r,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((i=i.apply(e,t||[])).next())})}function u(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}function f(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function w(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){n[e]&&(i[e]=function(t){return new Promise(function(r,i){s.push([e,t,r,i])>1||a(e,t)})})}function a(e,t){try{var r;(r=n[e](t)).value instanceof b?Promise.resolve(r.value.v).then(c,l):h(s[0][2],r)}catch(e){h(s[0][3],e)}}function c(e){a("next",e)}function l(e){a("throw",e)}function h(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function v(e){var t,r;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,n){t[i]=e[i]?function(t){return(r=!r)?{value:b(e[i](t)),done:"return"===i}:n?n(t):t}:n}}function E(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){!function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)}(i,n,(t=e[r](t)).done,t.value)})}}}function I(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},5071:function(e,t,r){"use strict";r.d(t,{Z:function(){return b},k:function(){return b}});var i=r(55445),n=r(80751),s=r.n(n),o=r(80577),a=r(5276),c=Object.defineProperty,l=Object.defineProperties,h=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,p=(e,t,r)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&p(e,r,t[r]);if(u)for(var r of u(t))f.call(t,r)&&p(e,r,t[r]);return e},m=(e,t)=>l(e,h(t));let y={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class b{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new i.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,a.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{let t=(0,o.u)(e),r=await (await s()(this.url,m(g({},y),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!(0,a.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(Error("HTTP connection is missing or invalid"));e()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){let t=(0,o.u)({id:1,jsonrpc:"2.0",method:"test",params:[]});await s()(e,m(g({},y),{body:t}))}this.onOpen()}catch(t){let e=this.parseError(t);throw this.events.emit("register_error",e),this.onClose(),e}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,o.D)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let r=this.parseError(t),i=r.message||r.toString(),n=(0,a.formatJsonRpcError)(e,i);this.events.emit("payload",n)}parseError(e,t=this.url){return(0,a.parseConnectionError)(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}},38979:function(e,t,r){"use strict";r.d(t,{r:function(){return s}});var i=r(55445),n=r(5276);class s extends n.IJsonRpcProvider{constructor(e){super(e),this.events=new i.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict((0,n.formatJsonRpcRequest)(e.method,e.params||[],e.id||(0,n.getBigIntRpcId)().toString()),t)}async requestStrict(e,t){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(e){i(e)}this.events.on(`${e.id}`,e=>{(0,n.isJsonRpcError)(e)?i(e.error):r(e.result)});try{await this.connection.send(e,t)}catch(e){i(e)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),(0,n.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}},44265:function(e,t,r){"use strict";r.d(t,{CA:function(){return n},JV:function(){return a},O4:function(){return i},dQ:function(){return s},xK:function(){return o}});let i="INTERNAL_ERROR",n="SERVER_ERROR",s=[-32700,-32600,-32601,-32602,-32603],o={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[i]:{code:-32603,message:"Internal error"},[n]:{code:-32e3,message:"Server error"}},a=n},23497:function(e,t,r){"use strict";var i=r(13303);r.o(i,"IJsonRpcProvider")&&r.d(t,{IJsonRpcProvider:function(){return i.IJsonRpcProvider}}),r.o(i,"formatJsonRpcError")&&r.d(t,{formatJsonRpcError:function(){return i.formatJsonRpcError}}),r.o(i,"formatJsonRpcRequest")&&r.d(t,{formatJsonRpcRequest:function(){return i.formatJsonRpcRequest}}),r.o(i,"formatJsonRpcResult")&&r.d(t,{formatJsonRpcResult:function(){return i.formatJsonRpcResult}}),r.o(i,"getBigIntRpcId")&&r.d(t,{getBigIntRpcId:function(){return i.getBigIntRpcId}}),r.o(i,"isHttpUrl")&&r.d(t,{isHttpUrl:function(){return i.isHttpUrl}}),r.o(i,"isJsonRpcError")&&r.d(t,{isJsonRpcError:function(){return i.isJsonRpcError}}),r.o(i,"isJsonRpcRequest")&&r.d(t,{isJsonRpcRequest:function(){return i.isJsonRpcRequest}}),r.o(i,"isJsonRpcResponse")&&r.d(t,{isJsonRpcResponse:function(){return i.isJsonRpcResponse}}),r.o(i,"isJsonRpcResult")&&r.d(t,{isJsonRpcResult:function(){return i.isJsonRpcResult}}),r.o(i,"isLocalhostUrl")&&r.d(t,{isLocalhostUrl:function(){return i.isLocalhostUrl}}),r.o(i,"isReactNative")&&r.d(t,{isReactNative:function(){return i.isReactNative}}),r.o(i,"isWsUrl")&&r.d(t,{isWsUrl:function(){return i.isWsUrl}}),r.o(i,"payloadId")&&r.d(t,{payloadId:function(){return i.payloadId}})},28418:function(e,t,r){"use strict";r.d(t,{CX:function(){return a},L2:function(){return o},by:function(){return s},i5:function(){return n}});var i=r(44265);function n(e){return i.dQ.includes(e)}function s(e){return Object.keys(i.xK).includes(e)?i.xK[e]:i.xK[i.JV]}function o(e){return Object.values(i.xK).find(t=>t.code===e)||i.xK[i.JV]}function a(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?Error(`Unavailable ${r} RPC url at ${t}`):e}},74947:function(e,t,r){"use strict";r.d(t,{CS:function(){return o},RI:function(){return l},o0:function(){return s},sT:function(){return a},tm:function(){return c}});var i=r(28418),n=r(44265);function s(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function o(e=6){return BigInt(s(e))}function a(e,t,r){return{id:r||s(),jsonrpc:"2.0",method:e,params:t}}function c(e,t){return{id:e,jsonrpc:"2.0",result:t}}function l(e,t,r){var s;return{id:e,jsonrpc:"2.0",error:void 0===(s=t)?(0,i.by)(n.O4):("string"==typeof s&&(s=Object.assign(Object.assign({},(0,i.by)(n.CA)),{message:s})),void 0!==r&&(s.data=r),(0,i.i5)(s.code)&&(s=(0,i.L2)(s.code)),s)}}},5276:function(e,t,r){"use strict";r.d(t,{IJsonRpcProvider:function(){return o.x0},formatJsonRpcError:function(){return s.RI},formatJsonRpcRequest:function(){return s.sT},formatJsonRpcResult:function(){return s.tm},getBigIntRpcId:function(){return s.CS},isHttpUrl:function(){return a.jK},isJsonRpcError:function(){return c.jg},isJsonRpcRequest:function(){return c.DW},isJsonRpcResponse:function(){return c.u},isJsonRpcResult:function(){return c.k4},isLocalhostUrl:function(){return a.JF},isWsUrl:function(){return a.UZ},parseConnectionError:function(){return i.CX},payloadId:function(){return s.o0}}),r(44265);var i=r(28418),n=r(23497);r.o(n,"IJsonRpcProvider")&&r.d(t,{IJsonRpcProvider:function(){return n.IJsonRpcProvider}}),r.o(n,"formatJsonRpcError")&&r.d(t,{formatJsonRpcError:function(){return n.formatJsonRpcError}}),r.o(n,"formatJsonRpcRequest")&&r.d(t,{formatJsonRpcRequest:function(){return n.formatJsonRpcRequest}}),r.o(n,"formatJsonRpcResult")&&r.d(t,{formatJsonRpcResult:function(){return n.formatJsonRpcResult}}),r.o(n,"getBigIntRpcId")&&r.d(t,{getBigIntRpcId:function(){return n.getBigIntRpcId}}),r.o(n,"isHttpUrl")&&r.d(t,{isHttpUrl:function(){return n.isHttpUrl}}),r.o(n,"isJsonRpcError")&&r.d(t,{isJsonRpcError:function(){return n.isJsonRpcError}}),r.o(n,"isJsonRpcRequest")&&r.d(t,{isJsonRpcRequest:function(){return n.isJsonRpcRequest}}),r.o(n,"isJsonRpcResponse")&&r.d(t,{isJsonRpcResponse:function(){return n.isJsonRpcResponse}}),r.o(n,"isJsonRpcResult")&&r.d(t,{isJsonRpcResult:function(){return n.isJsonRpcResult}}),r.o(n,"isLocalhostUrl")&&r.d(t,{isLocalhostUrl:function(){return n.isLocalhostUrl}}),r.o(n,"isReactNative")&&r.d(t,{isReactNative:function(){return n.isReactNative}}),r.o(n,"isWsUrl")&&r.d(t,{isWsUrl:function(){return n.isWsUrl}}),r.o(n,"payloadId")&&r.d(t,{payloadId:function(){return n.payloadId}});var s=r(74947),o=r(75826),a=r(20276),c=r(65505)},75826:function(e,t,r){"use strict";r.d(t,{x0:function(){return s}});class i{}class n extends i{constructor(){super()}}class s extends n{constructor(e){super()}}},20276:function(e,t,r){"use strict";function i(e,t){let r=function(e){let t=e.match(RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}function n(e){return i(e,"^https?:")}function s(e){return i(e,"^wss?:")}function o(e){return RegExp("wss?://localhost(:d{2,5})?").test(e)}r.d(t,{JF:function(){return o},UZ:function(){return s},jK:function(){return n}})},65505:function(e,t,r){"use strict";function i(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function n(e){return i(e)&&"method"in e}function s(e){return i(e)&&(o(e)||a(e))}function o(e){return"result"in e}function a(e){return"error"in e}r.d(t,{DW:function(){return n},jg:function(){return a},k4:function(){return o},u:function(){return s}})},16854:function(e){"use strict";e.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},15133:function(e,t,r){"use strict";r.d(t,{Ep:function(){return A},Fd:function(){return _},Rt:function(){return S},gw:function(){return n.a},jI:function(){return I}});var i=r(97435),n=r.n(i),s=r(80577);let o={level:"info"},a="custom_context";class c{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class l{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){let t=new c(e);if(t.size>this.maxSizeInBytes)throw Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?this.tail&&(this.tail.next=t):this.head=t,this.tail=t,this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;let e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){let e=[],t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};let t=e.value;return e=e.next,{done:!1,value:t}}}}}class h{constructor(e,t=1024e3){this.level=e??"error",this.levelValue=i.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new l(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===i.levels.values.error?console.error(e):t===i.levels.values.warn?console.warn(e):t===i.levels.values.debug?console.debug(e):t===i.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append((0,s.u)({timestamp:new Date().toISOString(),log:e}));let t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new l(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){let t=this.getLogArray();return t.push((0,s.u)({extraMetadata:e})),new Blob(t,{type:"application/json"})}}class u{constructor(e,t=1024e3){this.baseChunkLogger=new h(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){let t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}class d{constructor(e,t=1024e3){this.baseChunkLogger=new h(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var f=Object.defineProperty,p=Object.defineProperties,g=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,w=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&w(e,r,t[r]);if(m)for(var r of m(t))b.call(t,r)&&w(e,r,t[r]);return e},E=(e,t)=>p(e,g(t));function I(e){return E(v({},e),{level:e?.level||o.level})}function _(e,t=a){return typeof e.bindings>"u"?function(e,t=a){return e[t]||""}(e,t):e.bindings().context||""}function A(e,t,r=a){let i=function(e,t,r=a){let i=_(e,r);return i.trim()?`${i}/${t}`:t}(e,t,r);return function(e,t,r=a){return e[r]=t,e}(e.child({context:i}),i,r)}function S(e){return"u">typeof e.loggerOverride&&"string"!=typeof e.loggerOverride?{logger:e.loggerOverride,chunkLoggerController:null}:"u">typeof window?function(e){var t,r;let i=new u(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:n()(E(v({},e.opts),{level:"trace",browser:E(v({},null==(r=e.opts)?void 0:r.browser),{write:e=>i.write(e)})})),chunkLoggerController:i}}(e):function(e){var t;let r=new d(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:n()(E(v({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}(e)}},80577:function(e,t,r){"use strict";r.d(t,{D:function(){return s},u:function(){return o}});let i=e=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString()+"n":t),n=e=>JSON.parse(e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3'),(e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t);function s(e){if("string"!=typeof e)throw Error(`Cannot safe json parse value of type ${typeof e}`);try{return n(e)}catch(t){return e}}function o(e){return"string"==typeof e?e:i(e)||""}},70213:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(62494);i.__exportStar(r(12658),t),i.__exportStar(r(75127),t)},12658:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},75127:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},40537:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(62494);i.__exportStar(r(78627),t),i.__exportStar(r(59854),t),i.__exportStar(r(3205),t),i.__exportStar(r(70213),t)},3205:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(62494).__exportStar(r(71146),t)},71146:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0;class r{}t.IWatch=r},68353:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;let i=r(70213);t.toMiliseconds=function(e){return e*i.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/i.ONE_THOUSAND)}},86029:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}},78627:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(62494);i.__exportStar(r(86029),t),i.__exportStar(r(68353),t)},59854:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){let t=this.get(e);if(void 0!==t.elapsed)throw Error(`Watch already stopped for label: ${e}`);let r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){let t=this.timestamps.get(e);if(void 0===t)throw Error(`No timestamp found for label: ${e}`);return t}elapsed(e){let t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=r,t.default=r},62494:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return s},__asyncDelegator:function(){return v},__asyncGenerator:function(){return w},__asyncValues:function(){return E},__await:function(){return b},__awaiter:function(){return h},__classPrivateFieldGet:function(){return S},__classPrivateFieldSet:function(){return C},__createBinding:function(){return d},__decorate:function(){return a},__exportStar:function(){return f},__extends:function(){return n},__generator:function(){return u},__importDefault:function(){return A},__importStar:function(){return _},__makeTemplateObject:function(){return I},__metadata:function(){return l},__param:function(){return c},__read:function(){return g},__rest:function(){return o},__spread:function(){return m},__spreadArrays:function(){return y},__values:function(){return p}});var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function n(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function a(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,i){t(r,i,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function h(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((i=i.apply(e,t||[])).next())})}function u(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}function f(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,n++)i[n]=s[o];return i}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function w(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){n[e]&&(i[e]=function(t){return new Promise(function(r,i){s.push([e,t,r,i])>1||a(e,t)})})}function a(e,t){try{var r;(r=n[e](t)).value instanceof b?Promise.resolve(r.value.v).then(c,l):h(s[0][2],r)}catch(e){h(s[0][3],e)}}function c(e){a("next",e)}function l(e){a("throw",e)}function h(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function v(e){var t,r;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,n){t[i]=e[i]?function(t){return(r=!r)?{value:b(e[i](t)),done:"return"===i}:n?n(t):t}:n}}function E(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){!function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)}(i,n,(t=e[r](t)).done,t.value)})}}}function I(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function C(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},76454:function(e,t){"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function i(e){let t=r(e);if(!t)throw Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=i,t.getDocumentOrThrow=function(){return i("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return i("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return i("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return i("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return i("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},3897:function(e,t,r){"use strict";t.D=void 0;let i=r(76454);t.D=function(){let e,t,r;try{e=i.getDocumentOrThrow(),t=i.getLocationOrThrow()}catch(e){return null}function n(...t){let r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){let i=r[e],n=["itemprop","property","name"].map(e=>i.getAttribute(e)).filter(e=>!!e&&t.includes(e));if(n.length&&n){let e=i.getAttribute("content");if(e)return e}}return""}let s=((r=n("name","og:site_name","og:title","twitter:title"))||(r=e.title),r),o=n("description","og:description","twitter:description","keywords");return{description:o,url:t.origin,icons:function(){let r=e.getElementsByTagName("link"),i=[];for(let e=0;e<r.length;e++){let n=r[e],s=n.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){let e=n.getAttribute("href");if(e){if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{let i=t.pathname.split("/");i.pop(),r+=i.join("/")+"/"+e}i.push(r)}else if(0===e.indexOf("//")){let r=t.protocol+e;i.push(r)}else i.push(e)}}}return i}(),name:s}}},18282:function(e){"use strict";e.exports=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var n=e.charAt(i),s=n.charCodeAt(0);if(255!==t[s])throw TypeError(n+" is ambiguous");t[s]=i}var o=e.length,a=e.charAt(0),c=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,i=0,n=0;e[r]===a;)i++,r++;for(var s=(e.length-r)*c+1>>>0,l=new Uint8Array(s);e[r];){var h=e.charCodeAt(r);if(h>255)return;var u=t[h];if(255===u)return;for(var d=0,f=s-1;(0!==u||d<n)&&-1!==f;f--,d++)u+=o*l[f]>>>0,l[f]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");n=d,r++}for(var p=s-n;p!==s&&0===l[p];)p++;for(var g=new Uint8Array(i+(s-p)),m=i;p!==s;)g[m++]=l[p++];return g}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var c=(s-n)*l+1>>>0,h=new Uint8Array(c);n!==s;){for(var u=t[n],d=0,f=c-1;(0!==u||d<i)&&-1!==f;f--,d++)u+=256*h[f]>>>0,h[f]=u%o>>>0,u=u/o>>>0;if(0!==u)throw Error("Non-zero carry");i=d,n++}for(var p=c-i;p!==c&&0===h[p];)p++;for(var g=a.repeat(r);p<c;++p)g+=e.charAt(h[p]);return g},decodeUnsafe:h,decode:function(e){var t=h(e);if(t)return t;throw Error("Non-base"+o+" character")}}}},59196:function(e,t){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],i=t[1];return(r+i)*3/4-i},t.toByteArray=function(e){var t,r,s=c(e),o=s[0],a=s[1],l=new n((o+a)*3/4-a),h=0,u=a>0?o-4:o;for(r=0;r<u;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],l[h++]=t>>16&255,l[h++]=t>>8&255,l[h++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,l[h++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,l[h++]=t>>8&255,l[h++]=255&t),l},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,s=[],o=0,a=i-n;o<a;o+=16383)s.push(function(e,t,i){for(var n,s=[],o=t;o<i;o+=3)s.push(r[(n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===n?s.push(r[(t=e[i-1])>>2]+r[t<<4&63]+"=="):2===n&&s.push(r[(t=(e[i-2]<<8)+e[i-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],i=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)r[o]=s[o],i[s.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var i=r===t?0:4-r%4;return[r,i]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},44373:function(e,t,r){!function(e,t){"use strict";function i(e,t){if(!e)throw Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(r=t,t=10),this._init(e||0,t||10,r||"be"))}"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{u="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(46601).Buffer}catch(e){}function o(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void i(!1,"Invalid character in "+e)}function a(e,t,r){var i=o(e,r);return r-1>=t&&(i|=o(e,r-1)<<4),i}function c(e,t,r,n){for(var s=0,o=0,a=Math.min(e.length,r),c=t;c<a;c++){var l=e.charCodeAt(c)-48;s*=n,o=l>=49?l-49+10:l>=17?l-17+10:l,i(l>=0&&o<n,"Invalid character"),s+=o}return s}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return 0>e.cmp(t)?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,r):(this._parseBase(e,t,n),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var n,s,o=0;o<this.length;o++)this.words[o]=0;var a=0;if("be"===r)for(o=e.length-1,n=0;o>=0;o-=3)s=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[n]|=s<<a&67108863,this.words[n+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);else if("le"===r)for(o=0,n=0;o<e.length;o+=3)s=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[n]|=s<<a&67108863,this.words[n+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);return this._strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var i,n=0;n<this.length;n++)this.words[n]=0;var s=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=a(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=a(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var s=e.length-r,o=s%i,a=Math.min(s,s-o)+r,l=0,h=r;h<a;h+=i)l=c(e,h,h+i,t),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==o){var u=1;for(l=c(e,h,e.length,t),h=0;h<o;h++)u*=t;this.imuln(u),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},s.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){l(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(e){s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u,d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],s=0|t.words[0],o=n*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var l=1;l<i;l++){for(var h=c>>>26,u=67108863&c,d=Math.min(l,t.length-1),f=Math.max(0,l-e.length+1);f<=d;f++){var p=l-f|0;h+=(o=(n=0|e.words[p])*(s=0|t.words[f])+u)/67108864|0,u=67108863&o}r.words[l]=0|u,c=0|h}return 0!==c?r.words[l]=0|c:r.length--,r._strip()}s.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var r,n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=((a<<n|s)&16777215).toString(16);s=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,o--),r=0!==s||o!==this.length-1?d[6-c.length]+c+r:c+r}for(0!==s&&(r=s.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var l=f[e],h=p[e];r="";var u=this.clone();for(u.negative=0;!u.isZero();){var g=u.modrn(h).toString(e);r=(u=u.idivn(h)).isZero()?g+r:d[l-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},u&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(u,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){this._strip();var n=this.byteLength(),s=r||Math.max(1,n);i(n<=s,"byte array longer than desired length"),i(s>0,"Requested array length <= 0");var o=e.allocUnsafe?e.allocUnsafe(s):new e(s);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,n),o},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,i=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|i;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===s?(r<e.length&&(e[r++]=o>>24&255),i=0,s=0):(i=o>>>24,s+=2)}if(r<e.length)for(e[r++]=i;r<e.length;)e[r++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,i=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|i;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===s?(r>=0&&(e[r--]=o>>24&255),i=0,s=0):(i=o>>>24,s+=2)}if(r>=0)for(e[r--]=i;r>=0;)e[r--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return(8191&t)==0&&(r+=13,t>>>=13),(127&t)==0&&(r+=7,t>>>=7),(15&t)==0&&(r+=4,t>>>=4),(3&t)==0&&(r+=2,t>>>=2),(1&t)==0&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return(this.length-1)*26+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return i((this.negative|e.negative)==0),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return i((this.negative|e.negative)==0),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){this.length>e.length?(t=this,r=e):(t=e,r=this);for(var t,r,i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return i((this.negative|e.negative)==0),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var r=e/26|0,n=e%26;return this._expand(r+1),t?this.words[r]=this.words[r]|1<<n:this.words[r]=this.words[r]&~(1<<n),this._strip()},s.prototype.iadd=function(e){if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var t,r,i,n=0,s=0;s<i.length;s++)t=(0|r.words[s])+(0|i.words[s])+n,this.words[s]=67108863&t,n=t>>>26;for(;0!==n&&s<r.length;s++)t=(0|r.words[s])+n,this.words[s]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t,r,i=this.iadd(e);return e.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(t=this,r=e):(t=e,r=this);for(var s=0,o=0;o<r.length;o++)s=(i=(0|t.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&i;for(;0!==s&&o<t.length;o++)s=(i=(0|t.words[o])+s)>>26,this.words[o]=67108863&i;if(0===s&&o<t.length&&t!==this)for(;o<t.length;o++)this.words[o]=t.words[o];return this.length=Math.max(this.length,o),t!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var i,n,s,o=e.words,a=t.words,c=r.words,l=0,h=0|o[0],u=8191&h,d=h>>>13,f=0|o[1],p=8191&f,g=f>>>13,m=0|o[2],y=8191&m,b=m>>>13,w=0|o[3],v=8191&w,E=w>>>13,I=0|o[4],_=8191&I,A=I>>>13,S=0|o[5],C=8191&S,N=S>>>13,M=0|o[6],x=8191&M,O=M>>>13,P=0|o[7],T=8191&P,R=P>>>13,D=0|o[8],k=8191&D,L=D>>>13,j=0|o[9],U=8191&j,B=j>>>13,z=0|a[0],$=8191&z,q=z>>>13,F=0|a[1],H=8191&F,W=F>>>13,V=0|a[2],K=8191&V,Y=V>>>13,J=0|a[3],G=8191&J,Z=J>>>13,Q=0|a[4],X=8191&Q,ee=Q>>>13,et=0|a[5],er=8191&et,ei=et>>>13,en=0|a[6],es=8191&en,eo=en>>>13,ea=0|a[7],ec=8191&ea,el=ea>>>13,eh=0|a[8],eu=8191&eh,ed=eh>>>13,ef=0|a[9],ep=8191&ef,eg=ef>>>13;r.negative=e.negative^t.negative,r.length=19;var em=(l+(i=Math.imul(u,$))|0)+((8191&(n=(n=Math.imul(u,q))+Math.imul(d,$)|0))<<13)|0;l=((s=Math.imul(d,q))+(n>>>13)|0)+(em>>>26)|0,em&=67108863,i=Math.imul(p,$),n=(n=Math.imul(p,q))+Math.imul(g,$)|0,s=Math.imul(g,q);var ey=(l+(i=i+Math.imul(u,H)|0)|0)+((8191&(n=(n=n+Math.imul(u,W)|0)+Math.imul(d,H)|0))<<13)|0;l=((s=s+Math.imul(d,W)|0)+(n>>>13)|0)+(ey>>>26)|0,ey&=67108863,i=Math.imul(y,$),n=(n=Math.imul(y,q))+Math.imul(b,$)|0,s=Math.imul(b,q),i=i+Math.imul(p,H)|0,n=(n=n+Math.imul(p,W)|0)+Math.imul(g,H)|0,s=s+Math.imul(g,W)|0;var eb=(l+(i=i+Math.imul(u,K)|0)|0)+((8191&(n=(n=n+Math.imul(u,Y)|0)+Math.imul(d,K)|0))<<13)|0;l=((s=s+Math.imul(d,Y)|0)+(n>>>13)|0)+(eb>>>26)|0,eb&=67108863,i=Math.imul(v,$),n=(n=Math.imul(v,q))+Math.imul(E,$)|0,s=Math.imul(E,q),i=i+Math.imul(y,H)|0,n=(n=n+Math.imul(y,W)|0)+Math.imul(b,H)|0,s=s+Math.imul(b,W)|0,i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,Y)|0)+Math.imul(g,K)|0,s=s+Math.imul(g,Y)|0;var ew=(l+(i=i+Math.imul(u,G)|0)|0)+((8191&(n=(n=n+Math.imul(u,Z)|0)+Math.imul(d,G)|0))<<13)|0;l=((s=s+Math.imul(d,Z)|0)+(n>>>13)|0)+(ew>>>26)|0,ew&=67108863,i=Math.imul(_,$),n=(n=Math.imul(_,q))+Math.imul(A,$)|0,s=Math.imul(A,q),i=i+Math.imul(v,H)|0,n=(n=n+Math.imul(v,W)|0)+Math.imul(E,H)|0,s=s+Math.imul(E,W)|0,i=i+Math.imul(y,K)|0,n=(n=n+Math.imul(y,Y)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,Y)|0,i=i+Math.imul(p,G)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(g,G)|0,s=s+Math.imul(g,Z)|0;var ev=(l+(i=i+Math.imul(u,X)|0)|0)+((8191&(n=(n=n+Math.imul(u,ee)|0)+Math.imul(d,X)|0))<<13)|0;l=((s=s+Math.imul(d,ee)|0)+(n>>>13)|0)+(ev>>>26)|0,ev&=67108863,i=Math.imul(C,$),n=(n=Math.imul(C,q))+Math.imul(N,$)|0,s=Math.imul(N,q),i=i+Math.imul(_,H)|0,n=(n=n+Math.imul(_,W)|0)+Math.imul(A,H)|0,s=s+Math.imul(A,W)|0,i=i+Math.imul(v,K)|0,n=(n=n+Math.imul(v,Y)|0)+Math.imul(E,K)|0,s=s+Math.imul(E,Y)|0,i=i+Math.imul(y,G)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,G)|0,s=s+Math.imul(b,Z)|0,i=i+Math.imul(p,X)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(g,X)|0,s=s+Math.imul(g,ee)|0;var eE=(l+(i=i+Math.imul(u,er)|0)|0)+((8191&(n=(n=n+Math.imul(u,ei)|0)+Math.imul(d,er)|0))<<13)|0;l=((s=s+Math.imul(d,ei)|0)+(n>>>13)|0)+(eE>>>26)|0,eE&=67108863,i=Math.imul(x,$),n=(n=Math.imul(x,q))+Math.imul(O,$)|0,s=Math.imul(O,q),i=i+Math.imul(C,H)|0,n=(n=n+Math.imul(C,W)|0)+Math.imul(N,H)|0,s=s+Math.imul(N,W)|0,i=i+Math.imul(_,K)|0,n=(n=n+Math.imul(_,Y)|0)+Math.imul(A,K)|0,s=s+Math.imul(A,Y)|0,i=i+Math.imul(v,G)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(E,G)|0,s=s+Math.imul(E,Z)|0,i=i+Math.imul(y,X)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(b,X)|0,s=s+Math.imul(b,ee)|0,i=i+Math.imul(p,er)|0,n=(n=n+Math.imul(p,ei)|0)+Math.imul(g,er)|0,s=s+Math.imul(g,ei)|0;var eI=(l+(i=i+Math.imul(u,es)|0)|0)+((8191&(n=(n=n+Math.imul(u,eo)|0)+Math.imul(d,es)|0))<<13)|0;l=((s=s+Math.imul(d,eo)|0)+(n>>>13)|0)+(eI>>>26)|0,eI&=67108863,i=Math.imul(T,$),n=(n=Math.imul(T,q))+Math.imul(R,$)|0,s=Math.imul(R,q),i=i+Math.imul(x,H)|0,n=(n=n+Math.imul(x,W)|0)+Math.imul(O,H)|0,s=s+Math.imul(O,W)|0,i=i+Math.imul(C,K)|0,n=(n=n+Math.imul(C,Y)|0)+Math.imul(N,K)|0,s=s+Math.imul(N,Y)|0,i=i+Math.imul(_,G)|0,n=(n=n+Math.imul(_,Z)|0)+Math.imul(A,G)|0,s=s+Math.imul(A,Z)|0,i=i+Math.imul(v,X)|0,n=(n=n+Math.imul(v,ee)|0)+Math.imul(E,X)|0,s=s+Math.imul(E,ee)|0,i=i+Math.imul(y,er)|0,n=(n=n+Math.imul(y,ei)|0)+Math.imul(b,er)|0,s=s+Math.imul(b,ei)|0,i=i+Math.imul(p,es)|0,n=(n=n+Math.imul(p,eo)|0)+Math.imul(g,es)|0,s=s+Math.imul(g,eo)|0;var e_=(l+(i=i+Math.imul(u,ec)|0)|0)+((8191&(n=(n=n+Math.imul(u,el)|0)+Math.imul(d,ec)|0))<<13)|0;l=((s=s+Math.imul(d,el)|0)+(n>>>13)|0)+(e_>>>26)|0,e_&=67108863,i=Math.imul(k,$),n=(n=Math.imul(k,q))+Math.imul(L,$)|0,s=Math.imul(L,q),i=i+Math.imul(T,H)|0,n=(n=n+Math.imul(T,W)|0)+Math.imul(R,H)|0,s=s+Math.imul(R,W)|0,i=i+Math.imul(x,K)|0,n=(n=n+Math.imul(x,Y)|0)+Math.imul(O,K)|0,s=s+Math.imul(O,Y)|0,i=i+Math.imul(C,G)|0,n=(n=n+Math.imul(C,Z)|0)+Math.imul(N,G)|0,s=s+Math.imul(N,Z)|0,i=i+Math.imul(_,X)|0,n=(n=n+Math.imul(_,ee)|0)+Math.imul(A,X)|0,s=s+Math.imul(A,ee)|0,i=i+Math.imul(v,er)|0,n=(n=n+Math.imul(v,ei)|0)+Math.imul(E,er)|0,s=s+Math.imul(E,ei)|0,i=i+Math.imul(y,es)|0,n=(n=n+Math.imul(y,eo)|0)+Math.imul(b,es)|0,s=s+Math.imul(b,eo)|0,i=i+Math.imul(p,ec)|0,n=(n=n+Math.imul(p,el)|0)+Math.imul(g,ec)|0,s=s+Math.imul(g,el)|0;var eA=(l+(i=i+Math.imul(u,eu)|0)|0)+((8191&(n=(n=n+Math.imul(u,ed)|0)+Math.imul(d,eu)|0))<<13)|0;l=((s=s+Math.imul(d,ed)|0)+(n>>>13)|0)+(eA>>>26)|0,eA&=67108863,i=Math.imul(U,$),n=(n=Math.imul(U,q))+Math.imul(B,$)|0,s=Math.imul(B,q),i=i+Math.imul(k,H)|0,n=(n=n+Math.imul(k,W)|0)+Math.imul(L,H)|0,s=s+Math.imul(L,W)|0,i=i+Math.imul(T,K)|0,n=(n=n+Math.imul(T,Y)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,Y)|0,i=i+Math.imul(x,G)|0,n=(n=n+Math.imul(x,Z)|0)+Math.imul(O,G)|0,s=s+Math.imul(O,Z)|0,i=i+Math.imul(C,X)|0,n=(n=n+Math.imul(C,ee)|0)+Math.imul(N,X)|0,s=s+Math.imul(N,ee)|0,i=i+Math.imul(_,er)|0,n=(n=n+Math.imul(_,ei)|0)+Math.imul(A,er)|0,s=s+Math.imul(A,ei)|0,i=i+Math.imul(v,es)|0,n=(n=n+Math.imul(v,eo)|0)+Math.imul(E,es)|0,s=s+Math.imul(E,eo)|0,i=i+Math.imul(y,ec)|0,n=(n=n+Math.imul(y,el)|0)+Math.imul(b,ec)|0,s=s+Math.imul(b,el)|0,i=i+Math.imul(p,eu)|0,n=(n=n+Math.imul(p,ed)|0)+Math.imul(g,eu)|0,s=s+Math.imul(g,ed)|0;var eS=(l+(i=i+Math.imul(u,ep)|0)|0)+((8191&(n=(n=n+Math.imul(u,eg)|0)+Math.imul(d,ep)|0))<<13)|0;l=((s=s+Math.imul(d,eg)|0)+(n>>>13)|0)+(eS>>>26)|0,eS&=67108863,i=Math.imul(U,H),n=(n=Math.imul(U,W))+Math.imul(B,H)|0,s=Math.imul(B,W),i=i+Math.imul(k,K)|0,n=(n=n+Math.imul(k,Y)|0)+Math.imul(L,K)|0,s=s+Math.imul(L,Y)|0,i=i+Math.imul(T,G)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(R,G)|0,s=s+Math.imul(R,Z)|0,i=i+Math.imul(x,X)|0,n=(n=n+Math.imul(x,ee)|0)+Math.imul(O,X)|0,s=s+Math.imul(O,ee)|0,i=i+Math.imul(C,er)|0,n=(n=n+Math.imul(C,ei)|0)+Math.imul(N,er)|0,s=s+Math.imul(N,ei)|0,i=i+Math.imul(_,es)|0,n=(n=n+Math.imul(_,eo)|0)+Math.imul(A,es)|0,s=s+Math.imul(A,eo)|0,i=i+Math.imul(v,ec)|0,n=(n=n+Math.imul(v,el)|0)+Math.imul(E,ec)|0,s=s+Math.imul(E,el)|0,i=i+Math.imul(y,eu)|0,n=(n=n+Math.imul(y,ed)|0)+Math.imul(b,eu)|0,s=s+Math.imul(b,ed)|0;var eC=(l+(i=i+Math.imul(p,ep)|0)|0)+((8191&(n=(n=n+Math.imul(p,eg)|0)+Math.imul(g,ep)|0))<<13)|0;l=((s=s+Math.imul(g,eg)|0)+(n>>>13)|0)+(eC>>>26)|0,eC&=67108863,i=Math.imul(U,K),n=(n=Math.imul(U,Y))+Math.imul(B,K)|0,s=Math.imul(B,Y),i=i+Math.imul(k,G)|0,n=(n=n+Math.imul(k,Z)|0)+Math.imul(L,G)|0,s=s+Math.imul(L,Z)|0,i=i+Math.imul(T,X)|0,n=(n=n+Math.imul(T,ee)|0)+Math.imul(R,X)|0,s=s+Math.imul(R,ee)|0,i=i+Math.imul(x,er)|0,n=(n=n+Math.imul(x,ei)|0)+Math.imul(O,er)|0,s=s+Math.imul(O,ei)|0,i=i+Math.imul(C,es)|0,n=(n=n+Math.imul(C,eo)|0)+Math.imul(N,es)|0,s=s+Math.imul(N,eo)|0,i=i+Math.imul(_,ec)|0,n=(n=n+Math.imul(_,el)|0)+Math.imul(A,ec)|0,s=s+Math.imul(A,el)|0,i=i+Math.imul(v,eu)|0,n=(n=n+Math.imul(v,ed)|0)+Math.imul(E,eu)|0,s=s+Math.imul(E,ed)|0;var eN=(l+(i=i+Math.imul(y,ep)|0)|0)+((8191&(n=(n=n+Math.imul(y,eg)|0)+Math.imul(b,ep)|0))<<13)|0;l=((s=s+Math.imul(b,eg)|0)+(n>>>13)|0)+(eN>>>26)|0,eN&=67108863,i=Math.imul(U,G),n=(n=Math.imul(U,Z))+Math.imul(B,G)|0,s=Math.imul(B,Z),i=i+Math.imul(k,X)|0,n=(n=n+Math.imul(k,ee)|0)+Math.imul(L,X)|0,s=s+Math.imul(L,ee)|0,i=i+Math.imul(T,er)|0,n=(n=n+Math.imul(T,ei)|0)+Math.imul(R,er)|0,s=s+Math.imul(R,ei)|0,i=i+Math.imul(x,es)|0,n=(n=n+Math.imul(x,eo)|0)+Math.imul(O,es)|0,s=s+Math.imul(O,eo)|0,i=i+Math.imul(C,ec)|0,n=(n=n+Math.imul(C,el)|0)+Math.imul(N,ec)|0,s=s+Math.imul(N,el)|0,i=i+Math.imul(_,eu)|0,n=(n=n+Math.imul(_,ed)|0)+Math.imul(A,eu)|0,s=s+Math.imul(A,ed)|0;var eM=(l+(i=i+Math.imul(v,ep)|0)|0)+((8191&(n=(n=n+Math.imul(v,eg)|0)+Math.imul(E,ep)|0))<<13)|0;l=((s=s+Math.imul(E,eg)|0)+(n>>>13)|0)+(eM>>>26)|0,eM&=67108863,i=Math.imul(U,X),n=(n=Math.imul(U,ee))+Math.imul(B,X)|0,s=Math.imul(B,ee),i=i+Math.imul(k,er)|0,n=(n=n+Math.imul(k,ei)|0)+Math.imul(L,er)|0,s=s+Math.imul(L,ei)|0,i=i+Math.imul(T,es)|0,n=(n=n+Math.imul(T,eo)|0)+Math.imul(R,es)|0,s=s+Math.imul(R,eo)|0,i=i+Math.imul(x,ec)|0,n=(n=n+Math.imul(x,el)|0)+Math.imul(O,ec)|0,s=s+Math.imul(O,el)|0,i=i+Math.imul(C,eu)|0,n=(n=n+Math.imul(C,ed)|0)+Math.imul(N,eu)|0,s=s+Math.imul(N,ed)|0;var ex=(l+(i=i+Math.imul(_,ep)|0)|0)+((8191&(n=(n=n+Math.imul(_,eg)|0)+Math.imul(A,ep)|0))<<13)|0;l=((s=s+Math.imul(A,eg)|0)+(n>>>13)|0)+(ex>>>26)|0,ex&=67108863,i=Math.imul(U,er),n=(n=Math.imul(U,ei))+Math.imul(B,er)|0,s=Math.imul(B,ei),i=i+Math.imul(k,es)|0,n=(n=n+Math.imul(k,eo)|0)+Math.imul(L,es)|0,s=s+Math.imul(L,eo)|0,i=i+Math.imul(T,ec)|0,n=(n=n+Math.imul(T,el)|0)+Math.imul(R,ec)|0,s=s+Math.imul(R,el)|0,i=i+Math.imul(x,eu)|0,n=(n=n+Math.imul(x,ed)|0)+Math.imul(O,eu)|0,s=s+Math.imul(O,ed)|0;var eO=(l+(i=i+Math.imul(C,ep)|0)|0)+((8191&(n=(n=n+Math.imul(C,eg)|0)+Math.imul(N,ep)|0))<<13)|0;l=((s=s+Math.imul(N,eg)|0)+(n>>>13)|0)+(eO>>>26)|0,eO&=67108863,i=Math.imul(U,es),n=(n=Math.imul(U,eo))+Math.imul(B,es)|0,s=Math.imul(B,eo),i=i+Math.imul(k,ec)|0,n=(n=n+Math.imul(k,el)|0)+Math.imul(L,ec)|0,s=s+Math.imul(L,el)|0,i=i+Math.imul(T,eu)|0,n=(n=n+Math.imul(T,ed)|0)+Math.imul(R,eu)|0,s=s+Math.imul(R,ed)|0;var eP=(l+(i=i+Math.imul(x,ep)|0)|0)+((8191&(n=(n=n+Math.imul(x,eg)|0)+Math.imul(O,ep)|0))<<13)|0;l=((s=s+Math.imul(O,eg)|0)+(n>>>13)|0)+(eP>>>26)|0,eP&=67108863,i=Math.imul(U,ec),n=(n=Math.imul(U,el))+Math.imul(B,ec)|0,s=Math.imul(B,el),i=i+Math.imul(k,eu)|0,n=(n=n+Math.imul(k,ed)|0)+Math.imul(L,eu)|0,s=s+Math.imul(L,ed)|0;var eT=(l+(i=i+Math.imul(T,ep)|0)|0)+((8191&(n=(n=n+Math.imul(T,eg)|0)+Math.imul(R,ep)|0))<<13)|0;l=((s=s+Math.imul(R,eg)|0)+(n>>>13)|0)+(eT>>>26)|0,eT&=67108863,i=Math.imul(U,eu),n=(n=Math.imul(U,ed))+Math.imul(B,eu)|0,s=Math.imul(B,ed);var eR=(l+(i=i+Math.imul(k,ep)|0)|0)+((8191&(n=(n=n+Math.imul(k,eg)|0)+Math.imul(L,ep)|0))<<13)|0;l=((s=s+Math.imul(L,eg)|0)+(n>>>13)|0)+(eR>>>26)|0,eR&=67108863;var eD=(l+(i=Math.imul(U,ep))|0)+((8191&(n=(n=Math.imul(U,eg))+Math.imul(B,ep)|0))<<13)|0;return l=((s=Math.imul(B,eg))+(n>>>13)|0)+(eD>>>26)|0,eD&=67108863,c[0]=em,c[1]=ey,c[2]=eb,c[3]=ew,c[4]=ev,c[5]=eE,c[6]=eI,c[7]=e_,c[8]=eA,c[9]=eS,c[10]=eC,c[11]=eN,c[12]=eM,c[13]=ex,c[14]=eO,c[15]=eP,c[16]=eT,c[17]=eR,c[18]=eD,0!==l&&(c[19]=l,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,s=0;s<r.length-1;s++){var o=n;n=0;for(var a=67108863&i,c=Math.min(s,t.length-1),l=Math.max(0,s-e.length+1);l<=c;l++){var h=s-l,u=(0|e.words[h])*(0|t.words[l]),d=67108863&u;o=o+(u/67108864|0)|0,a=67108863&(d=d+a|0),n+=(o=o+(d>>>26)|0)>>>26,o&=67108863}r.words[s]=a,i=o,o=n}return 0!==i?r.words[s]=i:r.length--,r._strip()}function b(e,t){this.x=e,this.y=t}Math.imul||(m=g),s.prototype.mulTo=function(e,t){var r,i=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):i<63?g(this,e,t):y(this,e,t)},b.prototype.makeRBT=function(e){for(var t=Array(e),r=s.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},b.prototype.permute=function(e,t,r,i,n,s){for(var o=0;o<s;o++)i[o]=t[e[o]],n[o]=r[e[o]]},b.prototype.transform=function(e,t,r,i,n,s){this.permute(s,e,t,r,i,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),h=0;h<n;h+=a)for(var u=c,d=l,f=0;f<o;f++){var p=r[h+f],g=i[h+f],m=r[h+f+o],y=i[h+f+o],b=u*m-d*y;y=u*y+d*m,m=b,r[h+f]=p+m,i[h+f]=g+y,r[h+f+o]=p-m,i[h+f+o]=g-y,f!==a&&(b=c*u-l*d,d=c*d+l*u,u=b)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},b.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},b.prototype.convert13b=function(e,t,r,n){for(var s=0,o=0;o<t;o++)s+=0|e[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<n;++o)r[o]=0;i(0===s),i((-8192&s)==0)},b.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),s=this.stub(i),o=Array(i),a=Array(i),c=Array(i),l=Array(i),h=Array(i),u=Array(i),d=r.words;d.length=i,this.convert13b(e.words,e.length,o,i),this.convert13b(t.words,t.length,l,i),this.transform(o,s,a,c,i,n),this.transform(l,s,h,u,i,n);for(var f=0;f<i;f++){var p=a[f]*h[f]-c[f]*u[f];c[f]=a[f]*u[f]+c[f]*h[f],a[f]=p}return this.conjugate(a,c,i),this.transform(a,c,d,s,i,n),this.conjugate(d,s,i),this.normalize13b(d,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=Array(this.length+e.length),y(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),i("number"==typeof e),i(e<67108864);for(var r=0,n=0;n<this.length;n++){var s=(0|this.words[n])*e,o=(67108863&s)+(67108863&r);r>>=26,r+=(s/67108864|0)+(o>>>26),this.words[n]=67108863&o}return 0!==r&&(this.words[n]=r,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=e.words[i]>>>n&1}return t}(e);if(0===t.length)return new s(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var n=r.sqr();i<t.length;i++,n=n.sqr())0!==t[i]&&(r=r.mul(n));return r},s.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,r=e%26,n=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<r;this.words[t]=c|o,o=a>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this._strip()},s.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){i("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var n,s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s;if(n-=o,n=Math.max(0,n),r){for(var c=0;c<o;c++)r.words[c]=this.words[c];r.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=n);c--){var h=0|this.words[c];this.words[c]=l<<26-s|h>>>s,l=h&a}return r&&0!==l&&(r.words[r.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,r){return i(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;return!(this.length<=r)&&!!(this.words[r]&1<<t)},s.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;return(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)?this:(0!==t&&r++,this.length=Math.min(r,this.length),0!==t&&(this.words[this.length-1]&=67108863^67108863>>>t<<t),this._strip())},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return(i("number"==typeof e),i(e<67108864),e<0)?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var n,s,o=e.length+r;this._expand(o);var a=0;for(n=0;n<e.length;n++){s=(0|this.words[n+r])+a;var c=(0|e.words[n])*t;s-=67108863&c,a=(s>>26)-(c/67108864|0),this.words[n+r]=67108863&s}for(;n<this.length-r;n++)a=(s=(0|this.words[n+r])+a)>>26,this.words[n+r]=67108863&s;if(0===a)return this._strip();for(i(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r,i=this.length-e.length,n=this.clone(),o=e,a=0|o.words[o.length-1];0!=(i=26-this._countBits(a))&&(o=o.ushln(i),n.iushln(i),a=0|o.words[o.length-1]);var c=n.length-o.length;if("mod"!==t){(r=new s(null)).length=c+1,r.words=Array(r.length);for(var l=0;l<r.length;l++)r.words[l]=0}var h=n.clone()._ishlnsubmul(o,1,c);0===h.negative&&(n=h,r&&(r.words[c]=1));for(var u=c-1;u>=0;u--){var d=(0|n.words[o.length+u])*67108864+(0|n.words[o.length+u-1]);for(d=Math.min(d/a|0,67108863),n._ishlnsubmul(o,d,u);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(o,1,u),n.isZero()||(n.negative^=1);r&&(r.words[u]=d)}return r&&r._strip(),n._strip(),"div"!==t&&0!==i&&n.iushrn(i),{div:r||null,mod:n}},s.prototype.divmod=function(e,t,r){var n,o,a;return(i(!e.isZero()),this.isZero())?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(n=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:n,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(n=a.div.neg()),{div:n,mod:a.mod}):(this.negative&e.negative)!=0?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||0>this.cmp(e)?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t)},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),s=r.cmp(i);return s<0||1===n&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=67108864%e,n=0,s=this.length-1;s>=0;s--)n=(r*n+(0|this.words[s]))%e;return t?-n:n},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var s=(0|this.words[n])+67108864*r;this.words[n]=s/e|0,r=s%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new s(1),o=new s(0),a=new s(0),c=new s(1),l=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++l;for(var h=r.clone(),u=t.clone();!t.isZero();){for(var d=0,f=1;(t.words[0]&f)==0&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(h),o.isub(u)),n.iushrn(1),o.iushrn(1);for(var p=0,g=1;(r.words[0]&g)==0&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(u)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),n.isub(a),o.isub(c)):(r.isub(t),a.isub(n),c.isub(o))}return{a:a,b:c,gcd:r.iushln(l)}},s.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t,r=this,n=e.clone();r=0!==r.negative?r.umod(e):r.clone();for(var o=new s(1),a=new s(0),c=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var l=0,h=1;(r.words[0]&h)==0&&l<26;++l,h<<=1);if(l>0)for(r.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var u=0,d=1;(n.words[0]&d)==0&&u<26;++u,d<<=1);if(u>0)for(n.iushrn(u);u-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(a)):(n.isub(r),a.isub(o))}return 0>(t=0===r.cmpn(1)?o:a).cmpn(0)&&t.iadd(e),t},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var s=t;t=r,r=s}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return(1&this.words[0])==0},s.prototype.isOdd=function(){return(1&this.words[0])==1},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var s=n,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),i(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return -1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return -1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return -1===this.cmpn(e)},s.prototype.lt=function(e){return -1===this.cmp(e)},s.prototype.lten=function(e){return 0>=this.cmpn(e)},s.prototype.lte=function(e){return 0>=this.cmp(e)},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new S(e)},s.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function I(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function C(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new s(null);return e.words=Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,r=e;do this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},n(E,v),E.prototype.split=function(e,t){for(var r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9){e.words[0]=0,e.length=1;return}var n=e.words[9];for(i=10,t.words[t.length++]=4194303&n;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,e.words[i-10]=n,0===n&&e.length>10?e.length-=10:e.length-=9},E.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(I,v),n(_,v),n(A,v),A.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=(0|e.words[r])*19+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){var t;if(w[e])return w[e];if("k256"===e)t=new E;else if("p224"===e)t=new I;else if("p192"===e)t=new _;else if("p25519"===e)t=new A;else throw Error("Unknown prime "+e);return w[e]=t,t},S.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){i((e.negative|t.negative)==0,"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},S.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);i(!n.isZero());var a=new s(1).toRed(this),c=a.redNeg(),l=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,l).cmp(c);)h.redIAdd(c);for(var u=this.pow(h,n),d=this.pow(e,n.addn(1).iushrn(1)),f=this.pow(e,n),p=o;0!==f.cmp(a);){for(var g=f,m=0;0!==g.cmp(a);m++)g=g.redSqr();i(m<p);var y=this.pow(u,new s(1).iushln(p-m-1));d=d.redMul(y),u=y.redSqr(),f=f.redMul(u),p=m}return d},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var n=r[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],h=c-1;h>=0;h--){var u=l>>h&1;if(n!==r[0]&&(n=this.sqr(n)),0===u&&0===o){a=0;continue}o<<=1,o|=u,(4==++a||0===i&&0===h)&&(n=this.mul(n,r[o]),a=0,o=0)}c=26}return n},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new C(e)},n(C,S),C.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},C.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},C.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):0>n.cmpn(0)&&(s=n.iadd(this.m)),s._forceRed(this)},C.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):0>n.cmpn(0)&&(o=n.iadd(this.m)),o._forceRed(this)},C.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},88806:function(e,t,r){"use strict";var i=r(82957).Buffer,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,r,i){var n,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeUnchecked=t.deserialize=t.serialize=t.BinaryReader=t.BinaryWriter=t.BorshError=t.baseDecode=t.baseEncode=void 0;let l=c(r(44373)),h=c(r(22525)),u=a(r(65768)),d=new("function"!=typeof TextDecoder?u.TextDecoder:TextDecoder)("utf-8",{fatal:!0});t.baseEncode=function(e){return"string"==typeof e&&(e=i.from(e,"utf8")),h.default.encode(i.from(e))},t.baseDecode=function(e){return i.from(h.default.decode(e))};class f extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}t.BorshError=f;class p{constructor(){this.buf=i.alloc(1024),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=i.concat([this.buf,i.alloc(1024)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(i.from(new l.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(i.from(new l.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(i.from(new l.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(i.from(new l.default(e).toArray("le",64)))}writeBuffer(e){this.buf=i.concat([i.from(this.buf.subarray(0,this.length)),e,i.alloc(1024)]),this.length+=e.length}writeString(e){this.maybeResize();let t=i.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(i.from(e))}writeArray(e,t){for(let r of(this.maybeResize(),this.writeU32(e.length),e))this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function g(e,t,r){let i=r.value;r.value=function(...e){try{return i.apply(this,e)}catch(e){if(e instanceof RangeError&&["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e.code)>=0)throw new f("Reached the end of buffer when deserializing");throw e}}}t.BinaryWriter=p;class m{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new l.default(e,"le")}readU128(){let e=this.readBuffer(16);return new l.default(e,"le")}readU256(){let e=this.readBuffer(32);return new l.default(e,"le")}readU512(){let e=this.readBuffer(64);return new l.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new f(`Expected buffer length ${e} isn't within bounds`);let t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){let e=this.readU32(),t=this.readBuffer(e);try{return d.decode(t)}catch(e){throw new f(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let t=this.readU32(),r=[];for(let i=0;i<t;++i)r.push(e());return r}}function y(e){return e.charAt(0).toUpperCase()+e.slice(1)}function b(e,t,r,i,n){try{if("string"==typeof i)n[`write${y(i)}`](r);else if(i instanceof Array){if("number"==typeof i[0]){if(r.length!==i[0])throw new f(`Expecting byte array of length ${i[0]}, but got ${r.length} bytes`);n.writeFixedArray(r)}else if(2===i.length&&"number"==typeof i[1]){if(r.length!==i[1])throw new f(`Expecting byte array of length ${i[1]}, but got ${r.length} bytes`);for(let t=0;t<i[1];t++)b(e,null,r[t],i[0],n)}else n.writeArray(r,r=>{b(e,t,r,i[0],n)})}else if(void 0!==i.kind)switch(i.kind){case"option":null==r?n.writeU8(0):(n.writeU8(1),b(e,t,r,i.type,n));break;case"map":n.writeU32(r.size),r.forEach((r,s)=>{b(e,t,s,i.key,n),b(e,t,r,i.value,n)});break;default:throw new f(`FieldType ${i} unrecognized`)}else w(e,r,n)}catch(e){throw e instanceof f&&e.addToFieldPath(t),e}}function w(e,t,r){if("function"==typeof t.borshSerialize){t.borshSerialize(r);return}let i=e.get(t.constructor);if(!i)throw new f(`Class ${t.constructor.name} is missing in schema`);if("struct"===i.kind)i.fields.map(([i,n])=>{b(e,i,t[i],n,r)});else if("enum"===i.kind){let n=t[i.field];for(let s=0;s<i.values.length;++s){let[o,a]=i.values[s];if(o===n){r.writeU8(s),b(e,o,t[o],a,r);break}}}else throw new f(`Unexpected schema kind: ${i.kind} for ${t.constructor.name}`)}function v(e,t,r,i){try{if("string"==typeof r)return i[`read${y(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return i.readFixedArray(r[0]);if("number"!=typeof r[1])return i.readArray(()=>v(e,t,r[0],i));{let t=[];for(let n=0;n<r[1];n++)t.push(v(e,null,r[0],i));return t}}if("option"===r.kind){if(i.readU8())return v(e,t,r.type,i);return}if("map"===r.kind){let n=new Map,s=i.readU32();for(let o=0;o<s;o++){let s=v(e,t,r.key,i),o=v(e,t,r.value,i);n.set(s,o)}return n}return E(e,r,i)}catch(e){throw e instanceof f&&e.addToFieldPath(t),e}}function E(e,t,r){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(r);let i=e.get(t);if(!i)throw new f(`Class ${t.name} is missing in schema`);if("struct"===i.kind){let i={};for(let[n,s]of e.get(t).fields)i[n]=v(e,n,s,r);return new t(i)}if("enum"===i.kind){let n=r.readU8();if(n>=i.values.length)throw new f(`Enum index: ${n} is out of range`);let[s,o]=i.values[n],a=v(e,s,o,r);return new t({[s]:a})}throw new f(`Unexpected schema kind: ${i.kind} for ${t.constructor.name}`)}o([g],m.prototype,"readU8",null),o([g],m.prototype,"readU16",null),o([g],m.prototype,"readU32",null),o([g],m.prototype,"readU64",null),o([g],m.prototype,"readU128",null),o([g],m.prototype,"readU256",null),o([g],m.prototype,"readU512",null),o([g],m.prototype,"readString",null),o([g],m.prototype,"readFixedArray",null),o([g],m.prototype,"readArray",null),t.BinaryReader=m,t.serialize=function(e,t,r=p){let i=new r;return w(e,t,i),i.toArray()},t.deserialize=function(e,t,r,i=m){let n=new i(r),s=E(e,t,n);if(n.offset<r.length)throw new f(`Unexpected ${r.length-n.offset} bytes after deserialized data`);return s},t.deserializeUnchecked=function(e,t,r,i=m){return E(e,t,new i(r))}},48644:function(e,t,r){"use strict";var i=r(73306).Buffer;e.exports=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==t[o])throw TypeError(s+" is ambiguous");t[o]=n}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function u(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return i.alloc(0);for(var r=0,n=0,s=0;e[r]===c;)n++,r++;for(var o=(e.length-r)*l+1>>>0,h=new Uint8Array(o);r<e.length;){var u=e.charCodeAt(r);if(u>255)return;var d=t[u];if(255===d)return;for(var f=0,p=o-1;(0!==d||f<s)&&-1!==p;p--,f++)d+=a*h[p]>>>0,h[p]=d%256>>>0,d=d/256>>>0;if(0!==d)throw Error("Non-zero carry");s=f,r++}for(var g=o-s;g!==o&&0===h[g];)g++;var m=i.allocUnsafe(n+(o-g));m.fill(0,0,n);for(var y=n;g!==o;)m[y++]=h[g++];return m}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=i.from(t)),!i.isBuffer(t))throw TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,n=0,s=0,o=t.length;s!==o&&0===t[s];)s++,r++;for(var l=(o-s)*h+1>>>0,u=new Uint8Array(l);s!==o;){for(var d=t[s],f=0,p=l-1;(0!==d||f<n)&&-1!==p;p--,f++)d+=256*u[p]>>>0,u[p]=d%a>>>0,d=d/a>>>0;if(0!==d)throw Error("Non-zero carry");n=f,s++}for(var g=l-n;g!==l&&0===u[g];)g++;for(var m=c.repeat(r);g<l;++g)m+=e.charAt(u[g]);return m},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw Error("Non-base"+a+" character")}}}},22525:function(e,t,r){var i=r(48644);e.exports=i("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},47223:function(e,t,r){var i;function n(e){this.rand=e}if(e.exports=function(e){return i||(i=new n(null)),i.generate(e)},e.exports.Rand=n,n.prototype.generate=function(e){return this._rand(e)},n.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?n.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?n.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(n.prototype._rand=function(){throw Error("Not implemented yet")});else try{var s=r(89214);if("function"!=typeof s.randomBytes)throw Error("Not supported");n.prototype._rand=function(e){return s.randomBytes(e)}}catch(e){}},59147:function(e,t,r){let i=r(18282);e.exports=i("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},82957:function(e,t,r){"use strict";let i=r(59196),n=r(68848),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|p(e,t),i=o(r),n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(j(e,Uint8Array)){let t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return u(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(j(e,SharedArrayBuffer)||e&&j(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return a.from(i,t,r);let n=function(e){var t;if(a.isBuffer(e)){let t=0|f(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?o(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return l(e),o(e<0?0:0|f(e))}function u(e){let t=e.length<0?0:0|f(e.length),r=o(t);for(let i=0;i<t;i+=1)r[i]=255&e[i];return r}function d(e,t,r){let i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),i}function f(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return k(e).length;default:if(n)return i?-1:D(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let i=t;i<r;++i)n+=U[e[i]];return n}(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return function(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}(this,t,r);case"latin1":case"binary":return function(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}(this,t,r);case"base64":var s,o;return s=t,o=r,0===s&&o===this.length?i.fromByteArray(this):i.fromByteArray(this.slice(s,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let i=e.slice(t,r),n="";for(let e=0;e<i.length-1;e+=2)n+=String.fromCharCode(i[e]+256*i[e+1]);return n}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}function y(e,t,r,i,n){var s;if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(s=r=+r)!=s&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return -1;r=e.length-1}else if(r<0){if(!n)return -1;r=0}if("string"==typeof t&&(t=a.from(t,i)),a.isBuffer(t))return 0===t.length?-1:b(e,t,r,i,n);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,i,n);throw TypeError("val must be string, number or Buffer")}function b(e,t,r,i,n){let s,o=1,a=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;o=2,a/=2,c/=2,r/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){let i=-1;for(s=r;s<a;s++)if(l(e,s)===l(t,-1===i?0:s-i)){if(-1===i&&(i=s),s-i+1===c)return i*o}else -1!==i&&(s-=s-i),i=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let i=0;i<c;i++)if(l(e,s+i)!==l(t,i)){r=!1;break}if(r)return s}return -1}function w(e,t,r){r=Math.min(e.length,r);let i=[],n=t;for(;n<r;){let t=e[n],s=null,o=t>239?4:t>223?3:t>191?2:1;if(n+o<=r){let r,i,a,c;switch(o){case 1:t<128&&(s=t);break;case 2:(192&(r=e[n+1]))==128&&(c=(31&t)<<6|63&r)>127&&(s=c);break;case 3:r=e[n+1],i=e[n+2],(192&r)==128&&(192&i)==128&&(c=(15&t)<<12|(63&r)<<6|63&i)>2047&&(c<55296||c>57343)&&(s=c);break;case 4:r=e[n+1],i=e[n+2],a=e[n+3],(192&r)==128&&(192&i)==128&&(192&a)==128&&(c=(15&t)<<18|(63&r)<<12|(63&i)<<6|63&a)>65535&&c<1114112&&(s=c)}}null===s?(s=65533,o=1):s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s),n+=o}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return r}(i)}function v(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function E(e,t,r,i,n,s){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function I(e,t,r,i,n){O(t,i,n,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function _(e,t,r,i,n){O(t,i,n,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function A(e,t,r,i,n,s){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function S(e,t,r,i,s){return t=+t,r>>>=0,s||A(e,t,r,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,r,i,23,4),r+4}function C(e,t,r,i,s){return t=+t,r>>>=0,s||A(e,t,r,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,r,i,52,8),r+8}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=2147483647,a.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(l(e),e<=0)?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)},a.allocUnsafe=function(e){return h(e)},a.allocUnsafeSlow=function(e){return h(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(j(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let n=0,s=Math.min(r,i);n<s;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let i=a.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){let t=e[r];if(j(t,Uint8Array))n+t.length>i.length?(a.isBuffer(t)||(t=a.from(t)),t.copy(i,n)):Uint8Array.prototype.set.call(i,t,n);else if(a.isBuffer(t))t.copy(i,n);else throw TypeError('"list" argument must be an Array of Buffers');n+=t.length}return i},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},a.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},a.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},a.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?w(this,0,e):g.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){let e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(e,t,r,i,n){if(j(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;let s=n-i,o=r-t,c=Math.min(s,o),l=this.slice(i,n),h=e.slice(t,r);for(let e=0;e<c;++e)if(l[e]!==h[e]){s=l[e],o=h[e];break}return s<o?-1:o<s?1:0},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},a.prototype.write=function(e,t,r,i){var n,s,o,a,c,l,h,u;if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let f=!1;for(;;)switch(i){case"hex":return function(e,t,r,i){let n;r=Number(r)||0;let s=e.length-r;i?(i=Number(i))>s&&(i=s):i=s;let o=t.length;for(i>o/2&&(i=o/2),n=0;n<i;++n){let i=parseInt(t.substr(2*n,2),16);if(i!=i)break;e[r+n]=i}return n}(this,e,t,r);case"utf8":case"utf-8":return n=t,s=r,L(D(e,this.length-n),this,n,s);case"ascii":case"latin1":case"binary":return o=t,a=r,L(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,o,a);case"base64":return c=t,l=r,L(k(e),this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=t,u=r,L(function(e,t){let r,i;let n=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)i=(r=e.charCodeAt(s))>>8,n.push(r%256),n.push(i);return n}(e,this.length-h),this,h,u);default:if(f)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),f=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,a.prototype),i},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let i=this[e],n=1,s=0;for(;++s<t&&(n*=256);)i+=this[e+s]*n;return i},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let i=this[e+--t],n=1;for(;t>0&&(n*=256);)i+=this[e+--t]*n;return i},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=B(function(e){P(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&T(e,this.length-8);let i=t+256*this[++e]+65536*this[++e]+16777216*this[++e],n=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(i)+(BigInt(n)<<BigInt(32))}),a.prototype.readBigUInt64BE=B(function(e){P(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&T(e,this.length-8);let i=16777216*t+65536*this[++e]+256*this[++e]+this[++e],n=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)}),a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let i=this[e],n=1,s=0;for(;++s<t&&(n*=256);)i+=this[e+s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);let i=t,n=1,s=this[e+--i];for(;i>0&&(n*=256);)s+=this[e+--i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},a.prototype.readInt8=function(e,t){return(e>>>=0,t||v(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=B(function(e){P(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&T(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),a.prototype.readBigInt64BE=B(function(e){P(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&T(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)}),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;E(this,e,t,r,i,0)}let n=1,s=0;for(this[t]=255&e;++s<r&&(n*=256);)this[t+s]=e/n&255;return t+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;E(this,e,t,r,i,0)}let n=r-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=B(function(e,t=0){return I(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=B(function(e,t=0){return _(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){let i=Math.pow(2,8*r-1);E(this,e,t,r,i-1,-i)}let n=0,s=1,o=0;for(this[t]=255&e;++n<r&&(s*=256);)e<0&&0===o&&0!==this[t+n-1]&&(o=1),this[t+n]=(e/s>>0)-o&255;return t+r},a.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){let i=Math.pow(2,8*r-1);E(this,e,t,r,i-1,-i)}let n=r-1,s=1,o=0;for(this[t+n]=255&e;--n>=0&&(s*=256);)e<0&&0===o&&0!==this[t+n+1]&&(o=1),this[t+n]=(e/s>>0)-o&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=B(function(e,t=0){return I(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=B(function(e,t=0){return _(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeFloatLE=function(e,t,r){return S(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return S(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return C(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return C(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,i){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);let n=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),n},a.prototype.fill=function(e,t,r,i){let n;if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){let t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{let s=a.isBuffer(e)?e:a.from(e,i),o=s.length;if(0===o)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=s[n%o]}return this};let N={};function M(e,t,r){N[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function x(e){let t="",r=e.length,i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function O(e,t,r,i,n,s){if(e>r||e<t){let i;let n="bigint"==typeof t?"n":"";throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${(s+1)*8}${n}`:`>= -(2${n} ** ${(s+1)*8-1}${n}) and < 2 ** ${(s+1)*8-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new N.ERR_OUT_OF_RANGE("value",i,e)}P(n,"offset"),(void 0===i[n]||void 0===i[n+s])&&T(n,i.length-(s+1))}function P(e,t){if("number"!=typeof e)throw new N.ERR_INVALID_ARG_TYPE(t,"number",e)}function T(e,t,r){if(Math.floor(e)!==e)throw P(e,r),new N.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}M("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),M("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),M("ERR_OUT_OF_RANGE",function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?n=x(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=x(n)),n+="n"),i+=` It must be ${t}. Received ${n}`},RangeError);let R=/[^+/0-9A-Za-z-_]/g;function D(e,t){let r;t=t||1/0;let i=e.length,n=null,s=[];for(let o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319||o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function k(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length)&&!(n>=e.length);++n)t[n+r]=e[n];return n}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let U=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let i=16*r;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function B(e){return"undefined"==typeof BigInt?z:e}function z(){throw Error("BigInt not supported")}},80751:function(e,t,r){var i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,n=function(){function e(){this.fetch=!1,this.DOMException=i.DOMException}return e.prototype=i,new e}();(function(e){var t=void 0!==n&&n||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},i={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(i.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i.iterable&&(t[Symbol.iterator]=function(){return t}),t}function h(e){this.map={},e instanceof h?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function u(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function d(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function f(e){var t=new FileReader,r=d(t);return t.readAsArrayBuffer(e),r}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e){if("string"==typeof e)this._bodyText=e;else if(i.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(i.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;i.arrayBuffer&&i.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e)}}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return u(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(i.blob)return this.blob().then(f);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,i,n,s=u(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,r=d(t=new FileReader),n=(i=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?i[1]:"utf-8",t.readAsText(e,n),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=Array(t.length),i=0;i<t.length;i++)r[i]=String.fromCharCode(t[i]);return r.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},i.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=a(e),t=c(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},h.prototype.delete=function(e){delete this.map[a(e)]},h.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},h.prototype.set=function(e,t){this.map[a(e)]=c(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),l(e)},h.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),l(e)},h.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),l(e)},i.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var m=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function y(e,r){if(!(this instanceof y))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,n,s=(r=r||{}).body;if(e instanceof y){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,r.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=r.credentials||this.credentials||"same-origin",(r.headers||!this.headers)&&(this.headers=new h(r.headers)),this.method=(n=(i=r.method||this.method||"GET").toUpperCase(),m.indexOf(n)>-1?n:i),this.mode=r.mode||this.mode||null,this.signal=r.signal||this.signal||function(){if("AbortController"in t)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),("GET"===this.method||"HEAD"===this.method)&&("no-store"===r.cache||"no-cache"===r.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function b(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(n))}}),t}function w(e,t){if(!(this instanceof w))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},g.call(y.prototype),g.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var v=[301,302,303,307,308];w.redirect=function(e,t){if(-1===v.indexOf(t))throw RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function E(r,n){return new Promise(function(s,o){var l=new y(r,n);if(l.signal&&l.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function d(){u.abort()}if(u.onload=function(){var e,t,r={statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),i=r.shift().trim();if(i){var n=r.join(":").trim();try{t.append(i,n)}catch(e){console.warn("Response "+e.message)}}}),t)};0===l.url.indexOf("file://")&&(u.status<200||u.status>599)?r.status=200:r.status=u.status,r.url="responseURL"in u?u.responseURL:r.headers.get("X-Request-URL");var i="response"in u?u.response:u.responseText;setTimeout(function(){s(new w(i,r))},0)},u.onerror=function(){setTimeout(function(){o(TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){o(TypeError("Network request timed out"))},0)},u.onabort=function(){setTimeout(function(){o(new e.DOMException("Aborted","AbortError"))},0)},u.open(l.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(t){return e}}(l.url),!0),"include"===l.credentials?u.withCredentials=!0:"omit"===l.credentials&&(u.withCredentials=!1),"responseType"in u&&(i.blob?u.responseType="blob":i.arrayBuffer&&(u.responseType="arraybuffer")),n&&"object"==typeof n.headers&&!(n.headers instanceof h||t.Headers&&n.headers instanceof t.Headers)){var f=[];Object.getOwnPropertyNames(n.headers).forEach(function(e){f.push(a(e)),u.setRequestHeader(e,c(n.headers[e]))}),l.headers.forEach(function(e,t){-1===f.indexOf(t)&&u.setRequestHeader(t,e)})}else l.headers.forEach(function(e,t){u.setRequestHeader(t,e)});l.signal&&(l.signal.addEventListener("abort",d),u.onreadystatechange=function(){4===u.readyState&&l.signal.removeEventListener("abort",d)}),u.send(void 0===l._bodyInit?null:l._bodyInit)})}E.polyfill=!0,t.fetch||(t.fetch=E,t.Headers=h,t.Request=y,t.Response=w),e.Headers=h,e.Request=y,e.Response=w,e.fetch=E,Object.defineProperty(e,"__esModule",{value:!0})})({}),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=i.fetch?i:n;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},71096:function(e){var t;t=function(){"use strict";var e="millisecond",t="second",r="minute",i="hour",n="week",s="month",o="quarter",a="year",c="date",l="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,u=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(e,t,r){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(r)+e},f="en",p={};p[f]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||"th")+"]"}};var g="$isDayjsObject",m=function(e){return e instanceof v||!(!e||!e[g])},y=function e(t,r,i){var n;if(!t)return f;if("string"==typeof t){var s=t.toLowerCase();p[s]&&(n=s),r&&(p[s]=r,n=s);var o=t.split("-");if(!n&&o.length>1)return e(o[0])}else{var a=t.name;p[a]=t,n=a}return!i&&n&&(f=n),n||!i&&f},b=function(e,t){if(m(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new v(r)},w={s:d,z:function(e){var t=-e.utcOffset(),r=Math.abs(t);return(t<=0?"+":"-")+d(Math.floor(r/60),2,"0")+":"+d(r%60,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var i=12*(r.year()-t.year())+(r.month()-t.month()),n=t.clone().add(i,s),o=r-n<0,a=t.clone().add(i+(o?-1:1),s);return+(-(i+(r-n)/(o?n-a:a-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(l){return({M:s,y:a,w:n,d:"day",D:c,h:i,m:r,s:t,ms:e,Q:o})[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};w.l=y,w.i=m,w.w=function(e,t){return b(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var v=function(){function d(e){this.$L=y(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[g]=!0}var f=d.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(w.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(h);if(i){var n=i[2]-1||0,s=(i[7]||"0").substring(0,3);return r?new Date(Date.UTC(i[1],n,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)):new Date(i[1],n,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)}}return new Date(t)}(e),this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return w},f.isValid=function(){return this.$d.toString()!==l},f.isSame=function(e,t){var r=b(e);return this.startOf(t)<=r&&r<=this.endOf(t)},f.isAfter=function(e,t){return b(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<b(e)},f.$g=function(e,t,r){return w.u(e)?this[t]:this.set(r,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,o){var l=this,h=!!w.u(o)||o,u=w.p(e),d=function(e,t){var r=w.w(l.$u?Date.UTC(l.$y,t,e):new Date(l.$y,t,e),l);return h?r:r.endOf("day")},f=function(e,t){return w.w(l.toDate()[e].apply(l.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(t)),l)},p=this.$W,g=this.$M,m=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case a:return h?d(1,0):d(31,11);case s:return h?d(1,g):d(0,g+1);case n:var b=this.$locale().weekStart||0,v=(p<b?p+7:p)-b;return d(h?m-v:m+(6-v),g);case"day":case c:return f(y+"Hours",0);case i:return f(y+"Minutes",1);case r:return f(y+"Seconds",2);case t:return f(y+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(n,o){var l,h=w.p(n),u="set"+(this.$u?"UTC":""),d=((l={}).day=u+"Date",l[c]=u+"Date",l[s]=u+"Month",l[a]=u+"FullYear",l[i]=u+"Hours",l[r]=u+"Minutes",l[t]=u+"Seconds",l[e]=u+"Milliseconds",l)[h],f="day"===h?this.$D+(o-this.$W):o;if(h===s||h===a){var p=this.clone().set(c,1);p.$d[d](f),p.init(),this.$d=p.set(c,Math.min(this.$D,p.daysInMonth())).$d}else d&&this.$d[d](f);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[w.p(e)]()},f.add=function(e,o){var c,l=this;e=Number(e);var h=w.p(o),u=function(t){var r=b(l);return w.w(r.date(r.date()+Math.round(t*e)),l)};if(h===s)return this.set(s,this.$M+e);if(h===a)return this.set(a,this.$y+e);if("day"===h)return u(1);if(h===n)return u(7);var d=((c={})[r]=6e4,c[i]=36e5,c[t]=1e3,c)[h]||1,f=this.$d.getTime()+e*d;return w.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||l;var i=e||"YYYY-MM-DDTHH:mm:ssZ",n=w.z(this),s=this.$H,o=this.$m,a=this.$M,c=r.weekdays,h=r.months,d=r.meridiem,f=function(e,r,n,s){return e&&(e[r]||e(t,i))||n[r].slice(0,s)},p=function(e){return w.s(s%12||12,e,"0")},g=d||function(e,t,r){var i=e<12?"AM":"PM";return r?i.toLowerCase():i};return i.replace(u,function(e,i){return i||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return w.s(t.$y,4,"0");case"M":return a+1;case"MM":return w.s(a+1,2,"0");case"MMM":return f(r.monthsShort,a,h,3);case"MMMM":return f(h,a);case"D":return t.$D;case"DD":return w.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return f(r.weekdaysMin,t.$W,c,2);case"ddd":return f(r.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(s);case"HH":return w.s(s,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return g(s,o,!0);case"A":return g(s,o,!1);case"m":return String(o);case"mm":return w.s(o,2,"0");case"s":return String(t.$s);case"ss":return w.s(t.$s,2,"0");case"SSS":return w.s(t.$ms,3,"0");case"Z":return n}return null}(e)||n.replace(":","")})},f.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},f.diff=function(e,c,l){var h,u=this,d=w.p(c),f=b(e),p=(f.utcOffset()-this.utcOffset())*6e4,g=this-f,m=function(){return w.m(u,f)};switch(d){case a:h=m()/12;break;case s:h=m();break;case o:h=m()/3;break;case n:h=(g-p)/6048e5;break;case"day":h=(g-p)/864e5;break;case i:h=g/36e5;break;case r:h=g/6e4;break;case t:h=g/1e3;break;default:h=g}return l?h:w.a(h)},f.daysInMonth=function(){return this.endOf(s).$D},f.$locale=function(){return p[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),i=y(e,t,!0);return i&&(r.$L=i),r},f.clone=function(){return w.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},d}(),E=v.prototype;return b.prototype=E,[["$ms",e],["$s",t],["$m",r],["$H",i],["$W","day"],["$M",s],["$y",a],["$D",c]].forEach(function(e){E[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),b.extend=function(e,t){return e.$i||(e(t,v,b),e.$i=!0),b},b.locale=y,b.isDayjs=m,b.unix=function(e){return b(1e3*e)},b.en=p[f],b.Ls=p,b.p={},b},e.exports=t()},70939:function(e){var t;t=function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||"th")+"]"}}},e.exports=t()},45721:function(e){var t;t=function(){return function(e,t,r){e=e||{};var i=t.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(e,t,r,n){return i.fromToBase(e,t,r,n)}r.en.relativeTime=n,i.fromToBase=function(t,i,s,o,a){for(var c,l,h,u=s.$locale().relativeTime||n,d=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=d.length,p=0;p<f;p+=1){var g=d[p];g.d&&(c=o?r(t).diff(s,g.d,!0):s.diff(t,g.d,!0));var m=(e.rounding||Math.round)(Math.abs(c));if(h=c>0,m<=g.r||!g.r){m<=1&&p>0&&(g=d[p-1]);var y=u[g.l];a&&(m=a(""+m)),l="string"==typeof y?y.replace("%d",m):y(m,i,g.l,h);break}}if(i)return l;var b=h?u.future:u.past;return"function"==typeof b?b(l):b.replace("%s",l)},i.to=function(e,t){return s(e,t,this,!0)},i.from=function(e,t){return s(e,t,this)};var o=function(e){return e.$u?r.utc():r()};i.toNow=function(e){return this.to(o(this),e)},i.fromNow=function(e){return this.from(o(this),e)}}},e.exports=t()},96961:function(e){var t;t=function(){return function(e,t,r){r.updateLocale=function(e,t){var i=r.Ls[e];if(i)return(t?Object.keys(t):[]).forEach(function(e){i[e]=t[e]}),i}}},e.exports=t()},46946:function(e){"use strict";var t={single_source_shortest_paths:function(e,r,i){var n,s,o,a,c,l,h,u={},d={};d[r]=0;var f=t.PriorityQueue.make();for(f.push(r,0);!f.empty();)for(o in s=(n=f.pop()).value,a=n.cost,c=e[s]||{})c.hasOwnProperty(o)&&(l=a+c[o],h=d[o],(void 0===d[o]||h>l)&&(d[o]=l,f.push(o,l),u[o]=s));if(void 0!==i&&void 0===d[i])throw Error(["Could not find a path from ",r," to ",i,"."].join(""));return u},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],i=t;i;)r.push(i),e[i],i=e[i];return r.reverse(),r},find_path:function(e,r,i){var n=t.single_source_shortest_paths(e,r,i);return t.extract_shortest_path_from_predecessor_list(n,i)},PriorityQueue:{make:function(e){var r,i=t.PriorityQueue,n={};for(r in e=e||{},i)i.hasOwnProperty(r)&&(n[r]=i[r]);return n.queue=[],n.sorter=e.sorter||i.default_sorter,n},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},61984:function(e,t,r){"use strict";t.version=r(58274).i8,t.utils=r(36321),t.rand=r(47223),t.curve=r(64358),t.curves=r(83475),t.ec=r(90063),t.eddsa=r(37115)},21398:function(e,t,r){"use strict";var i=r(21803),n=r(36321),s=n.getNAF,o=n.getJSF,a=n.assert;function c(e,t){this.type=e,this.p=new i(t.p,16),this.red=t.prime?i.red(t.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=t.n&&new i(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,],this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw Error("Not implemented")},c.prototype.validate=function(){throw Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){a(e.precomputed);var r,i,n=e._getDoubles(),o=s(t,1,this._bitLength),c=(1<<n.step+1)-(n.step%2==0?2:1);c/=3;var l=[];for(r=0;r<o.length;r+=n.step){i=0;for(var h=r+n.step-1;h>=r;h--)i=(i<<1)+o[h];l.push(i)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),f=c;f>0;f--){for(r=0;r<l.length;r++)(i=l[r])===f?d=d.mixedAdd(n.points[r]):i===-f&&(d=d.mixedAdd(n.points[r].neg()));u=u.add(d)}return u.toP()},c.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var n=i.points,o=s(t,r,this._bitLength),c=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var h=0;l>=0&&0===o[l];l--)h++;if(l>=0&&h++,c=c.dblp(h),l<0)break;var u=o[l];a(0!==u),c="affine"===e.type?u>0?c.mixedAdd(n[u-1>>1]):c.mixedAdd(n[-u-1>>1].neg()):u>0?c.add(n[u-1>>1]):c.add(n[-u-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,r,i,n){var a,c,l,h=this._wnafT1,u=this._wnafT2,d=this._wnafT3,f=0;for(a=0;a<i;a++){var p=(l=t[a])._getNAFPoints(e);h[a]=p.wnd,u[a]=p.points}for(a=i-1;a>=1;a-=2){var g=a-1,m=a;if(1!==h[g]||1!==h[m]){d[g]=s(r[g],h[g],this._bitLength),d[m]=s(r[m],h[m],this._bitLength),f=Math.max(d[g].length,f),f=Math.max(d[m].length,f);continue}var y=[t[g],null,null,t[m]];0===t[g].y.cmp(t[m].y)?(y[1]=t[g].add(t[m]),y[2]=t[g].toJ().mixedAdd(t[m].neg())):0===t[g].y.cmp(t[m].y.redNeg())?(y[1]=t[g].toJ().mixedAdd(t[m]),y[2]=t[g].add(t[m].neg())):(y[1]=t[g].toJ().mixedAdd(t[m]),y[2]=t[g].toJ().mixedAdd(t[m].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],w=o(r[g],r[m]);for(c=0,f=Math.max(w[0].length,f),d[g]=Array(f),d[m]=Array(f);c<f;c++){var v=0|w[0][c],E=0|w[1][c];d[g][c]=b[(v+1)*3+(E+1)],d[m][c]=0,u[g]=y}}var I=this.jpoint(null,null,null),_=this._wnafT4;for(a=f;a>=0;a--){for(var A=0;a>=0;){var S=!0;for(c=0;c<i;c++)_[c]=0|d[c][a],0!==_[c]&&(S=!1);if(!S)break;A++,a--}if(a>=0&&A++,I=I.dblp(A),a<0)break;for(c=0;c<i;c++){var C=_[c];0!==C&&(C>0?l=u[c][C-1>>1]:C<0&&(l=u[c][-C-1>>1].neg()),I="affine"===l.type?I.mixedAdd(l):I.add(l))}}for(a=0;a<i;a++)u[a]=null;return n?I:I.toP()},c.BasePoint=l,l.prototype.eq=function(){throw Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=n.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?a(e[e.length-1]%2==0):7===e[0]&&a(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw Error("Unknown point format")},l.prototype.encodeCompressed=function(e){return this.encode(e,!0)},l.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},l.prototype.encode=function(e,t){return n.encode(this._encode(t),e)},l.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},l.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},l.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<t;n+=e){for(var s=0;s<e;s++)i=i.dbl();r.push(i)}return{step:e,points:r}},l.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=1===r?null:this.dbl(),n=1;n<r;n++)t[n]=t[n-1].add(i);return{wnd:e,points:t}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},98343:function(e,t,r){"use strict";var i=r(36321),n=r(21803),s=r(56853),o=r(21398),a=i.assert;function c(e){this.twisted=(0|e.a)!=1,this.mOneA=this.twisted&&(0|e.a)==-1,this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new n(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=(0|e.c)==1}function l(e,t,r,i,s){o.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(t,16),this.y=new n(r,16),this.z=i?new n(i,16):this.curve.one,this.t=s&&new n(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,!this.curve.extended||this.t||(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(c,o),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,r,i){return this.point(e,t,r,i)},c.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=this.c2.redSub(this.a.redMul(r)),s=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=i.redMul(s.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw Error("invalid point");var c=a.fromRed().isOdd();return(t&&!c||!t&&c)&&(a=a.redNeg()),this.point(e,a)},c.prototype.pointFromY=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=r.redSub(this.c2),s=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=i.redMul(s.redInvm());if(0===o.cmp(this.zero)){if(!t)return this.point(this.zero,e);throw Error("invalid point")}var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),i=t.redMul(this.a).redAdd(r),n=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===i.cmp(n)},s(l,o.BasePoint),c.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},c.prototype.point=function(e,t,r,i){return new l(this,e,t,r,i)},l.fromJSON=function(e,t){return new l(e,t[0],t[1],t[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),s=i.redAdd(t),o=s.redSub(r),a=i.redSub(t),c=n.redMul(o),l=s.redMul(a),h=n.redMul(a),u=o.redMul(s);return this.curve.point(c,l,u,h)},l.prototype._projDbl=function(){var e,t,r,i,n,s,o=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var l=(i=this.curve._mulA(a)).redAdd(c);this.zOne?(e=o.redSub(a).redSub(c).redMul(l.redSub(this.curve.two)),t=l.redMul(i.redSub(c)),r=l.redSqr().redSub(l).redSub(l)):(n=this.z.redSqr(),s=l.redSub(n).redISub(n),e=o.redSub(a).redISub(c).redMul(s),t=l.redMul(i.redSub(c)),r=l.redMul(s))}else i=a.redAdd(c),n=this.curve._mulC(this.z).redSqr(),s=i.redSub(n).redSub(n),e=this.curve._mulC(o.redISub(i)).redMul(s),t=this.curve._mulC(i).redMul(a.redISub(c)),r=i.redMul(s);return this.curve.point(e,t,r)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),s=r.redSub(t),o=n.redSub(i),a=n.redAdd(i),c=r.redAdd(t),l=s.redMul(o),h=a.redMul(c),u=s.redMul(c),d=o.redMul(a);return this.curve.point(l,h,d,u)},l.prototype._projAdd=function(e){var t,r,i=this.z.redMul(e.z),n=i.redSqr(),s=this.x.redMul(e.x),o=this.y.redMul(e.y),a=this.curve.d.redMul(s).redMul(o),c=n.redSub(a),l=n.redAdd(a),h=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(o),u=i.redMul(c).redMul(h);return this.curve.twisted?(t=i.redMul(l).redMul(o.redSub(this.curve._mulA(s))),r=c.redMul(l)):(t=i.redMul(l).redMul(o.redSub(s)),r=this.curve._mulC(c).redMul(l)),this.curve.point(u,t,r)},l.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},l.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},l.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},l.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},64358:function(e,t,r){"use strict";t.base=r(21398),t.short=r(13770),t.mont=r(75656),t.edwards=r(98343)},75656:function(e,t,r){"use strict";var i=r(21803),n=r(56853),s=r(21398),o=r(36321);function a(e){s.call(this,"mont",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,r){s.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(t,16),this.z=new i(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n(a,s),e.exports=a,a.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),i=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===i.redSqrt().redSqr().cmp(i)},n(c,s.BasePoint),a.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},a.prototype.point=function(e,t){return new c(this,e,t)},a.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),i=e.redMul(t),n=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,n)},c.prototype.add=function(){throw Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),n=e.x.redAdd(e.z),s=e.x.redSub(e.z).redMul(r),o=n.redMul(i),a=t.z.redMul(s.redAdd(o).redSqr()),c=t.x.redMul(s.redISub(o).redSqr());return this.curve.point(a,c)},c.prototype.mul=function(e){for(var t=e.clone(),r=this,i=this.curve.point(null,null),n=[];0!==t.cmpn(0);t.iushrn(1))n.push(t.andln(1));for(var s=n.length-1;s>=0;s--)0===n[s]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},c.prototype.mulAdd=function(){throw Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},13770:function(e,t,r){"use strict";var i=r(36321),n=r(21803),s=r(56853),o=r(21398),a=i.assert;function c(e){o.call(this,"short",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}function l(e,t,r,i){o.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(t,16),this.y=new n(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(e,t,r,i){o.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(t,16),this.y=new n(r,16),this.z=new n(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(c,o),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(e.beta)t=new n(e.beta,16).toRed(this.red);else{var t,r,i,s=this._getEndoRoots(this.p);t=(t=0>s[0].cmp(s[1])?s[0]:s[1]).toRed(this.red)}if(e.lambda)r=new n(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?r=o[0]:(r=o[1],a(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return i=e.basis?e.basis.map(function(e){return{a:new n(e.a,16),b:new n(e.b,16)}}):this._getEndoBasis(r),{beta:t,lambda:r,basis:i}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:n.mont(e),r=new n(2).toRed(t).redInvm(),i=r.redNeg(),s=new n(3).toRed(t).redNeg().redSqrt().redMul(r);return[i.redAdd(s).fromRed(),i.redSub(s).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,r,i,s,o,a,c,l,h,u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=e,f=this.n.clone(),p=new n(1),g=new n(0),m=new n(0),y=new n(1),b=0;0!==d.cmpn(0);){var w=f.div(d);l=f.sub(w.mul(d)),h=m.sub(w.mul(p));var v=y.sub(w.mul(g));if(!i&&0>l.cmp(u))t=c.neg(),r=p,i=l.neg(),s=h;else if(i&&2==++b)break;c=l,f=d,d=l,m=p,p=h,y=g,g=v}o=l.neg(),a=h;var E=i.sqr().add(s.sqr());return o.sqr().add(a.sqr()).cmp(E)>=0&&(o=t,a=r),i.negative&&(i=i.neg(),s=s.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:i,b:s},{a:o,b:a}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],n=i.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),o=n.mul(r.a),a=s.mul(i.a),c=n.mul(r.b),l=s.mul(i.b);return{k1:e.sub(o).sub(a),k2:c.add(l).neg()}},c.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(t[s]),a=e[s],c=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),c=c.neg(!0)),i[2*s]=a,i[2*s+1]=c,n[2*s]=o.k1,n[2*s+1]=o.k2}for(var l=this._wnafMulAdd(1,i,n,2*s,r),h=0;h<2*s;h++)i[h]=null,n[h]=null;return l},s(l,o.BasePoint),c.prototype.point=function(e,t,r){return new l(this,e,t,r)},c.prototype.pointFromJSON=function(e,t){return l.fromJSON(this,e,t)},l.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function n(t){return e.point(t[0],t[1],r)}var s=t[2];return i.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[i].concat(s.doubles.points.map(n))},naf:s.naf&&{wnd:s.naf.wnd,points:[i].concat(s.naf.points.map(n))}},i},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e)||0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},l.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),s=n.redSqr().redISub(this.x.redAdd(this.x)),o=n.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(e){return(e=new n(e,16),this.isInfinity())?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},l.prototype.jmulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},l.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},l.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},s(h,o.BasePoint),c.prototype.jpoint=function(e,t,r){return new h(this,e,t,r)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),n=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=i.redSub(n),c=s.redSub(o);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),h=l.redMul(a),u=i.redMul(l),d=c.redSqr().redIAdd(h).redISub(u).redISub(u),f=c.redMul(u.redISub(d)).redISub(s.redMul(h)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(d,f,p)},h.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),n=this.y,s=e.y.redMul(t).redMul(this.z),o=r.redSub(i),a=n.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),l=c.redMul(o),h=r.redMul(c),u=a.redSqr().redIAdd(l).redISub(h).redISub(h),d=a.redMul(h.redISub(u)).redISub(n.redMul(l)),f=this.z.redMul(o);return this.curve.jpoint(u,d,f)},h.prototype.dblp=function(e){if(0===e||this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var t,r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,n=this.curve.tinv,s=this.x,o=this.y,a=this.z,c=a.redSqr().redSqr(),l=o.redAdd(o);for(t=0;t<e;t++){var h=s.redSqr(),u=l.redSqr(),d=u.redSqr(),f=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(c)),p=s.redMul(u),g=f.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),y=f.redMul(m);y=y.redIAdd(y).redISub(d);var b=l.redMul(a);t+1<e&&(c=c.redMul(d)),s=g,a=b,l=y}return this.curve.jpoint(s,l.redMul(n),a)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){if(this.zOne){var e,t,r,i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i),c=a.redSqr().redISub(o).redISub(o),l=s.redIAdd(s);l=(l=l.redIAdd(l)).redIAdd(l),e=c,t=a.redMul(o.redISub(c)).redISub(l),r=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),u=this.y.redSqr(),d=u.redSqr(),f=this.x.redAdd(u).redSqr().redISub(h).redISub(d);f=f.redIAdd(f);var p=h.redAdd(h).redIAdd(h),g=p.redSqr(),m=d.redIAdd(d);m=(m=m.redIAdd(m)).redIAdd(m),e=g.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},h.prototype._threeDbl=function(){if(this.zOne){var e,t,r,i=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(i).redISub(s);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=a.redSqr().redISub(o).redISub(o);e=c;var l=s.redIAdd(s);l=(l=l.redIAdd(l)).redIAdd(l),t=a.redMul(o.redISub(c)).redISub(l),r=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),u=this.y.redSqr(),d=this.x.redMul(u),f=this.x.redSub(h).redMul(this.x.redAdd(h));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),g=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(u).redISub(h);var m=u.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=f.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},h.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),s=t.redSqr(),o=r.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(n)),c=t.redAdd(t),l=(c=c.redIAdd(c)).redMul(o),h=a.redSqr().redISub(l.redAdd(l)),u=l.redISub(h),d=o.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(u).redISub(d),p=r.redAdd(r).redMul(i);return this.curve.jpoint(h,f,p)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),n=e.redAdd(e).redIAdd(e),s=n.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(i),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),c=i.redIAdd(i);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var l=n.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(c),h=t.redMul(l);h=(h=h.redIAdd(h)).redIAdd(h);var u=this.x.redMul(a).redISub(h);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.y.redMul(l.redMul(c.redISub(l)).redISub(o.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(u,d,f)},h.prototype.mul=function(e,t){return e=new n(e,t),this.curve._wnafMul(this,e)},h.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),n=r.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(i)).cmpn(0)},h.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var i=e.clone(),n=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),0===this.x.cmp(r))return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},83475:function(e,t,r){"use strict";var i,n=r(28714),s=r(64358),o=r(36321).assert;function a(e){"short"===e.type?this.curve=new s.short(e):"edwards"===e.type?this.curve=new s.edwards(e):this.curve=new s.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){var i=new a(r);return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:i}),i}})}t.PresetCurve=a,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=r(36113)}catch(e){i=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},90063:function(e,t,r){"use strict";var i=r(21803),n=r(28072),s=r(36321),o=r(83475),a=r(47223),c=s.assert,l=r(61258),h=r(90362);function u(e){if(!(this instanceof u))return new u(e);"string"==typeof e&&(c(Object.prototype.hasOwnProperty.call(o,e),"Unknown curve "+e),e=o[e]),e instanceof o.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=u,u.prototype.keyPair=function(e){return new l(this,e)},u.prototype.keyFromPrivate=function(e,t){return l.fromPrivate(this,e,t)},u.prototype.keyFromPublic=function(e,t){return l.fromPublic(this,e,t)},u.prototype.genKeyPair=function(e){e||(e={});for(var t=new n({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),s=this.n.sub(new i(2));;){var o=new i(t.generate(r));if(!(o.cmp(s)>0))return o.iaddn(1),this.keyFromPrivate(o)}},u.prototype._truncateToN=function(e,t,r){if(i.isBN(e)||"number"==typeof e)n=(e=new i(e,16)).byteLength();else if("object"==typeof e)n=e.length,e=new i(e,16);else{var n,s=e.toString();n=s.length+1>>>1,e=new i(s,16)}"number"!=typeof r&&(r=8*n);var o=r-this.n.bitLength();return(o>0&&(e=e.ushrn(o)),!t&&e.cmp(this.n)>=0)?e.sub(this.n):e},u.prototype.sign=function(e,t,r,s){if("object"==typeof r&&(s=r,r=null),s||(s={}),"string"!=typeof e&&"number"!=typeof e&&!i.isBN(e)){c("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),c(e.length>>>0===e.length);for(var o=0;o<e.length;o++)c((255&e[o])===e[o])}t=this.keyFromPrivate(t,r),c(!(e=this._truncateToN(e,!1,s.msgBitLength)).isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),l=t.getPrivate().toArray("be",a),u=e.toArray("be",a);c(new i(u).eq(e),"Can not sign message");for(var d=new n({hash:this.hash,entropy:l,nonce:u,pers:s.pers,persEnc:s.persEnc||"utf8"}),f=this.n.sub(new i(1)),p=0;;p++){var g=s.k?s.k(p):new i(d.generate(this.n.byteLength()));if(!(0>=(g=this._truncateToN(g,!0)).cmpn(1)||g.cmp(f)>=0)){var m=this.g.mul(g);if(!m.isInfinity()){var y=m.getX(),b=y.umod(this.n);if(0!==b.cmpn(0)){var w=g.invm(this.n).mul(b.mul(t.getPrivate()).iadd(e));if(0!==(w=w.umod(this.n)).cmpn(0)){var v=(m.getY().isOdd()?1:0)|(0!==y.cmp(b)?2:0);return s.canonical&&w.cmp(this.nh)>0&&(w=this.n.sub(w),v^=1),new h({r:b,s:w,recoveryParam:v})}}}}}},u.prototype.verify=function(e,t,r,i,n){n||(n={}),e=this._truncateToN(e,!1,n.msgBitLength),r=this.keyFromPublic(r,i);var s,o=(t=new h(t,"hex")).r,a=t.s;if(0>o.cmpn(1)||o.cmp(this.n)>=0||0>a.cmpn(1)||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),l=c.mul(e).umod(this.n),u=c.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(l,r.getPublic(),u)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(l,r.getPublic(),u)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},u.prototype.recoverPubKey=function(e,t,r,n){c((3&r)===r,"The recovery param is more than two bits"),t=new h(t,n);var s=this.n,o=new i(e),a=t.r,l=t.s,u=1&r,d=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw Error("Unable to find sencond key candinate");a=d?this.curve.pointFromX(a.add(this.curve.n),u):this.curve.pointFromX(a,u);var f=t.r.invm(s),p=s.sub(o).mul(f).umod(s),g=l.mul(f).umod(s);return this.g.mulAdd(p,a,g)},u.prototype.getKeyRecoveryParam=function(e,t,r,i){if(null!==(t=new h(t,i)).recoveryParam)return t.recoveryParam;for(var n,s=0;s<4;s++){try{n=this.recoverPubKey(e,t,s)}catch(e){continue}if(n.eq(r))return s}throw Error("Unable to find valid recovery factor")}},61258:function(e,t,r){"use strict";var i=r(21803),n=r(36321).assert;function s(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=s,s.fromPublic=function(e,t,r){return t instanceof s?t:new s(e,{pub:t,pubEnc:r})},s.fromPrivate=function(e,t,r){return t instanceof s?t:new s(e,{priv:t,privEnc:r})},s.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},s.prototype.getPublic=function(e,t){return("string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t)?this.pub.encode(t,e):this.pub},s.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},s.prototype._importPrivate=function(e,t){this.priv=new i(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},s.prototype._importPublic=function(e,t){if(e.x||e.y){"mont"===this.ec.curve.type?n(e.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&n(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)},s.prototype.derive=function(e){return e.validate()||n(e.validate(),"public point not validated"),e.mul(this.priv).getX()},s.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},s.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},90362:function(e,t,r){"use strict";var i=r(21803),n=r(36321),s=n.assert;function o(e,t){if(e instanceof o)return e;this._importDER(e,t)||(s(e.r&&e.s,"Signature without r or s"),this.r=new i(e.r,16),this.s=new i(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function c(e,t){var r=e[t.place++];if(!(128&r))return r;var i=15&r;if(0===i||i>4||0===e[t.place])return!1;for(var n=0,s=0,o=t.place;s<i;s++,o++)n<<=8,n|=e[o],n>>>=0;return!(n<=127)&&(t.place=o,n)}function l(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function h(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}e.exports=o,o.prototype._importDER=function(e,t){e=n.toArray(e,t);var r=new a;if(48!==e[r.place++])return!1;var s=c(e,r);if(!1===s||s+r.place!==e.length||2!==e[r.place++])return!1;var o=c(e,r);if(!1===o||(128&e[r.place])!=0)return!1;var l=e.slice(r.place,o+r.place);if(r.place+=o,2!==e[r.place++])return!1;var h=c(e,r);if(!1===h||e.length!==h+r.place||(128&e[r.place])!=0)return!1;var u=e.slice(r.place,h+r.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}return this.r=new i(l),this.s=new i(u),this.recoveryParam=null,!0},o.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=l(t),r=l(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var i=[2];h(i,t.length),(i=i.concat(t)).push(2),h(i,r.length);var s=i.concat(r),o=[48];return h(o,s.length),o=o.concat(s),n.encode(o,e)}},37115:function(e,t,r){"use strict";var i=r(28714),n=r(83475),s=r(36321),o=s.assert,a=s.parseBytes,c=r(76244),l=r(55967);function h(e){if(o("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof h))return new h(e);e=n[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=i.sha512}e.exports=h,h.prototype.sign=function(e,t){e=a(e);var r=this.keyFromSecret(t),i=this.hashInt(r.messagePrefix(),e),n=this.g.mul(i),s=this.encodePoint(n),o=this.hashInt(s,r.pubBytes(),e).mul(r.priv()),c=i.add(o).umod(this.curve.n);return this.makeSignature({R:n,S:c,Rencoded:s})},h.prototype.verify=function(e,t,r){if(e=a(e),(t=this.makeSignature(t)).S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var i=this.keyFromPublic(r),n=this.hashInt(t.Rencoded(),i.pubBytes(),e),s=this.g.mul(t.S());return t.R().add(i.pub().mul(n)).eq(s)},h.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return s.intFromLE(e.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},h.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},h.prototype.makeSignature=function(e){return e instanceof l?e:new l(this,e)},h.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},h.prototype.decodePoint=function(e){var t=(e=s.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),i=(128&e[t])!=0,n=s.intFromLE(r);return this.curve.pointFromY(n,i)},h.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(e){return s.intFromLE(e)},h.prototype.isPoint=function(e){return e instanceof this.pointClass}},76244:function(e,t,r){"use strict";var i=r(36321),n=i.assert,s=i.parseBytes,o=i.cachedProperty;function a(e,t){this.eddsa=e,this._secret=s(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=s(t.pub)}a.fromPublic=function(e,t){return t instanceof a?t:new a(e,{pub:t})},a.fromSecret=function(e,t){return t instanceof a?t:new a(e,{secret:t})},a.prototype.secret=function(){return this._secret},o(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),o(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),o(a,"privBytes",function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[r]&=127,i[r]|=64,i}),o(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),o(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),o(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(e){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},a.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},a.prototype.getSecret=function(e){return n(this._secret,"KeyPair is public only"),i.encode(this.secret(),e)},a.prototype.getPublic=function(e){return i.encode(this.pubBytes(),e)},e.exports=a},55967:function(e,t,r){"use strict";var i=r(21803),n=r(36321),s=n.assert,o=n.cachedProperty,a=n.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=a(t)),Array.isArray(t)&&(s(t.length===2*e.encodingLength,"Signature has invalid size"),t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),s(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof i&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}o(c,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),o(c,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),o(c,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),o(c,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},36113:function(e){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},36321:function(e,t,r){"use strict";var i=r(21803),n=r(73045),s=r(83742);t.assert=n,t.toArray=s.toArray,t.zero2=s.zero2,t.toHex=s.toHex,t.encode=s.encode,t.getNAF=function(e,t,r){var i=Array(Math.max(e.bitLength(),r)+1);for(o=0;o<i.length;o+=1)i[o]=0;var n=1<<t+1,s=e.clone();for(o=0;o<i.length;o++){var o,a,c=s.andln(n-1);s.isOdd()?(a=c>(n>>1)-1?(n>>1)-c:c,s.isubn(a)):a=0,i[o]=a,s.iushrn(1)}return i},t.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var i=0,n=0;e.cmpn(-i)>0||t.cmpn(-n)>0;){var s,o,a,c=e.andln(3)+i&3,l=t.andln(3)+n&3;3===c&&(c=-1),3===l&&(l=-1),o=(1&c)==0?0:(3==(s=e.andln(7)+i&7)||5===s)&&2===l?-c:c,r[0].push(o),a=(1&l)==0?0:(3==(s=t.andln(7)+n&7)||5===s)&&2===c?-l:l,r[1].push(a),2*i===o+1&&(i=1-i),2*n===a+1&&(n=1-n),e.iushrn(1),t.iushrn(1)}return r},t.cachedProperty=function(e,t,r){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=r.call(this)}},t.parseBytes=function(e){return"string"==typeof e?t.toArray(e,"hex"):e},t.intFromLE=function(e){return new i(e,"hex","le")}},21803:function(e,t,r){!function(e,t){"use strict";function i(e,t){if(!e)throw Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(r=t,t=10),this._init(e||0,t||10,r||"be"))}"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{l="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(85568).Buffer}catch(e){}function o(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(e,t,r){var i=o(e,r);return r-1>=t&&(i|=o(e,r-1)<<4),i}function c(e,t,r,i){for(var n=0,s=Math.min(e.length,r),o=t;o<s;o++){var a=e.charCodeAt(o)-48;n*=i,a>=49?n+=a-49+10:a>=17?n+=a-17+10:n+=a}return n}s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return 0>e.cmp(t)?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,r):(this._parseBase(e,t,n),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var n,s,o=0;o<this.length;o++)this.words[o]=0;var a=0;if("be"===r)for(o=e.length-1,n=0;o>=0;o-=3)s=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[n]|=s<<a&67108863,this.words[n+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);else if("le"===r)for(o=0,n=0;o<e.length;o+=3)s=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[n]|=s<<a&67108863,this.words[n+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);return this.strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var i,n=0;n<this.length;n++)this.words[n]=0;var s=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=a(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=a(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this.strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var s=e.length-r,o=s%i,a=Math.min(s,s-o)+r,l=0,h=r;h<a;h+=i)l=c(e,h,h+i,t),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==o){var u=1;for(l=c(e,h,e.length,t),h=0;h<o;h++)u*=t;this.imuln(u),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},s.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l,h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],s=0|t.words[0],o=n*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var l=1;l<i;l++){for(var h=c>>>26,u=67108863&c,d=Math.min(l,t.length-1),f=Math.max(0,l-e.length+1);f<=d;f++){var p=l-f|0;h+=(o=(n=0|e.words[p])*(s=0|t.words[f])+u)/67108864|0,u=67108863&o}r.words[l]=0|u,c=0|h}return 0!==c?r.words[l]=0|c:r.length--,r.strip()}s.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var r,n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=((a<<n|s)&16777215).toString(16);s=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,o--),r=0!==s||o!==this.length-1?h[6-c.length]+c+r:c+r}for(0!==s&&(r=s.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var l=u[e],f=d[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(f).toString(e);r=(p=p.idivn(f)).isZero()?g+r:h[l-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,t){return i(void 0!==l),this.toArrayLike(l,e,t)},s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){var n,s,o=this.byteLength(),a=r||Math.max(1,o);i(o<=a,"byte array longer than desired length"),i(a>0,"Requested array length <= 0"),this.strip();var c=new e(a),l=this.clone();if("le"===t){for(s=0;!l.isZero();s++)n=l.andln(255),l.iushrn(8),c[s]=n;for(;s<a;s++)c[s]=0}else{for(s=0;s<a-o;s++)c[s]=0;for(s=0;!l.isZero();s++)n=l.andln(255),l.iushrn(8),c[a-s-1]=n}return c},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return(8191&t)==0&&(r+=13,t>>>=13),(127&t)==0&&(r+=7,t>>>=7),(15&t)==0&&(r+=4,t>>>=4),(3&t)==0&&(r+=2,t>>>=2),(1&t)==0&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return(this.length-1)*26+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},s.prototype.ior=function(e){return i((this.negative|e.negative)==0),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},s.prototype.iand=function(e){return i((this.negative|e.negative)==0),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){this.length>e.length?(t=this,r=e):(t=e,r=this);for(var t,r,i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},s.prototype.ixor=function(e){return i((this.negative|e.negative)==0),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var r=e/26|0,n=e%26;return this._expand(r+1),t?this.words[r]=this.words[r]|1<<n:this.words[r]=this.words[r]&~(1<<n),this.strip()},s.prototype.iadd=function(e){if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var t,r,i,n=0,s=0;s<i.length;s++)t=(0|r.words[s])+(0|i.words[s])+n,this.words[s]=67108863&t,n=t>>>26;for(;0!==n&&s<r.length;s++)t=(0|r.words[s])+n,this.words[s]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t,r,i=this.iadd(e);return e.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(t=this,r=e):(t=e,r=this);for(var s=0,o=0;o<r.length;o++)s=(i=(0|t.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&i;for(;0!==s&&o<t.length;o++)s=(i=(0|t.words[o])+s)>>26,this.words[o]=67108863&i;if(0===s&&o<t.length&&t!==this)for(;o<t.length;o++)this.words[o]=t.words[o];return this.length=Math.max(this.length,o),t!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var i,n,s,o=e.words,a=t.words,c=r.words,l=0,h=0|o[0],u=8191&h,d=h>>>13,f=0|o[1],p=8191&f,g=f>>>13,m=0|o[2],y=8191&m,b=m>>>13,w=0|o[3],v=8191&w,E=w>>>13,I=0|o[4],_=8191&I,A=I>>>13,S=0|o[5],C=8191&S,N=S>>>13,M=0|o[6],x=8191&M,O=M>>>13,P=0|o[7],T=8191&P,R=P>>>13,D=0|o[8],k=8191&D,L=D>>>13,j=0|o[9],U=8191&j,B=j>>>13,z=0|a[0],$=8191&z,q=z>>>13,F=0|a[1],H=8191&F,W=F>>>13,V=0|a[2],K=8191&V,Y=V>>>13,J=0|a[3],G=8191&J,Z=J>>>13,Q=0|a[4],X=8191&Q,ee=Q>>>13,et=0|a[5],er=8191&et,ei=et>>>13,en=0|a[6],es=8191&en,eo=en>>>13,ea=0|a[7],ec=8191&ea,el=ea>>>13,eh=0|a[8],eu=8191&eh,ed=eh>>>13,ef=0|a[9],ep=8191&ef,eg=ef>>>13;r.negative=e.negative^t.negative,r.length=19;var em=(l+(i=Math.imul(u,$))|0)+((8191&(n=(n=Math.imul(u,q))+Math.imul(d,$)|0))<<13)|0;l=((s=Math.imul(d,q))+(n>>>13)|0)+(em>>>26)|0,em&=67108863,i=Math.imul(p,$),n=(n=Math.imul(p,q))+Math.imul(g,$)|0,s=Math.imul(g,q);var ey=(l+(i=i+Math.imul(u,H)|0)|0)+((8191&(n=(n=n+Math.imul(u,W)|0)+Math.imul(d,H)|0))<<13)|0;l=((s=s+Math.imul(d,W)|0)+(n>>>13)|0)+(ey>>>26)|0,ey&=67108863,i=Math.imul(y,$),n=(n=Math.imul(y,q))+Math.imul(b,$)|0,s=Math.imul(b,q),i=i+Math.imul(p,H)|0,n=(n=n+Math.imul(p,W)|0)+Math.imul(g,H)|0,s=s+Math.imul(g,W)|0;var eb=(l+(i=i+Math.imul(u,K)|0)|0)+((8191&(n=(n=n+Math.imul(u,Y)|0)+Math.imul(d,K)|0))<<13)|0;l=((s=s+Math.imul(d,Y)|0)+(n>>>13)|0)+(eb>>>26)|0,eb&=67108863,i=Math.imul(v,$),n=(n=Math.imul(v,q))+Math.imul(E,$)|0,s=Math.imul(E,q),i=i+Math.imul(y,H)|0,n=(n=n+Math.imul(y,W)|0)+Math.imul(b,H)|0,s=s+Math.imul(b,W)|0,i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,Y)|0)+Math.imul(g,K)|0,s=s+Math.imul(g,Y)|0;var ew=(l+(i=i+Math.imul(u,G)|0)|0)+((8191&(n=(n=n+Math.imul(u,Z)|0)+Math.imul(d,G)|0))<<13)|0;l=((s=s+Math.imul(d,Z)|0)+(n>>>13)|0)+(ew>>>26)|0,ew&=67108863,i=Math.imul(_,$),n=(n=Math.imul(_,q))+Math.imul(A,$)|0,s=Math.imul(A,q),i=i+Math.imul(v,H)|0,n=(n=n+Math.imul(v,W)|0)+Math.imul(E,H)|0,s=s+Math.imul(E,W)|0,i=i+Math.imul(y,K)|0,n=(n=n+Math.imul(y,Y)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,Y)|0,i=i+Math.imul(p,G)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(g,G)|0,s=s+Math.imul(g,Z)|0;var ev=(l+(i=i+Math.imul(u,X)|0)|0)+((8191&(n=(n=n+Math.imul(u,ee)|0)+Math.imul(d,X)|0))<<13)|0;l=((s=s+Math.imul(d,ee)|0)+(n>>>13)|0)+(ev>>>26)|0,ev&=67108863,i=Math.imul(C,$),n=(n=Math.imul(C,q))+Math.imul(N,$)|0,s=Math.imul(N,q),i=i+Math.imul(_,H)|0,n=(n=n+Math.imul(_,W)|0)+Math.imul(A,H)|0,s=s+Math.imul(A,W)|0,i=i+Math.imul(v,K)|0,n=(n=n+Math.imul(v,Y)|0)+Math.imul(E,K)|0,s=s+Math.imul(E,Y)|0,i=i+Math.imul(y,G)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,G)|0,s=s+Math.imul(b,Z)|0,i=i+Math.imul(p,X)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(g,X)|0,s=s+Math.imul(g,ee)|0;var eE=(l+(i=i+Math.imul(u,er)|0)|0)+((8191&(n=(n=n+Math.imul(u,ei)|0)+Math.imul(d,er)|0))<<13)|0;l=((s=s+Math.imul(d,ei)|0)+(n>>>13)|0)+(eE>>>26)|0,eE&=67108863,i=Math.imul(x,$),n=(n=Math.imul(x,q))+Math.imul(O,$)|0,s=Math.imul(O,q),i=i+Math.imul(C,H)|0,n=(n=n+Math.imul(C,W)|0)+Math.imul(N,H)|0,s=s+Math.imul(N,W)|0,i=i+Math.imul(_,K)|0,n=(n=n+Math.imul(_,Y)|0)+Math.imul(A,K)|0,s=s+Math.imul(A,Y)|0,i=i+Math.imul(v,G)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(E,G)|0,s=s+Math.imul(E,Z)|0,i=i+Math.imul(y,X)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(b,X)|0,s=s+Math.imul(b,ee)|0,i=i+Math.imul(p,er)|0,n=(n=n+Math.imul(p,ei)|0)+Math.imul(g,er)|0,s=s+Math.imul(g,ei)|0;var eI=(l+(i=i+Math.imul(u,es)|0)|0)+((8191&(n=(n=n+Math.imul(u,eo)|0)+Math.imul(d,es)|0))<<13)|0;l=((s=s+Math.imul(d,eo)|0)+(n>>>13)|0)+(eI>>>26)|0,eI&=67108863,i=Math.imul(T,$),n=(n=Math.imul(T,q))+Math.imul(R,$)|0,s=Math.imul(R,q),i=i+Math.imul(x,H)|0,n=(n=n+Math.imul(x,W)|0)+Math.imul(O,H)|0,s=s+Math.imul(O,W)|0,i=i+Math.imul(C,K)|0,n=(n=n+Math.imul(C,Y)|0)+Math.imul(N,K)|0,s=s+Math.imul(N,Y)|0,i=i+Math.imul(_,G)|0,n=(n=n+Math.imul(_,Z)|0)+Math.imul(A,G)|0,s=s+Math.imul(A,Z)|0,i=i+Math.imul(v,X)|0,n=(n=n+Math.imul(v,ee)|0)+Math.imul(E,X)|0,s=s+Math.imul(E,ee)|0,i=i+Math.imul(y,er)|0,n=(n=n+Math.imul(y,ei)|0)+Math.imul(b,er)|0,s=s+Math.imul(b,ei)|0,i=i+Math.imul(p,es)|0,n=(n=n+Math.imul(p,eo)|0)+Math.imul(g,es)|0,s=s+Math.imul(g,eo)|0;var e_=(l+(i=i+Math.imul(u,ec)|0)|0)+((8191&(n=(n=n+Math.imul(u,el)|0)+Math.imul(d,ec)|0))<<13)|0;l=((s=s+Math.imul(d,el)|0)+(n>>>13)|0)+(e_>>>26)|0,e_&=67108863,i=Math.imul(k,$),n=(n=Math.imul(k,q))+Math.imul(L,$)|0,s=Math.imul(L,q),i=i+Math.imul(T,H)|0,n=(n=n+Math.imul(T,W)|0)+Math.imul(R,H)|0,s=s+Math.imul(R,W)|0,i=i+Math.imul(x,K)|0,n=(n=n+Math.imul(x,Y)|0)+Math.imul(O,K)|0,s=s+Math.imul(O,Y)|0,i=i+Math.imul(C,G)|0,n=(n=n+Math.imul(C,Z)|0)+Math.imul(N,G)|0,s=s+Math.imul(N,Z)|0,i=i+Math.imul(_,X)|0,n=(n=n+Math.imul(_,ee)|0)+Math.imul(A,X)|0,s=s+Math.imul(A,ee)|0,i=i+Math.imul(v,er)|0,n=(n=n+Math.imul(v,ei)|0)+Math.imul(E,er)|0,s=s+Math.imul(E,ei)|0,i=i+Math.imul(y,es)|0,n=(n=n+Math.imul(y,eo)|0)+Math.imul(b,es)|0,s=s+Math.imul(b,eo)|0,i=i+Math.imul(p,ec)|0,n=(n=n+Math.imul(p,el)|0)+Math.imul(g,ec)|0,s=s+Math.imul(g,el)|0;var eA=(l+(i=i+Math.imul(u,eu)|0)|0)+((8191&(n=(n=n+Math.imul(u,ed)|0)+Math.imul(d,eu)|0))<<13)|0;l=((s=s+Math.imul(d,ed)|0)+(n>>>13)|0)+(eA>>>26)|0,eA&=67108863,i=Math.imul(U,$),n=(n=Math.imul(U,q))+Math.imul(B,$)|0,s=Math.imul(B,q),i=i+Math.imul(k,H)|0,n=(n=n+Math.imul(k,W)|0)+Math.imul(L,H)|0,s=s+Math.imul(L,W)|0,i=i+Math.imul(T,K)|0,n=(n=n+Math.imul(T,Y)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,Y)|0,i=i+Math.imul(x,G)|0,n=(n=n+Math.imul(x,Z)|0)+Math.imul(O,G)|0,s=s+Math.imul(O,Z)|0,i=i+Math.imul(C,X)|0,n=(n=n+Math.imul(C,ee)|0)+Math.imul(N,X)|0,s=s+Math.imul(N,ee)|0,i=i+Math.imul(_,er)|0,n=(n=n+Math.imul(_,ei)|0)+Math.imul(A,er)|0,s=s+Math.imul(A,ei)|0,i=i+Math.imul(v,es)|0,n=(n=n+Math.imul(v,eo)|0)+Math.imul(E,es)|0,s=s+Math.imul(E,eo)|0,i=i+Math.imul(y,ec)|0,n=(n=n+Math.imul(y,el)|0)+Math.imul(b,ec)|0,s=s+Math.imul(b,el)|0,i=i+Math.imul(p,eu)|0,n=(n=n+Math.imul(p,ed)|0)+Math.imul(g,eu)|0,s=s+Math.imul(g,ed)|0;var eS=(l+(i=i+Math.imul(u,ep)|0)|0)+((8191&(n=(n=n+Math.imul(u,eg)|0)+Math.imul(d,ep)|0))<<13)|0;l=((s=s+Math.imul(d,eg)|0)+(n>>>13)|0)+(eS>>>26)|0,eS&=67108863,i=Math.imul(U,H),n=(n=Math.imul(U,W))+Math.imul(B,H)|0,s=Math.imul(B,W),i=i+Math.imul(k,K)|0,n=(n=n+Math.imul(k,Y)|0)+Math.imul(L,K)|0,s=s+Math.imul(L,Y)|0,i=i+Math.imul(T,G)|0,n=(n=n+Math.imul(T,Z)|0)+Math.imul(R,G)|0,s=s+Math.imul(R,Z)|0,i=i+Math.imul(x,X)|0,n=(n=n+Math.imul(x,ee)|0)+Math.imul(O,X)|0,s=s+Math.imul(O,ee)|0,i=i+Math.imul(C,er)|0,n=(n=n+Math.imul(C,ei)|0)+Math.imul(N,er)|0,s=s+Math.imul(N,ei)|0,i=i+Math.imul(_,es)|0,n=(n=n+Math.imul(_,eo)|0)+Math.imul(A,es)|0,s=s+Math.imul(A,eo)|0,i=i+Math.imul(v,ec)|0,n=(n=n+Math.imul(v,el)|0)+Math.imul(E,ec)|0,s=s+Math.imul(E,el)|0,i=i+Math.imul(y,eu)|0,n=(n=n+Math.imul(y,ed)|0)+Math.imul(b,eu)|0,s=s+Math.imul(b,ed)|0;var eC=(l+(i=i+Math.imul(p,ep)|0)|0)+((8191&(n=(n=n+Math.imul(p,eg)|0)+Math.imul(g,ep)|0))<<13)|0;l=((s=s+Math.imul(g,eg)|0)+(n>>>13)|0)+(eC>>>26)|0,eC&=67108863,i=Math.imul(U,K),n=(n=Math.imul(U,Y))+Math.imul(B,K)|0,s=Math.imul(B,Y),i=i+Math.imul(k,G)|0,n=(n=n+Math.imul(k,Z)|0)+Math.imul(L,G)|0,s=s+Math.imul(L,Z)|0,i=i+Math.imul(T,X)|0,n=(n=n+Math.imul(T,ee)|0)+Math.imul(R,X)|0,s=s+Math.imul(R,ee)|0,i=i+Math.imul(x,er)|0,n=(n=n+Math.imul(x,ei)|0)+Math.imul(O,er)|0,s=s+Math.imul(O,ei)|0,i=i+Math.imul(C,es)|0,n=(n=n+Math.imul(C,eo)|0)+Math.imul(N,es)|0,s=s+Math.imul(N,eo)|0,i=i+Math.imul(_,ec)|0,n=(n=n+Math.imul(_,el)|0)+Math.imul(A,ec)|0,s=s+Math.imul(A,el)|0,i=i+Math.imul(v,eu)|0,n=(n=n+Math.imul(v,ed)|0)+Math.imul(E,eu)|0,s=s+Math.imul(E,ed)|0;var eN=(l+(i=i+Math.imul(y,ep)|0)|0)+((8191&(n=(n=n+Math.imul(y,eg)|0)+Math.imul(b,ep)|0))<<13)|0;l=((s=s+Math.imul(b,eg)|0)+(n>>>13)|0)+(eN>>>26)|0,eN&=67108863,i=Math.imul(U,G),n=(n=Math.imul(U,Z))+Math.imul(B,G)|0,s=Math.imul(B,Z),i=i+Math.imul(k,X)|0,n=(n=n+Math.imul(k,ee)|0)+Math.imul(L,X)|0,s=s+Math.imul(L,ee)|0,i=i+Math.imul(T,er)|0,n=(n=n+Math.imul(T,ei)|0)+Math.imul(R,er)|0,s=s+Math.imul(R,ei)|0,i=i+Math.imul(x,es)|0,n=(n=n+Math.imul(x,eo)|0)+Math.imul(O,es)|0,s=s+Math.imul(O,eo)|0,i=i+Math.imul(C,ec)|0,n=(n=n+Math.imul(C,el)|0)+Math.imul(N,ec)|0,s=s+Math.imul(N,el)|0,i=i+Math.imul(_,eu)|0,n=(n=n+Math.imul(_,ed)|0)+Math.imul(A,eu)|0,s=s+Math.imul(A,ed)|0;var eM=(l+(i=i+Math.imul(v,ep)|0)|0)+((8191&(n=(n=n+Math.imul(v,eg)|0)+Math.imul(E,ep)|0))<<13)|0;l=((s=s+Math.imul(E,eg)|0)+(n>>>13)|0)+(eM>>>26)|0,eM&=67108863,i=Math.imul(U,X),n=(n=Math.imul(U,ee))+Math.imul(B,X)|0,s=Math.imul(B,ee),i=i+Math.imul(k,er)|0,n=(n=n+Math.imul(k,ei)|0)+Math.imul(L,er)|0,s=s+Math.imul(L,ei)|0,i=i+Math.imul(T,es)|0,n=(n=n+Math.imul(T,eo)|0)+Math.imul(R,es)|0,s=s+Math.imul(R,eo)|0,i=i+Math.imul(x,ec)|0,n=(n=n+Math.imul(x,el)|0)+Math.imul(O,ec)|0,s=s+Math.imul(O,el)|0,i=i+Math.imul(C,eu)|0,n=(n=n+Math.imul(C,ed)|0)+Math.imul(N,eu)|0,s=s+Math.imul(N,ed)|0;var ex=(l+(i=i+Math.imul(_,ep)|0)|0)+((8191&(n=(n=n+Math.imul(_,eg)|0)+Math.imul(A,ep)|0))<<13)|0;l=((s=s+Math.imul(A,eg)|0)+(n>>>13)|0)+(ex>>>26)|0,ex&=67108863,i=Math.imul(U,er),n=(n=Math.imul(U,ei))+Math.imul(B,er)|0,s=Math.imul(B,ei),i=i+Math.imul(k,es)|0,n=(n=n+Math.imul(k,eo)|0)+Math.imul(L,es)|0,s=s+Math.imul(L,eo)|0,i=i+Math.imul(T,ec)|0,n=(n=n+Math.imul(T,el)|0)+Math.imul(R,ec)|0,s=s+Math.imul(R,el)|0,i=i+Math.imul(x,eu)|0,n=(n=n+Math.imul(x,ed)|0)+Math.imul(O,eu)|0,s=s+Math.imul(O,ed)|0;var eO=(l+(i=i+Math.imul(C,ep)|0)|0)+((8191&(n=(n=n+Math.imul(C,eg)|0)+Math.imul(N,ep)|0))<<13)|0;l=((s=s+Math.imul(N,eg)|0)+(n>>>13)|0)+(eO>>>26)|0,eO&=67108863,i=Math.imul(U,es),n=(n=Math.imul(U,eo))+Math.imul(B,es)|0,s=Math.imul(B,eo),i=i+Math.imul(k,ec)|0,n=(n=n+Math.imul(k,el)|0)+Math.imul(L,ec)|0,s=s+Math.imul(L,el)|0,i=i+Math.imul(T,eu)|0,n=(n=n+Math.imul(T,ed)|0)+Math.imul(R,eu)|0,s=s+Math.imul(R,ed)|0;var eP=(l+(i=i+Math.imul(x,ep)|0)|0)+((8191&(n=(n=n+Math.imul(x,eg)|0)+Math.imul(O,ep)|0))<<13)|0;l=((s=s+Math.imul(O,eg)|0)+(n>>>13)|0)+(eP>>>26)|0,eP&=67108863,i=Math.imul(U,ec),n=(n=Math.imul(U,el))+Math.imul(B,ec)|0,s=Math.imul(B,el),i=i+Math.imul(k,eu)|0,n=(n=n+Math.imul(k,ed)|0)+Math.imul(L,eu)|0,s=s+Math.imul(L,ed)|0;var eT=(l+(i=i+Math.imul(T,ep)|0)|0)+((8191&(n=(n=n+Math.imul(T,eg)|0)+Math.imul(R,ep)|0))<<13)|0;l=((s=s+Math.imul(R,eg)|0)+(n>>>13)|0)+(eT>>>26)|0,eT&=67108863,i=Math.imul(U,eu),n=(n=Math.imul(U,ed))+Math.imul(B,eu)|0,s=Math.imul(B,ed);var eR=(l+(i=i+Math.imul(k,ep)|0)|0)+((8191&(n=(n=n+Math.imul(k,eg)|0)+Math.imul(L,ep)|0))<<13)|0;l=((s=s+Math.imul(L,eg)|0)+(n>>>13)|0)+(eR>>>26)|0,eR&=67108863;var eD=(l+(i=Math.imul(U,ep))|0)+((8191&(n=(n=Math.imul(U,eg))+Math.imul(B,ep)|0))<<13)|0;return l=((s=Math.imul(B,eg))+(n>>>13)|0)+(eD>>>26)|0,eD&=67108863,c[0]=em,c[1]=ey,c[2]=eb,c[3]=ew,c[4]=ev,c[5]=eE,c[6]=eI,c[7]=e_,c[8]=eA,c[9]=eS,c[10]=eC,c[11]=eN,c[12]=eM,c[13]=ex,c[14]=eO,c[15]=eP,c[16]=eT,c[17]=eR,c[18]=eD,0!==l&&(c[19]=l,r.length++),r};function g(e,t,r){return new m().mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(p=f),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):r<63?f(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,s=0;s<r.length-1;s++){var o=n;n=0;for(var a=67108863&i,c=Math.min(s,t.length-1),l=Math.max(0,s-e.length+1);l<=c;l++){var h=s-l,u=(0|e.words[h])*(0|t.words[l]),d=67108863&u;o=o+(u/67108864|0)|0,a=67108863&(d=d+a|0),n+=(o=o+(d>>>26)|0)>>>26,o&=67108863}r.words[s]=a,i=o,o=n}return 0!==i?r.words[s]=i:r.length--,r.strip()}(this,e,t):g(this,e,t)},m.prototype.makeRBT=function(e){for(var t=Array(e),r=s.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},m.prototype.permute=function(e,t,r,i,n,s){for(var o=0;o<s;o++)i[o]=t[e[o]],n[o]=r[e[o]]},m.prototype.transform=function(e,t,r,i,n,s){this.permute(s,e,t,r,i,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),h=0;h<n;h+=a)for(var u=c,d=l,f=0;f<o;f++){var p=r[h+f],g=i[h+f],m=r[h+f+o],y=i[h+f+o],b=u*m-d*y;y=u*y+d*m,m=b,r[h+f]=p+m,i[h+f]=g+y,r[h+f+o]=p-m,i[h+f+o]=g-y,f!==a&&(b=c*u-l*d,d=c*d+l*u,u=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},m.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},m.prototype.convert13b=function(e,t,r,n){for(var s=0,o=0;o<t;o++)s+=0|e[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<n;++o)r[o]=0;i(0===s),i((-8192&s)==0)},m.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),s=this.stub(i),o=Array(i),a=Array(i),c=Array(i),l=Array(i),h=Array(i),u=Array(i),d=r.words;d.length=i,this.convert13b(e.words,e.length,o,i),this.convert13b(t.words,t.length,l,i),this.transform(o,s,a,c,i,n),this.transform(l,s,h,u,i,n);for(var f=0;f<i;f++){var p=a[f]*h[f]-c[f]*u[f];c[f]=a[f]*u[f]+c[f]*h[f],a[f]=p}return this.conjugate(a,c,i),this.transform(a,c,d,s,i,n),this.conjugate(d,s,i),this.normalize13b(d,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=Array(this.length+e.length),g(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){i("number"==typeof e),i(e<67108864);for(var t=0,r=0;r<this.length;r++){var n=(0|this.words[r])*e,s=(67108863&n)+(67108863&t);t>>=26,t+=(n/67108864|0)+(s>>>26),this.words[r]=67108863&s}return 0!==t&&(this.words[r]=t,this.length++),this.length=0===e?1:this.length,this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=(e.words[i]&1<<n)>>>n}return t}(e);if(0===t.length)return new s(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var n=r.sqr();i<t.length;i++,n=n.sqr())0!==t[i]&&(r=r.mul(n));return r},s.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,r=e%26,n=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<r;this.words[t]=c|o,o=a>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){i("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var n,s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s;if(n-=o,n=Math.max(0,n),r){for(var c=0;c<o;c++)r.words[c]=this.words[c];r.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=n);c--){var h=0|this.words[c];this.words[c]=l<<26-s|h>>>s,l=h&a}return r&&0!==l&&(r.words[r.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,t,r){return i(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;return!(this.length<=r)&&!!(this.words[r]&1<<t)},s.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;return(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)?this:(0!==t&&r++,this.length=Math.min(r,this.length),0!==t&&(this.words[this.length-1]&=67108863^67108863>>>t<<t),this.strip())},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return(i("number"==typeof e),i(e<67108864),e<0)?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var n,s,o=e.length+r;this._expand(o);var a=0;for(n=0;n<e.length;n++){s=(0|this.words[n+r])+a;var c=(0|e.words[n])*t;s-=67108863&c,a=(s>>26)-(c/67108864|0),this.words[n+r]=67108863&s}for(;n<this.length-r;n++)a=(s=(0|this.words[n+r])+a)>>26,this.words[n+r]=67108863&s;if(0===a)return this.strip();for(i(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,t){var r,i=this.length-e.length,n=this.clone(),o=e,a=0|o.words[o.length-1];0!=(i=26-this._countBits(a))&&(o=o.ushln(i),n.iushln(i),a=0|o.words[o.length-1]);var c=n.length-o.length;if("mod"!==t){(r=new s(null)).length=c+1,r.words=Array(r.length);for(var l=0;l<r.length;l++)r.words[l]=0}var h=n.clone()._ishlnsubmul(o,1,c);0===h.negative&&(n=h,r&&(r.words[c]=1));for(var u=c-1;u>=0;u--){var d=(0|n.words[o.length+u])*67108864+(0|n.words[o.length+u-1]);for(d=Math.min(d/a|0,67108863),n._ishlnsubmul(o,d,u);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(o,1,u),n.isZero()||(n.negative^=1);r&&(r.words[u]=d)}return r&&r.strip(),n.strip(),"div"!==t&&0!==i&&n.iushrn(i),{div:r||null,mod:n}},s.prototype.divmod=function(e,t,r){var n,o,a;return(i(!e.isZero()),this.isZero())?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(n=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:n,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(n=a.div.neg()),{div:n,mod:a.mod}):(this.negative&e.negative)!=0?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||0>this.cmp(e)?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,t)},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),s=r.cmp(i);return s<0||1===n&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modn=function(e){i(e<=67108863);for(var t=67108864%e,r=0,n=this.length-1;n>=0;n--)r=(t*r+(0|this.words[n]))%e;return r},s.prototype.idivn=function(e){i(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*t;this.words[r]=n/e|0,t=n%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new s(1),o=new s(0),a=new s(0),c=new s(1),l=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++l;for(var h=r.clone(),u=t.clone();!t.isZero();){for(var d=0,f=1;(t.words[0]&f)==0&&d<26;++d,f<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(h),o.isub(u)),n.iushrn(1),o.iushrn(1);for(var p=0,g=1;(r.words[0]&g)==0&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(h),c.isub(u)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),n.isub(a),o.isub(c)):(r.isub(t),a.isub(n),c.isub(o))}return{a:a,b:c,gcd:r.iushln(l)}},s.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t,r=this,n=e.clone();r=0!==r.negative?r.umod(e):r.clone();for(var o=new s(1),a=new s(0),c=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var l=0,h=1;(r.words[0]&h)==0&&l<26;++l,h<<=1);if(l>0)for(r.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var u=0,d=1;(n.words[0]&d)==0&&u<26;++u,d<<=1);if(u>0)for(n.iushrn(u);u-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);r.cmp(n)>=0?(r.isub(n),o.isub(a)):(n.isub(r),a.isub(o))}return 0>(t=0===r.cmpn(1)?o:a).cmpn(0)&&t.iadd(e),t},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var s=t;t=r,r=s}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return(1&this.words[0])==0},s.prototype.isOdd=function(){return(1&this.words[0])==1},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var s=n,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),i(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return -1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return -1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return -1===this.cmpn(e)},s.prototype.lt=function(e){return -1===this.cmp(e)},s.prototype.lten=function(e){return 0>=this.cmpn(e)},s.prototype.lte=function(e){return 0>=this.cmp(e)},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new _(e)},s.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function I(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function A(e){_.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new s(null);return e.words=Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,r=e;do this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},n(w,b),w.prototype.split=function(e,t){for(var r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9){e.words[0]=0,e.length=1;return}var n=e.words[9];for(i=10,t.words[t.length++]=4194303&n;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,e.words[i-10]=n,0===n&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(v,b),n(E,b),n(I,b),I.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=(0|e.words[r])*19+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){var t;if(y[e])return y[e];if("k256"===e)t=new w;else if("p224"===e)t=new v;else if("p192"===e)t=new E;else if("p25519"===e)t=new I;else throw Error("Unknown prime "+e);return y[e]=t,t},_.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},_.prototype._verify2=function(e,t){i((e.negative|t.negative)==0,"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},_.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},_.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},_.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},_.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},_.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},_.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r},_.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},_.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},_.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},_.prototype.isqr=function(e){return this.imul(e,e.clone())},_.prototype.sqr=function(e){return this.mul(e,e)},_.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);i(!n.isZero());var a=new s(1).toRed(this),c=a.redNeg(),l=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new s(2*h*h).toRed(this);0!==this.pow(h,l).cmp(c);)h.redIAdd(c);for(var u=this.pow(h,n),d=this.pow(e,n.addn(1).iushrn(1)),f=this.pow(e,n),p=o;0!==f.cmp(a);){for(var g=f,m=0;0!==g.cmp(a);m++)g=g.redSqr();i(m<p);var y=this.pow(u,new s(1).iushln(p-m-1));d=d.redMul(y),u=y.redSqr(),f=f.redMul(u),p=m}return d},_.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},_.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var n=r[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var l=t.words[i],h=c-1;h>=0;h--){var u=l>>h&1;if(n!==r[0]&&(n=this.sqr(n)),0===u&&0===o){a=0;continue}o<<=1,o|=u,(4==++a||0===i&&0===h)&&(n=this.mul(n,r[o]),a=0,o=0)}c=26}return n},_.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},_.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new A(e)},n(A,_),A.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},A.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},A.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):0>n.cmpn(0)&&(s=n.iadd(this.m)),s._forceRed(this)},A.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):0>n.cmpn(0)&&(o=n.iadd(this.m)),o._forceRed(this)},A.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},55445:function(e){"use strict";var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise(function(r,i){var n;function s(r){e.removeListener(t,o),i(r)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",s),r([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&(n={once:!0},"function"==typeof e.on&&g(e,"error",s,n))})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,r,i){if(a(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),(n=c(e))>0&&o.length>n&&!o.warned){o.warned=!0;var n,s,o,l=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,console&&console.warn&&console.warn(l)}return e}function h(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=h.bind(i);return n.listener=r,i.wrapFn=n,n}function d(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):p(n,n.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=Array(t),i=0;i<t;++i)r[i]=e[i];return r}function g(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function n(s){i.once&&e.removeEventListener(t,n),r(s)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||n(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,a=Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else for(var l=c.length,h=p(c,l),r=0;r<l;++r)i(h[r],this,t);return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,u(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,u(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,i,n,s,o;if(a(t),void 0===(i=this._events)||void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var n,s=Object.keys(r);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},28714:function(e,t,r){t.utils=r(20015),t.common=r(49351),t.sha=r(87647),t.ripemd=r(47826),t.hmac=r(53765),t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160},49351:function(e,t,r){"use strict";var i=r(20015),n=r(73045);function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=s,s.prototype.update=function(e,t){if(e=i.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=i.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},s.prototype.digest=function(e){return this.update(this._pad()),n(null===this.pending),this._digest(e)},s.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=Array(r+this.padLength);i[0]=128;for(var n=1;n<r;n++)i[n]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)i[n++]=0;i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=e>>>24&255,i[n++]=e>>>16&255,i[n++]=e>>>8&255,i[n++]=255&e}else for(s=8,i[n++]=255&e,i[n++]=e>>>8&255,i[n++]=e>>>16&255,i[n++]=e>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0;s<this.padLength;s++)i[n++]=0;return i}},53765:function(e,t,r){"use strict";var i=r(20015),n=r(73045);function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(t,r))}e.exports=s,s.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),n(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(t=0,this.inner=new this.Hash().update(e);t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)},s.prototype.update=function(e,t){return this.inner.update(e,t),this},s.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},47826:function(e,t,r){"use strict";var i=r(20015),n=r(49351),s=i.rotl32,o=i.sum32,a=i.sum32_3,c=i.sum32_4,l=n.BlockHash;function h(){if(!(this instanceof h))return new h;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function u(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}i.inherits(h,l),t.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],n=this.h[2],l=this.h[3],h=this.h[4],m=r,y=i,b=n,w=l,v=h,E=0;E<80;E++){var I,_,A=o(s(c(r,u(E,i,n,l),e[d[E]+t],(I=E)<=15?0:I<=31?1518500249:I<=47?1859775393:I<=63?2400959708:2840853838),p[E]),h);r=h,h=l,l=s(n,10),n=i,i=A,A=o(s(c(m,u(79-E,y,b,w),e[f[E]+t],(_=E)<=15?1352829926:_<=31?1548603684:_<=47?1836072691:_<=63?2053994217:0),g[E]),v),m=v,v=w,w=s(b,10),b=y,y=A}A=a(this.h[1],n,w),this.h[1]=a(this.h[2],l,v),this.h[2]=a(this.h[3],h,m),this.h[3]=a(this.h[4],r,y),this.h[4]=a(this.h[0],i,b),this.h[0]=A},h.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},87647:function(e,t,r){"use strict";t.sha1=r(4684),t.sha224=r(45261),t.sha256=r(17795),t.sha384=r(84182),t.sha512=r(54358)},4684:function(e,t,r){"use strict";var i=r(20015),n=r(49351),s=r(31964),o=i.rotl32,a=i.sum32,c=i.sum32_5,l=s.ft_1,h=n.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=Array(80)}i.inherits(d,h),e.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=o(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var n=this.h[0],s=this.h[1],h=this.h[2],d=this.h[3],f=this.h[4];for(i=0;i<r.length;i++){var p=~~(i/20),g=c(o(n,5),l(p,s,h,d),f,r[i],u[p]);f=d,d=h,h=o(s,30),s=n,n=g}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],h),this.h[3]=a(this.h[3],d),this.h[4]=a(this.h[4],f)},d.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},45261:function(e,t,r){"use strict";var i=r(20015),n=r(17795);function s(){if(!(this instanceof s))return new s;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(s,n),e.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},17795:function(e,t,r){"use strict";var i=r(20015),n=r(49351),s=r(31964),o=r(73045),a=i.sum32,c=i.sum32_4,l=i.sum32_5,h=s.ch32,u=s.maj32,d=s.s0_256,f=s.s1_256,p=s.g0_256,g=s.g1_256,m=n.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=Array(64)}i.inherits(b,m),e.exports=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=c(g(r[i-2]),r[i-7],p(r[i-15]),r[i-16]);var n=this.h[0],s=this.h[1],m=this.h[2],y=this.h[3],b=this.h[4],w=this.h[5],v=this.h[6],E=this.h[7];for(o(this.k.length===r.length),i=0;i<r.length;i++){var I=l(E,f(b),h(b,w,v),this.k[i],r[i]),_=a(d(n),u(n,s,m));E=v,v=w,w=b,b=a(y,I),y=m,m=s,s=n,n=a(I,_)}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],m),this.h[3]=a(this.h[3],y),this.h[4]=a(this.h[4],b),this.h[5]=a(this.h[5],w),this.h[6]=a(this.h[6],v),this.h[7]=a(this.h[7],E)},b.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},84182:function(e,t,r){"use strict";var i=r(20015),n=r(54358);function s(){if(!(this instanceof s))return new s;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(s,n),e.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},54358:function(e,t,r){"use strict";var i=r(20015),n=r(49351),s=r(73045),o=i.rotr64_hi,a=i.rotr64_lo,c=i.shr64_hi,l=i.shr64_lo,h=i.sum64,u=i.sum64_hi,d=i.sum64_lo,f=i.sum64_4_hi,p=i.sum64_4_lo,g=i.sum64_5_hi,m=i.sum64_5_lo,y=n.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function w(){if(!(this instanceof w))return new w;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=Array(160)}i.inherits(w,y),e.exports=w,w.blockSize=1024,w.outSize=512,w.hmacStrength=192,w.padLength=128,w.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var n=function(e,t){var r=o(e,t,19)^o(t,e,29)^c(e,t,6);return r<0&&(r+=4294967296),r}(r[i-4],r[i-3]),s=function(e,t){var r=a(e,t,19)^a(t,e,29)^l(e,t,6);return r<0&&(r+=4294967296),r}(r[i-4],r[i-3]),h=r[i-14],u=r[i-13],d=function(e,t){var r=o(e,t,1)^o(e,t,8)^c(e,t,7);return r<0&&(r+=4294967296),r}(r[i-30],r[i-29]),g=function(e,t){var r=a(e,t,1)^a(e,t,8)^l(e,t,7);return r<0&&(r+=4294967296),r}(r[i-30],r[i-29]),m=r[i-32],y=r[i-31];r[i]=f(n,s,h,u,d,g,m,y),r[i+1]=p(n,s,h,u,d,g,m,y)}},w.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],n=this.h[1],c=this.h[2],l=this.h[3],f=this.h[4],p=this.h[5],y=this.h[6],b=this.h[7],w=this.h[8],v=this.h[9],E=this.h[10],I=this.h[11],_=this.h[12],A=this.h[13],S=this.h[14],C=this.h[15];s(this.k.length===r.length);for(var N=0;N<r.length;N+=2){var M=S,x=C,O=function(e,t){var r=o(e,t,14)^o(e,t,18)^o(t,e,9);return r<0&&(r+=4294967296),r}(w,v),P=function(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=4294967296),r}(w,v),T=function(e,t,r,i,n){var s=e&r^~e&n;return s<0&&(s+=4294967296),s}(w,0,E,0,_,A),R=function(e,t,r,i,n,s){var o=t&i^~t&s;return o<0&&(o+=4294967296),o}(0,v,0,I,0,A),D=this.k[N],k=this.k[N+1],L=r[N],j=r[N+1],U=g(M,x,O,P,T,R,D,k,L,j),B=m(M,x,O,P,T,R,D,k,L,j);M=function(e,t){var r=o(e,t,28)^o(t,e,2)^o(t,e,7);return r<0&&(r+=4294967296),r}(i,n);var z=u(M,x=function(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}(i,n),O=function(e,t,r,i,n){var s=e&r^e&n^r&n;return s<0&&(s+=4294967296),s}(i,0,c,0,f,p),P=function(e,t,r,i,n,s){var o=t&i^t&s^i&s;return o<0&&(o+=4294967296),o}(0,n,0,l,0,p)),$=d(M,x,O,P);S=_,C=A,_=E,A=I,E=w,I=v,w=u(y,b,U,B),v=d(b,b,U,B),y=f,b=p,f=c,p=l,c=i,l=n,i=u(U,B,z,$),n=d(U,B,z,$)}h(this.h,0,i,n),h(this.h,2,c,l),h(this.h,4,f,p),h(this.h,6,y,b),h(this.h,8,w,v),h(this.h,10,E,I),h(this.h,12,_,A),h(this.h,14,S,C)},w.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},31964:function(e,t,r){"use strict";var i=r(20015).rotr32;function n(e,t,r){return e&t^e&r^t&r}t.ft_1=function(e,t,r,i){return 0===e?t&r^~t&i:1===e||3===e?t^r^i:2===e?n(t,r,i):void 0},t.ch32=function(e,t,r){return e&t^~e&r},t.maj32=n,t.p32=function(e,t,r){return e^t^r},t.s0_256=function(e){return i(e,2)^i(e,13)^i(e,22)},t.s1_256=function(e){return i(e,6)^i(e,11)^i(e,25)},t.g0_256=function(e){return i(e,7)^i(e,18)^e>>>3},t.g1_256=function(e){return i(e,17)^i(e,19)^e>>>10}},20015:function(e,t,r){"use strict";var i=r(73045),n=r(56853);function s(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function o(e){return 1===e.length?"0"+e:e}function a(e){if(7===e.length)return"0"+e;if(6===e.length)return"00"+e;if(5===e.length)return"000"+e;if(4===e.length)return"0000"+e;if(3===e.length)return"00000"+e;if(2===e.length)return"000000"+e;if(1===e.length)return"0000000"+e;else return e}t.inherits=n,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e){if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/ig,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var i=0,n=0;n<e.length;n++){var s,o,a=e.charCodeAt(n);a<128?r[i++]=a:(a<2048?r[i++]=a>>6|192:((s=e,o=n,(64512&s.charCodeAt(o))!=55296||o<0||o+1>=s.length?1:(64512&s.charCodeAt(o+1))!=56320)?r[i++]=a>>12|224:(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++n)),r[i++]=a>>18|240,r[i++]=a>>12&63|128),r[i++]=a>>6&63|128),r[i++]=63&a|128)}}else for(n=0;n<e.length;n++)r[n]=0|e[n];return r},t.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=o(e[r].toString(16));return t},t.htonl=s,t.toHex32=function(e,t){for(var r="",i=0;i<e.length;i++){var n=e[i];"little"===t&&(n=s(n)),r+=a(n.toString(16))}return r},t.zero2=o,t.zero8=a,t.join32=function(e,t,r,n){var s,o=r-t;i(o%4==0);for(var a=Array(o/4),c=0,l=t;c<a.length;c++,l+=4)s="big"===n?e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3]:e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l],a[c]=s>>>0;return a},t.split32=function(e,t){for(var r=Array(4*e.length),i=0,n=0;i<e.length;i++,n+=4){var s=e[i];"big"===t?(r[n]=s>>>24,r[n+1]=s>>>16&255,r[n+2]=s>>>8&255,r[n+3]=255&s):(r[n+3]=s>>>24,r[n+2]=s>>>16&255,r[n+1]=s>>>8&255,r[n]=255&s)}return r},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,r){return e+t+r>>>0},t.sum32_4=function(e,t,r,i){return e+t+r+i>>>0},t.sum32_5=function(e,t,r,i,n){return e+t+r+i+n>>>0},t.sum64=function(e,t,r,i){var n=e[t],s=i+e[t+1]>>>0;e[t]=(s<i?1:0)+r+n>>>0,e[t+1]=s},t.sum64_hi=function(e,t,r,i){return(t+i>>>0<t?1:0)+e+r>>>0},t.sum64_lo=function(e,t,r,i){return t+i>>>0},t.sum64_4_hi=function(e,t,r,i,n,s,o,a){var c,l=t;return e+r+n+o+(0+((l=l+i>>>0)<t?1:0)+((l=l+s>>>0)<s?1:0)+((l=l+a>>>0)<a?1:0))>>>0},t.sum64_4_lo=function(e,t,r,i,n,s,o,a){return t+i+s+a>>>0},t.sum64_5_hi=function(e,t,r,i,n,s,o,a,c,l){var h,u=t;return e+r+n+o+c+(0+((u=u+i>>>0)<t?1:0)+((u=u+s>>>0)<s?1:0)+((u=u+a>>>0)<a?1:0)+((u=u+l>>>0)<l?1:0))>>>0},t.sum64_5_lo=function(e,t,r,i,n,s,o,a,c,l){return t+i+s+a+l>>>0},t.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},t.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},t.shr64_hi=function(e,t,r){return e>>>r},t.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}},28072:function(e,t,r){"use strict";var i=r(28714),n=r(83742),s=r(73045);function o(e){if(!(this instanceof o))return new o(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=n.toArray(e.entropy,e.entropyEnc||"hex"),r=n.toArray(e.nonce,e.nonceEnc||"hex"),i=n.toArray(e.pers,e.persEnc||"hex");s(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}e.exports=o,o.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},o.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(e,t,r,i){"string"!=typeof t&&(i=r,r=t,t=null),e=n.toArray(e,t),r=n.toArray(r,i),s(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},o.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof t&&(i=r,r=t,t=null),r&&(r=n.toArray(r,i||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(r),this._reseed++,n.encode(o,t)}},68848:function(e,t){t.read=function(e,t,r,i,n){var s,o,a=8*n-i-1,c=(1<<a)-1,l=c>>1,h=-7,u=r?n-1:0,d=r?-1:1,f=e[t+u];for(u+=d,s=f&(1<<-h)-1,f>>=-h,h+=a;h>0;s=256*s+e[t+u],u+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=i;h>0;o=256*o+e[t+u],u+=d,h-=8);if(0===s)s=1-l;else{if(s===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),s-=l}return(f?-1:1)*o*Math.pow(2,s-i)},t.write=function(e,t,r,i,n,s){var o,a,c,l=8*s-n-1,h=(1<<l)-1,u=h>>1,d=23===n?5960464477539062e-23:0,f=i?0:s-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+u>=1?t+=d/c:t+=d*Math.pow(2,1-u),t*c>=2&&(o++,c/=2),o+u>=h?(a=0,o=h):o+u>=1?(a=(t*c-1)*Math.pow(2,n),o+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,n),o=0));n>=8;e[r+f]=255&a,f+=p,a/=256,n-=8);for(o=o<<n|a,l+=n;l>0;e[r+f]=255&o,f+=p,o/=256,l-=8);e[r+f-p]|=128*g}},56853:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},69983:function(e,t,r){"use strict";let i=r(43763).v4,n=r(40789),s=function(e,t){if(!(this instanceof s))return new s(e,t);t||(t={}),this.options={reviver:void 0!==t.reviver?t.reviver:null,replacer:void 0!==t.replacer?t.replacer:null,generator:void 0!==t.generator?t.generator:function(){return i()},version:void 0!==t.version?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};e.exports=s,s.prototype.request=function(e,t,r,i){let s;let o=this,a=null,c=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&c)throw TypeError("JSON-RPC 1.0 does not support batching");let l=!c&&e&&"object"==typeof e&&"function"==typeof t;if(c||l)i=t,a=e;else{"function"==typeof r&&(i=r,r=void 0);let s="function"==typeof i;try{a=n(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(e){if(s){i(e);return}throw e}if(!s)return a}try{s=JSON.stringify(a,this.options.replacer)}catch(e){i(e);return}return this.callServer(s,function(e,t){o._parseResponse(e,t,i)}),a},s.prototype._parseResponse=function(e,t,r){let i;if(e){r(e);return}if(!t){r();return}try{i=JSON.parse(t,this.options.reviver)}catch(e){r(e);return}if(3===r.length){if(Array.isArray(i)){let e=function(e){return void 0!==e.error};r(null,i.filter(e),i.filter(function(t){return!e(t)}));return}r(null,i.error,i.result);return}r(null,i)}},40789:function(e,t,r){"use strict";let i=r(43763).v4;e.exports=function(e,t,r,n){if("string"!=typeof e)throw TypeError(e+" must be a string");let s="number"==typeof(n=n||{}).version?n.version:2;if(1!==s&&2!==s)throw TypeError(s+" must be 1 or 2");let o={method:e};if(2===s&&(o.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw TypeError(t+" must be an object, array or omitted");o.params=t}if(void 0===r){let e="function"==typeof n.generator?n.generator:function(){return i()};o.id=e(o,n)}else 2===s&&null===r?n.notificationIdNull&&(o.id=null):o.id=r;return o}},15586:function(e,t,r){e=r.nmd(e);var i,n,s,o="__lodash_hash_undefined__",a="[object Arguments]",c="[object Array]",l="[object Boolean]",h="[object Date]",u="[object Error]",d="[object Function]",f="[object Map]",p="[object Number]",g="[object Object]",m="[object Promise]",y="[object RegExp]",b="[object Set]",w="[object String]",v="[object WeakMap]",E="[object ArrayBuffer]",I="[object DataView]",_=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[a]=S[c]=S[E]=S[l]=S[I]=S[h]=S[u]=S[d]=S[f]=S[p]=S[g]=S[y]=S[b]=S[w]=S[v]=!1;var C="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,N="object"==typeof self&&self&&self.Object===Object&&self,M=C||N||Function("return this")(),x=t&&!t.nodeType&&t,O=x&&e&&!e.nodeType&&e,P=O&&O.exports===x,T=P&&C.process,R=function(){try{return T&&T.binding&&T.binding("util")}catch(e){}}(),D=R&&R.isTypedArray;function k(e){var t=-1,r=Array(e.size);return e.forEach(function(e,i){r[++t]=[i,e]}),r}function L(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var j=Array.prototype,U=Function.prototype,B=Object.prototype,z=M["__core-js_shared__"],$=U.toString,q=B.hasOwnProperty,F=(i=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",H=B.toString,W=RegExp("^"+$.call(q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=P?M.Buffer:void 0,K=M.Symbol,Y=M.Uint8Array,J=B.propertyIsEnumerable,G=j.splice,Z=K?K.toStringTag:void 0,Q=Object.getOwnPropertySymbols,X=V?V.isBuffer:void 0,ee=(n=Object.keys,s=Object,function(e){return n(s(e))}),et=eS(M,"DataView"),er=eS(M,"Map"),ei=eS(M,"Promise"),en=eS(M,"Set"),es=eS(M,"WeakMap"),eo=eS(Object,"create"),ea=eM(et),ec=eM(er),el=eM(ei),eh=eM(en),eu=eM(es),ed=K?K.prototype:void 0,ef=ed?ed.valueOf:void 0;function ep(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function eg(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function em(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function ey(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new em;++t<r;)this.add(e[t])}function eb(e){var t=this.__data__=new eg(e);this.size=t.size}function ew(e,t){for(var r=e.length;r--;)if(ex(e[r][0],t))return r;return -1}function ev(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Z&&Z in Object(e)?function(e){var t=q.call(e,Z),r=e[Z];try{e[Z]=void 0;var i=!0}catch(e){}var n=H.call(e);return i&&(t?e[Z]=r:delete e[Z]),n}(e):H.call(e)}function eE(e){return eL(e)&&ev(e)==a}function eI(e,t,r,i,n,s){var o=1&r,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var l=s.get(e);if(l&&s.get(t))return l==t;var h=-1,u=!0,d=2&r?new ey:void 0;for(s.set(e,t),s.set(t,e);++h<a;){var f=e[h],p=t[h];if(i)var g=o?i(p,f,h,t,e,s):i(f,p,h,e,t,s);if(void 0!==g){if(g)continue;u=!1;break}if(d){if(!function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}(t,function(e,t){if(!d.has(t)&&(f===e||n(f,e,r,i,s)))return d.push(t)})){u=!1;break}}else if(!(f===p||n(f,p,r,i,s))){u=!1;break}}return s.delete(e),s.delete(t),u}function e_(e){var t;return t=function(e){return null!=e&&eD(e.length)&&!eR(e)?function(e,t){var r,i=eP(e),n=!i&&eO(e),s=!i&&!n&&eT(e),o=!i&&!n&&!s&&ej(e),a=i||n||s||o,c=a?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],l=c.length;for(var h in e)q.call(e,h)&&!(a&&("length"==h||s&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||(r=null==(r=l)?9007199254740991:r)&&("number"==typeof h||A.test(h))&&h>-1&&h%1==0&&h<r))&&c.push(h);return c}(e):function(e){if(t=e&&e.constructor,e!==("function"==typeof t&&t.prototype||B))return ee(e);var t,r=[];for(var i in Object(e))q.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e)}(e),eP(e)?t:function(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}(t,eC(e))}function eA(e,t){var r,i=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?i["string"==typeof t?"string":"hash"]:i.map}function eS(e,t){var r=null==e?void 0:e[t];return!(!ek(r)||F&&F in r)&&(eR(r)?W:_).test(eM(r))?r:void 0}ep.prototype.clear=function(){this.__data__=eo?eo(null):{},this.size=0},ep.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ep.prototype.get=function(e){var t=this.__data__;if(eo){var r=t[e];return r===o?void 0:r}return q.call(t,e)?t[e]:void 0},ep.prototype.has=function(e){var t=this.__data__;return eo?void 0!==t[e]:q.call(t,e)},ep.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=eo&&void 0===t?o:t,this},eg.prototype.clear=function(){this.__data__=[],this.size=0},eg.prototype.delete=function(e){var t=this.__data__,r=ew(t,e);return!(r<0)&&(r==t.length-1?t.pop():G.call(t,r,1),--this.size,!0)},eg.prototype.get=function(e){var t=this.__data__,r=ew(t,e);return r<0?void 0:t[r][1]},eg.prototype.has=function(e){return ew(this.__data__,e)>-1},eg.prototype.set=function(e,t){var r=this.__data__,i=ew(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this},em.prototype.clear=function(){this.size=0,this.__data__={hash:new ep,map:new(er||eg),string:new ep}},em.prototype.delete=function(e){var t=eA(this,e).delete(e);return this.size-=t?1:0,t},em.prototype.get=function(e){return eA(this,e).get(e)},em.prototype.has=function(e){return eA(this,e).has(e)},em.prototype.set=function(e,t){var r=eA(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this},ey.prototype.add=ey.prototype.push=function(e){return this.__data__.set(e,o),this},ey.prototype.has=function(e){return this.__data__.has(e)},eb.prototype.clear=function(){this.__data__=new eg,this.size=0},eb.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},eb.prototype.get=function(e){return this.__data__.get(e)},eb.prototype.has=function(e){return this.__data__.has(e)},eb.prototype.set=function(e,t){var r=this.__data__;if(r instanceof eg){var i=r.__data__;if(!er||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new em(i)}return r.set(e,t),this.size=r.size,this};var eC=Q?function(e){return null==e?[]:function(e,t){for(var r=-1,i=null==e?0:e.length,n=0,s=[];++r<i;){var o=e[r];t(o,r,e)&&(s[n++]=o)}return s}(Q(e=Object(e)),function(t){return J.call(e,t)})}:function(){return[]},eN=ev;function eM(e){if(null!=e){try{return $.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ex(e,t){return e===t||e!=e&&t!=t}(et&&eN(new et(new ArrayBuffer(1)))!=I||er&&eN(new er)!=f||ei&&eN(ei.resolve())!=m||en&&eN(new en)!=b||es&&eN(new es)!=v)&&(eN=function(e){var t=ev(e),r=t==g?e.constructor:void 0,i=r?eM(r):"";if(i)switch(i){case ea:return I;case ec:return f;case el:return m;case eh:return b;case eu:return v}return t});var eO=eE(function(){return arguments}())?eE:function(e){return eL(e)&&q.call(e,"callee")&&!J.call(e,"callee")},eP=Array.isArray,eT=X||function(){return!1};function eR(e){if(!ek(e))return!1;var t=ev(e);return t==d||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eD(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function ek(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eL(e){return null!=e&&"object"==typeof e}var ej=D?function(e){return D(e)}:function(e){return eL(e)&&eD(e.length)&&!!S[ev(e)]};e.exports=function(e,t){return function e(t,r,i,n,s){return t===r||(null!=t&&null!=r&&(eL(t)||eL(r))?function(e,t,r,i,n,s){var o=eP(e),d=eP(t),m=o?c:eN(e),v=d?c:eN(t);m=m==a?g:m,v=v==a?g:v;var _=m==g,A=v==g,S=m==v;if(S&&eT(e)){if(!eT(t))return!1;o=!0,_=!1}if(S&&!_)return s||(s=new eb),o||ej(e)?eI(e,t,r,i,n,s):function(e,t,r,i,n,s,o){switch(r){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case E:if(e.byteLength!=t.byteLength||!s(new Y(e),new Y(t)))break;return!0;case l:case h:case p:return ex(+e,+t);case u:return e.name==t.name&&e.message==t.message;case y:case w:return e==t+"";case f:var a=k;case b:var c=1&i;if(a||(a=L),e.size!=t.size&&!c)break;var d=o.get(e);if(d)return d==t;i|=2,o.set(e,t);var g=eI(a(e),a(t),i,n,s,o);return o.delete(e),g;case"[object Symbol]":if(ef)return ef.call(e)==ef.call(t)}return!1}(e,t,m,r,i,n,s);if(!(1&r)){var C=_&&q.call(e,"__wrapped__"),N=A&&q.call(t,"__wrapped__");if(C||N){var M=C?e.value():e,x=N?t.value():t;return s||(s=new eb),n(M,x,r,i,s)}}return!!S&&(s||(s=new eb),function(e,t,r,i,n,s){var o=1&r,a=e_(e),c=a.length;if(c!=e_(t).length&&!o)return!1;for(var l=c;l--;){var h=a[l];if(!(o?h in t:q.call(t,h)))return!1}var u=s.get(e);if(u&&s.get(t))return u==t;var d=!0;s.set(e,t),s.set(t,e);for(var f=o;++l<c;){var p=e[h=a[l]],g=t[h];if(i)var m=o?i(g,p,h,t,e,s):i(p,g,h,e,t,s);if(!(void 0===m?p===g||n(p,g,r,i,s):m)){d=!1;break}f||(f="constructor"==h)}if(d&&!f){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(d=!1)}return s.delete(e),s.delete(t),d}(e,t,r,i,n,s))}(t,r,i,n,e,s):t!=t&&r!=r)}(e,t)}},73045:function(e){function t(e,t){if(!e)throw Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,r){if(e!=t)throw Error(r||"Assertion failed: "+e+" != "+t)}},83742:function(e,t){"use strict";function r(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",i=0;i<e.length;i++)t+=r(e[i].toString(16));return t}t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var i=0;i<e.length;i++)r[i]=0|e[i];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/ig,"")).length%2!=0&&(e="0"+e);for(var i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var i=0;i<e.length;i++){var n=e.charCodeAt(i),s=n>>8,o=255&n;s?r.push(s,o):r.push(o)}return r},t.zero2=r,t.toHex=i,t.encode=function(e,t){return"hex"===t?i(e):e}},35819:function(e,t,r){let i=r(64888),n=r(82216),s=r(962),o=r(35623);function a(e,t,r,s,o){let a=[].slice.call(arguments,1),c=a.length,l="function"==typeof a[c-1];if(!l&&!i())throw Error("Callback required as last argument");if(l){if(c<2)throw Error("Too few arguments provided");2===c?(o=r,r=t,t=s=void 0):3===c&&(t.getContext&&void 0===o?(o=s,s=void 0):(o=s,s=r,r=t,t=void 0))}else{if(c<1)throw Error("Too few arguments provided");return 1===c?(r=t,t=s=void 0):2!==c||t.getContext||(s=r,r=t,t=void 0),new Promise(function(i,o){try{let o=n.create(r,s);i(e(o,t,s))}catch(e){o(e)}})}try{let i=n.create(r,s);o(null,e(i,t,s))}catch(e){o(e)}}t.create=n.create,t.toCanvas=a.bind(null,s.render),t.toDataURL=a.bind(null,s.renderToDataURL),t.toString=a.bind(null,function(e,t,r){return o.render(e,r)})},64888:function(e){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},14691:function(e,t,r){let i=r(62415).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];let t=Math.floor(e/7)+2,r=i(e),n=145===r?26:2*Math.ceil((r-13)/(2*t-2)),s=[r-7];for(let e=1;e<t-1;e++)s[e]=s[e-1]-n;return s.push(6),s.reverse()},t.getPositions=function(e){let r=[],i=t.getRowColCoords(e),n=i.length;for(let e=0;e<n;e++)for(let t=0;t<n;t++)(0!==e||0!==t)&&(0!==e||t!==n-1)&&(e!==n-1||0!==t)&&r.push([i[e],i[t]]);return r}},87111:function(e,t,r){let i=r(17956),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(e){this.mode=i.ALPHANUMERIC,this.data=e}s.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=45*n.indexOf(this.data[t]);r+=n.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(n.indexOf(this.data[t]),6)},e.exports=s},9298:function(e){function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){return(this.buffer[Math.floor(e/8)]>>>7-e%8&1)==1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},55526:function(e){function t(e){if(!e||e<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,r,i){let n=e*this.size+t;this.data[n]=r,i&&(this.reservedBit[n]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},48153:function(e,t,r){let i=r(17956);function n(e){this.mode=i.BYTE,"string"==typeof e?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}n.getBitsLength=function(e){return 8*e},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)},e.exports=n},79386:function(e,t,r){let i=r(29947),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case i.L:return n[(e-1)*4+0];case i.M:return n[(e-1)*4+1];case i.Q:return n[(e-1)*4+2];case i.H:return n[(e-1)*4+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case i.L:return s[(e-1)*4+0];case i.M:return s[(e-1)*4+1];case i.Q:return s[(e-1)*4+2];case i.H:return s[(e-1)*4+3];default:return}}},29947:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw Error("Unknown EC Level: "+e)}}(e)}catch(e){return r}}},44086:function(e,t,r){let i=r(62415).getSymbolSize;t.getPositions=function(e){let t=i(e);return[[0,0],[t-7,0],[0,t-7]]}},27433:function(e,t,r){let i=r(62415),n=i.getBCHDigit(1335);t.getEncodedBits=function(e,t){let r=e.bit<<3|t,s=r<<10;for(;i.getBCHDigit(s)-n>=0;)s^=1335<<i.getBCHDigit(s)-n;return(r<<10|s)^21522}},63384:function(e,t){let r=new Uint8Array(512),i=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)r[t]=e,i[e]=t,256&(e<<=1)&&(e^=285);for(let e=255;e<512;e++)r[e]=r[e-255]}(),t.log=function(e){if(e<1)throw Error("log("+e+")");return i[e]},t.exp=function(e){return r[e]},t.mul=function(e,t){return 0===e||0===t?0:r[i[e]+i[t]]}},78514:function(e,t,r){let i=r(17956),n=r(62415);function s(e){this.mode=i.KANJI,this.data=e}s.getBitsLength=function(e){return 13*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=n.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");r=(r>>>8&255)*192+(255&r),e.put(r,13)}},e.exports=s},24483:function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};let r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){let t=e.size,i=0,n=0,s=0,o=null,a=null;for(let c=0;c<t;c++){n=s=0,o=a=null;for(let l=0;l<t;l++){let t=e.get(c,l);t===o?n++:(n>=5&&(i+=r.N1+(n-5)),o=t,n=1),(t=e.get(l,c))===a?s++:(s>=5&&(i+=r.N1+(s-5)),a=t,s=1)}n>=5&&(i+=r.N1+(n-5)),s>=5&&(i+=r.N1+(s-5))}return i},t.getPenaltyN2=function(e){let t=e.size,i=0;for(let r=0;r<t-1;r++)for(let n=0;n<t-1;n++){let t=e.get(r,n)+e.get(r,n+1)+e.get(r+1,n)+e.get(r+1,n+1);(4===t||0===t)&&i++}return i*r.N2},t.getPenaltyN3=function(e){let t=e.size,i=0,n=0,s=0;for(let r=0;r<t;r++){n=s=0;for(let o=0;o<t;o++)n=n<<1&2047|e.get(r,o),o>=10&&(1488===n||93===n)&&i++,s=s<<1&2047|e.get(o,r),o>=10&&(1488===s||93===s)&&i++}return i*r.N3},t.getPenaltyN4=function(e){let t=0,i=e.data.length;for(let r=0;r<i;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/i/5)-10)*r.N4},t.applyMask=function(e,r){let i=r.size;for(let n=0;n<i;n++)for(let s=0;s<i;s++)r.isReserved(s,n)||r.xor(s,n,function(e,r,i){switch(e){case t.Patterns.PATTERN000:return(r+i)%2==0;case t.Patterns.PATTERN001:return r%2==0;case t.Patterns.PATTERN010:return i%3==0;case t.Patterns.PATTERN011:return(r+i)%3==0;case t.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(i/3))%2==0;case t.Patterns.PATTERN101:return r*i%2+r*i%3==0;case t.Patterns.PATTERN110:return(r*i%2+r*i%3)%2==0;case t.Patterns.PATTERN111:return(r*i%3+(r+i)%2)%2==0;default:throw Error("bad maskPattern:"+e)}}(e,s,n))},t.getBestMask=function(e,r){let i=Object.keys(t.Patterns).length,n=0,s=1/0;for(let o=0;o<i;o++){r(o),t.applyMask(o,e);let i=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),i<s&&(s=i,n=o)}return n}},17956:function(e,t,r){let i=r(96623),n=r(80581);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw Error("Invalid mode: "+e);if(!i.isValid(t))throw Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return n.testNumeric(e)?t.NUMERIC:n.testAlphanumeric(e)?t.ALPHANUMERIC:n.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw Error("Unknown mode: "+e)}}(e)}catch(e){return r}}},51687:function(e,t,r){let i=r(17956);function n(e){this.mode=i.NUMERIC,this.data=e.toString()}n.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let t,r;for(t=0;t+3<=this.data.length;t+=3)r=parseInt(this.data.substr(t,3),10),e.put(r,10);let i=this.data.length-t;i>0&&(r=parseInt(this.data.substr(t),10),e.put(r,3*i+1))},e.exports=n},46413:function(e,t,r){let i=r(63384);t.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let n=0;n<e.length;n++)for(let s=0;s<t.length;s++)r[n+s]^=i.mul(e[n],t[s]);return r},t.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let e=r[0];for(let n=0;n<t.length;n++)r[n]^=i.mul(t[n],e);let n=0;for(;n<r.length&&0===r[n];)n++;r=r.slice(n)}return r},t.generateECPolynomial=function(e){let r=new Uint8Array([1]);for(let n=0;n<e;n++)r=t.mul(r,new Uint8Array([1,i.exp(n)]));return r}},82216:function(e,t,r){let i=r(62415),n=r(29947),s=r(9298),o=r(55526),a=r(14691),c=r(44086),l=r(24483),h=r(79386),u=r(24011),d=r(33379),f=r(27433),p=r(17956),g=r(89940);function m(e,t,r){let i,n;let s=e.size,o=f.getEncodedBits(t,r);for(i=0;i<15;i++)n=(o>>i&1)==1,i<6?e.set(i,8,n,!0):i<8?e.set(i+1,8,n,!0):e.set(s-15+i,8,n,!0),i<8?e.set(8,s-i-1,n,!0):i<9?e.set(8,15-i-1+1,n,!0):e.set(8,15-i-1,n,!0);e.set(s-8,8,1,!0)}t.create=function(e,t){let r,f;if(void 0===e||""===e)throw Error("No input text");let y=n.M;return void 0!==t&&(y=n.from(t.errorCorrectionLevel,n.M),r=d.from(t.version),f=l.from(t.maskPattern),t.toSJISFunc&&i.setToSJISFunction(t.toSJISFunc)),function(e,t,r,n){let f;if(Array.isArray(e))f=g.fromArray(e);else if("string"==typeof e){let i=t;if(!i){let t=g.rawSplit(e);i=d.getBestVersionForData(t,r)}f=g.fromString(e,i||40)}else throw Error("Invalid data");let y=d.getBestVersionForData(f,r);if(!y)throw Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<y)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+y+".\n")}else t=y;let b=function(e,t,r){let n=new s;r.forEach(function(t){n.put(t.mode.bit,4),n.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(n)});let o=(i.getSymbolTotalCodewords(e)-h.getTotalCodewordsCount(e,t))*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(0);let a=(o-n.getLengthInBits())/8;for(let e=0;e<a;e++)n.put(e%2?17:236,8);return function(e,t,r){let n,s;let o=i.getSymbolTotalCodewords(t),a=o-h.getTotalCodewordsCount(t,r),c=h.getBlocksCount(t,r),l=o%c,d=c-l,f=Math.floor(o/c),p=Math.floor(a/c),g=p+1,m=f-p,y=new u(m),b=0,w=Array(c),v=Array(c),E=0,I=new Uint8Array(e.buffer);for(let e=0;e<c;e++){let t=e<d?p:g;w[e]=I.slice(b,b+t),v[e]=y.encode(w[e]),b+=t,E=Math.max(E,t)}let _=new Uint8Array(o),A=0;for(n=0;n<E;n++)for(s=0;s<c;s++)n<w[s].length&&(_[A++]=w[s][n]);for(n=0;n<m;n++)for(s=0;s<c;s++)_[A++]=v[s][n];return _}(n,e,t)}(t,r,f),w=new o(i.getSymbolSize(t));return function(e,t){let r=e.size,i=c.getPositions(t);for(let t=0;t<i.length;t++){let n=i[t][0],s=i[t][1];for(let t=-1;t<=7;t++)if(!(n+t<=-1)&&!(r<=n+t))for(let i=-1;i<=7;i++)s+i<=-1||r<=s+i||(t>=0&&t<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===t||6===t)||t>=2&&t<=4&&i>=2&&i<=4?e.set(n+t,s+i,!0,!0):e.set(n+t,s+i,!1,!0))}}(w,t),function(e){let t=e.size;for(let r=8;r<t-8;r++){let t=r%2==0;e.set(r,6,t,!0),e.set(6,r,t,!0)}}(w),function(e,t){let r=a.getPositions(t);for(let t=0;t<r.length;t++){let i=r[t][0],n=r[t][1];for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)-2===t||2===t||-2===r||2===r||0===t&&0===r?e.set(i+t,n+r,!0,!0):e.set(i+t,n+r,!1,!0)}}(w,t),m(w,r,0),t>=7&&function(e,t){let r,i,n;let s=e.size,o=d.getEncodedBits(t);for(let t=0;t<18;t++)r=Math.floor(t/3),i=t%3+s-8-3,n=(o>>t&1)==1,e.set(r,i,n,!0),e.set(i,r,n,!0)}(w,t),function(e,t){let r=e.size,i=-1,n=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(6===a&&a--;;){for(let r=0;r<2;r++)if(!e.isReserved(n,a-r)){let i=!1;o<t.length&&(i=(t[o]>>>s&1)==1),e.set(n,a-r,i),-1==--s&&(o++,s=7)}if((n+=i)<0||r<=n){n-=i,i=-i;break}}}(w,b),isNaN(n)&&(n=l.getBestMask(w,m.bind(null,w,r))),l.applyMask(n,w),m(w,r,n),{modules:w,version:t,errorCorrectionLevel:r,maskPattern:n,segments:f}}(e,r,y,f)}},24011:function(e,t,r){let i=r(46413);function n(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}n.prototype.initialize=function(e){this.degree=e,this.genPoly=i.generateECPolynomial(this.degree)},n.prototype.encode=function(e){if(!this.genPoly)throw Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=i.mod(t,this.genPoly),n=this.degree-r.length;if(n>0){let e=new Uint8Array(this.degree);return e.set(r,n),e}return r},e.exports=n},80581:function(e,t){let r="[0-9]+",i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",n="(?:(?![A-Z0-9 $%*+\\-./:]|"+(i=i.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=RegExp(i,"g"),t.BYTE_KANJI=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=RegExp(n,"g"),t.NUMERIC=RegExp(r,"g"),t.ALPHANUMERIC=RegExp("[A-Z $%*+\\-./:]+","g");let s=RegExp("^"+i+"$"),o=RegExp("^"+r+"$"),a=RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return s.test(e)},t.testNumeric=function(e){return o.test(e)},t.testAlphanumeric=function(e){return a.test(e)}},89940:function(e,t,r){let i=r(17956),n=r(51687),s=r(87111),o=r(48153),a=r(78514),c=r(80581),l=r(62415),h=r(46946);function u(e){return unescape(encodeURIComponent(e)).length}function d(e,t,r){let i;let n=[];for(;null!==(i=e.exec(r));)n.push({data:i[0],index:i.index,mode:t,length:i[0].length});return n}function f(e){let t,r;let n=d(c.NUMERIC,i.NUMERIC,e),s=d(c.ALPHANUMERIC,i.ALPHANUMERIC,e);return l.isKanjiModeEnabled()?(t=d(c.BYTE,i.BYTE,e),r=d(c.KANJI,i.KANJI,e)):(t=d(c.BYTE_KANJI,i.BYTE,e),r=[]),n.concat(s,t,r).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function p(e,t){switch(t){case i.NUMERIC:return n.getBitsLength(e);case i.ALPHANUMERIC:return s.getBitsLength(e);case i.KANJI:return a.getBitsLength(e);case i.BYTE:return o.getBitsLength(e)}}function g(e,t){let r;let c=i.getBestModeForData(e);if((r=i.from(t,c))!==i.BYTE&&r.bit<c.bit)throw Error('"'+e+'" cannot be encoded with mode '+i.toString(r)+".\n Suggested mode is: "+i.toString(c));switch(r!==i.KANJI||l.isKanjiModeEnabled()||(r=i.BYTE),r){case i.NUMERIC:return new n(e);case i.ALPHANUMERIC:return new s(e);case i.KANJI:return new a(e);case i.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(g(t,null)):t.data&&e.push(g(t.data,t.mode)),e},[])},t.fromString=function(e,r){let n=function(e,t){let r={},n={start:{}},s=["start"];for(let o=0;o<e.length;o++){let a=e[o],c=[];for(let e=0;e<a.length;e++){let l=a[e],h=""+o+e;c.push(h),r[h]={node:l,lastCount:0},n[h]={};for(let e=0;e<s.length;e++){let o=s[e];r[o]&&r[o].node.mode===l.mode?(n[o][h]=p(r[o].lastCount+l.length,l.mode)-p(r[o].lastCount,l.mode),r[o].lastCount+=l.length):(r[o]&&(r[o].lastCount=l.length),n[o][h]=p(l.length,l.mode)+4+i.getCharCountIndicator(l.mode,t))}}s=c}for(let e=0;e<s.length;e++)n[s[e]].end=0;return{map:n,table:r}}(function(e){let t=[];for(let r=0;r<e.length;r++){let n=e[r];switch(n.mode){case i.NUMERIC:t.push([n,{data:n.data,mode:i.ALPHANUMERIC,length:n.length},{data:n.data,mode:i.BYTE,length:n.length}]);break;case i.ALPHANUMERIC:t.push([n,{data:n.data,mode:i.BYTE,length:n.length}]);break;case i.KANJI:t.push([n,{data:n.data,mode:i.BYTE,length:u(n.data)}]);break;case i.BYTE:t.push([{data:n.data,mode:i.BYTE,length:u(n.data)}])}}return t}(f(e,l.isKanjiModeEnabled())),r),s=h.find_path(n.map,"start","end"),o=[];for(let e=1;e<s.length-1;e++)o.push(n.table[s[e]].node);return t.fromArray(o.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},t.rawSplit=function(e){return t.fromArray(f(e,l.isKanjiModeEnabled()))}},62415:function(e,t){let r;let i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw Error('"version" cannot be null or undefined');if(e<1||e>40)throw Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return i[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');r=e},t.isKanjiModeEnabled=function(){return void 0!==r},t.toSJIS=function(e){return r(e)}},96623:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},33379:function(e,t,r){let i=r(62415),n=r(79386),s=r(29947),o=r(17956),a=r(96623),c=i.getBCHDigit(7973);function l(e,t){return o.getCharCountIndicator(e,t)+4}t.from=function(e,t){return a.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,r){if(!a.isValid(e))throw Error("Invalid QR Code version");void 0===r&&(r=o.BYTE);let s=(i.getSymbolTotalCodewords(e)-n.getTotalCodewordsCount(e,t))*8;if(r===o.MIXED)return s;let c=s-l(r,e);switch(r){case o.NUMERIC:return Math.floor(c/10*3);case o.ALPHANUMERIC:return Math.floor(c/11*2);case o.KANJI:return Math.floor(c/13);case o.BYTE:default:return Math.floor(c/8)}},t.getBestVersionForData=function(e,r){let i;let n=s.from(r,s.M);if(Array.isArray(e)){if(e.length>1)return function(e,r){for(let i=1;i<=40;i++)if(function(e,t){let r=0;return e.forEach(function(e){let i=l(e.mode,t);r+=i+e.getBitsLength()}),r}(e,i)<=t.getCapacity(i,r,o.MIXED))return i}(e,n);if(0===e.length)return 1;i=e[0]}else i=e;return function(e,r,i){for(let n=1;n<=40;n++)if(r<=t.getCapacity(n,i,e))return n}(i.mode,i.getLength(),n)},t.getEncodedBits=function(e){if(!a.isValid(e)||e<7)throw Error("Invalid QR Code version");let t=e<<12;for(;i.getBCHDigit(t)-c>=0;)t^=7973<<i.getBCHDigit(t)-c;return e<<12|t}},962:function(e,t,r){let i=r(87220);t.render=function(e,t,r){var n;let s=r,o=t;void 0!==s||t&&t.getContext||(s=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw Error("You need to specify a canvas element")}}()),s=i.getOptions(s);let a=i.getImageWidth(e.modules.size,s),c=o.getContext("2d"),l=c.createImageData(a,a);return i.qrToImageData(l.data,e,s),n=o,c.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=a,n.width=a,n.style.height=a+"px",n.style.width=a+"px",c.putImageData(l,0,0),o},t.renderToDataURL=function(e,r,i){let n=i;void 0!==n||r&&r.getContext||(n=r,r=void 0),n||(n={});let s=t.render(e,r,n),o=n.type||"image/png",a=n.rendererOpts||{};return s.toDataURL(o,a.quality)}},35623:function(e,t,r){let i=r(87220);function n(e,t){let r=e.a/255,i=t+'="'+e.hex+'"';return r<1?i+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':i}function s(e,t,r){let i=e+t;return void 0!==r&&(i+=" "+r),i}t.render=function(e,t,r){let o=i.getOptions(t),a=e.modules.size,c=e.modules.data,l=a+2*o.margin,h=o.color.light.a?"<path "+n(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+n(o.color.dark,"stroke")+' d="'+function(e,t,r){let i="",n=0,o=!1,a=0;for(let c=0;c<e.length;c++){let l=Math.floor(c%t),h=Math.floor(c/t);l||o||(o=!0),e[c]?(a++,c>0&&l>0&&e[c-1]||(i+=o?s("M",l+r,.5+h+r):s("m",n,0),n=0,o=!1),l+1<t&&e[c+1]||(i+=s("h",a),a=0)):n++}return i}(c,a,o.margin)+'"/>',d='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+('viewBox="0 0 '+l)+" "+l+'" shape-rendering="crispEdges">'+h+u+"</svg>\n";return"function"==typeof r&&r(null,d),d}},87220:function(e,t){function r(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw Error("Invalid hex color: "+e);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");let r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,i=e.width&&e.width>=21?e.width:void 0,n=e.scale||4;return{width:i,scale:i?4:n,margin:t,color:{dark:r(e.color.dark||"#000000ff"),light:r(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,r){let i=t.getScale(e,r);return Math.floor((e+2*r.margin)*i)},t.qrToImageData=function(e,r,i){let n=r.modules.size,s=r.modules.data,o=t.getScale(n,i),a=Math.floor((n+2*i.margin)*o),c=i.margin*o,l=[i.color.light,i.color.dark];for(let t=0;t<a;t++)for(let r=0;r<a;r++){let h=(t*a+r)*4,u=i.color.light;t>=c&&r>=c&&t<a-c&&r<a-c&&(u=l[s[Math.floor((t-c)/o)*n+Math.floor((r-c)/o)]?1:0]),e[h++]=u.r,e[h++]=u.g,e[h++]=u.b,e[h]=u.a}}},95172:function(e){"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,i){var n=i&&i.stringify||t;if("object"==typeof e&&null!==e){var s=r.length+1;if(1===s)return e;var o=Array(s);o[0]=n(e);for(var a=1;a<s;a++)o[a]=n(r[a]);return o.join(" ")}if("string"!=typeof e)return e;var c=r.length;if(0===c)return e;for(var l="",h=0,u=-1,d=e&&e.length||0,f=0;f<d;){if(37===e.charCodeAt(f)&&f+1<d){switch(u=u>-1?u:0,e.charCodeAt(f+1)){case 100:case 102:if(h>=c||null==r[h])break;u<f&&(l+=e.slice(u,f)),l+=Number(r[h]),u=f+2,f++;break;case 105:if(h>=c||null==r[h])break;u<f&&(l+=e.slice(u,f)),l+=Math.floor(Number(r[h])),u=f+2,f++;break;case 79:case 111:case 106:if(h>=c||void 0===r[h])break;u<f&&(l+=e.slice(u,f));var p=typeof r[h];if("string"===p){l+="'"+r[h]+"'",u=f+2,f++;break}if("function"===p){l+=r[h].name||"<anonymous>",u=f+2,f++;break}l+=n(r[h]),u=f+2,f++;break;case 115:if(h>=c)break;u<f&&(l+=e.slice(u,f)),l+=String(r[h]),u=f+2,f++;break;case 37:u<f&&(l+=e.slice(u,f)),l+="%",u=f+2,f++,h--}++h}++f}return -1===u?e:(u<d&&(l+=e.slice(u)),l)}},27658:function(e){"use strict";var t=Object.prototype.hasOwnProperty,r="~";function i(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,i,s,o){if("function"!=typeof i)throw TypeError("The listener must be a function");var a=new n(i,s||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1)),a.prototype.eventNames=function(){var e,i,n=[];if(0===this._eventsCount)return n;for(i in e=this._events)t.call(e,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,o=Array(s);n<s;n++)o[n]=i[n].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},a.prototype.emit=function(e,t,i,n,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,l,h=this._events[a],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,i),!0;case 4:return h.fn.call(h.context,t,i,n),!0;case 5:return h.fn.call(h.context,t,i,n,s),!0;case 6:return h.fn.call(h.context,t,i,n,s,o),!0}for(l=1,c=Array(u-1);l<u;l++)c[l-1]=arguments[l];h.fn.apply(h.context,c)}else{var d,f=h.length;for(l=0;l<f;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),u){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,i);break;case 4:h[l].fn.call(h[l].context,t,i,n);break;default:if(!c)for(d=1,c=Array(u-1);d<u;d++)c[d-1]=arguments[d];h[l].fn.apply(h[l].context,c)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,i,n){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||n&&!a.once||i&&a.context!==i||o(this,s);else{for(var c=0,l=[],h=a.length;c<h;c++)(a[c].fn!==t||n&&!a[c].once||i&&a[c].context!==i)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},73306:function(e,t,r){var i=r(82957),n=i.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(s(i,t),t.Buffer=o),o.prototype=Object.create(n.prototype),s(n,o),o.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return n(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i.SlowBuffer(e)}},65768:function(e,t){"use strict";function r(e,t,r){return t<=e&&e<=r}function i(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function n(e){this.tokens=[].slice.call(e)}function s(e,t){if(e)throw TypeError("Decoder error");return t||65533}n.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.push(e.shift());else this.tokens.push(e)}};var o="utf-8";function a(e,t){if(!(this instanceof a))return new a(e,t);if((e=void 0!==e?String(e).toLowerCase():o)!==o)throw Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function c(e,t){if(!(this instanceof c))return new c(e,t);if((e=void 0!==e?String(e).toLowerCase():o)!==o)throw Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function l(e){var t=e.fatal,i=0,n=0,o=0,a=128,c=191;this.handler=function(e,l){if(-1===l&&0!==o)return o=0,s(t);if(-1===l)return -1;if(0===o){if(r(l,0,127))return l;if(r(l,194,223))o=1,i=l-192;else if(r(l,224,239))224===l&&(a=160),237===l&&(c=159),o=2,i=l-224;else{if(!r(l,240,244))return s(t);240===l&&(a=144),244===l&&(c=143),o=3,i=l-240}return i<<=6*o,null}if(!r(l,a,c))return i=o=n=0,a=128,c=191,e.prepend(l),s(t);if(a=128,c=191,n+=1,i+=l-128<<6*(o-n),n!==o)return null;var h=i;return i=o=n=0,h}}function h(e){e.fatal,this.handler=function(e,t){if(-1===t)return -1;if(r(t,0,127))return t;r(t,128,2047)?(i=1,n=192):r(t,2048,65535)?(i=2,n=224):r(t,65536,1114111)&&(i=3,n=240);for(var i,n,s=[(t>>6*i)+n];i>0;){var o=t>>6*(i-1);s.push(128|63&o),i-=1}return s}}a.prototype={decode:function(e,t){r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=i(t),this._streaming||(this._decoder=new l({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var r,s,o=new n(r),a=[];!o.endOfStream()&&-1!==(s=this._decoder.handler(o,o.read()));)null!==s&&(Array.isArray(s)?a.push.apply(a,s):a.push(s));if(!this._streaming){do{if(-1===(s=this._decoder.handler(o,o.read())))break;if(null===s)continue;Array.isArray(s)?a.push.apply(a,s):a.push(s)}while(!o.endOfStream());this._decoder=null}return!a.length||-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===a[0]?(this._BOMseen=!0,a.shift()):this._BOMseen=!0),function(e){for(var t="",r=0;r<e.length;++r){var i=e[r];i<=65535?t+=String.fromCharCode(i):(i-=65536,t+=String.fromCharCode((i>>10)+55296,(1023&i)+56320))}return t}(a)}},c.prototype={encode:function(e,t){e=e?String(e):"",t=i(t),this._streaming||(this._encoder=new h(this._options)),this._streaming=!!t.stream;for(var r,s=[],o=new n(function(e){for(var t=String(e),r=t.length,i=0,n=[];i<r;){var s=t.charCodeAt(i);if(s<55296||s>57343)n.push(s);else if(56320<=s&&s<=57343)n.push(65533);else if(55296<=s&&s<=56319){if(i===r-1)n.push(65533);else{var o=e.charCodeAt(i+1);if(56320<=o&&o<=57343){var a=1023&s,c=1023&o;n.push(65536+(a<<10)+c),i+=1}else n.push(65533)}}i+=1}return n}(e));!o.endOfStream()&&-1!==(r=this._encoder.handler(o,o.read()));)Array.isArray(r)?s.push.apply(s,r):s.push(r);if(!this._streaming){for(;-1!==(r=this._encoder.handler(o,o.read()));)Array.isArray(r)?s.push.apply(s,r):s.push(r);this._encoder=null}return new Uint8Array(s)}},t.TextEncoder=c,t.TextDecoder=a},43763:function(e,t,r){"use strict";r.d(t,{v4:function(){return l}});for(var i,n=new Uint8Array(16),s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,o=[],a=0;a<256;++a)o.push((a+256).toString(16).substr(1));var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!("string"==typeof r&&s.test(r)))throw TypeError("Stringified UUID is invalid");return r},l=function(e,t,r){var s=(e=e||{}).random||(e.rng||function(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(n)})();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=s[o];return t}return c(s)}},42060:function(){},44742:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}},25566:function(e){var t,r,i,n=e.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c=[],l=!1,h=-1;function u(){l&&i&&(l=!1,i.length?c=i.concat(c):h=-1,c.length&&d())}function d(){if(!l){var e=a(u);l=!0;for(var t=c.length;t;){for(i=c,c=[];++h<t;)i&&i[h].run();h=-1,t=c.length}i=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||l||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}},97435:function(e,t,r){"use strict";let i=r(95172);e.exports=s;let n=function(){function e(e){return void 0!==e&&e}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{};function s(e){var t,r;(e=e||{}).browser=e.browser||{};let i=e.browser.transmit;if(i&&"function"!=typeof i.send)throw Error("pino: transmit option must have a send function");let h=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let u=e.serializers||{},g=Array.isArray(t=e.browser.serialize)?t.filter(function(e){return"!stdSerializers.err"!==e}):!0===t&&Object.keys(u),m=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(m=!1),"function"==typeof h&&(h.error=h.fatal=h.warn=h.info=h.debug=h.trace=h),!1===e.enabled&&(e.level="silent");let y=e.level||"info",b=Object.create(h);b.log||(b.log=d),Object.defineProperty(b,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(b,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,o(w,b,"error","log"),o(w,b,"fatal","error"),o(w,b,"warn","error"),o(w,b,"info","log"),o(w,b,"debug","log"),o(w,b,"trace","log")}});let w={transmit:i,serialize:g,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:"function"==typeof(r=e).timestamp?r.timestamp:!1===r.timestamp?f:p};return b.levels=s.levels,b.level=y,b.setMaxListeners=b.getMaxListeners=b.emit=b.addListener=b.on=b.prependListener=b.once=b.prependOnceListener=b.removeListener=b.removeAllListeners=b.listeners=b.listenerCount=b.eventNames=b.write=b.flush=d,b.serializers=u,b._serialize=g,b._stdErrSerialize=m,b.child=function(t,r){if(!t)throw Error("missing bindings for child Pino");r=r||{},g&&t.serializers&&(r.serializers=t.serializers);let n=r.serializers;if(g&&n){var s=Object.assign({},u,n),o=!0===e.browser.serialize?Object.keys(s):g;delete t.serializers,a([t],o,s,this._stdErrSerialize)}function h(e){this._childLevel=(0|e._childLevel)+1,this.error=c(e,t,"error"),this.fatal=c(e,t,"fatal"),this.warn=c(e,t,"warn"),this.info=c(e,t,"info"),this.debug=c(e,t,"debug"),this.trace=c(e,t,"trace"),s&&(this.serializers=s,this._serialize=o),i&&(this._logEvent=l([].concat(e._logEvent.bindings,t)))}return h.prototype=this,new h(this)},i&&(b._logEvent=l()),b}function o(e,t,r,o){let c=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?d:c[r]?c[r]:n[r]||n[o]||d,function(e,t,r){if(e.transmit||t[r]!==d){var o;t[r]=(o=t[r],function(){let c=e.timestamp(),h=Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var d=0;d<h.length;d++)h[d]=arguments[d];if(e.serialize&&!e.asObject&&a(h,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?o.call(u,function(e,t,r,n){e._serialize&&a(r,e._serialize,e.serializers,e._stdErrSerialize);let o=r.slice(),c=o[0],l={};n&&(l.time=n),l.level=s.levels.values[t];let h=(0|e._childLevel)+1;if(h<1&&(h=1),null!==c&&"object"==typeof c){for(;h--&&"object"==typeof o[0];)Object.assign(l,o.shift());c=o.length?i(o.shift(),o):void 0}else"string"==typeof c&&(c=i(o.shift(),o));return void 0!==c&&(l.msg=c),l}(this,r,h,c)):o.apply(u,h),e.transmit){let i=e.transmit.level||t.level,n=s.levels.values[i],o=s.levels.values[r];if(o<n)return;(function(e,t,r){let i=t.send,n=t.ts,s=t.methodLevel,o=t.methodValue,c=t.val,h=e._logEvent.bindings;a(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=n,e._logEvent.messages=r.filter(function(e){return -1===h.indexOf(e)}),e._logEvent.level.label=s,e._logEvent.level.value=o,i(s,e._logEvent,c),e._logEvent=l(h)})(this,{ts:c,methodLevel:r,methodValue:o,transmitLevel:i,transmitValue:s.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},h)}})}}(e,t,r)}function a(e,t,r,i){for(let n in e)if(i&&e[n]instanceof Error)e[n]=s.stdSerializers.err(e[n]);else if("object"==typeof e[n]&&!Array.isArray(e[n]))for(let i in e[n])t&&t.indexOf(i)>-1&&i in r&&(e[n][i]=r[i](e[n][i]))}function c(e,t,r){return function(){let i=Array(1+arguments.length);i[0]=t;for(var n=1;n<i.length;n++)i[n]=arguments[n-1];return e[r].apply(this,i)}}function l(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function h(){return{}}function u(e){return e}function d(){}function f(){return!1}function p(){return Date.now()}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers={mapHttpRequest:h,mapHttpResponse:h,wrapRequestSerializer:u,wrapResponseSerializer:u,wrapErrorSerializer:u,req:h,res:h,err:function(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}},s.stdTimeFunctions=Object.assign({},{nullTime:f,epochTime:p,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},93511:function(e,t,r){"use strict";r.d(t,{fl:function(){return C},iv:function(){return l},Ts:function(){return _},Qu:function(){return A},$m:function(){return c}});let i=globalThis,n=i.ShadowRoot&&(void 0===i.ShadyCSS||i.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class a{constructor(e,t,r){if(this._$cssResult$=!0,r!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o,t=this.t;if(n&&void 0===e){let r=void 0!==t&&1===t.length;r&&(e=o.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&o.set(t,e))}return e}toString(){return this.cssText}}let c=e=>new a("string"==typeof e?e:e+"",void 0,s),l=(e,...t)=>new a(1===e.length?e[0]:t.reduce((t,r,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[i+1],e[0]),e,s),h=(e,t)=>{if(n)e.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(let r of t){let t=document.createElement("style"),n=i.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=r.cssText,e.appendChild(t)}},u=n?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(let r of e.cssRules)t+=r.cssText;return c(t)})(e):e,{is:d,defineProperty:f,getOwnPropertyDescriptor:p,getOwnPropertyNames:g,getOwnPropertySymbols:m,getPrototypeOf:y}=Object,b=globalThis,w=b.trustedTypes,v=w?w.emptyScript:"",E=b.reactiveElementPolyfillSupport,I=(e,t)=>e,_={toAttribute(e,t){switch(t){case Boolean:e=e?v:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},A=(e,t)=>!d(e,t),S={attribute:!0,type:String,converter:_,reflect:!1,useDefault:!1,hasChanged:A};Symbol.metadata??=Symbol("metadata"),b.litPropertyMetadata??=new WeakMap;class C extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=S){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){let r=Symbol(),i=this.getPropertyDescriptor(e,r,t);void 0!==i&&f(this.prototype,e,i)}}static getPropertyDescriptor(e,t,r){let{get:i,set:n}=p(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:i,set(t){let s=i?.call(this);n?.call(this,t),this.requestUpdate(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??S}static _$Ei(){if(this.hasOwnProperty(I("elementProperties")))return;let e=y(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(I("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(I("properties"))){let e=this.properties;for(let t of[...g(e),...m(e)])this.createProperty(t,e[t])}let e=this[Symbol.metadata];if(null!==e){let t=litPropertyMetadata.get(e);if(void 0!==t)for(let[e,r]of t)this.elementProperties.set(e,r)}for(let[e,t]of(this._$Eh=new Map,this.elementProperties)){let r=this._$Eu(e,t);void 0!==r&&this._$Eh.set(r,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){let t=[];if(Array.isArray(e))for(let r of new Set(e.flat(1/0).reverse()))t.unshift(u(r));else void 0!==e&&t.push(u(e));return t}static _$Eu(e,t){let r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){let e=new Map;for(let t of this.constructor.elementProperties.keys())this.hasOwnProperty(t)&&(e.set(t,this[t]),delete this[t]);e.size>0&&(this._$Ep=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return h(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){let r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(void 0!==i&&!0===r.reflect){let n=(void 0!==r.converter?.toAttribute?r.converter:_).toAttribute(t,r.type);this._$Em=e,null==n?this.removeAttribute(i):this.setAttribute(i,n),this._$Em=null}}_$AK(e,t){let r=this.constructor,i=r._$Eh.get(e);if(void 0!==i&&this._$Em!==i){let e=r.getPropertyOptions(i),n="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:_;this._$Em=i;let s=n.fromAttribute(t,e.type);this[i]=s??this._$Ej?.get(i)??s,this._$Em=null}}requestUpdate(e,t,r,i=!1,n){if(void 0!==e){let s=this.constructor;if(!1===i&&(n=this[e]),!(((r??=s.getPropertyOptions(e)).hasChanged??A)(n,t)||r.useDefault&&r.reflect&&n===this._$Ej?.get(e)&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,t,r)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:i,wrapped:n},s){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,s??t??this[e]),!0!==n||void 0!==s)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),!0===i&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}let e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}let e=this.constructor.elementProperties;if(e.size>0)for(let[t,r]of e){let{wrapped:e}=r,i=this[t];!0!==e||this._$AL.has(t)||void 0===i||this.C(t,void 0,r,i)}}let e=!1,t=this._$AL;try{(e=this.shouldUpdate(t))?(this.willUpdate(t),this._$EO?.forEach(e=>e.hostUpdate?.()),this.update(t)):this._$EM()}catch(t){throw e=!1,this._$EM(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(e=>e.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(e=>this._$ET(e,this[e])),this._$EM()}updated(e){}firstUpdated(e){}}C.elementStyles=[],C.shadowRootOptions={mode:"open"},C[I("elementProperties")]=new Map,C[I("finalized")]=new Map,E?.({ReactiveElement:C}),(b.reactiveElementVersions??=[]).push("2.1.2")},33024:function(e,t,r){"use strict";r.d(t,{A1:function(){return c},D1:function(){return b},Mx:function(){return m},N6:function(){return y},rO:function(){return v},xg:function(){return a}});var i=r(9070),n=r(27665);let s=BigInt(0),o=BigInt(1);function a(e,t){let r=t.negate();return e?r:t}function c(e,t){let r=(0,n.Eg)(e.Fp,t.map(e=>e.Z));return t.map((t,i)=>e.fromAffine(t.toAffine(r[i])))}function l(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function h(e,t){l(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),s=2**e;return{windows:r,windowSize:n,mask:(0,i.dQ)(e),maxNumber:s,shiftBy:BigInt(e)}}function u(e,t,r){let{windowSize:i,mask:n,maxNumber:s,shiftBy:a}=r,c=Number(e&n),l=e>>a;c>i&&(c-=s,l+=o);let h=t*i,u=h+Math.abs(c)-1;return{nextN:l,offset:u,isZero:0===c,isNeg:c<0,isNegF:t%2!=0,offsetF:h}}let d=new WeakMap,f=new WeakMap;function p(e){return f.get(e)||1}function g(e){if(e!==s)throw Error("invalid wNAF")}class m{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,r=this.ZERO){let i=e;for(;t>s;)t&o&&(r=r.add(i)),i=i.double(),t>>=o;return r}precomputeWindow(e,t){let{windows:r,windowSize:i}=h(t,this.bits),n=[],s=e,o=s;for(let e=0;e<r;e++){o=s,n.push(o);for(let e=1;e<i;e++)o=o.add(s),n.push(o);s=o.double()}return n}wNAF(e,t,r){if(!this.Fn.isValid(r))throw Error("invalid scalar");let i=this.ZERO,n=this.BASE,s=h(e,this.bits);for(let e=0;e<s.windows;e++){let{nextN:o,offset:c,isZero:l,isNeg:h,isNegF:d,offsetF:f}=u(r,e,s);r=o,l?n=n.add(a(d,t[f])):i=i.add(a(h,t[c]))}return g(r),{p:i,f:n}}wNAFUnsafe(e,t,r,i=this.ZERO){let n=h(e,this.bits);for(let e=0;e<n.windows&&r!==s;e++){let{nextN:s,offset:o,isZero:a,isNeg:c}=u(r,e,n);if(r=s,!a){let e=t[o];i=i.add(c?e.negate():e)}}return g(r),i}getPrecomputes(e,t,r){let i=d.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&("function"==typeof r&&(i=r(i)),d.set(t,i))),i}cached(e,t,r){let i=p(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)}unsafe(e,t,r,i){let n=p(e);return 1===n?this._unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)}createCache(e,t){l(t,this.bits),f.set(e,t),d.delete(e)}hasCache(e){return 1!==p(e)}}function y(e,t,r,i){let n=t,a=e.ZERO,c=e.ZERO;for(;r>s||i>s;)r&o&&(a=a.add(n)),i&o&&(c=c.add(n)),n=n.double(),r>>=o,i>>=o;return{p1:a,p2:c}}function b(e,t,r,n){!function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(n,t);let s=r.length,o=n.length;if(s!==o)throw Error("arrays of points and scalars must have equal length");let a=e.ZERO,c=(0,i.Dd)(BigInt(s)),l=1;c>12?l=c-3:c>4?l=c-2:c>0&&(l=2);let h=(0,i.dQ)(l),u=Array(Number(h)+1).fill(a),d=Math.floor((t.BITS-1)/l)*l,f=a;for(let e=d;e>=0;e-=l){u.fill(a);for(let t=0;t<o;t++){let i=Number(n[t]>>BigInt(e)&h);u[i]=u[i].add(r[t])}let t=a;for(let e=u.length-1,r=a;e>0;e--)r=r.add(u[e]),t=t.add(r);if(f=f.add(t),0!==e)for(let e=0;e<l;e++)f=f.double()}return f}function w(e,t,r){if(!t)return(0,n.gN)(e,{isLE:r});if(t.ORDER!==e)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return(0,n.OP)(t),t}function v(e,t,r={},i){if(void 0===i&&(i="edwards"===e),!t||"object"!=typeof t)throw Error(`expected valid ${e} CURVE object`);for(let e of["p","n","h"]){let r=t[e];if(!("bigint"==typeof r&&r>s))throw Error(`CURVE.${e} must be positive bigint`)}let n=w(t.p,r.Fp,i),o=w(t.n,r.Fn,i);for(let r of["Gx","Gy","a","weierstrass"===e?"b":"d"])if(!n.isValid(t[r]))throw Error(`CURVE.${r} must be valid field element of CURVE.Fp`);return{CURVE:t=Object.freeze(Object.assign({},t)),Fp:n,Fn:o}}},27665:function(e,t,r){"use strict";r.d(t,{Eg:function(){return S},OP:function(){return A},PS:function(){return O},Tu:function(){return I},Us:function(){return P},gN:function(){return M},kK:function(){return N},oA:function(){return m},wQ:function(){return g}});var i=r(9070),n=r(25884);let s=BigInt(0),o=BigInt(1),a=BigInt(2),c=BigInt(3),l=BigInt(4),h=BigInt(5),u=BigInt(7),d=BigInt(8),f=BigInt(9),p=BigInt(16);function g(e,t){let r=e%t;return r>=s?r:t+r}function m(e,t,r){let i=e;for(;t-- >s;)i*=i,i%=r;return i}function y(e,t){if(e===s)throw Error("invert: expected non-zero number");if(t<=s)throw Error("invert: expected positive modulus, got "+t);let r=g(e,t),i=t,n=s,a=o,c=o,l=s;for(;r!==s;){let e=i/r,t=i%r,s=n-c*e,o=a-l*e;i=r,r=t,n=c,a=l,c=s,l=o}if(i!==o)throw Error("invert: does not exist");return g(n,t)}function b(e,t,r){if(!e.eql(e.sqr(t),r))throw Error("Cannot find square root")}function w(e,t){let r=(e.ORDER+o)/l,i=e.pow(t,r);return b(e,i,t),i}function v(e,t){let r=(e.ORDER-h)/d,i=e.mul(t,a),n=e.pow(i,r),s=e.mul(t,n),o=e.mul(e.mul(s,a),n),c=e.mul(s,e.sub(o,e.ONE));return b(e,c,t),c}function E(e){if(e<c)throw Error("sqrt is not defined for small field");let t=e-o,r=0;for(;t%a===s;)t/=a,r++;let i=a,n=M(e);for(;1===C(n,i);)if(i++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===r)return w;let l=n.pow(i,t),h=(t+o)/a;return function(e,i){if(e.is0(i))return i;if(1!==C(e,i))throw Error("Cannot find square root");let n=r,s=e.mul(e.ONE,l),a=e.pow(i,t),c=e.pow(i,h);for(;!e.eql(a,e.ONE);){if(e.is0(a))return e.ZERO;let t=1,r=e.sqr(a);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===n)throw Error("Cannot find square root");let i=o<<BigInt(n-t-1),l=e.pow(s,i);n=t,s=e.sqr(l),a=e.mul(a,s),c=e.mul(c,l)}return c}}let I=(e,t)=>(g(e,t)&o)===o,_=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function A(e){let t=_.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"});return(0,i.fA)(e,t),e}function S(e,t,r=!1){let i=Array(t.length).fill(r?e.ZERO:void 0),n=t.reduce((t,r,n)=>e.is0(r)?t:(i[n]=t,e.mul(t,r)),e.ONE),s=e.inv(n);return t.reduceRight((t,r,n)=>e.is0(r)?t:(i[n]=e.mul(t,i[n]),e.mul(t,r)),s),i}function C(e,t){let r=(e.ORDER-o)/a,i=e.pow(t,r),n=e.eql(i,e.ONE),s=e.eql(i,e.ZERO),c=e.eql(i,e.neg(e.ONE));if(!n&&!s&&!c)throw Error("invalid Legendre symbol result");return n?1:s?0:-1}function N(e,t){void 0!==t&&(0,n.k8)(t);let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function M(e,t,r=!1,n={}){let a,m,I,_;if(e<=s)throw Error("invalid field: expected ORDER > 0, got "+e);let A=!1;if("object"==typeof t&&null!=t){if(n.sqrt||r)throw Error("cannot specify opts in two arguments");t.BITS&&(m=t.BITS),t.sqrt&&(I=t.sqrt),"boolean"==typeof t.isLE&&(r=t.isLE),"boolean"==typeof t.modFromBytes&&(A=t.modFromBytes),_=t.allowedLengths}else"number"==typeof t&&(m=t),n.sqrt&&(I=n.sqrt);let{nBitLength:C,nByteLength:x}=N(e,m);if(x>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let O=Object.freeze({ORDER:e,isLE:r,BITS:C,BYTES:x,MASK:(0,i.dQ)(C),ZERO:s,ONE:o,allowedLengths:_,create:t=>g(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return s<=t&&t<e},is0:e=>e===s,isValidNot0:e=>!O.is0(e)&&O.isValid(e),isOdd:e=>(e&o)===o,neg:t=>g(-t,e),eql:(e,t)=>e===t,sqr:t=>g(t*t,e),add:(t,r)=>g(t+r,e),sub:(t,r)=>g(t-r,e),mul:(t,r)=>g(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<s)throw Error("invalid exponent, negatives unsupported");if(r===s)return e.ONE;if(r===o)return t;let i=e.ONE,n=t;for(;r>s;)r&o&&(i=e.mul(i,n)),n=e.sqr(n),r>>=o;return i})(O,e,t),div:(t,r)=>g(t*y(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>y(t,e),sqrt:I||(t=>(!a&&(a=e%l===c?w:e%d===h?v:e%p===f?function(e){let t=M(e),r=E(e),i=r(t,t.neg(t.ONE)),n=r(t,i),s=r(t,t.neg(i)),o=(e+u)/p;return(e,t)=>{let r=e.pow(t,o),a=e.mul(r,i),c=e.mul(r,n),l=e.mul(r,s),h=e.eql(e.sqr(a),t),u=e.eql(e.sqr(c),t);r=e.cmov(r,a,h),a=e.cmov(l,c,u);let d=e.eql(e.sqr(a),t),f=e.cmov(r,a,d);return b(e,f,t),f}}(e):E(e)),a(O,t))),toBytes:e=>r?(0,i.S5)(e,x):(0,i.tL)(e,x),fromBytes:(t,n=!0)=>{if(_){if(!_.includes(t.length)||t.length>x)throw Error("Field.fromBytes: expected "+_+" bytes, got "+t.length);let e=new Uint8Array(x);e.set(t,r?0:e.length-t.length),t=e}if(t.length!==x)throw Error("Field.fromBytes: expected "+x+" bytes, got "+t.length);let s=r?(0,i.ty)(t):(0,i.Hv)(t);if(A&&(s=g(s,e)),!n&&!O.isValid(s))throw Error("invalid field element: outside of range 0..ORDER");return s},invertBatch:e=>S(O,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(O)}function x(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function O(e){let t=x(e);return t+Math.ceil(t/2)}function P(e,t,r=!1){let n=e.length,s=x(t),a=O(t);if(n<16||n<a||n>1024)throw Error("expected "+a+"-1024 bytes of input, got "+n);let c=g(r?(0,i.ty)(e):(0,i.Hv)(e),t-o)+o;return r?(0,i.S5)(c,s):(0,i.tL)(c,s)}},25077:function(e,t,r){"use strict";r.d(t,{UN:function(){return S}});var i=r(68553),n=r(25884),s=r(33024),o=r(9070),a=r(27665);let c=BigInt(0),l=BigInt(1),h=BigInt(2),u=BigInt(8);class d{constructor(e){this.ep=e}static fromBytes(e){(0,o.EQ)()}static fromHex(e){(0,o.EQ)()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(e){return this.ep.toAffine(e)}toHex(){return(0,n.ci)(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(e){return this.assertSame(e),this.init(this.ep.add(e.ep))}subtract(e){return this.assertSame(e),this.init(this.ep.subtract(e.ep))}multiply(e){return this.init(this.ep.multiply(e))}multiplyUnsafe(e){return this.init(this.ep.multiplyUnsafe(e))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(e,t){return this.init(this.ep.precompute(e,t))}toRawBytes(){return this.toBytes()}}function f(e){if(!Number.isSafeInteger(e))throw Error("number expected")}(0,n.iY)("HashToScalar-");let p=BigInt(0),g=BigInt(1),m=BigInt(2);BigInt(3);let y=BigInt(5),b=BigInt(8),w=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),v={p:w,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:b,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")},E=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function I(e,t){let r=(0,a.wQ)(t*t*t,w),i=function(e){let t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=e*e%w*e%w,o=(0,a.oA)(s,m,w)*s%w,c=(0,a.oA)(o,g,w)*e%w,l=(0,a.oA)(c,y,w)*c%w,h=(0,a.oA)(l,t,w)*l%w,u=(0,a.oA)(h,r,w)*h%w,d=(0,a.oA)(u,i,w)*u%w,f=(0,a.oA)(d,n,w)*d%w,p=(0,a.oA)(f,n,w)*d%w,b=(0,a.oA)(p,t,w)*l%w;return{pow_p_5_8:(0,a.oA)(b,m,w)*e%w,b2:s}}(e*(0,a.wQ)(r*r*t,w)).pow_p_5_8,n=(0,a.wQ)(e*r*i,w),s=(0,a.wQ)(t*n*n,w),o=n,c=(0,a.wQ)(n*E,w),l=s===e,h=s===(0,a.wQ)(-e,w),u=s===(0,a.wQ)(-e*E,w);return l&&(n=o),(h||u)&&(n=c),(0,a.Tu)(n,w)&&(n=(0,a.wQ)(-n,w)),{isValid:l||h,value:n}}let _=(0,a.gN)(v.p,{isLE:!0}),A=(0,a.gN)(v.n,{isLE:!0}),S=function(e){let{CURVE:t,curveOpts:r,hash:i,eddsaOpts:d}=function(e){let t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r={Fp:e.Fp,Fn:(0,a.gN)(t.n,e.nBitLength,!0),uvRatio:e.uvRatio},i={randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:t,curveOpts:r,hash:e.hash,eddsaOpts:i}}(e);return function(e,t){let r=t.Point;return Object.assign({},t,{ExtendedPoint:r,CURVE:e,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}(e,function(e,t,r={}){if("function"!=typeof t)throw Error('"hash" function param is required');(0,o.fA)(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:i}=r,{BASE:s,Fp:a,Fn:c}=e,h=r.randomBytes||n.O6,u=r.adjustScalarBytes||(e=>e),d=r.domain||((e,t,r)=>{if((0,o.po)(r,"phflag"),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function f(e){return c.create((0,o.ty)(e))}function p(e){let{head:r,prefix:i,scalar:n}=function(e){let r=w.secretKey;e=(0,o.ql)("private key",e,r);let i=(0,o.ql)("hashed private key",t(e),2*r),n=u(i.slice(0,r)),s=i.slice(r,2*r),a=f(n);return{head:n,prefix:s,scalar:a}}(e),a=s.multiply(n),c=a.toBytes();return{head:r,prefix:i,scalar:n,point:a,pointBytes:c}}function g(e){return p(e).pointBytes}function m(e=Uint8Array.of(),...r){return f(t(d((0,n.eV)(...r),(0,o.ql)("context",e),!!i)))}let y={zip215:!0},b=a.BYTES,w={secretKey:b,publicKey:b,signature:2*b,seed:b};function v(e=h(w.seed)){return(0,o.GB)(e,w.seed,"seed")}let E={getExtendedPublicKey:p,randomSecretKey:v,isValidSecretKey:function(e){return(0,n._t)(e)&&e.length===c.BYTES},isValidPublicKey:function(t,r){try{return!!e.fromBytes(t,r)}catch(e){return!1}},toMontgomery(t){let{y:r}=e.fromBytes(t),i=w.publicKey,n=32===i;if(!n&&57!==i)throw Error("only defined for 25519 and 448");let s=n?a.div(l+r,l-r):a.div(r-l,r+l);return a.toBytes(s)},toMontgomerySecret(e){let r=w.secretKey;return(0,o.GB)(e,r),u(t(e.subarray(0,r))).subarray(0,r)},randomPrivateKey:v,precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)};return Object.freeze({keygen:function(e){let t=E.randomSecretKey(e);return{secretKey:t,publicKey:g(t)}},getPublicKey:g,sign:function(e,t,r={}){e=(0,o.ql)("message",e),i&&(e=i(e));let{prefix:a,scalar:l,pointBytes:h}=p(t),u=m(r.context,a,e),d=s.multiply(u).toBytes(),f=m(r.context,d,h,e),g=c.create(u+f*l);if(!c.isValid(g))throw Error("sign failed: invalid s");let y=(0,n.eV)(d,c.toBytes(g));return(0,o.GB)(y,w.signature,"result")},verify:function(t,r,n,a=y){let c,l,h;let{context:u,zip215:d}=a,f=w.signature;t=(0,o.ql)("signature",t,f),r=(0,o.ql)("message",r),n=(0,o.ql)("publicKey",n,w.publicKey),void 0!==d&&(0,o.po)(d,"zip215"),i&&(r=i(r));let p=f/2,g=t.subarray(0,p),b=(0,o.ty)(t.subarray(p,f));try{c=e.fromBytes(n,d),l=e.fromBytes(g,d),h=s.multiplyUnsafe(b)}catch(e){return!1}if(!d&&c.isSmallOrder())return!1;let v=m(u,l.toBytes(),c.toBytes(),r);return l.add(c.multiplyUnsafe(v)).subtract(h).clearCofactor().is0()},utils:E,Point:e,lengths:w})}(function(e,t={}){let r=(0,s.rO)("edwards",e,t,t.FpFnLE),{Fp:i,Fn:a}=r,d=r.CURVE,{h:f}=d;(0,o.fA)(t,{},{uvRatio:"function"});let p=h<<BigInt(8*a.BYTES)-l,g=e=>i.create(e),m=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:i.sqrt(i.div(e,t))}}catch(e){return{isValid:!1,value:c}}});if(!function(e,t,r,i){let n=e.sqr(r),s=e.sqr(i),o=e.add(e.mul(t.a,n),s),a=e.add(e.ONE,e.mul(t.d,e.mul(n,s)));return e.eql(o,a)}(i,d,d.Gx,d.Gy))throw Error("bad curve params: generator point");function y(e,t,r=!1){let i=r?l:c;return(0,o.Fy)("coordinate "+e,t,i,p),t}function b(e){if(!(e instanceof E))throw Error("ExtendedPoint expected")}let w=(0,o.H9)((e,t)=>{let{X:r,Y:n,Z:s}=e,o=e.is0();null==t&&(t=o?u:i.inv(s));let a=g(r*t),h=g(n*t),d=i.mul(s,t);if(o)return{x:c,y:l};if(d!==l)throw Error("invZ was invalid");return{x:a,y:h}}),v=(0,o.H9)(e=>{let{a:t,d:r}=d;if(e.is0())throw Error("bad point: ZERO");let{X:i,Y:n,Z:s,T:o}=e,a=g(i*i),c=g(n*n),l=g(s*s),h=g(l*l),u=g(a*t);if(g(l*g(u+c))!==g(h+g(r*g(a*c))))throw Error("bad point: equation left != right (1)");if(g(i*n)!==g(s*o))throw Error("bad point: equation left != right (2)");return!0});class E{constructor(e,t,r,i){this.X=y("x",e),this.Y=y("y",t),this.Z=y("z",r,!0),this.T=y("t",i),Object.freeze(this)}static CURVE(){return d}static fromAffine(e){if(e instanceof E)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return y("x",t),y("y",r),new E(t,r,l,g(t*r))}static fromBytes(e,t=!1){let r=i.BYTES,{a:n,d:s}=d;e=(0,o.HV)((0,o.GB)(e,r,"point")),(0,o.po)(t,"zip215");let a=(0,o.HV)(e),h=e[r-1];a[r-1]=-129&h;let u=(0,o.ty)(a),f=t?p:i.ORDER;(0,o.Fy)("point.y",u,c,f);let y=g(u*u),{isValid:b,value:w}=m(g(y-l),g(s*y-n));if(!b)throw Error("bad point: invalid y coordinate");let v=(w&l)===l,I=(128&h)!=0;if(!t&&w===c&&I)throw Error("bad point: x=0 and x_0=1");return I!==v&&(w=g(-w)),E.fromAffine({x:w,y:u})}static fromHex(e,t=!1){return E.fromBytes((0,o.ql)("point",e),t)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return I.createCache(this,e),t||this.multiply(h),this}assertValidity(){v(this)}equals(e){b(e);let{X:t,Y:r,Z:i}=this,{X:n,Y:s,Z:o}=e,a=g(t*o),c=g(n*i),l=g(r*o),h=g(s*i);return a===c&&l===h}is0(){return this.equals(E.ZERO)}negate(){return new E(g(-this.X),this.Y,this.Z,g(-this.T))}double(){let{a:e}=d,{X:t,Y:r,Z:i}=this,n=g(t*t),s=g(r*r),o=g(h*g(i*i)),a=g(e*n),c=t+r,l=g(g(c*c)-n-s),u=a+s,f=u-o,p=a-s,m=g(l*f),y=g(u*p),b=g(l*p);return new E(m,y,g(f*u),b)}add(e){b(e);let{a:t,d:r}=d,{X:i,Y:n,Z:s,T:o}=this,{X:a,Y:c,Z:l,T:h}=e,u=g(i*a),f=g(n*c),p=g(o*r*h),m=g(s*l),y=g((i+n)*(a+c)-u-f),w=m-p,v=m+p,I=g(f-t*u),_=g(y*w),A=g(v*I),S=g(y*I);return new E(_,A,g(w*v),S)}subtract(e){return this.add(e.negate())}multiply(e){if(!a.isValidNot0(e))throw Error("invalid scalar: expected 1 <= sc < curve.n");let{p:t,f:r}=I.cached(this,e,e=>(0,s.A1)(E,e));return(0,s.A1)(E,[t,r])[0]}multiplyUnsafe(e,t=E.ZERO){if(!a.isValid(e))throw Error("invalid scalar: expected 0 <= sc < curve.n");return e===c?E.ZERO:this.is0()||e===l?this:I.unsafe(this,e,e=>(0,s.A1)(E,e),t)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return I.unsafe(this,d.n).is0()}toAffine(e){return w(this,e)}clearCofactor(){return f===l?this:this.multiplyUnsafe(f)}toBytes(){let{x:e,y:t}=this.toAffine(),r=i.toBytes(t);return r[r.length-1]|=e&l?128:0,r}toHex(){return(0,n.ci)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(e){return(0,s.A1)(E,e)}static msm(e,t){return(0,s.D1)(E,a,e,t)}_setWindowSize(e){this.precompute(e)}toRawBytes(){return this.toBytes()}}E.BASE=new E(d.Gx,d.Gy,l,g(d.Gx*d.Gy)),E.ZERO=new E(c,l,l,c),E.Fp=i,E.Fn=a;let I=new s.Mx(E,a.BITS);return E.BASE.precompute(8),E}(t,r),i,d))}({...v,Fp:_,hash:i.o,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:I}),C=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),N=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),M=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),x=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),O=e=>I(g,e),P=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),T=e=>S.Point.Fp.create((0,o.ty)(e)&P);function R(e){let{d:t}=v,r=e=>_.create(e),i=r(E*e*e),n=r((i+g)*M),s=BigInt(-1),o=r((s-t*i)*r(i+t)),{isValid:c,value:l}=I(n,o),h=r(l*e);(0,a.Tu)(h,w)||(h=r(-h)),c||(l=h),c||(s=i);let u=r(s*(i-g)*x-o),d=l*l,f=r((l+l)*o),p=r(u*C),m=r(g-d),y=r(g+d);return new S.Point(r(f*y),r(m*p),r(p*y),r(f*m))}class D extends d{constructor(e){super(e)}static fromAffine(e){return new D(S.Point.fromAffine(e))}assertSame(e){if(!(e instanceof D))throw Error("RistrettoPoint expected")}init(e){return new D(e)}static hashToCurve(e){return function(e){(0,n.gk)(e,64);let t=R(T(e.subarray(0,32))),r=R(T(e.subarray(32,64)));return new D(t.add(r))}((0,o.ql)("ristrettoHash",e,64))}static fromBytes(e){(0,n.gk)(e,32);let{a:t,d:r}=v,i=e=>_.create(e),s=T(e);if(!(0,o.Wd)(_.toBytes(s),e)||(0,a.Tu)(s,w))throw Error("invalid ristretto255 encoding 1");let c=i(s*s),l=i(g+t*c),h=i(g-t*c),u=i(l*l),d=i(h*h),f=i(t*r*u-d),{isValid:m,value:y}=O(i(f*d)),b=i(y*h),E=i(y*b*f),I=i((s+s)*b);(0,a.Tu)(I,w)&&(I=i(-I));let A=i(l*E),C=i(I*A);if(!m||(0,a.Tu)(C,w)||A===p)throw Error("invalid ristretto255 encoding 2");return new D(new S.Point(I,A,g,C))}static fromHex(e){return D.fromBytes((0,o.ql)("ristrettoHex",e,32))}static msm(e,t){return(0,s.D1)(D,S.Point.Fn,e,t)}toBytes(){let e,{X:t,Y:r,Z:i,T:n}=this.ep,s=e=>_.create(e),o=s(s(i+r)*s(i-r)),c=s(t*r),l=s(c*c),{value:h}=O(s(o*l)),u=s(h*o),d=s(h*c),f=s(u*d*n);if((0,a.Tu)(n*f,w)){let i=s(r*E),n=s(t*E);t=i,r=n,e=s(u*N)}else e=d;(0,a.Tu)(t*f,w)&&(r=s(-r));let p=s((i-r)*e);return(0,a.Tu)(p,w)&&(p=s(-p)),_.toBytes(p)}equals(e){this.assertSame(e);let{X:t,Y:r}=this.ep,{X:i,Y:n}=e.ep,s=e=>_.create(e),o=s(t*n)===s(r*i),a=s(r*n)===s(t*i);return o||a}is0(){return this.equals(D.ZERO)}}D.BASE=new D(S.Point.BASE),D.ZERO=new D(S.Point.ZERO),D.Fp=_,D.Fn=A},71629:function(e,t,r){"use strict";r.d(t,{kA:function(){return N}});var i=r(68553),n=r(25884);class s extends n.kb{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.z3)(e);let r=(0,n.O0)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),(0,n.ru)(s)}update(e){return(0,n.$h)(this),this.iHash.update(e),this}digestInto(e){(0,n.$h)(this),(0,n.gk)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let o=(e,t,r)=>new s(e,t).update(r).digest();o.create=(e,t)=>new s(e,t);var a=r(9070),c=r(33024),l=r(27665);let h=(e,t)=>(e+(e>=0?t:-t)/y)/t;function u(e){if(!["compact","recovered","der"].includes(e))throw Error('Signature format must be "compact", "recovered", or "der"');return e}function d(e,t){let r={};for(let i of Object.keys(t))r[i]=void 0===e[i]?t[i]:e[i];return(0,a.po)(r.lowS,"lowS"),(0,a.po)(r.prehash,"prehash"),void 0!==r.format&&u(r.format),r}class f extends Error{constructor(e=""){super(e)}}let p={Err:f,_tlv:{encode:(e,t)=>{let{Err:r}=p;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let i=t.length/2,n=(0,a.uz)(i);if(n.length/2&128)throw new r("tlv.encode: long form length too big");let s=i>127?(0,a.uz)(n.length/2|128):"";return(0,a.uz)(e)+s+n+t},decode(e,t){let{Err:r}=p,i=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[i++]!==e)throw new r("tlv.decode: wrong tlv");let n=t[i++],s=0;if(128&n){let e=127&n;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let o=t.subarray(i,i+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of o)s=s<<8|e;if(i+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=n;let o=t.subarray(i,i+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(i+s)}}},_int:{encode(e){let{Err:t}=p;if(e<g)throw new t("integer: negative integers are not allowed");let r=(0,a.uz)(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=p;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return(0,a.Hv)(e)}},toSig(e){let{Err:t,_int:r,_tlv:i}=p,n=(0,a.ql)("signature",e),{v:s,l:o}=i.decode(48,n);if(o.length)throw new t("invalid signature: left bytes after parsing");let{v:c,l:l}=i.decode(2,s),{v:h,l:u}=i.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(c),s:r.decode(h)}},hexFromSig(e){let{_tlv:t,_int:r}=p,i=t.encode(2,r.encode(e.r)),n=t.encode(2,r.encode(e.s));return t.encode(48,i+n)}},g=BigInt(0),m=BigInt(1),y=BigInt(2),b=BigInt(3),w=BigInt(4);function v(e,t){let r;let{BYTES:i}=e;if("bigint"==typeof t)r=t;else{let n=(0,a.ql)("private key",t);try{r=e.fromBytes(n)}catch(e){throw Error(`invalid private key: expected ui8a of size ${i}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw Error("invalid private key: out of range [1..N-1]");return r}function E(e){return Uint8Array.of(e?2:3)}function I(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}let _={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},A={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},S=BigInt(2),C=(0,l.gN)(_.p,{sqrt:function(e){let t=_.p,r=BigInt(3),i=BigInt(6),n=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),h=e*e*e%t,u=h*h*e%t,d=(0,l.oA)(u,r,t)*u%t,f=(0,l.oA)(d,r,t)*u%t,p=(0,l.oA)(f,S,t)*h%t,g=(0,l.oA)(p,n,t)*p%t,m=(0,l.oA)(g,s,t)*g%t,y=(0,l.oA)(m,a,t)*m%t,b=(0,l.oA)(y,c,t)*y%t,w=(0,l.oA)(b,a,t)*m%t,v=(0,l.oA)(w,r,t)*u%t,E=(0,l.oA)(v,o,t)*g%t,I=(0,l.oA)(E,i,t)*h%t,A=(0,l.oA)(I,S,t);if(!C.eql(C.sqr(A),e))throw Error("Cannot find square root");return A}}),N=function(e,t){let r=t=>(function(e){let{CURVE:t,curveOpts:r,hash:i,ecdsaOpts:s}=function(e){let{CURVE:t,curveOpts:r}=function(e){let t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r=e.Fp,i=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(e=>Math.ceil(e/2)))):void 0,n={Fp:r,Fn:(0,l.gN)(t.n,{BITS:e.nBitLength,allowedLengths:i,modFromBytes:e.wrapPrivateKey}),allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:n}}(e),i={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:r,hash:e.hash,ecdsaOpts:i}}(e);return function(e,t){let r=t.Point;return Object.assign({},t,{ProjectivePoint:r,CURVE:Object.assign({},e,(0,l.kK)(r.Fn.ORDER,r.Fn.BITS))})}(e,function(e,t,r={}){(0,n.z3)(t),(0,a.fA)(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let i=r.randomBytes||n.O6,s=r.hmac||((e,...r)=>o(t,e,(0,n.eV)(...r))),{Fp:c,Fn:h}=e,{ORDER:f,BITS:b}=h,{keygen:w,getPublicKey:_,getSharedSecret:A,utils:S,lengths:C}=function(e,t={}){let{Fn:r}=e,i=t.randomBytes||n.O6,s=Object.assign(I(e.Fp,r),{seed:(0,l.PS)(r.ORDER)});function o(e){try{return!!v(r,e)}catch(e){return!1}}function c(e=i(s.seed)){return(0,l.Us)((0,a.GB)(e,s.seed,"seed"),r.ORDER)}function h(t,i=!0){return e.BASE.multiply(v(r,t)).toBytes(i)}function u(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;let{secretKey:i,publicKey:n,publicKeyUncompressed:o}=s;if(r.allowedLengths||i===n)return;let c=(0,a.ql)("key",t).length;return c===n||c===o}return Object.freeze({getPublicKey:h,getSharedSecret:function(t,i,n=!0){if(!0===u(t))throw Error("first arg must be private key");if(!1===u(i))throw Error("second arg must be public key");let s=v(r,t);return e.fromHex(i).multiply(s).toBytes(n)},keygen:function(e){let t=c(e);return{secretKey:t,publicKey:h(t)}},Point:e,utils:{isValidSecretKey:o,isValidPublicKey:function(t,r){let{publicKey:i,publicKeyUncompressed:n}=s;try{let s=t.length;if(!0===r&&s!==i||!1===r&&s!==n)return!1;return!!e.fromBytes(t)}catch(e){return!1}},randomSecretKey:c,isValidPrivateKey:o,randomPrivateKey:c,normPrivateKeyToScalar:e=>v(r,e),precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)},lengths:s})}(e,r),N={prehash:!1,lowS:"boolean"==typeof r.lowS&&r.lowS,format:void 0,extraEntropy:!1},M="compact";function x(e,t){if(!h.isValidNot0(t))throw Error(`invalid signature ${e}: out of range 1..Point.Fn.ORDER`);return t}class O{constructor(e,t,r){this.r=x("r",e),this.s=x("s",t),null!=r&&(this.recovery=r),Object.freeze(this)}static fromBytes(e,t=M){let r;if(!function(e,t){u(t);let r=C.signature;(0,a.GB)(e,"compact"===t?r:"recovered"===t?r+1:void 0,`${t} signature`)}(e,t),"der"===t){let{r:t,s:r}=p.toSig((0,a.GB)(e));return new O(t,r)}"recovered"===t&&(r=e[0],t="compact",e=e.subarray(1));let i=h.BYTES,n=e.subarray(0,i),s=e.subarray(i,2*i);return new O(h.fromBytes(n),h.fromBytes(s),r)}static fromHex(e,t){return this.fromBytes((0,n.nr)(e),t)}addRecoveryBit(e){return new O(this.r,this.s,e)}recoverPublicKey(t){let r=c.ORDER,{r:i,s,recovery:o}=this;if(null==o||![0,1,2,3].includes(o))throw Error("recovery id invalid");if(f*y<r&&o>1)throw Error("recovery id is ambiguous for h>1 curve");let l=2===o||3===o?i+f:i;if(!c.isValid(l))throw Error("recovery id 2 or 3 invalid");let u=c.toBytes(l),d=e.fromBytes((0,n.eV)(E((1&o)==0),u)),p=h.inv(l),g=T((0,a.ql)("msgHash",t)),m=h.create(-g*p),b=h.create(s*p),w=e.BASE.multiplyUnsafe(m).add(d.multiplyUnsafe(b));if(w.is0())throw Error("point at infinify");return w.assertValidity(),w}hasHighS(){return this.s>f>>m}toBytes(e=M){if(u(e),"der"===e)return(0,n.nr)(p.hexFromSig(this));let t=h.toBytes(this.r),r=h.toBytes(this.s);if("recovered"===e){if(null==this.recovery)throw Error("recovery bit must be present");return(0,n.eV)(Uint8Array.of(this.recovery),t,r)}return(0,n.eV)(t,r)}toHex(e){return(0,n.ci)(this.toBytes(e))}assertValidity(){}static fromCompact(e){return O.fromBytes((0,a.ql)("sig",e),"compact")}static fromDER(e){return O.fromBytes((0,a.ql)("sig",e),"der")}normalizeS(){return this.hasHighS()?new O(this.r,h.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,n.ci)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,n.ci)(this.toBytes("compact"))}}let P=r.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=(0,a.Hv)(e),r=8*e.length-b;return r>0?t>>BigInt(r):t},T=r.bits2int_modN||function(e){return h.create(P(e))},R=(0,a.dQ)(b);function D(e){return(0,a.Fy)("num < 2^"+b,e,g,R),h.toBytes(e)}function k(e,r){return(0,a.GB)(e,void 0,"message"),r?(0,a.GB)(t(e),void 0,"prehashed message"):e}return Object.freeze({keygen:w,getPublicKey:_,getSharedSecret:A,utils:S,lengths:C,Point:e,sign:function(r,o,c={}){let{seed:l,k2sig:u}=function(t,r,s){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{lowS:o,prehash:c,extraEntropy:l}=d(s,N),u=T(t=k(t,c)),p=v(h,r),y=[D(p),D(u)];if(null!=l&&!1!==l){let e=!0===l?i(C.secretKey):l;y.push((0,a.ql)("extraEntropy",e))}return{seed:(0,n.eV)(...y),k2sig:function(t){let r=P(t);if(!h.isValidNot0(r))return;let i=h.inv(r),n=e.BASE.multiply(r).toAffine(),s=h.create(n.x);if(s===g)return;let a=h.create(i*h.create(u+s*p));if(a===g)return;let c=(n.x===s?0:2)|Number(n.y&m),l=a;return o&&a>f>>m&&(l=h.neg(a),c^=1),new O(s,l,c)}}}(r=(0,a.ql)("message",r),o,c);return(0,a.n$)(t.outputLen,h.BYTES,s)(l,u)},verify:function(t,r,i,s={}){let{lowS:o,prehash:c,format:l}=d(s,N);if(i=(0,a.ql)("publicKey",i),r=k((0,a.ql)("message",r),c),"strict"in s)throw Error("options.strict was renamed to lowS");let u=void 0===l?function(e){let t;let r="string"==typeof e||(0,n._t)(e),i=!r&&null!==e&&"object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!r&&!i)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(i)t=new O(e.r,e.s);else if(r){try{t=O.fromBytes((0,a.ql)("sig",e),"der")}catch(e){if(!(e instanceof p.Err))throw e}if(!t)try{t=O.fromBytes((0,a.ql)("sig",e),"compact")}catch(e){return!1}}return!!t&&t}(t):O.fromBytes((0,a.ql)("sig",t),l);if(!1===u)return!1;try{let t=e.fromBytes(i);if(o&&u.hasHighS())return!1;let{r:n,s}=u,a=T(r),c=h.inv(s),l=h.create(a*c),d=h.create(n*c),f=e.BASE.multiplyUnsafe(l).add(t.multiplyUnsafe(d));if(f.is0())return!1;return h.create(f.x)===n}catch(e){return!1}},recoverPublicKey:function(e,t,r={}){let{prehash:i}=d(r,N);return t=k(t,i),O.fromBytes(e,"recovered").recoverPublicKey(t).toBytes()},Signature:O,hash:t})}(function(e,t={}){let r=(0,c.rO)("weierstrass",e,t),{Fp:i,Fn:s}=r,o=r.CURVE,{h:l,n:u}=o;(0,a.fA)(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:d}=t;if(d&&(!i.is0(o.a)||"bigint"!=typeof d.beta||!Array.isArray(d.basises)))throw Error('invalid endo: expected "beta": bigint and "basises": array');let f=I(i,s);function p(){if(!i.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let y=t.toBytes||function(e,t,r){let{x:s,y:o}=t.toAffine(),c=i.toBytes(s);if((0,a.po)(r,"isCompressed"),!r)return(0,n.eV)(Uint8Array.of(4),c,i.toBytes(o));{p();let e=!i.isOdd(o);return(0,n.eV)(E(e),c)}},_=t.fromBytes||function(e){(0,a.GB)(e,void 0,"Point");let{publicKey:t,publicKeyUncompressed:r}=f,n=e.length,s=e[0],o=e.subarray(1);if(n===t&&(2===s||3===s)){let e;let t=i.fromBytes(o);if(!i.isValid(t))throw Error("bad point: is not on curve, wrong x");let r=A(t);try{e=i.sqrt(r)}catch(e){throw Error("bad point: is not on curve, sqrt error"+(e instanceof Error?": "+e.message:""))}return p(),(1&s)==1!==i.isOdd(e)&&(e=i.neg(e)),{x:t,y:e}}if(n===r&&4===s){let e=i.BYTES,t=i.fromBytes(o.subarray(0,e)),r=i.fromBytes(o.subarray(e,2*e));if(!S(t,r))throw Error("bad point: is not on curve");return{x:t,y:r}}throw Error(`bad point: got length ${n}, expected compressed=${t} or uncompressed=${r}`)};function A(e){let t=i.sqr(e),r=i.mul(t,e);return i.add(i.add(r,i.mul(e,o.a)),o.b)}function S(e,t){let r=i.sqr(t),n=A(e);return i.eql(r,n)}if(!S(o.Gx,o.Gy))throw Error("bad curve params: generator point");let C=i.mul(i.pow(o.a,b),w),N=i.mul(i.sqr(o.b),BigInt(27));if(i.is0(i.add(C,N)))throw Error("bad curve params: a or b");function M(e,t,r=!1){if(!i.isValid(t)||r&&i.is0(t))throw Error(`bad point coordinate ${e}`);return t}function x(e){if(!(e instanceof D))throw Error("ProjectivePoint expected")}function O(e){if(!d||!d.basises)throw Error("no endo");return function(e,t,r){let[[i,n],[s,o]]=t,c=h(o*e,r),l=h(-n*e,r),u=e-c*i-l*s,d=-c*n-l*o,f=u<g,p=d<g;f&&(u=-u),p&&(d=-d);let y=(0,a.dQ)(Math.ceil((0,a.Dd)(r)/2))+m;if(u<g||u>=y||d<g||d>=y)throw Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:f,k1:u,k2neg:p,k2:d}}(e,d.basises,s.ORDER)}let P=(0,a.H9)((e,t)=>{let{X:r,Y:n,Z:s}=e;if(i.eql(s,i.ONE))return{x:r,y:n};let o=e.is0();null==t&&(t=o?i.ONE:i.inv(s));let a=i.mul(r,t),c=i.mul(n,t),l=i.mul(s,t);if(o)return{x:i.ZERO,y:i.ZERO};if(!i.eql(l,i.ONE))throw Error("invZ was invalid");return{x:a,y:c}}),T=(0,a.H9)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!i.is0(e.Y))return;throw Error("bad point: ZERO")}let{x:r,y:n}=e.toAffine();if(!i.isValid(r)||!i.isValid(n))throw Error("bad point: x or y not field elements");if(!S(r,n))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function R(e,t,r,n,s){return r=new D(i.mul(r.X,e),r.Y,r.Z),t=(0,c.xg)(n,t),r=(0,c.xg)(s,r),t.add(r)}class D{constructor(e,t,r){this.X=M("x",e),this.Y=M("y",t,!0),this.Z=M("z",r),Object.freeze(this)}static CURVE(){return o}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!i.isValid(t)||!i.isValid(r))throw Error("invalid affine point");if(e instanceof D)throw Error("projective point not allowed");return i.is0(t)&&i.is0(r)?D.ZERO:new D(t,r,i.ONE)}static fromBytes(e){let t=D.fromAffine(_((0,a.GB)(e,void 0,"point")));return t.assertValidity(),t}static fromHex(e){return D.fromBytes((0,a.ql)("pointHex",e))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return L.createCache(this,e),t||this.multiply(b),this}assertValidity(){T(this)}hasEvenY(){let{y:e}=this.toAffine();if(!i.isOdd)throw Error("Field doesn't support isOdd");return!i.isOdd(e)}equals(e){x(e);let{X:t,Y:r,Z:n}=this,{X:s,Y:o,Z:a}=e,c=i.eql(i.mul(t,a),i.mul(s,n)),l=i.eql(i.mul(r,a),i.mul(o,n));return c&&l}negate(){return new D(this.X,i.neg(this.Y),this.Z)}double(){let{a:e,b:t}=o,r=i.mul(t,b),{X:n,Y:s,Z:a}=this,c=i.ZERO,l=i.ZERO,h=i.ZERO,u=i.mul(n,n),d=i.mul(s,s),f=i.mul(a,a),p=i.mul(n,s);return p=i.add(p,p),h=i.mul(n,a),h=i.add(h,h),c=i.mul(e,h),l=i.mul(r,f),l=i.add(c,l),c=i.sub(d,l),l=i.add(d,l),l=i.mul(c,l),c=i.mul(p,c),h=i.mul(r,h),f=i.mul(e,f),p=i.sub(u,f),p=i.mul(e,p),p=i.add(p,h),h=i.add(u,u),u=i.add(h,u),u=i.add(u,f),u=i.mul(u,p),l=i.add(l,u),f=i.mul(s,a),f=i.add(f,f),u=i.mul(f,p),c=i.sub(c,u),h=i.mul(f,d),h=i.add(h,h),new D(c,l,h=i.add(h,h))}add(e){x(e);let{X:t,Y:r,Z:n}=this,{X:s,Y:a,Z:c}=e,l=i.ZERO,h=i.ZERO,u=i.ZERO,d=o.a,f=i.mul(o.b,b),p=i.mul(t,s),g=i.mul(r,a),m=i.mul(n,c),y=i.add(t,r),w=i.add(s,a);y=i.mul(y,w),w=i.add(p,g),y=i.sub(y,w),w=i.add(t,n);let v=i.add(s,c);return w=i.mul(w,v),v=i.add(p,m),w=i.sub(w,v),v=i.add(r,n),l=i.add(a,c),v=i.mul(v,l),l=i.add(g,m),v=i.sub(v,l),u=i.mul(d,w),l=i.mul(f,m),u=i.add(l,u),l=i.sub(g,u),u=i.add(g,u),h=i.mul(l,u),g=i.add(p,p),g=i.add(g,p),m=i.mul(d,m),w=i.mul(f,w),g=i.add(g,m),m=i.sub(p,m),m=i.mul(d,m),w=i.add(w,m),p=i.mul(g,w),h=i.add(h,p),p=i.mul(v,w),l=i.mul(y,l),l=i.sub(l,p),p=i.mul(y,g),u=i.mul(v,u),new D(l,h,u=i.add(u,p))}subtract(e){return this.add(e.negate())}is0(){return this.equals(D.ZERO)}multiply(e){let r,i;let{endo:n}=t;if(!s.isValidNot0(e))throw Error("invalid scalar: out of range");let o=e=>L.cached(this,e,e=>(0,c.A1)(D,e));if(n){let{k1neg:t,k1:s,k2neg:a,k2:c}=O(e),{p:l,f:h}=o(s),{p:u,f:d}=o(c);i=h.add(d),r=R(n.beta,l,u,t,a)}else{let{p:t,f:n}=o(e);r=t,i=n}return(0,c.A1)(D,[r,i])[0]}multiplyUnsafe(e){let{endo:r}=t;if(!s.isValid(e))throw Error("invalid scalar: out of range");if(e===g||this.is0())return D.ZERO;if(e===m)return this;if(L.hasCache(this))return this.multiply(e);if(!r)return L.unsafe(this,e);{let{k1neg:t,k1:i,k2neg:n,k2:s}=O(e),{p1:o,p2:a}=(0,c.N6)(D,this,i,s);return R(r.beta,o,a,t,n)}}multiplyAndAddUnsafe(e,t,r){let i=this.multiplyUnsafe(t).add(e.multiplyUnsafe(r));return i.is0()?void 0:i}toAffine(e){return P(this,e)}isTorsionFree(){let{isTorsionFree:e}=t;return l===m||(e?e(D,this):L.unsafe(this,u).is0())}clearCofactor(){let{clearCofactor:e}=t;return l===m?this:e?e(D,this):this.multiplyUnsafe(l)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}toBytes(e=!0){return(0,a.po)(e,"isCompressed"),this.assertValidity(),y(D,this,e)}toHex(e=!0){return(0,n.ci)(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(e=!0){return this.toBytes(e)}_setWindowSize(e){this.precompute(e)}static normalizeZ(e){return(0,c.A1)(D,e)}static msm(e,t){return(0,c.D1)(D,s,e,t)}static fromPrivateKey(e){return D.BASE.multiply(v(s,e))}}D.BASE=new D(o.Gx,o.Gy,i.ONE),D.ZERO=new D(i.ZERO,i.ONE,i.ZERO),D.Fp=i,D.Fn=s;let k=s.BITS,L=new c.Mx(D,t.endo?Math.ceil(k/2):k);return D.BASE.precompute(8),D}(t,r),i,s))})({...e,hash:t});return{...r(t),create:r}}({..._,Fp:C,lowS:!0,endo:A},i.JQ)},9070:function(e,t,r){"use strict";r.d(t,{Dd:function(){return w},EQ:function(){return _},Fy:function(){return b},GB:function(){return a},H9:function(){return A},HV:function(){return m},Hv:function(){return h},S5:function(){return f},Wd:function(){return g},dQ:function(){return v},fA:function(){return I},n$:function(){return E},po:function(){return o},ql:function(){return p},tL:function(){return d},ty:function(){return u},uz:function(){return c}});var i=r(25884);let n=BigInt(0),s=BigInt(1);function o(e,t=""){if("boolean"!=typeof e)throw Error((t&&`"${t}"`)+"expected boolean, got type="+typeof e);return e}function a(e,t,r=""){let n=(0,i._t)(e),s=e?.length,o=void 0!==t;if(!n||o&&s!==t)throw Error((r&&`"${r}" `)+"expected Uint8Array"+(o?` of length ${t}`:"")+", got "+(n?`length=${s}`:`type=${typeof e}`));return e}function c(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function l(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?n:BigInt("0x"+e)}function h(e){return l((0,i.ci)(e))}function u(e){return(0,i.gk)(e),l((0,i.ci)(Uint8Array.from(e).reverse()))}function d(e,t){return(0,i.nr)(e.toString(16).padStart(2*t,"0"))}function f(e,t){return d(e,t).reverse()}function p(e,t,r){let n;if("string"==typeof t)try{n=(0,i.nr)(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if((0,i._t)(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let s=n.length;if("number"==typeof r&&s!==r)throw Error(e+" of length "+r+" expected, got "+s);return n}function g(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}function m(e){return Uint8Array.from(e)}let y=e=>"bigint"==typeof e&&n<=e;function b(e,t,r,i){if(!(y(t)&&y(r)&&y(i))||!(r<=t)||!(t<i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}function w(e){let t;for(t=0;e>n;e>>=s,t+=1);return t}let v=e=>(s<<BigInt(e))-s;function E(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=e=>new Uint8Array(e),s=e=>Uint8Array.of(e),o=n(e),a=n(e),c=0,l=()=>{o.fill(1),a.fill(0),c=0},h=(...e)=>r(a,o,...e),u=(e=n(0))=>{a=h(s(0),e),o=h(),0!==e.length&&(a=h(s(1),e),o=h())},d=()=>{if(c++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(o=h()).slice();r.push(t),e+=o.length}return(0,i.eV)(...r)};return(e,t)=>{let r;for(l(),u(e);!(r=t(d()));)u();return l(),r}}function I(e,t,r={}){if(!e||"object"!=typeof e)throw Error("expected valid options object");function i(t,r,i){let n=e[t];if(i&&void 0===n)return;let s=typeof n;if(s!==r||null===n)throw Error(`param "${t}" is invalid: expected ${r}, got ${s}`)}Object.entries(t).forEach(([e,t])=>i(e,t,!1)),Object.entries(r).forEach(([e,t])=>i(e,t,!0))}let _=()=>{throw Error("not implemented")};function A(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}}},16177:function(e,t,r){"use strict";r.d(t,{$p:function(){return u},EP:function(){return d},FL:function(){return h},Fn:function(){return b},IH:function(){return m},Iq:function(){return a},NI:function(){return o},Ou:function(){return l},SD:function(){return p},Vl:function(){return s},Xb:function(){return w},ac:function(){return y},gm:function(){return f},m_:function(){return c},mk:function(){return g},pp:function(){return I},u8:function(){return v},zP:function(){return E}});let i=BigInt(4294967296-1),n=BigInt(32);function s(e,t=!1){let r=e.length,s=new Uint32Array(r),o=new Uint32Array(r);for(let a=0;a<r;a++){let{h:r,l:c}=function(e,t=!1){return t?{h:Number(e&i),l:Number(e>>n&i)}:{h:0|Number(e>>n&i),l:0|Number(e&i)}}(e[a],t);[s[a],o[a]]=[r,c]}return[s,o]}let o=(e,t,r)=>e>>>r,a=(e,t,r)=>e<<32-r|t>>>r,c=(e,t,r)=>e>>>r|t<<32-r,l=(e,t,r)=>e<<32-r|t>>>r,h=(e,t,r)=>e<<64-r|t>>>r-32,u=(e,t,r)=>e>>>r-32|t<<64-r,d=(e,t,r)=>e<<r|t>>>32-r,f=(e,t,r)=>t<<r|e>>>32-r,p=(e,t,r)=>t<<r-32|e>>>64-r,g=(e,t,r)=>e<<r-32|t>>>64-r;function m(e,t,r,i){let n=(t>>>0)+(i>>>0);return{h:e+r+(n/4294967296|0)|0,l:0|n}}let y=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),b=(e,t,r,i)=>t+r+i+(e/4294967296|0)|0,w=(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),v=(e,t,r,i,n)=>t+r+i+n+(e/4294967296|0)|0,E=(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0),I=(e,t,r,i,n,s)=>t+r+i+n+s+(e/4294967296|0)|0},68553:function(e,t,r){"use strict";r.d(t,{JQ:function(){return y},o:function(){return b}});var i=r(25884);class n extends i.kb{constructor(e,t,r,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=(0,i.GL)(this.buffer)}update(e){(0,i.$h)(this),e=(0,i.O0)(e),(0,i.gk)(e);let{view:t,buffer:r,blockLen:n}=this,s=e.length;for(let o=0;o<s;){let a=Math.min(n-this.pos,s-o);if(a===n){let t=(0,i.GL)(e);for(;n<=s-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,i.$h)(this),(0,i.eB)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:s}=this,{pos:o}=this;t[o++]=128,(0,i.ru)(this.buffer.subarray(o)),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;!function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,l=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+l,a,i)}(r,n-8,BigInt(8*this.length),s),this.process(r,0);let a=(0,i.GL)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,h=this.get();if(l>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)a.setUint32(4*e,h[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.destroyed=s,e.finished=n,e.length=i,e.pos=o,i%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let s=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var a=r(16177);let c=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),l=new Uint32Array(64);class h extends n{constructor(e=32){super(64,e,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)l[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=l[e-15],r=l[e-2],n=(0,i.np)(t,7)^(0,i.np)(t,18)^t>>>3,s=(0,i.np)(r,17)^(0,i.np)(r,19)^r>>>10;l[e]=s+l[e-7]+n+l[e-16]|0}let{A:r,B:n,C:s,D:o,E:a,F:h,G:u,H:d}=this;for(let e=0;e<64;e++){var f,p,g,m;let t=d+((0,i.np)(a,6)^(0,i.np)(a,11)^(0,i.np)(a,25))+((f=a)&h^~f&u)+c[e]+l[e]|0,y=((0,i.np)(r,2)^(0,i.np)(r,13)^(0,i.np)(r,22))+((p=r)&(g=n)^p&(m=s)^g&m)|0;d=u,u=h,h=a,a=o+t|0,o=s,s=n,n=r,r=t+y|0}r=r+this.A|0,n=n+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,h=h+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,n,s,o,a,h,u,d)}roundClean(){(0,i.ru)(l)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,i.ru)(this.buffer)}}let u=a.Vl(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),d=u[0],f=u[1],p=new Uint32Array(80),g=new Uint32Array(80);class m extends n{constructor(e=64){super(128,e,16,!1),this.Ah=0|o[0],this.Al=0|o[1],this.Bh=0|o[2],this.Bl=0|o[3],this.Ch=0|o[4],this.Cl=0|o[5],this.Dh=0|o[6],this.Dl=0|o[7],this.Eh=0|o[8],this.El=0|o[9],this.Fh=0|o[10],this.Fl=0|o[11],this.Gh=0|o[12],this.Gl=0|o[13],this.Hh=0|o[14],this.Hl=0|o[15]}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:c,El:l,Fh:h,Fl:u,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,i,n,s,o,a,c,l,h,u,d,f,p,g]}set(e,t,r,i,n,s,o,a,c,l,h,u,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|h,this.Fl=0|u,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)p[r]=e.getUint32(t),g[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|p[e-15],r=0|g[e-15],i=a.m_(t,r,1)^a.m_(t,r,8)^a.NI(t,r,7),n=a.Ou(t,r,1)^a.Ou(t,r,8)^a.Iq(t,r,7),s=0|p[e-2],o=0|g[e-2],c=a.m_(s,o,19)^a.FL(s,o,61)^a.NI(s,o,6),l=a.Ou(s,o,19)^a.$p(s,o,61)^a.Iq(s,o,6),h=a.Xb(n,l,g[e-7],g[e-16]),u=a.u8(h,i,c,p[e-7],p[e-16]);p[e]=0|u,g[e]=0|h}let{Ah:r,Al:i,Bh:n,Bl:s,Ch:o,Cl:c,Dh:l,Dl:h,Eh:u,El:m,Fh:y,Fl:b,Gh:w,Gl:v,Hh:E,Hl:I}=this;for(let e=0;e<80;e++){let t=a.m_(u,m,14)^a.m_(u,m,18)^a.FL(u,m,41),_=a.Ou(u,m,14)^a.Ou(u,m,18)^a.$p(u,m,41),A=u&y^~u&w,S=m&b^~m&v,C=a.zP(I,_,S,f[e],g[e]),N=a.pp(C,E,t,A,d[e],p[e]),M=0|C,x=a.m_(r,i,28)^a.FL(r,i,34)^a.FL(r,i,39),O=a.Ou(r,i,28)^a.$p(r,i,34)^a.$p(r,i,39),P=r&n^r&o^n&o,T=i&s^i&c^s&c;E=0|w,I=0|v,w=0|y,v=0|b,y=0|u,b=0|m,({h:u,l:m}=a.IH(0|l,0|h,0|N,0|M)),l=0|o,h=0|c,o=0|n,c=0|s,n=0|r,s=0|i;let R=a.ac(M,O,T);r=a.Fn(R,N,x,P),i=0|R}({h:r,l:i}=a.IH(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:s}=a.IH(0|this.Bh,0|this.Bl,0|n,0|s)),({h:o,l:c}=a.IH(0|this.Ch,0|this.Cl,0|o,0|c)),({h:l,l:h}=a.IH(0|this.Dh,0|this.Dl,0|l,0|h)),({h:u,l:m}=a.IH(0|this.Eh,0|this.El,0|u,0|m)),({h:y,l:b}=a.IH(0|this.Fh,0|this.Fl,0|y,0|b)),({h:w,l:v}=a.IH(0|this.Gh,0|this.Gl,0|w,0|v)),({h:E,l:I}=a.IH(0|this.Hh,0|this.Hl,0|E,0|I)),this.set(r,i,n,s,o,c,l,h,u,m,y,b,w,v,E,I)}roundClean(){(0,i.ru)(p,g)}destroy(){(0,i.ru)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let y=(0,i.V1)(()=>new h),b=(0,i.V1)(()=>new m)},29272:function(e,t,r){"use strict";r.d(t,{JQ:function(){return i}});let i=r(68553).JQ},92530:function(e,t,r){"use strict";r.d(t,{fr:function(){return v}});var i=r(16177),n=r(25884);let s=BigInt(0),o=BigInt(1),a=BigInt(2),c=BigInt(7),l=BigInt(256),h=BigInt(113),u=[],d=[],f=[];for(let e=0,t=o,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],u.push(2*(5*i+r)),d.push((e+1)*(e+2)/2%64);let n=s;for(let e=0;e<7;e++)(t=(t<<o^(t>>c)*h)%l)&a&&(n^=o<<(o<<BigInt(e))-o);f.push(n)}let p=(0,i.Vl)(f,!0),g=p[0],m=p[1],y=(e,t,r)=>r>32?(0,i.SD)(e,t,r):(0,i.EP)(e,t,r),b=(e,t,r)=>r>32?(0,i.mk)(e,t,r):(0,i.gm)(e,t,r);class w extends n.kb{constructor(e,t,r,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,(0,n.k8)(r),!(0<e&&e<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,n.Jq)(this.state)}clone(){return this._cloneInto()}keccak(){(0,n.Ux)(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=y(s,o,1)^r[i],c=b(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=d[r],s=y(t,n,i),o=b(t,n,i),a=u[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=g[i],e[1]^=m[i]}(0,n.ru)(r)}(this.state32,this.rounds),(0,n.Ux)(this.state32),this.posOut=0,this.pos=0}update(e){(0,n.$h)(this),e=(0,n.O0)(e),(0,n.gk)(e);let{blockLen:t,state:r}=this,i=e.length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){(0,n.$h)(this,!1),(0,n.gk)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.k8)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.eB)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,n.ru)(this.state)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new w(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let v=(0,n.V1)(()=>new w(136,1,32))},25884:function(e,t,r){"use strict";r.d(t,{kb:function(){return A},gk:function(){return o},$h:function(){return c},z3:function(){return a},k8:function(){return s},eB:function(){return l},ci:function(){return y},ru:function(){return u},eV:function(){return _},V1:function(){return S},GL:function(){return d},nr:function(){return v},_t:function(){return n},O6:function(){return C},np:function(){return f},Ux:function(){return p},O0:function(){return I},Jq:function(){return h},iY:function(){return E}});let i="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function o(e,...t){if(!n(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function a(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.createHasher");s(e.outputLen),s(e.blockLen)}function c(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function l(e,t){o(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}function h(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function u(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function d(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function f(e,t){return e<<32-t|e>>>t}let p=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]?e=>e:function(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}return e},g="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,m=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function y(e){if(o(e),g)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=m[e[r]];return t}let b={_0:48,_9:57,A:65,F:70,a:97,f:102};function w(e){return e>=b._0&&e<=b._9?e-b._0:e>=b.A&&e<=b.F?e-(b.A-10):e>=b.a&&e<=b.f?e-(b.a-10):void 0}function v(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(g)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=w(e.charCodeAt(n)),s=w(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function E(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function I(e){return"string"==typeof e&&(e=E(e)),o(e),e}function _(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];o(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}class A{}function S(e){let t=t=>e().update(I(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function C(e=32){if(i&&"function"==typeof i.getRandomValues)return i.getRandomValues(new Uint8Array(e));if(i&&"function"==typeof i.randomBytes)return Uint8Array.from(i.randomBytes(e));throw Error("crypto.getRandomValues must be defined")}},44649:function(e,t,r){"use strict";r.d(t,{b:function(){return i}});let i={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network"}},68903:function(e,t,r){"use strict";r.d(t,{p:function(){return i}});let i={caipNetworkIdToNumber:e=>e?Number(e.split(":")[1]):void 0,parseEvmChainId(e){return"string"==typeof e?this.caipNetworkIdToNumber(e):e},getNetworksByNamespace:(e,t)=>e?.filter(e=>e.chainNamespace===t)||[],getFirstNetworkByNamespace(e,t){return this.getNetworksByNamespace(e,t)[0]}}},61616:function(e,t,r){"use strict";r.d(t,{$U:function(){return o},Vk:function(){return n},mr:function(){return s},uJ:function(){return i}});let i={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache"};function n(e){if(!e)throw Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${e}:connected_connector_id`}let s={setItem(e,t){o()&&void 0!==t&&localStorage.setItem(e,t)},getItem(e){if(o())return localStorage.getItem(e)||void 0},removeItem(e){o()&&localStorage.removeItem(e)},clear(){o()&&localStorage.clear()}};function o(){return"undefined"!=typeof window&&"undefined"!=typeof localStorage}},62714:function(e,t,r){"use strict";function i(e,t){return"light"===t?{"--w3m-accent":e?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":e?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}r.d(t,{t:function(){return i}})},68584:function(e,t,r){"use strict";r.d(t,{N:function(){return h}});var i=r(33085),n=r(59712),s=r(53357),o=r(61704),a=r(92144),c=r(66909);let l=(0,i.sj)({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),h={state:l,replaceState(e){e&&Object.assign(l,(0,i.iH)(e))},subscribe:e=>a.R.subscribeChainProp("accountState",t=>{if(t)return e(t)}),subscribeKey(e,t,r){let i;return a.R.subscribeChainProp("accountState",r=>{if(r){let n=r[e];i!==n&&(i=n,t(n))}},r)},setStatus(e,t){a.R.setAccountProp("status",e,t)},getCaipAddress:e=>a.R.getAccountProp("caipAddress",e),setCaipAddress(e,t){let r=e?s.j.getPlainAddress(e):void 0;t===a.R.state.activeChain&&(a.R.state.activeCaipAddress=e),a.R.setAccountProp("caipAddress",e,t),a.R.setAccountProp("address",r,t)},setBalance(e,t,r){a.R.setAccountProp("balance",e,r),a.R.setAccountProp("balanceSymbol",t,r)},setProfileName(e,t){a.R.setAccountProp("profileName",e,t)},setProfileImage(e,t){a.R.setAccountProp("profileImage",e,t)},setUser(e,t){a.R.setAccountProp("user",e,t)},setAddressExplorerUrl(e,t){a.R.setAccountProp("addressExplorerUrl",e,t)},setSmartAccountDeployed(e,t){a.R.setAccountProp("smartAccountDeployed",e,t)},setCurrentTab(e){a.R.setAccountProp("currentTab",e,a.R.state.activeChain)},setTokenBalance(e,t){e&&a.R.setAccountProp("tokenBalance",e,t)},setShouldUpdateToAddress(e,t){a.R.setAccountProp("shouldUpdateToAddress",e,t)},setAllAccounts(e,t){a.R.setAccountProp("allAccounts",e,t)},addAddressLabel(e,t,r){let i=a.R.getAccountProp("addressLabels",r)||new Map;i.set(e,t),a.R.setAccountProp("addressLabels",i,r)},removeAddressLabel(e,t){let r=a.R.getAccountProp("addressLabels",t)||new Map;r.delete(e),a.R.setAccountProp("addressLabels",r,t)},setConnectedWalletInfo(e,t){a.R.setAccountProp("connectedWalletInfo",e,t,!1)},setPreferredAccountType(e,t){a.R.setAccountProp("preferredAccountType",e,t)},setSocialProvider(e,t){e&&a.R.setAccountProp("socialProvider",e,t)},setSocialWindow(e,t){a.R.setAccountProp("socialWindow",e?(0,i.iH)(e):void 0,t)},setFarcasterUrl(e,t){a.R.setAccountProp("farcasterUrl",e,t)},async fetchTokenBalance(e){l.balanceLoading=!0;let t=a.R.state.activeCaipNetwork?.caipNetworkId,r=a.R.state.activeCaipNetwork?.chainNamespace,i=a.R.state.activeCaipAddress,h=i?s.j.getPlainAddress(i):void 0;if(l.lastRetry&&!s.j.isAllowedRetry(l.lastRetry,30*n.bq.ONE_SEC_MS))return l.balanceLoading=!1,[];try{if(h&&t&&r){let e=(await o.L.getBalance(h,t)).balances.filter(e=>"0"!==e.quantity.decimals);return this.setTokenBalance(e,r),l.lastRetry=void 0,l.balanceLoading=!1,e}}catch(t){l.lastRetry=Date.now(),e?.(t),c.SnackController.showError("Token Balance Unavailable")}finally{l.balanceLoading=!1}return[]},resetAccount(e){a.R.resetAccount(e)}}},72723:function(e,t,r){"use strict";r.d(t,{AlertController:function(){return a}});var i=r(33085),n=r(55543),s=r(48415);let o=(0,i.sj)({message:"",variant:"info",open:!1}),a={state:o,subscribeKey:(e,t)=>(0,n.VW)(o,e,t),open(e,t){let{debug:r}=s.OptionsController.state,{shortMessage:i,longMessage:n}=e;r&&(o.message=i,o.variant=t,o.open=!0),n&&console.error("function"==typeof n?n():n)},close(){o.open=!1,o.message="",o.variant="info"}}},17766:function(e,t,r){"use strict";r.d(t,{ApiController:function(){return y}});var i=r(33085),n=r(55543),s=r(63043),o=r(53357),a=r(39905),c=r(36801),l=r(22472),h=r(92144),u=r(54173),d=r(31929),f=r(48415);let p=o.j.getApiUrl(),g=new a.V({baseUrl:p,clientId:null}),m=(0,i.sj)({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),y={state:m,subscribeKey:(e,t)=>(0,n.VW)(m,e,t),_getSdkProperties(){let{projectId:e,sdkType:t,sdkVersion:r}=f.OptionsController.state;return{projectId:e,st:t||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions:e=>f.OptionsController.state.isUniversalProvider?e.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):e,async _fetchWalletImage(e){let t=`${g.baseUrl}/getWalletImage/${e}`,r=await g.getBlob({path:t,params:y._getSdkProperties()});l.W.setWalletImage(e,URL.createObjectURL(r))},async _fetchNetworkImage(e){let t=`${g.baseUrl}/public/getAssetImage/${e}`,r=await g.getBlob({path:t,params:y._getSdkProperties()});l.W.setNetworkImage(e,URL.createObjectURL(r))},async _fetchConnectorImage(e){let t=`${g.baseUrl}/public/getAssetImage/${e}`,r=await g.getBlob({path:t,params:y._getSdkProperties()});l.W.setConnectorImage(e,URL.createObjectURL(r))},async _fetchCurrencyImage(e){let t=`${g.baseUrl}/public/getCurrencyImage/${e}`,r=await g.getBlob({path:t,params:y._getSdkProperties()});l.W.setCurrencyImage(e,URL.createObjectURL(r))},async _fetchTokenImage(e){let t=`${g.baseUrl}/public/getTokenImage/${e}`,r=await g.getBlob({path:t,params:y._getSdkProperties()});l.W.setTokenImage(e,URL.createObjectURL(r))},async fetchNetworkImages(){let e=h.R.getAllRequestedCaipNetworks(),t=e?.map(({assets:e})=>e?.imageId).filter(Boolean).filter(e=>!s.f.getNetworkImageById(e));t&&await Promise.allSettled(t.map(e=>y._fetchNetworkImage(e)))},async fetchConnectorImages(){let{connectors:e}=u.ConnectorController.state,t=e.map(({imageId:e})=>e).filter(Boolean);await Promise.allSettled(t.map(e=>y._fetchConnectorImage(e)))},async fetchCurrencyImages(e=[]){await Promise.allSettled(e.map(e=>y._fetchCurrencyImage(e)))},async fetchTokenImages(e=[]){await Promise.allSettled(e.map(e=>y._fetchTokenImage(e)))},async fetchFeaturedWallets(){let{featuredWalletIds:e}=f.OptionsController.state;if(e?.length){let{data:t}=await g.get({path:"/getWallets",params:{...y._getSdkProperties(),page:"1",entries:e?.length?String(e.length):"4",include:e?.join(",")}});t.sort((t,r)=>e.indexOf(t.id)-e.indexOf(r.id));let r=t.map(e=>e.image_id).filter(Boolean);await Promise.allSettled(r.map(e=>y._fetchWalletImage(e))),m.featured=t,m.allFeatured=t}},async fetchRecommendedWallets(){try{m.isFetchingRecommendedWallets=!0;let{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:r}=f.OptionsController.state,i=[...t??[],...r??[]].filter(Boolean),n=h.R.getRequestedCaipNetworkIds().join(","),{data:s,count:o}=await g.get({path:"/getWallets",params:{...y._getSdkProperties(),page:"1",chains:n,entries:"4",include:e?.join(","),exclude:i?.join(",")}}),a=c.M.getRecentWallets(),l=s.map(e=>e.image_id).filter(Boolean),u=a.map(e=>e.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(e=>y._fetchWalletImage(e))),m.recommended=s,m.allRecommended=s,m.count=o??0}catch{}finally{m.isFetchingRecommendedWallets=!1}},async fetchWallets({page:e}){let{includeWalletIds:t,excludeWalletIds:r,featuredWalletIds:i}=f.OptionsController.state,n=h.R.getRequestedCaipNetworkIds().join(","),s=[...m.recommended.map(({id:e})=>e),...r??[],...i??[]].filter(Boolean),{data:a,count:c}=await g.get({path:"/getWallets",params:{...y._getSdkProperties(),page:String(e),entries:"40",chains:n,include:t?.join(","),exclude:s.join(",")}}),l=a.slice(0,20).map(e=>e.image_id).filter(Boolean);await Promise.allSettled(l.map(e=>y._fetchWalletImage(e))),m.wallets=o.j.uniqueBy([...m.wallets,...y._filterOutExtensions(a)],"id"),m.count=c>m.count?c:m.count,m.page=e},async initializeExcludedWallets({ids:e}){let t=h.R.getRequestedCaipNetworkIds().join(","),{data:r}=await g.get({path:"/getWallets",params:{...y._getSdkProperties(),page:"1",entries:String(e.length),chains:t,include:e?.join(",")}});r&&r.forEach(e=>{e?.rdns&&m.excludedWallets.push({rdns:e.rdns,name:e.name})})},async searchWallet({search:e,badge:t}){let{includeWalletIds:r,excludeWalletIds:i}=f.OptionsController.state;m.search=[];let n=h.R.getRequestedCaipNetworkIds().join(","),{data:s}=await g.get({path:"/getWallets",params:{...y._getSdkProperties(),page:"1",entries:"100",search:e?.trim(),badge_type:t,chains:n,include:r?.join(","),exclude:i?.join(",")}});d.X.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:t??"",search:e??""}});let a=s.map(e=>e.image_id).filter(Boolean);await Promise.allSettled([...a.map(e=>y._fetchWalletImage(e)),o.j.wait(300)]),m.search=y._filterOutExtensions(s)},initPromise:(e,t)=>m.promises[e]||(m.promises[e]=t()),prefetch:({fetchConnectorImages:e=!0,fetchFeaturedWallets:t=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:i=!0}={})=>Promise.allSettled([e&&y.initPromise("connectorImages",y.fetchConnectorImages),t&&y.initPromise("featuredWallets",y.fetchFeaturedWallets),r&&y.initPromise("recommendedWallets",y.fetchRecommendedWallets),i&&y.initPromise("networkImages",y.fetchNetworkImages)].filter(Boolean)),prefetchAnalyticsConfig(){f.OptionsController.state.features?.analytics&&y.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{let{isAnalyticsEnabled:e}=await g.get({path:"/getAnalyticsConfig",params:y._getSdkProperties()});f.OptionsController.setFeatures({analytics:e})}catch(e){f.OptionsController.setFeatures({analytics:!1})}},setFilterByNamespace(e){if(!e){m.featured=m.allFeatured,m.recommended=m.allRecommended;return}let t=h.R.getRequestedCaipNetworkIds().join(",");m.featured=m.allFeatured.filter(e=>e.chains?.some(e=>t.includes(e))),m.recommended=m.allRecommended.filter(e=>e.chains?.some(e=>t.includes(e)))}}},22472:function(e,t,r){"use strict";r.d(t,{W:function(){return o}});var i=r(33085),n=r(55543);let s=(0,i.sj)({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),o={state:s,subscribeNetworkImages:e=>(0,i.Ld)(s.networkImages,()=>e(s.networkImages)),subscribeKey:(e,t)=>(0,n.VW)(s,e,t),subscribe:e=>(0,i.Ld)(s,()=>e(s)),setWalletImage(e,t){s.walletImages[e]=t},setNetworkImage(e,t){s.networkImages[e]=t},setChainImage(e,t){s.chainImages[e]=t},setConnectorImage(e,t){s.connectorImages={...s.connectorImages,[e]:t}},setTokenImage(e,t){s.tokenImages[e]=t},setCurrencyImage(e,t){s.currencyImages[e]=t}}},61704:function(e,t,r){"use strict";r.d(t,{L:function(){return g}});var i=r(33085),n=r(59712),s=r(53357),o=r(39905),a=r(36801),c=r(68584),l=r(92144),h=r(48415),u=r(66909);let d={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},f=s.j.getBlockchainApiUrl(),p=(0,i.sj)({clientId:null,api:new o.V({baseUrl:f,clientId:null}),supportedChains:{http:[],ws:[]}}),g={state:p,async get(e){let{st:t,sv:r}=g.getSdkProperties(),i=h.OptionsController.state.projectId,n={...e.params||{},st:t,sv:r,projectId:i};return p.api.get({...e,params:n})},getSdkProperties(){let{sdkType:e,sdkVersion:t}=h.OptionsController.state;return{st:e||"unknown",sv:t||"unknown"}},async isNetworkSupported(e){if(!e)return!1;try{p.supportedChains.http.length||await g.getSupportedNetworks()}catch(e){return!1}return p.supportedChains.http.includes(e)},async getSupportedNetworks(){let e=await g.get({path:"v1/supported-chains"});return p.supportedChains=e,e},async fetchIdentity({address:e,caipNetworkId:t}){if(!await g.isNetworkSupported(t))return{avatar:"",name:""};let r=a.M.getIdentityFromCacheForAddress(e);if(r)return r;let i=await g.get({path:`/v1/identity/${e}`,params:{sender:l.R.state.activeCaipAddress?s.j.getPlainAddress(l.R.state.activeCaipAddress):void 0}});return a.M.updateIdentityCache({address:e,identity:i,timestamp:Date.now()}),i},fetchTransactions:async({account:e,cursor:t,onramp:r,signal:i,cache:n,chainId:s})=>await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/account/${e}/history`,params:{cursor:t,onramp:r,chainId:s},signal:i,cache:n}):{data:[],next:void 0},fetchSwapQuote:async({amount:e,userAddress:t,from:r,to:i,gasPrice:n})=>await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:e,userAddress:t,from:r,to:i,gasPrice:n}}):{quotes:[]},fetchSwapTokens:async({chainId:e})=>await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/tokens",params:{chainId:e}}):{tokens:[]},fetchTokenPrice:async({addresses:e})=>await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId)?p.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:e,projectId:h.OptionsController.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]},fetchSwapAllowance:async({tokenAddress:e,userAddress:t})=>await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/allowance",params:{tokenAddress:e,userAddress:t},headers:{"Content-Type":"application/json"}}):{allowance:"0"},async fetchGasPrice({chainId:e}){let{st:t,sv:r}=g.getSdkProperties();if(!await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId))throw Error("Network not supported for Gas Price");return g.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:e,st:t,sv:r}})},async generateSwapCalldata({amount:e,from:t,to:r,userAddress:i,disableEstimate:s}){if(!await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId))throw Error("Network not supported for Swaps");return p.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:e,eip155:{slippage:n.bq.CONVERT_SLIPPAGE_TOLERANCE},projectId:h.OptionsController.state.projectId,from:t,to:r,userAddress:i,disableEstimate:s}})},async generateApproveCalldata({from:e,to:t,userAddress:r}){let{st:i,sv:n}=g.getSdkProperties();if(!await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId))throw Error("Network not supported for Swaps");return g.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:e,to:t,st:i,sv:n}})},async getBalance(e,t,r){let{st:i,sv:n}=g.getSdkProperties();if(!await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId))return u.SnackController.showError("Token Balance Unavailable"),{balances:[]};let s=`${t}:${e}`,o=a.M.getBalanceCacheForCaipAddress(s);if(o)return o;let c=await g.get({path:`/v1/account/${e}/balance`,params:{currency:"usd",chainId:t,forceUpdate:r,st:i,sv:n}});return a.M.updateBalanceCache({caipAddress:s,balance:c,timestamp:Date.now()}),c},lookupEnsName:async e=>await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/account/${e}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]},reverseLookupEnsName:async({address:e})=>await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/reverse/${e}`,params:{sender:c.N.state.address,apiVersion:"2"}}):[],getEnsNameSuggestions:async e=>await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/suggestions/${e}`,params:{zone:"reown.id"}}):{suggestions:[]},registerEnsName:async({coinType:e,address:t,message:r,signature:i})=>await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId)?p.api.post({path:"/v1/profile/account",body:{coin_type:e,address:t,message:r,signature:i},headers:{"Content-Type":"application/json"}}):{success:!1},generateOnRampURL:async({destinationWallets:e,partnerUserId:t,defaultNetwork:r,purchaseAmount:i,paymentAmount:n})=>await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId)?(await p.api.post({path:"/v1/generators/onrampurl",params:{projectId:h.OptionsController.state.projectId},body:{destinationWallets:e,defaultNetwork:r,partnerUserId:t,defaultExperience:"buy",presetCryptoAmount:i,presetFiatAmount:n}})).url:"",async getOnrampOptions(){if(!await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await g.get({path:"/v1/onramp/options"})}catch(e){return d}},async getOnrampQuote({purchaseCurrency:e,paymentCurrency:t,amount:r,network:i}){try{if(!await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId))return null;return await p.api.post({path:"/v1/onramp/quote",params:{projectId:h.OptionsController.state.projectId},body:{purchaseCurrency:e,paymentCurrency:t,amount:r,network:i}})}catch(e){return{coinbaseFee:{amount:r,currency:t.id},networkFee:{amount:r,currency:t.id},paymentSubtotal:{amount:r,currency:t.id},paymentTotal:{amount:r,currency:t.id},purchaseAmount:{amount:r,currency:t.id},quoteId:"mocked-quote-id"}}},getSmartSessions:async e=>await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/sessions/${e}`}):[],revokeSmartSession:async(e,t,r)=>await g.isNetworkSupported(l.R.state.activeCaipNetwork?.caipNetworkId)?p.api.post({path:`/v1/sessions/${e}/revoke`,params:{projectId:h.OptionsController.state.projectId},body:{pci:t,signature:r}}):{success:!1},setClientId(e){p.clientId=e,p.api=new o.V({baseUrl:f,clientId:e})}}},92144:function(e,t,r){"use strict";r.d(t,{R:function(){return W}});var i=r(33085),n=r(55543),s=r(68903),o=r(44649),a=r(54173);function c(e,t){return a.ConnectorController.getConnectorId(e)===t}var l=r(59712),h=r(53357),u=r(36801),d=r(68584),f=r(93046),p=r(31929),g=r(89512),m=r(48415),y=r(96986),b=r(86777),w="[big.js] ",v=w+"Invalid ",E=v+"decimal places",I=v+"rounding mode",_=w+"Division by zero",A={},S=void 0,C=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function N(e,t,r,i){var n=e.c;if(r===S&&(r=e.constructor.RM),0!==r&&1!==r&&2!==r&&3!==r)throw Error(I);if(t<1)i=3===r&&(i||!!n[0])||0===t&&(1===r&&n[0]>=5||2===r&&(n[0]>5||5===n[0]&&(i||n[1]!==S))),n.length=1,i?(e.e=e.e-t+1,n[0]=1):n[0]=e.e=0;else if(t<n.length){if(i=1===r&&n[t]>=5||2===r&&(n[t]>5||5===n[t]&&(i||n[t+1]!==S||1&n[t-1]))||3===r&&(i||!!n[0]),n.length=t,i){for(;++n[--t]>9;)if(n[t]=0,0===t){++e.e,n.unshift(1);break}}for(t=n.length;!n[--t];)n.pop()}return e}function M(e,t,r){var i=e.e,n=e.c.join(""),s=n.length;if(t)n=n.charAt(0)+(s>1?"."+n.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)n="0"+n;n="0."+n}else if(i>0){if(++i>s)for(i-=s;i--;)n+="0";else i<s&&(n=n.slice(0,i)+"."+n.slice(i))}else s>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&r?"-"+n:n}A.abs=function(){var e=new this.constructor(this);return e.s=1,e},A.cmp=function(e){var t,r=this.c,i=(e=new this.constructor(e)).c,n=this.s,s=e.s,o=this.e,a=e.e;if(!r[0]||!i[0])return r[0]?n:i[0]?-s:0;if(n!=s)return n;if(t=n<0,o!=a)return o>a^t?1:-1;for(n=-1,s=(o=r.length)<(a=i.length)?o:a;++n<s;)if(r[n]!=i[n])return r[n]>i[n]^t?1:-1;return o==a?0:o>a^t?1:-1},A.div=function(e){var t=this.constructor,r=this.c,i=(e=new t(e)).c,n=this.s==e.s?1:-1,s=t.DP;if(s!==~~s||s<0||s>1e6)throw Error(E);if(!i[0])throw Error(_);if(!r[0])return e.s=n,e.c=[e.e=0],e;var o,a,c,l,h,u=i.slice(),d=o=i.length,f=r.length,p=r.slice(0,o),g=p.length,m=e,y=m.c=[],b=0,w=s+(m.e=this.e-e.e)+1;for(m.s=n,n=w<0?0:w,u.unshift(0);g++<o;)p.push(0);do{for(c=0;c<10;c++){if(o!=(g=p.length))l=o>g?1:-1;else for(h=-1,l=0;++h<o;)if(i[h]!=p[h]){l=i[h]>p[h]?1:-1;break}if(l<0){for(a=g==o?i:u;g;){if(p[--g]<a[g]){for(h=g;h&&!p[--h];)p[h]=9;--p[h],p[g]+=10}p[g]-=a[g]}for(;!p[0];)p.shift()}else break}y[b++]=l?c:++c,p[0]&&l?p[g]=r[d]||0:p=[r[d]]}while((d++<f||p[0]!==S)&&n--);return!y[0]&&1!=b&&(y.shift(),m.e--,w--),b>w&&N(m,w,t.RM,p[0]!==S),m},A.eq=function(e){return 0===this.cmp(e)},A.gt=function(e){return this.cmp(e)>0},A.gte=function(e){return this.cmp(e)>-1},A.lt=function(e){return 0>this.cmp(e)},A.lte=function(e){return 1>this.cmp(e)},A.minus=A.sub=function(e){var t,r,i,n,s=this.constructor,o=this.s,a=(e=new s(e)).s;if(o!=a)return e.s=-a,this.plus(e);var c=this.c.slice(),l=this.e,h=e.c,u=e.e;if(!c[0]||!h[0])return h[0]?e.s=-a:c[0]?e=new s(this):e.s=1,e;if(o=l-u){for((n=o<0)?(o=-o,i=c):(u=l,i=h),i.reverse(),a=o;a--;)i.push(0);i.reverse()}else for(r=((n=c.length<h.length)?c:h).length,o=a=0;a<r;a++)if(c[a]!=h[a]){n=c[a]<h[a];break}if(n&&(i=c,c=h,h=i,e.s=-e.s),(a=(r=h.length)-(t=c.length))>0)for(;a--;)c[t++]=0;for(a=t;r>o;){if(c[--r]<h[r]){for(t=r;t&&!c[--t];)c[t]=9;--c[t],c[r]+=10}c[r]-=h[r]}for(;0===c[--a];)c.pop();for(;0===c[0];)c.shift(),--u;return c[0]||(e.s=1,c=[u=0]),e.c=c,e.e=u,e},A.mod=function(e){var t,r=this,i=r.constructor,n=r.s,s=(e=new i(e)).s;if(!e.c[0])throw Error(_);return(r.s=e.s=1,t=1==e.cmp(r),r.s=n,e.s=s,t)?new i(r):(n=i.DP,s=i.RM,i.DP=i.RM=0,r=r.div(e),i.DP=n,i.RM=s,this.minus(r.times(e)))},A.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},A.plus=A.add=function(e){var t,r,i,n=this.constructor;if(e=new n(e),this.s!=e.s)return e.s=-e.s,this.minus(e);var s=this.e,o=this.c,a=e.e,c=e.c;if(!o[0]||!c[0])return c[0]||(o[0]?e=new n(this):e.s=this.s),e;if(o=o.slice(),t=s-a){for(t>0?(a=s,i=c):(t=-t,i=o),i.reverse();t--;)i.push(0);i.reverse()}for(o.length-c.length<0&&(i=c,c=o,o=i),t=c.length,r=0;t;o[t]%=10)r=(o[--t]=o[t]+c[t]+r)/10|0;for(r&&(o.unshift(r),++a),t=o.length;0===o[--t];)o.pop();return e.c=o,e.e=a,e},A.pow=function(e){var t=this,r=new t.constructor("1"),i=r,n=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(v+"exponent");for(n&&(e=-e);1&e&&(i=i.times(t)),e>>=1;)t=t.times(t);return n?r.div(i):i},A.prec=function(e,t){if(e!==~~e||e<1||e>1e6)throw Error(v+"precision");return N(new this.constructor(this),e,t)},A.round=function(e,t){if(e===S)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(E);return N(new this.constructor(this),e+this.e+1,t)},A.sqrt=function(){var e,t,r,i=this.constructor,n=this.s,s=this.e,o=new i("0.5");if(!this.c[0])return new i(this);if(n<0)throw Error(w+"No square root");0===(n=Math.sqrt(+M(this,!0,!0)))||n===1/0?((t=this.c.join("")).length+s&1||(t+="0"),s=((s+1)/2|0)-(s<0||1&s),e=new i(((n=Math.sqrt(t))==1/0?"5e":(n=n.toExponential()).slice(0,n.indexOf("e")+1))+s)):e=new i(n+""),s=e.e+(i.DP+=4);do r=e,e=o.times(r.plus(this.div(r)));while(r.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return N(e,(i.DP-=4)+e.e+1,i.RM)},A.times=A.mul=function(e){var t,r=this.constructor,i=this.c,n=(e=new r(e)).c,s=i.length,o=n.length,a=this.e,c=e.e;if(e.s=this.s==e.s?1:-1,!i[0]||!n[0])return e.c=[e.e=0],e;for(e.e=a+c,s<o&&(t=i,i=n,n=t,c=s,s=o,o=c),t=Array(c=s+o);c--;)t[c]=0;for(a=o;a--;){for(o=0,c=s+a;c>a;)o=t[c]+n[a]*i[c-a-1]+o,t[c--]=o%10,o=o/10|0;t[c]=o}for(o?++e.e:t.shift(),a=t.length;!t[--a];)t.pop();return e.c=t,e},A.toExponential=function(e,t){var r=this,i=r.c[0];if(e!==S){if(e!==~~e||e<0||e>1e6)throw Error(E);for(r=N(new r.constructor(r),++e,t);r.c.length<e;)r.c.push(0)}return M(r,!0,!!i)},A.toFixed=function(e,t){var r=this,i=r.c[0];if(e!==S){if(e!==~~e||e<0||e>1e6)throw Error(E);for(r=N(new r.constructor(r),e+r.e+1,t),e=e+r.e+1;r.c.length<e;)r.c.push(0)}return M(r,!1,!!i)},A[Symbol.for("nodejs.util.inspect.custom")]=A.toJSON=A.toString=function(){var e=this.constructor;return M(this,this.e<=e.NE||this.e>=e.PE,!!this.c[0])},A.toNumber=function(){var e=+M(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(w+"Imprecise conversion");return e},A.toPrecision=function(e,t){var r=this,i=r.constructor,n=r.c[0];if(e!==S){if(e!==~~e||e<1||e>1e6)throw Error(v+"precision");for(r=N(new i(r),e,t);r.c.length<e;)r.c.push(0)}return M(r,e<=r.e||r.e<=i.NE||r.e>=i.PE,!!n)},A.valueOf=function(){var e=this.constructor;if(!0===e.strict)throw Error(w+"valueOf disallowed");return M(this,this.e<=e.NE||this.e>=e.PE,!0)};var x=function e(){function t(r){if(!(this instanceof t))return r===S?e():new t(r);if(r instanceof t)this.s=r.s,this.e=r.e,this.c=r.c.slice();else{if("string"!=typeof r){if(!0===t.strict&&"bigint"!=typeof r)throw TypeError(v+"value");r=0===r&&1/r<0?"-0":String(r)}!function(e,t){var r,i,n;if(!C.test(t))throw Error(v+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),n=t.length,i=0;i<n&&"0"==t.charAt(i);)++i;if(i==n)e.c=[e.e=0];else{for(;n>0&&"0"==t.charAt(--n););for(e.e=r-i-1,e.c=[],r=0;i<=n;)e.c[r++]=+t.charAt(i++)}}(this,r)}this.constructor=t}return t.prototype=A,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();let O={bigNumber:e=>new x(e||0),multiply(e,t){if(void 0===e||void 0===t)return new x(0);let r=new x(e),i=new x(t);return r.times(i)},formatNumberToLocalString:(e,t=2)=>void 0===e?"0.00":"number"==typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}),parseLocalStringToNumber:e=>void 0===e?0:parseFloat(e.replace(/,/gu,""))},P=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],T=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],R={getERC20Abi:e=>o.b.USDT_CONTRACT_ADDRESSES.includes(e)?T:P};var D=r(4786),k=r(61704),L=r(39502);let j={createBalance(e,t){let r={name:e.metadata.name||"",symbol:e.metadata.symbol||"",decimals:e.metadata.decimals||0,value:e.metadata.value||0,price:e.metadata.price||0,iconUrl:e.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:t,address:"native"===e.address?void 0:this.convertAddressToCAIP10Address(e.address,t),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:e.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance:({hex:e,decimals:t})=>(0,L.b)(BigInt(e),t),convertAddressToCAIP10Address:(e,t)=>`${t}:${e}`,createCAIP2ChainId:(e,t)=>`${t}:${parseInt(e,16)}`,getChainIdHexFromCAIP2ChainId(e){let t=e.split(":");if(t.length<2||!t[1])return"0x0";let r=parseInt(t[1],10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(e){return"object"==typeof e&&null!==e&&Object.values(e).every(e=>Array.isArray(e)&&e.every(e=>this.isValidAsset(e)))},isValidAsset:e=>"object"==typeof e&&null!==e&&"string"==typeof e.address&&"string"==typeof e.balance&&("ERC20"===e.type||"NATIVE"===e.type)&&"object"==typeof e.metadata&&null!==e.metadata&&"string"==typeof e.metadata.name&&"string"==typeof e.metadata.symbol&&"number"==typeof e.metadata.decimals&&"number"==typeof e.metadata.price&&"string"==typeof e.metadata.iconUrl},U={async getMyTokensWithBalance(e){let t=d.N.state.address,r=W.state.activeCaipNetwork;if(!t||!r)return[];if("eip155"===r.chainNamespace){let e=await this.getEIP155Balances(t,r);if(e)return this.filterLowQualityTokens(e)}let i=await k.L.getBalance(t,r.caipNetworkId,e);return this.filterLowQualityTokens(i.balances)},async getEIP155Balances(e,t){try{let r=j.getChainIdHexFromCAIP2ChainId(t.caipNetworkId),i=await f.ConnectionController.getCapabilities(e);if(!i?.[r]?.assetDiscovery?.supported)return null;let n=await f.ConnectionController.walletGetAssets({account:e,chainFilter:[r]});if(!j.isWalletGetAssetsResponse(n))return null;return(n[r]||[]).map(e=>j.createBalance(e,t.caipNetworkId))}catch(e){return null}},filterLowQualityTokens:e=>e.filter(e=>"0"!==e.quantity.decimals),mapBalancesToSwapTokens:e=>e?.map(e=>({...e,address:e?.address?e.address:W.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[]};var B=r(66909);let z=(0,i.sj)({tokenBalances:[],loading:!1}),$={state:z,subscribe:e=>(0,i.Ld)(z,()=>e(z)),subscribeKey:(e,t)=>(0,n.VW)(z,e,t),setToken(e){e&&(z.token=(0,i.iH)(e))},setTokenAmount(e){z.sendTokenAmount=e},setReceiverAddress(e){z.receiverAddress=e},setReceiverProfileImageUrl(e){z.receiverProfileImageUrl=e},setReceiverProfileName(e){z.receiverProfileName=e},setGasPrice(e){z.gasPrice=e},setGasPriceInUsd(e){z.gasPriceInUSD=e},setNetworkBalanceInUsd(e){z.networkBalanceInUSD=e},setLoading(e){z.loading=e},sendToken(){switch(W.state.activeCaipNetwork?.chainNamespace){case"eip155":this.sendEvmToken();return;case"solana":this.sendSolanaToken();return;default:throw Error("Unsupported chain")}},sendEvmToken(){this.state.token?.address&&this.state.sendTokenAmount&&this.state.receiverAddress?(p.X.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:d.N.state.preferredAccountType===D.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.address,amount:this.state.sendTokenAmount,network:W.state.activeCaipNetwork?.caipNetworkId||""}}),this.sendERC20Token({receiverAddress:this.state.receiverAddress,tokenAddress:this.state.token.address,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals})):this.state.receiverAddress&&this.state.sendTokenAmount&&this.state.gasPrice&&this.state.token?.quantity.decimals&&(p.X.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:d.N.state.preferredAccountType===D.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol,amount:this.state.sendTokenAmount,network:W.state.activeCaipNetwork?.caipNetworkId||""}}),this.sendNativeToken({receiverAddress:this.state.receiverAddress,sendTokenAmount:this.state.sendTokenAmount,gasPrice:this.state.gasPrice,decimals:this.state.token.quantity.decimals}))},async fetchTokenBalance(e){z.loading=!0;let t=W.state.activeCaipNetwork?.caipNetworkId,r=W.state.activeCaipNetwork?.chainNamespace,i=W.state.activeCaipAddress,n=i?h.j.getPlainAddress(i):void 0;if(z.lastRetry&&!h.j.isAllowedRetry(z.lastRetry,30*l.bq.ONE_SEC_MS))return z.loading=!1,[];try{if(n&&t&&r){let e=await U.getMyTokensWithBalance();return z.tokenBalances=e,z.lastRetry=void 0,e}}catch(t){z.lastRetry=Date.now(),e?.(t),B.SnackController.showError("Token Balance Unavailable")}finally{z.loading=!1}return[]},fetchNetworkBalance(){if(0===z.tokenBalances.length)return;let e=U.mapBalancesToSwapTokens(z.tokenBalances);if(!e)return;let t=e.find(e=>e.address===W.getActiveNetworkTokenAddress());t&&(z.networkBalanceInUSD=t?O.multiply(t.quantity.numeric,t.price).toString():"0")},isInsufficientNetworkTokenForGas:(e,t)=>!!O.bigNumber(e).eq(0)||O.bigNumber(O.bigNumber(t||"0")).gt(e),hasInsufficientGasFunds(){let e=!0;return d.N.state.preferredAccountType===D.y_.ACCOUNT_TYPES.SMART_ACCOUNT?e=!1:z.networkBalanceInUSD&&(e=this.isInsufficientNetworkTokenForGas(z.networkBalanceInUSD,z.gasPriceInUSD)),e},async sendNativeToken(e){b.RouterController.pushTransactionStack({view:"Account",goBack:!1});let t=e.receiverAddress,r=d.N.state.address,i=f.ConnectionController.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals));try{await f.ConnectionController.sendTransaction({chainNamespace:"eip155",to:t,address:r,data:"0x",value:i??BigInt(0),gasPrice:e.gasPrice}),B.SnackController.showSuccess("Transaction started"),p.X.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:d.N.state.preferredAccountType===D.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol||"",amount:e.sendTokenAmount,network:W.state.activeCaipNetwork?.caipNetworkId||""}}),this.resetSend()}catch(r){console.error("SendController:sendERC20Token - failed to send native token",r);let t=r instanceof Error?r.message:"Unknown error";p.X.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:t,isSmartAccount:d.N.state.preferredAccountType===D.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol||"",amount:e.sendTokenAmount,network:W.state.activeCaipNetwork?.caipNetworkId||""}}),B.SnackController.showError("Something went wrong")}},async sendERC20Token(e){b.RouterController.pushTransactionStack({view:"Account",goBack:!1});let t=f.ConnectionController.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals));try{if(d.N.state.address&&e.sendTokenAmount&&e.receiverAddress&&e.tokenAddress){let r=h.j.getPlainAddress(e.tokenAddress);await f.ConnectionController.writeContract({fromAddress:d.N.state.address,tokenAddress:r,args:[e.receiverAddress,t??BigInt(0)],method:"transfer",abi:R.getERC20Abi(r),chainNamespace:"eip155"}),B.SnackController.showSuccess("Transaction started"),this.resetSend()}}catch(r){console.error("SendController:sendERC20Token - failed to send erc20 token",r);let t=r instanceof Error?r.message:"Unknown error";p.X.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:t,isSmartAccount:d.N.state.preferredAccountType===D.y_.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol||"",amount:e.sendTokenAmount,network:W.state.activeCaipNetwork?.caipNetworkId||""}}),B.SnackController.showError("Something went wrong")}},sendSolanaToken(){if(!this.state.sendTokenAmount||!this.state.receiverAddress){B.SnackController.showError("Please enter a valid amount and receiver address");return}b.RouterController.pushTransactionStack({view:"Account",goBack:!1}),f.ConnectionController.sendTransaction({chainNamespace:"solana",to:this.state.receiverAddress,value:this.state.sendTokenAmount}).then(()=>{this.resetSend(),d.N.fetchTokenBalance()}).catch(e=>{B.SnackController.showError("Failed to send transaction. Please try again."),console.error("SendController:sendToken - failed to send solana transaction",e)})},resetSend(){z.token=void 0,z.sendTokenAmount=void 0,z.receiverAddress=void 0,z.receiverProfileImageUrl=void 0,z.receiverProfileName=void 0,z.loading=!1,z.tokenBalances=[]}},q={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},F={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},H=(0,i.sj)({chains:(0,n.Yr)(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),W={state:H,subscribe:e=>(0,i.Ld)(H,()=>{e(H)}),subscribeKey:(e,t)=>(0,n.VW)(H,e,t),subscribeChainProp(e,t,r){let n;return(0,i.Ld)(H.chains,()=>{let i=r||H.activeChain;if(i){let r=H.chains.get(i)?.[e];n!==r&&(n=r,t(r))}})},initialize(e,t,r){let{chainId:n,namespace:s}=u.M.getActiveNetworkProps(),o=t?.find(e=>e.id.toString()===n?.toString()),a=e.find(e=>e?.namespace===s)||e?.[0],c=new Set([...t?.map(e=>e.chainNamespace)??[]]);e?.length!==0&&a||(H.noAdapters=!0),!H.noAdapters&&(H.activeChain=a?.namespace,H.activeCaipNetwork=o,this.setChainNetworkData(a?.namespace,{caipNetwork:o}),H.activeChain&&y.I.set({activeChain:a?.namespace})),c.forEach(e=>{let n=t?.filter(t=>t.chainNamespace===e);W.state.chains.set(e,{namespace:e,networkState:(0,i.sj)({...F,caipNetwork:n?.[0]}),accountState:(0,i.sj)(q),caipNetworks:n??[],...r}),this.setRequestedCaipNetworks(n??[],e)})},removeAdapter(e){if(H.activeChain===e){let t=Array.from(H.chains.entries()).find(([t])=>t!==e);if(t){let e=t[1]?.caipNetworks?.[0];e&&this.setActiveCaipNetwork(e)}}H.chains.delete(e)},addAdapter(e,{networkControllerClient:t,connectionControllerClient:r},i){H.chains.set(e.namespace,{namespace:e.namespace,networkState:{...F,caipNetwork:i[0]},accountState:q,caipNetworks:i,connectionControllerClient:r,networkControllerClient:t}),this.setRequestedCaipNetworks(i?.filter(t=>t.chainNamespace===e.namespace)??[],e.namespace)},addNetwork(e){let t=H.chains.get(e.chainNamespace);if(t){let r=[...t.caipNetworks||[]];t.caipNetworks?.find(t=>t.id===e.id)||r.push(e),H.chains.set(e.chainNamespace,{...t,caipNetworks:r}),this.setRequestedCaipNetworks(r,e.chainNamespace)}},removeNetwork(e,t){let r=H.chains.get(e);if(r){let i=H.activeCaipNetwork?.id===t,n=[...r.caipNetworks?.filter(e=>e.id!==t)||[]];i&&r?.caipNetworks?.[0]&&this.setActiveCaipNetwork(r.caipNetworks[0]),H.chains.set(e,{...r,caipNetworks:n}),this.setRequestedCaipNetworks(n||[],e)}},setAdapterNetworkState(e,t){let r=H.chains.get(e);r&&(r.networkState={...r.networkState||F,...t},H.chains.set(e,r))},setChainAccountData(e,t,r=!0){if(!e)throw Error("Chain is required to update chain account data");let i=H.chains.get(e);if(i){let r={...i.accountState||q,...t};H.chains.set(e,{...i,accountState:r}),(1===H.chains.size||H.activeChain===e)&&(t.caipAddress&&(H.activeCaipAddress=t.caipAddress),d.N.replaceState(r))}},setChainNetworkData(e,t){if(!e)return;let r=H.chains.get(e);if(r){let i={...r.networkState||F,...t};H.chains.set(e,{...r,networkState:i})}},setAccountProp(e,t,r,i=!0){this.setChainAccountData(r,{[e]:t},i),"status"===e&&"disconnected"===t&&r&&a.ConnectorController.removeConnectorId(r)},setActiveNamespace(e){H.activeChain=e;let t=e?H.chains.get(e):void 0,r=t?.networkState?.caipNetwork;r?.id&&e&&(H.activeCaipAddress=t?.accountState?.caipAddress,H.activeCaipNetwork=r,this.setChainNetworkData(e,{caipNetwork:r}),u.M.setActiveCaipNetworkId(r?.caipNetworkId),y.I.set({activeChain:e,selectedNetworkId:r?.caipNetworkId}))},setActiveCaipNetwork(e){if(!e)return;H.activeChain!==e.chainNamespace&&this.setIsSwitchingNamespace(!0);let t=H.chains.get(e.chainNamespace);H.activeChain=e.chainNamespace,H.activeCaipNetwork=e,this.setChainNetworkData(e.chainNamespace,{caipNetwork:e}),t?.accountState?.address?H.activeCaipAddress=`${e.chainNamespace}:${e.id}:${t?.accountState?.address}`:H.activeCaipAddress=void 0,this.setAccountProp("caipAddress",H.activeCaipAddress,e.chainNamespace),t&&d.N.replaceState(t.accountState),$.resetSend(),y.I.set({activeChain:H.activeChain,selectedNetworkId:H.activeCaipNetwork?.caipNetworkId}),u.M.setActiveCaipNetworkId(e.caipNetworkId),this.checkIfSupportedNetwork(e.chainNamespace)||!m.OptionsController.state.enableNetworkSwitch||m.OptionsController.state.allowUnsupportedChain||f.ConnectionController.state.wcBasic||this.showUnsupportedChainUI()},addCaipNetwork(e){if(!e)return;let t=H.chains.get(e.chainNamespace);t&&t?.caipNetworks?.push(e)},async switchActiveNamespace(e){if(!e)return;let t=e!==W.state.activeChain,r=W.getNetworkData(e)?.caipNetwork,i=W.getCaipNetworkByNamespace(e,r?.id);t&&i&&await W.switchActiveNetwork(i)},async switchActiveNetwork(e){let t=W.state.chains.get(W.state.activeChain);t?.caipNetworks?.some(e=>e.id===H.activeCaipNetwork?.id)||b.RouterController.goBack();let r=this.getNetworkControllerClient(e.chainNamespace);r&&(await r.switchCaipNetwork(e),p.X.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:e.caipNetworkId}}))},getNetworkControllerClient(e){let t=e||H.activeChain,r=H.chains.get(t);if(!r)throw Error("Chain adapter not found");if(!r.networkControllerClient)throw Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(e){let t=e||H.activeChain;if(!t)throw Error("Chain is required to get connection controller client");let r=H.chains.get(t);if(!r?.connectionControllerClient)throw Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(e,t){let r=H.activeChain;if(t&&(r=t),!r)return;let i=H.chains.get(r)?.accountState;if(i)return i[e]},getNetworkProp(e,t){let r=H.chains.get(t)?.networkState;if(r)return r[e]},getRequestedCaipNetworks(e){let t=H.chains.get(e),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:i=[]}=t?.networkState||{};return h.j.sortRequestedNetworks(r,i)},getAllRequestedCaipNetworks(){let e=[];return H.chains.forEach(t=>{let r=this.getRequestedCaipNetworks(t.namespace);e.push(...r)}),e},setRequestedCaipNetworks(e,t){this.setAdapterNetworkState(t,{requestedCaipNetworks:e})},getAllApprovedCaipNetworkIds(){let e=[];return H.chains.forEach(t=>{let r=this.getApprovedCaipNetworkIds(t.namespace);e.push(...r)}),e},getActiveCaipNetwork:()=>H.activeCaipNetwork,getActiveCaipAddress:()=>H.activeCaipAddress,getApprovedCaipNetworkIds(e){let t=H.chains.get(e);return t?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(e){let t=this.getNetworkControllerClient(),r=await t?.getApprovedCaipNetworksData();this.setAdapterNetworkState(e,{approvedCaipNetworkIds:r?.approvedCaipNetworkIds,supportsAllNetworks:r?.supportsAllNetworks})},checkIfSupportedNetwork(e,t){let r=t||H.activeCaipNetwork,i=this.getRequestedCaipNetworks(e);return!i.length||i?.some(e=>e.id===r?.id)},checkIfSupportedChainId(e){if(!H.activeChain)return!0;let t=this.getRequestedCaipNetworks(H.activeChain);return t?.some(t=>t.id===e)},setSmartAccountEnabledNetworks(e,t){this.setAdapterNetworkState(t,{smartAccountEnabledNetworks:e})},checkIfSmartAccountEnabled(){let e=s.p.caipNetworkIdToNumber(H.activeCaipNetwork?.caipNetworkId),t=H.activeChain;if(!t||!e)return!1;let r=this.getNetworkProp("smartAccountEnabledNetworks",t);return!!r?.includes(Number(e))},getActiveNetworkTokenAddress(){let e=H.activeCaipNetwork?.chainNamespace||"eip155",t=H.activeCaipNetwork?.id||1,r=l.bq.NATIVE_TOKEN_ADDRESS[e];return`${e}:${t}:${r}`},showUnsupportedChainUI(){g.I.open({view:"UnsupportedChain"})},checkIfNamesSupported(){let e=H.activeCaipNetwork;return!!(e?.chainNamespace&&l.bq.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(e.chainNamespace))},resetNetwork(e){this.setAdapterNetworkState(e,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(e){if(!e)throw Error("Chain is required to set account prop");H.activeCaipAddress=void 0,this.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),a.ConnectorController.removeConnectorId(e)},async disconnect(e){let t=function(e){let t=Array.from(W.state.chains.keys()),r=[];return e?(r.push([e,W.state.chains.get(e)]),c(e,o.b.CONNECTOR_ID.WALLET_CONNECT)?t.forEach(t=>{t!==e&&c(t,o.b.CONNECTOR_ID.WALLET_CONNECT)&&r.push([t,W.state.chains.get(t)])}):c(e,o.b.CONNECTOR_ID.AUTH)&&t.forEach(t=>{t!==e&&c(t,o.b.CONNECTOR_ID.AUTH)&&r.push([t,W.state.chains.get(t)])})):r=Array.from(W.state.chains.entries()),r}(e);try{$.resetSend();let r=await Promise.allSettled(t.map(async([e,t])=>{try{let{caipAddress:r}=this.getAccountData(e)||{};r&&t.connectionControllerClient?.disconnect&&await t.connectionControllerClient.disconnect(e),this.resetAccount(e),this.resetNetwork(e)}catch(t){throw Error(`Failed to disconnect chain ${e}: ${t.message}`)}}));f.ConnectionController.resetWcConnection();let i=r.filter(e=>"rejected"===e.status);if(i.length>0)throw Error(i.map(e=>e.reason.message).join(", "));u.M.deleteConnectedSocialProvider(),e?a.ConnectorController.removeConnectorId(e):a.ConnectorController.resetConnectorIds(),p.X.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(e){console.error(e.message||"Failed to disconnect chains"),p.X.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:e.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(e){H.isSwitchingNamespace=e},getFirstCaipNetworkSupportsAuthConnector(){let e=[];if(H.chains.forEach(t=>{o.b.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>e===t.namespace)&&t.namespace&&e.push(t.namespace)}),e.length>0){let t=e[0];return t?H.chains.get(t)?.caipNetworks?.[0]:void 0}},getAccountData:e=>e?W.state.chains.get(e)?.accountState:d.N.state,getNetworkData(e){let t=e||H.activeChain;if(t)return W.state.chains.get(t)?.networkState},getCaipNetworkByNamespace(e,t){if(!e)return;let r=W.state.chains.get(e);return r?.caipNetworks?.find(e=>e.id===t)||r?.networkState?.caipNetwork||r?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){let e=a.ConnectorController.state.filterByNamespace;return(e?[H.chains.get(e)]:Array.from(H.chains.values())).flatMap(e=>e?.caipNetworks||[]).map(e=>e.caipNetworkId)}}},93046:function(e,t,r){"use strict";let i;r.d(t,{ConnectionController:function(){return I}});var n=r(33085),s=r(55543),o=r(53357),a=r(41505),c=r(36801),l=r(92144),h=r(54173),u=r(31929),d=r(89512),f=r(86777),p=r(4786),g=r(68584),m=r(61704),y=r(48415),b=r(66909);let w=(0,n.sj)({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),v={state:w,subscribe:e=>(0,n.Ld)(w,()=>e(w)),setLastNetworkInView(e){w.lastNetworkInView=e},async fetchTransactions(e,t){if(!e)throw Error("Transactions can't be fetched without an accountAddress");w.loading=!0;try{let r=await m.L.fetchTransactions({account:e,cursor:w.next,onramp:t,cache:"coinbase"===t?"no-cache":void 0,chainId:l.R.state.activeCaipNetwork?.caipNetworkId}),i=this.filterSpamTransactions(r.data),n=this.filterByConnectedChain(i),s=[...w.transactions,...n];w.loading=!1,"coinbase"===t?w.coinbaseTransactions=this.groupTransactionsByYearAndMonth(w.coinbaseTransactions,r.data):(w.transactions=s,w.transactionsByYear=this.groupTransactionsByYearAndMonth(w.transactionsByYear,n)),w.empty=0===s.length,w.next=r.next?r.next:void 0}catch(t){u.X.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:e,projectId:y.OptionsController.state.projectId,cursor:w.next,isSmartAccount:g.N.state.preferredAccountType===p.y_.ACCOUNT_TYPES.SMART_ACCOUNT}}),b.SnackController.showError("Failed to fetch transactions"),w.loading=!1,w.empty=!0,w.next=void 0}},groupTransactionsByYearAndMonth:(e={},t=[])=>(t.forEach(t=>{let r=new Date(t.metadata.minedAt).getFullYear(),i=new Date(t.metadata.minedAt).getMonth(),n=e[r]??{},s=(n[i]??[]).filter(e=>e.id!==t.id);e[r]={...n,[i]:[...s,t].sort((e,t)=>new Date(t.metadata.minedAt).getTime()-new Date(e.metadata.minedAt).getTime())}}),e),filterSpamTransactions:e=>e.filter(e=>!e.transfers.every(e=>e.nft_info?.flags.is_spam===!0)),filterByConnectedChain(e){let t=l.R.state.activeCaipNetwork?.caipNetworkId;return e.filter(e=>e.metadata.chain===t)},clearCursor(){w.next=void 0},resetTransactions(){w.transactions=[],w.transactionsByYear={},w.lastNetworkInView=void 0,w.loading=!1,w.empty=!1,w.next=void 0}},E=(0,n.sj)({wcError:!1,buffering:!1,status:"disconnected"}),I={state:E,subscribeKey:(e,t)=>(0,s.VW)(E,e,t),_getClient:()=>E._client,setClient(e){E._client=(0,n.iH)(e)},async connectWalletConnect(){if(o.j.isTelegram()||o.j.isSafari()&&o.j.isIos()){if(i){await i,i=void 0;return}if(!o.j.isPairingExpired(E?.wcPairingExpiry)){let e=E.wcUri;E.wcUri=e;return}i=this._getClient()?.connectWalletConnect?.().catch(()=>void 0),this.state.status="connecting",await i,i=void 0,E.wcPairingExpiry=void 0,this.state.status="connected"}else await this._getClient()?.connectWalletConnect?.()},async connectExternal(e,t,r=!0){await this._getClient()?.connectExternal?.(e),r&&l.R.setActiveNamespace(t)},async reconnectExternal(e){await this._getClient()?.reconnectExternal?.(e);let t=e.chain||l.R.state.activeChain;t&&h.ConnectorController.setConnectorId(e.id,t)},async setPreferredAccountType(e){d.I.setLoading(!0,l.R.state.activeChain);let t=h.ConnectorController.getAuthConnector();t&&(await t?.provider.setPreferredAccount(e),await this.reconnectExternal(t),d.I.setLoading(!1,l.R.state.activeChain),u.X.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:e,network:l.R.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(e){return this._getClient()?.signMessage(e)},parseUnits(e,t){return this._getClient()?.parseUnits(e,t)},formatUnits(e,t){return this._getClient()?.formatUnits(e,t)},async sendTransaction(e){return this._getClient()?.sendTransaction(e)},async getCapabilities(e){return this._getClient()?.getCapabilities(e)},async grantPermissions(e){return this._getClient()?.grantPermissions(e)},async walletGetAssets(e){return this._getClient()?.walletGetAssets(e)??{}},async estimateGas(e){return this._getClient()?.estimateGas(e)},async writeContract(e){return this._getClient()?.writeContract(e)},async getEnsAddress(e){return this._getClient()?.getEnsAddress(e)},async getEnsAvatar(e){return this._getClient()?.getEnsAvatar(e)},checkInstalled(e){return this._getClient()?.checkInstalled?.(e)||!1},resetWcConnection(){E.wcUri=void 0,E.wcPairingExpiry=void 0,E.wcLinking=void 0,E.recentWallet=void 0,E.status="disconnected",v.resetTransactions(),c.M.deleteWalletConnectDeepLink()},resetUri(){E.wcUri=void 0,E.wcPairingExpiry=void 0},finalizeWcConnection(){let{wcLinking:e,recentWallet:t}=I.state;e&&c.M.setWalletConnectDeepLink(e),t&&c.M.setAppKitRecent(t),u.X.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:e?"mobile":"qrcode",name:f.RouterController.state.data?.wallet?.name||"Unknown"}})},setWcBasic(e){E.wcBasic=e},setUri(e){E.wcUri=e,E.wcPairingExpiry=o.j.getPairingExpiry()},setWcLinking(e){E.wcLinking=e},setWcError(e){E.wcError=e,E.buffering=!1},setRecentWallet(e){E.recentWallet=e},setBuffering(e){E.buffering=e},setStatus(e){E.status=e},async disconnect(e){try{d.I.setLoading(!0,e),await a.w.clearSessions(),await l.R.disconnect(e),d.I.setLoading(!1,e),h.ConnectorController.setFilterByNamespace(void 0)}catch(e){throw Error("Failed to disconnect")}}}},54173:function(e,t,r){"use strict";r.d(t,{ConnectorController:function(){return m}});var i=r(33085),n=r(55543),s=r(44649),o=r(62714),a=r(92144);let c={handleSolanaDeeplinkRedirect(e){if(a.R.state.activeChain===s.b.CHAIN.SOLANA){let t=window.location.href,r=encodeURIComponent(t);if("Phantom"===e&&!("phantom"in window)){let e=t.startsWith("https")?"https":"http",i=t.split("/")[2],n=encodeURIComponent(`${e}://${i}`);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${n}`}"Coinbase Wallet"!==e||"coinbaseSolana"in window||(window.location.href=`https://go.cb-w.com/dapp?cb_url=${r}`)}}};var l=r(36801),h=r(17766),u=r(48415),d=r(86777),f=r(52005);let p={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},g=(0,i.sj)({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...p}}),m={state:g,subscribe:e=>(0,i.Ld)(g,()=>{e(g)}),subscribeKey:(e,t)=>(0,n.VW)(g,e,t),initialize(e){e.forEach(e=>{let t=l.M.getConnectedConnectorId(e);t&&this.setConnectorId(t,e)})},setActiveConnector(e){e&&(g.activeConnector=(0,i.iH)(e))},setConnectors(e){e.filter(e=>!g.allConnectors.some(t=>t.id===e.id&&this.getConnectorName(t.name)===this.getConnectorName(e.name)&&t.chain===e.chain)).forEach(e=>{"MULTI_CHAIN"!==e.type&&g.allConnectors.push((0,i.iH)(e))}),g.connectors=this.mergeMultiChainConnectors(g.allConnectors)},removeAdapter(e){g.allConnectors=g.allConnectors.filter(t=>t.chain!==e),g.connectors=this.mergeMultiChainConnectors(g.allConnectors)},mergeMultiChainConnectors(e){let t=this.generateConnectorMapByName(e),r=[];return t.forEach(e=>{let t=e[0],i=t?.id===s.b.CONNECTOR_ID.AUTH;e.length>1&&t?r.push({name:t.name,imageUrl:t.imageUrl,imageId:t.imageId,connectors:[...e],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:t?.id||""}):t&&r.push(t)}),r},generateConnectorMapByName(e){let t=new Map;return e.forEach(e=>{let{name:r}=e,i=this.getConnectorName(r);if(!i)return;let n=t.get(i)||[];n.find(t=>t.chain===e.chain)||n.push(e),t.set(i,n)}),t},getConnectorName:e=>e&&({"Trust Wallet":"Trust"})[e]||e,getUniqueConnectorsByName(e){let t=[];return e.forEach(e=>{t.find(t=>t.chain===e.chain)||t.push(e)}),t},addConnector(e){if(e.id===s.b.CONNECTOR_ID.AUTH){let t=(0,i.CO)(u.OptionsController.state),r=f.ThemeController.getSnapshot().themeMode,n=f.ThemeController.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType}),e?.provider?.syncTheme({themeMode:r,themeVariables:n,w3mThemeVariables:o.t(n,r)}),this.setConnectors([e])}else this.setConnectors([e])},getAuthConnector(e){let t=e||a.R.state.activeChain,r=g.connectors.find(e=>e.id===s.b.CONNECTOR_ID.AUTH);return r?r?.connectors?.length?r.connectors.find(e=>e.chain===t):r:void 0},getAnnouncedConnectorRdns:()=>g.connectors.filter(e=>"ANNOUNCED"===e.type).map(e=>e.info?.rdns),getConnectorById:e=>g.allConnectors.find(t=>t.id===e),getConnector:(e,t)=>g.allConnectors.filter(e=>e.chain===a.R.state.activeChain).find(r=>r.explorerId===e||r.info?.rdns===t),syncIfAuthConnector(e){if("ID_AUTH"!==e.id)return;let t=(0,i.CO)(u.OptionsController.state),r=f.ThemeController.getSnapshot().themeMode,n=f.ThemeController.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,sdkType:t.sdkType,projectId:t.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:n,w3mThemeVariables:(0,o.t)(n,r)})},getConnectorsByNamespace(e){let t=g.allConnectors.filter(t=>t.chain===e);return this.mergeMultiChainConnectors(t)},selectWalletConnector(e){let t=m.getConnector(e.id,e.rdns);a.R.state.activeChain===s.b.CHAIN.SOLANA&&c.handleSolanaDeeplinkRedirect(t?.name||e.name||""),t?d.RouterController.push("ConnectingExternal",{connector:t}):d.RouterController.push("ConnectingWalletConnect",{wallet:e})},getConnectors(e){return e?this.getConnectorsByNamespace(e):this.mergeMultiChainConnectors(g.allConnectors)},setFilterByNamespace(e){g.filterByNamespace=e,g.connectors=this.getConnectors(e),h.ApiController.setFilterByNamespace(e)},setConnectorId(e,t){e&&(g.activeConnectorIds={...g.activeConnectorIds,[t]:e},l.M.setConnectedConnectorId(t,e))},removeConnectorId(e){g.activeConnectorIds={...g.activeConnectorIds,[e]:void 0},l.M.deleteConnectedConnectorId(e)},getConnectorId(e){if(e)return g.activeConnectorIds[e]},isConnected:e=>e?!!g.activeConnectorIds[e]:Object.values(g.activeConnectorIds).some(e=>!!e),resetConnectorIds(){g.activeConnectorIds={...p}}}},31929:function(e,t,r){"use strict";r.d(t,{X:function(){return g}});var i=r(33085),n=r(44649),s=r(61616),o=r(53357),a=r(39905),c=r(68584),l=r(72723),h=r(48415);let u=o.j.getAnalyticsUrl(),d=new a.V({baseUrl:u,clientId:null}),f=["MODAL_CREATED"],p=(0,i.sj)({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),g={state:p,subscribe:e=>(0,i.Ld)(p,()=>e(p)),getSdkProperties(){let{projectId:e,sdkType:t,sdkVersion:r}=h.OptionsController.state;return{projectId:e,st:t,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(e){try{let t=c.N.state.address;if(f.includes(e.data.event)||"undefined"==typeof window)return;await d.post({path:"/e",params:g.getSdkProperties(),body:{eventId:o.j.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:e.timestamp,props:{...e.data,address:t}}}),p.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===n.b.HTTP_STATUS_CODES.FORBIDDEN&&!p.reportedErrors.FORBIDDEN&&(l.AlertController.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${(0,s.$U)()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),p.reportedErrors.FORBIDDEN=!0)}},sendEvent(e){p.timestamp=Date.now(),p.data=e,h.OptionsController.state.features?.analytics&&g._sendAnalyticsEvent(p)}}},89512:function(e,t,r){"use strict";r.d(t,{I:function(){return m}});var i=r(33085),n=r(55543),s=r(53357),o=r(68584),a=r(17766),c=r(92144),l=r(93046),h=r(54173),u=r(31929),d=r(48415),f=r(96986),p=r(86777);let g=(0,i.sj)({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),m={state:g,subscribe:e=>(0,i.Ld)(g,()=>e(g)),subscribeKey:(e,t)=>(0,n.VW)(g,e,t),async open(e){let t="connected"===o.N.state.status;l.ConnectionController.state.wcBasic?a.ApiController.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await a.ApiController.prefetch({fetchConnectorImages:!t,fetchFeaturedWallets:!t,fetchRecommendedWallets:!t}),e?.namespace?(await c.R.switchActiveNamespace(e.namespace),m.setLoading(!0,e.namespace)):m.setLoading(!0),h.ConnectorController.setFilterByNamespace(e?.namespace);let r=c.R.getAccountData(e?.namespace)?.caipAddress;c.R.state.noAdapters&&!r?s.j.isMobile()?p.RouterController.reset("AllWallets"):p.RouterController.reset("ConnectingWalletConnectBasic"):e?.view?p.RouterController.reset(e.view):r?p.RouterController.reset("Account"):p.RouterController.reset("Connect"),g.open=!0,f.I.set({open:!0}),u.X.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!r}})},close(){let e=d.OptionsController.state.enableEmbedded,t=!!c.R.state.activeCaipAddress;g.open&&u.X.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:t}}),g.open=!1,m.clearLoading(),e?t?p.RouterController.replace("Account"):p.RouterController.push("Connect"):f.I.set({open:!1}),l.ConnectionController.resetUri()},setLoading(e,t){t&&g.loadingNamespaceMap.set(t,e),g.loading=e,f.I.set({loading:e})},clearLoading(){g.loadingNamespaceMap.clear(),g.loading=!1},shake(){g.shake||(g.shake=!0,setTimeout(()=>{g.shake=!1},500))}}},48415:function(e,t,r){"use strict";r.d(t,{OptionsController:function(){return l}});var i=r(33085),n=r(55543),s=r(59712),o=r(53357);let a={getFeatureValue(e,t){let r=t?.[e];return void 0===r?s.bq.DEFAULT_FEATURES[e]:r},filterSocialsByPlatform(e){if(!e||!e.length)return e;if(o.j.isTelegram()){if(o.j.isIos())return e.filter(e=>"google"!==e);if(o.j.isMac())return e.filter(e=>"x"!==e);if(o.j.isAndroid())return e.filter(e=>!["facebook","x"].includes(e))}return e}},c=(0,i.sj)({features:s.bq.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:s.bq.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0}),l={state:c,subscribeKey:(e,t)=>(0,n.VW)(c,e,t),setOptions(e){Object.assign(c,e)},setFeatures(e){if(!e)return;c.features||(c.features=s.bq.DEFAULT_FEATURES);let t={...c.features,...e};c.features=t,c.features.socials&&(c.features.socials=a.filterSocialsByPlatform(c.features.socials))},setProjectId(e){c.projectId=e},setCustomRpcUrls(e){c.customRpcUrls=e},setAllWallets(e){c.allWallets=e},setIncludeWalletIds(e){c.includeWalletIds=e},setExcludeWalletIds(e){c.excludeWalletIds=e},setFeaturedWalletIds(e){c.featuredWalletIds=e},setTokens(e){c.tokens=e},setTermsConditionsUrl(e){c.termsConditionsUrl=e},setPrivacyPolicyUrl(e){c.privacyPolicyUrl=e},setCustomWallets(e){c.customWallets=e},setIsSiweEnabled(e){c.isSiweEnabled=e},setIsUniversalProvider(e){c.isUniversalProvider=e},setSdkVersion(e){c.sdkVersion=e},setMetadata(e){c.metadata=e},setDisableAppend(e){c.disableAppend=e},setEIP6963Enabled(e){c.enableEIP6963=e},setDebug(e){c.debug=e},setEnableWalletConnect(e){c.enableWalletConnect=e},setEnableWalletGuide(e){c.enableWalletGuide=e},setEnableAuthLogger(e){c.enableAuthLogger=e},setEnableWallets(e){c.enableWallets=e},setHasMultipleAddresses(e){c.hasMultipleAddresses=e},setSIWX(e){c.siwx=e},setConnectMethodsOrder(e){c.features={...c.features,connectMethodsOrder:e}},setWalletFeaturesOrder(e){c.features={...c.features,walletFeaturesOrder:e}},setSocialsOrder(e){c.features={...c.features,socials:e}},setCollapseWallets(e){c.features={...c.features,collapseWallets:e}},setEnableEmbedded(e){c.enableEmbedded=e},setAllowUnsupportedChain(e){c.allowUnsupportedChain=e},setManualWCControl(e){c.manualWCControl=e},setEnableNetworkSwitch(e){c.enableNetworkSwitch=e},setDefaultAccountTypes(e={}){Object.entries(e).forEach(([e,t])=>{t&&(c.defaultAccountTypes[e]=t)})},setUniversalProviderConfigOverride(e){c.universalProviderConfigOverride=e},getUniversalProviderConfigOverride:()=>c.universalProviderConfigOverride,getSnapshot:()=>(0,i.CO)(c)}},96986:function(e,t,r){"use strict";r.d(t,{I:function(){return s}});var i=r(33085);let n=(0,i.sj)({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),s={state:n,subscribe:e=>(0,i.Ld)(n,()=>e(n)),set(e){Object.assign(n,{...n,...e})}}},86777:function(e,t,r){"use strict";r.d(t,{RouterController:function(){return u}});var i=r(33085),n=r(55543),s=r(68584),o=r(92144),a=r(54173),c=r(89512),l=r(48415);let h=(0,i.sj)({view:"Connect",history:["Connect"],transactionStack:[]}),u={state:h,subscribeKey:(e,t)=>(0,n.VW)(h,e,t),pushTransactionStack(e){h.transactionStack.push(e)},popTransactionStack(e){let t=h.transactionStack.pop();if(t){if(e)this.goBack(),t?.onCancel?.();else{if(t.goBack)this.goBack();else if(t.replace){let e=h.history.indexOf("ConnectingSiwe");e>0?this.goBackToIndex(e-1):(c.I.close(),h.history=[])}else t.view&&this.reset(t.view);t?.onSuccess?.()}}},push(e,t){e!==h.view&&(h.view=e,h.history.push(e),h.data=t)},reset(e,t){h.view=e,h.history=[e],h.data=t},replace(e,t){h.history.at(-1)!==e&&(h.view=e,h.history[h.history.length-1]=e,h.data=t)},goBack(){let e=!o.R.state.activeCaipAddress&&"ConnectingFarcaster"===this.state.view;if(h.history.length>1&&!h.history.includes("UnsupportedChain")){h.history.pop();let[e]=h.history.slice(-1);e&&(h.view=e)}else c.I.close();h.data?.wallet&&(h.data.wallet=void 0),setTimeout(()=>{if(e){s.N.setFarcasterUrl(void 0,o.R.state.activeChain);let e=a.ConnectorController.getAuthConnector();e?.provider?.reload();let t=(0,i.CO)(l.OptionsController.state);e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType})}},100)},goBackToIndex(e){if(h.history.length>1){h.history=h.history.slice(0,e+1);let[t]=h.history.slice(-1);t&&(h.view=t)}}}},66909:function(e,t,r){"use strict";r.d(t,{SnackController:function(){return c}});var i=r(33085),n=r(55543),s=r(53357);let o=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),a=(0,i.sj)({...o}),c={state:a,subscribeKey:(e,t)=>(0,n.VW)(a,e,t),showLoading(e,t={}){this._showMessage({message:e,variant:"loading",...t})},showSuccess(e){this._showMessage({message:e,variant:"success"})},showSvg(e,t){this._showMessage({message:e,svg:t})},showError(e){let t=s.j.parseError(e);this._showMessage({message:t,variant:"error"})},hide(){a.message=o.message,a.variant=o.variant,a.svg=o.svg,a.open=o.open,a.autoClose=o.autoClose},_showMessage({message:e,svg:t,variant:r="success",autoClose:i=o.autoClose}){a.open?(a.open=!1,setTimeout(()=>{a.message=e,a.variant=r,a.svg=t,a.open=!0,a.autoClose=i},150)):(a.message=e,a.variant=r,a.svg=t,a.open=!0,a.autoClose=i)}}},52005:function(e,t,r){"use strict";r.d(t,{ThemeController:function(){return a}});var i=r(33085),n=r(62714),s=r(54173);let o=(0,i.sj)({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),a={state:o,subscribe:e=>(0,i.Ld)(o,()=>e(o)),setThemeMode(e){o.themeMode=e;try{let t=s.ConnectorController.getAuthConnector();if(t){let r=a.getSnapshot().themeVariables;t.provider.syncTheme({themeMode:e,themeVariables:r,w3mThemeVariables:(0,n.t)(r,e)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(e){o.themeVariables={...o.themeVariables,...e};try{let e=s.ConnectorController.getAuthConnector();if(e){let t=a.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:(0,n.t)(o.themeVariables,o.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot:()=>(0,i.CO)(o)}},63043:function(e,t,r){"use strict";r.d(t,{f:function(){return c}});var i=r(33085),n=r(17766),s=r(22472);let o={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},a=(0,i.sj)({networkImagePromises:{}}),c={async fetchWalletImage(e){if(e)return await n.ApiController._fetchWalletImage(e),this.getWalletImageById(e)},async fetchNetworkImage(e){if(e)return this.getNetworkImageById(e)||(a.networkImagePromises[e]||(a.networkImagePromises[e]=n.ApiController._fetchNetworkImage(e)),await a.networkImagePromises[e],this.getNetworkImageById(e))},getWalletImageById(e){if(e)return s.W.state.walletImages[e]},getWalletImage:e=>e?.image_url?e?.image_url:e?.image_id?s.W.state.walletImages[e.image_id]:void 0,getNetworkImage:e=>e?.assets?.imageUrl?e?.assets?.imageUrl:e?.assets?.imageId?s.W.state.networkImages[e.assets.imageId]:void 0,getNetworkImageById(e){if(e)return s.W.state.networkImages[e]},getConnectorImage:e=>e?.imageUrl?e.imageUrl:e?.imageId?s.W.state.connectorImages[e.imageId]:void 0,getChainImage:e=>s.W.state.networkImages[o[e]]}},59712:function(e,t,r){"use strict";r.d(t,{bq:function(){return s}});var i=r(25566);let n=(void 0!==i&&void 0!==i.env?i.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",s={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:n,SECURE_SITE_DASHBOARD:`${n}/dashboard`,SECURE_SITE_FAVICON:`${n}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155","solana"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in a new browser tab"},DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}}},53357:function(e,t,r){"use strict";r.d(t,{j:function(){return o}});var i=r(44649),n=r(59712),s=r(36801);let o={isMobile(){return!!this.isClient()&&!!(window?.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent))},checkCaipNetwork:(e,t="")=>e?.caipNetworkId.toLocaleLowerCase().includes(t.toLowerCase()),isAndroid(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return o.isMobile()&&e.includes("android")},isIos(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return e.includes("iphone")||e.includes("ipad")},isSafari(){return!!this.isClient()&&(window?.navigator.userAgent.toLowerCase()).includes("safari")},isClient:()=>"undefined"!=typeof window,isPairingExpired:e=>!e||e-Date.now()<=n.bq.TEN_SEC_MS,isAllowedRetry:(e,t=n.bq.ONE_SEC_MS)=>Date.now()-e>=t,copyToClopboard(e){navigator.clipboard.writeText(e)},isIframe(){try{return window?.self!==window?.top}catch(e){return!1}},getPairingExpiry:()=>Date.now()+n.bq.FOUR_MINUTES_MS,getNetworkId:e=>e?.split(":")[1],getPlainAddress:e=>e?.split(":")[2],wait:async e=>new Promise(t=>{setTimeout(t,e)}),debounce(e,t=500){let r;return(...i)=>{r&&clearTimeout(r),r=setTimeout(function(){e(...i)},t)}},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),formatNativeUrl(e,t){if(o.isHttpUrl(e))return this.formatUniversalUrl(e,t);let r=e;r.includes("://")||(r=e.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.isTelegram()&&this.isAndroid()&&(t=encodeURIComponent(t));let i=encodeURIComponent(t);return{redirect:`${r}wc?uri=${i}`,href:r}},formatUniversalUrl(e,t){if(!o.isHttpUrl(e))return this.formatNativeUrl(e,t);let r=e;r.endsWith("/")||(r=`${r}/`);let i=encodeURIComponent(t);return{redirect:`${r}wc?uri=${i}`,href:r}},getOpenTargetForPlatform(e){return"popupWindow"===e?e:this.isTelegram()?s.M.getTelegramSocialProvider()?"_top":"_blank":e},openHref(e,t,r){window?.open(e,this.getOpenTargetForPlatform(t),r||"noreferrer noopener")},returnOpenHref(e,t,r){return window?.open(e,this.getOpenTargetForPlatform(t),r||"noreferrer noopener")},isTelegram:()=>"undefined"!=typeof window&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto),preloadImage:async e=>Promise.race([new Promise((t,r)=>{let i=new Image;i.onload=t,i.onerror=r,i.crossOrigin="anonymous",i.src=e}),o.wait(2e3)]),formatBalance(e,t){let r="0.000";if("string"==typeof e){let t=Number(e);if(t){let e=Math.floor(1e3*t)/1e3;e&&(r=e.toString())}}return`${r}${t?` ${t}`:""}`},formatBalance2(e,t){let r;if("0"===e)r="0";else if("string"==typeof e){let t=Number(e);t&&(r=t.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:r??"0",rest:"0"===r?"000":"",symbol:t}},getApiUrl:()=>i.b.W3M_API_URL,getBlockchainApiUrl:()=>i.b.BLOCKCHAIN_API_RPC_URL,getAnalyticsUrl:()=>i.b.PULSE_API_URL,getUUID:()=>crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),parseError:e=>"string"==typeof e?e:"string"==typeof e?.issues?.[0]?.message?e.issues[0].message:e instanceof Error?e.message:"Unknown error",sortRequestedNetworks(e,t=[]){let r={};return t&&e&&(e.forEach((e,t)=>{r[e]=t}),t.sort((e,t)=>{let i=r[e.id],n=r[t.id];return void 0!==i&&void 0!==n?i-n:void 0!==i?-1:void 0!==n?1:0})),t},calculateBalance(e){let t=0;for(let r of e)t+=r.value??0;return t},formatTokenBalance(e){let[t,r]=e.toFixed(2).split(".");return{dollars:t,pennies:r}},isAddress(e,t="eip155"){switch(t){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)&&(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)||/^(?:0x)?[0-9A-F]{40}$/iu.test(e)))return!0;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(e);default:return!1}},uniqueBy(e,t){let r=new Set;return e.filter(e=>{let i=e[t];return!r.has(i)&&(r.add(i),!0)})},generateSdkVersion(e,t,r){let i=0===e.length?n.bq.ADAPTER_TYPES.UNIVERSAL:e.map(e=>e.adapterType).join(",");return`${t}-${i}-${r}`},createAccount:(e,t,r,i,n)=>({namespace:e,address:t,type:r,publicKey:i,path:n}),isCaipAddress(e){if("string"!=typeof e)return!1;let t=e.split(":"),r=t[0];return 3===t.filter(Boolean).length&&r in i.b.CHAIN_NAME_MAP},isMac(){let e=window?.navigator.userAgent.toLowerCase();return e.includes("macintosh")&&!e.includes("safari")},formatTelegramSocialLoginUrl(e){let t=`--${encodeURIComponent(window?.location.href)}`,r="state=";if("auth.magic.link"===new URL(e).host){let i="provider_authorization_url=",n=e.substring(e.indexOf(i)+i.length),s=this.injectIntoUrl(decodeURIComponent(n),r,t);return e.replace(n,encodeURIComponent(s))}return this.injectIntoUrl(e,r,t)},injectIntoUrl(e,t,r){let i=e.indexOf(t);if(-1===i)throw Error(`${t} parameter not found in the URL: ${e}`);let n=e.indexOf("&",i),s=t.length,o=-1!==n?n:e.length,a=e.substring(0,i+s);return a+(e.substring(i+s,o)+r)+e.substring(n)}}},39905:function(e,t,r){"use strict";async function i(...e){let t=await fetch(...e);if(!t.ok)throw Error(`HTTP status code: ${t.status}`,{cause:t});return t}r.d(t,{V:function(){return n}});class n{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}async get({headers:e,signal:t,cache:r,...n}){let s=this.createUrl(n);return(await i(s,{method:"GET",headers:e,signal:t,cache:r})).json()}async getBlob({headers:e,signal:t,...r}){let n=this.createUrl(r);return(await i(n,{method:"GET",headers:e,signal:t})).blob()}async post({body:e,headers:t,signal:r,...n}){let s=this.createUrl(n);return(await i(s,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:t,signal:r,...n}){let s=this.createUrl(n);return(await i(s,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:t,signal:r,...n}){let s=this.createUrl(n);return(await i(s,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:t}){let r=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach(([e,t])=>{t&&r.searchParams.append(e,t)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}},41505:function(e,t,r){"use strict";r.d(t,{w:function(){return g}}),r(15133),r(5071),r(38979),r(5276),r(55445),r(82957).Buffer,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var i=r(44649),n=r(4786),s=r(68584),o=r(92144),a=r(93046),c=r(54173),l=r(31929),h=r(89512),u=r(48415),d=r(86777),f=r(66909),p=r(53357);let g={getSIWX:()=>u.OptionsController.state.siwx,async initializeIfEnabled(){let e=u.OptionsController.state.siwx,t=o.R.getActiveCaipAddress();if(!(e&&t))return;let[r,i,n]=t.split(":");if(o.R.checkIfSupportedNetwork(r))try{if((await e.getSessions(`${r}:${i}`,n)).length)return;await h.I.open({view:"SIWXSignMessage"})}catch(e){console.error("SIWXUtil:initializeIfEnabled",e),l.X.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await a.ConnectionController._getClient()?.disconnect().catch(console.error),d.RouterController.reset("Connect"),f.SnackController.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){let e=u.OptionsController.state.siwx,t=p.j.getPlainAddress(o.R.getActiveCaipAddress()),r=o.R.getActiveCaipNetwork(),n=a.ConnectionController._getClient();if(!e)throw Error("SIWX is not enabled");if(!t)throw Error("No ActiveCaipAddress found");if(!r)throw Error("No ActiveCaipNetwork or client found");if(!n)throw Error("No ConnectionController client found");try{let s=await e.createMessage({chainId:r.caipNetworkId,accountAddress:t}),o=s.toString();c.ConnectorController.getConnectorId(r.chainNamespace)===i.b.CONNECTOR_ID.AUTH&&d.RouterController.pushTransactionStack({view:null,goBack:!1,replace:!0});let a=await n.signMessage(o);await e.addSession({data:s,message:o,signature:a}),h.I.close(),l.X.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(t){let e=this.getSIWXEventProperties();h.I.state.open&&"ApproveTransaction"!==d.RouterController.state.view||await h.I.open({view:"SIWXSignMessage"}),e.isSmartAccount?f.SnackController.showError("This application might not support Smart Accounts"):f.SnackController.showError("Signature declined"),l.X.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:e}),console.error("SWIXUtil:requestSignMessage",t)}},async cancelSignMessage(){try{let e=this.getSIWX();e?.getRequired?.()?await a.ConnectionController.disconnect():h.I.close(),d.RouterController.reset("Connect"),l.X.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){let e=u.OptionsController.state.siwx,t=p.j.getPlainAddress(o.R.getActiveCaipAddress()),r=o.R.getActiveCaipNetwork();return e&&t&&r?e.getSessions(r.caipNetworkId,t):[]},async isSIWXCloseDisabled(){let e=this.getSIWX();if(e){let t="ApproveTransaction"===d.RouterController.state.view,r="SIWXSignMessage"===d.RouterController.state.view;if(t||r)return e.getRequired?.()&&0===(await this.getSessions()).length}return!1},async universalProviderAuthenticate({universalProvider:e,chains:t,methods:r}){let i=g.getSIWX(),n=new Set(t.map(e=>e.split(":")[0]));if(!i||1!==n.size||!n.has("eip155"))return!1;let a=await i.createMessage({chainId:o.R.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:""}),c=await e.authenticate({nonce:a.nonce,domain:a.domain,uri:a.uri,exp:a.expirationTime,iat:a.issuedAt,nbf:a.notBefore,requestId:a.requestId,version:a.version,resources:a.resources,statement:a.statement,chainId:a.chainId,methods:r,chains:[a.chainId,...t.filter(e=>e!==a.chainId)]});if(f.SnackController.showLoading("Authenticating...",{autoClose:!1}),s.N.setConnectedWalletInfo({...c.session.peer.metadata,name:c.session.peer.metadata.name,icon:c.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(n)[0]),c?.auths?.length){let t=c.auths.map(t=>{let r=e.client.formatAuthMessage({request:t.p,iss:t.p.iss});return{data:{...t.p,accountAddress:t.p.iss.split(":").slice(-1).join(""),chainId:t.p.iss.split(":").slice(2,4).join(":"),uri:t.p.aud,version:t.p.version||a.version,expirationTime:t.p.exp,issuedAt:t.p.iat,notBefore:t.p.nbf},message:r,signature:t.s.s,cacao:t}});try{await i.setSessions(t),l.X.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:g.getSIWXEventProperties()})}catch(t){throw console.error("SIWX:universalProviderAuth - failed to set sessions",t),l.X.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:g.getSIWXEventProperties()}),await e.disconnect().catch(console.error),t}finally{f.SnackController.hide()}}return!0},getSIWXEventProperties:()=>({network:o.R.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:s.N.state.preferredAccountType===n.y_.ACCOUNT_TYPES.SMART_ACCOUNT}),async clearSessions(){let e=this.getSIWX();e&&await e.setSessions([])}}},36801:function(e,t,r){"use strict";r.d(t,{M:function(){return n}});var i=r(61616);let n={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired:(e,t)=>Date.now()-e>t,getActiveNetworkProps(){let e=n.getActiveNamespace(),t=n.getActiveCaipNetworkId(),r=t?t.split(":")[1]:void 0;return{namespace:e,caipNetworkId:t,chainId:r?isNaN(Number(r))?r:Number(r):void 0}},setWalletConnectDeepLink({name:e,href:t}){try{i.mr.setItem(i.uJ.DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{let e=i.mr.getItem(i.uJ.DEEPLINK_CHOICE);if(e)return JSON.parse(e)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{i.mr.removeItem(i.uJ.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(e){try{i.mr.setItem(i.uJ.ACTIVE_NAMESPACE,e)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(e){try{i.mr.setItem(i.uJ.ACTIVE_CAIP_NETWORK_ID,e),n.setActiveNamespace(e.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return i.mr.getItem(i.uJ.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{i.mr.removeItem(i.uJ.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(e){try{let t=(0,i.Vk)(e);i.mr.removeItem(t)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(e){try{let t=n.getRecentWallets();t.find(t=>t.id===e.id)||(t.unshift(e),t.length>2&&t.pop(),i.mr.setItem(i.uJ.RECENT_WALLETS,JSON.stringify(t)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{let e=i.mr.getItem(i.uJ.RECENT_WALLETS);return e?JSON.parse(e):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(e,t){try{let r=(0,i.Vk)(e);i.mr.setItem(r,t)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return i.mr.getItem(i.uJ.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(e){if(e)try{let t=(0,i.Vk)(e);return i.mr.getItem(t)}catch(t){console.info("Unable to get connected connector id in namespace ",e)}},setConnectedSocialProvider(e){try{i.mr.setItem(i.uJ.CONNECTED_SOCIAL,e)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return i.mr.getItem(i.uJ.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{i.mr.removeItem(i.uJ.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return i.mr.getItem(i.uJ.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){let e=i.mr.getItem(i.uJ.ACTIVE_CAIP_NETWORK_ID);return e?.split(":")?.[1]},setConnectionStatus(e){try{i.mr.setItem(i.uJ.CONNECTION_STATUS,e)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return i.mr.getItem(i.uJ.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{let e=i.mr.getItem(i.uJ.CONNECTED_NAMESPACES);if(!e?.length)return[];return e.split(",")}catch{return[]}},setConnectedNamespaces(e){try{let t=Array.from(new Set(e));i.mr.setItem(i.uJ.CONNECTED_NAMESPACES,t.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(e){try{let t=n.getConnectedNamespaces();t.includes(e)||(t.push(e),n.setConnectedNamespaces(t))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(e){try{let t=n.getConnectedNamespaces(),r=t.indexOf(e);r>-1&&(t.splice(r,1),n.setConnectedNamespaces(t))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return i.mr.getItem(i.uJ.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(e){try{i.mr.setItem(i.uJ.TELEGRAM_SOCIAL_PROVIDER,e)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{i.mr.removeItem(i.uJ.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let e={};try{let t=i.mr.getItem(i.uJ.PORTFOLIO_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromBalanceCache(e){try{let t=n.getBalanceCache();i.mr.setItem(i.uJ.PORTFOLIO_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getBalanceCacheForCaipAddress(e){try{let t=n.getBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;n.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateBalanceCache(e){try{let t=n.getBalanceCache();t[e.caipAddress]=e,i.mr.setItem(i.uJ.PORTFOLIO_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getNativeBalanceCache(){let e={};try{let t=i.mr.getItem(i.uJ.NATIVE_BALANCE_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromNativeBalanceCache(e){try{let t=n.getBalanceCache();i.mr.setItem(i.uJ.NATIVE_BALANCE_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getNativeBalanceCacheForCaipAddress(e){try{let t=n.getNativeBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",e),n.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateNativeBalanceCache(e){try{let t=n.getNativeBalanceCache();t[e.caipAddress]=e,i.mr.setItem(i.uJ.NATIVE_BALANCE_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getEnsCache(){let e={};try{let t=i.mr.getItem(i.uJ.ENS_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get ens name cache")}return e},getEnsFromCacheForAddress(e){try{let t=n.getEnsCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;n.removeEnsFromCache(e)}catch{console.info("Unable to get ens name from cache",e)}},updateEnsCache(e){try{let t=n.getEnsCache();t[e.address]=e,i.mr.setItem(i.uJ.ENS_CACHE,JSON.stringify(t))}catch{console.info("Unable to update ens name cache",e)}},removeEnsFromCache(e){try{let t=n.getEnsCache();i.mr.setItem(i.uJ.ENS_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove ens name from cache",e)}},getIdentityCache(){let e={};try{let t=i.mr.getItem(i.uJ.IDENTITY_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get identity cache")}return e},getIdentityFromCacheForAddress(e){try{let t=n.getIdentityCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;n.removeIdentityFromCache(e)}catch{console.info("Unable to get identity from cache",e)}},updateIdentityCache(e){try{let t=n.getIdentityCache();t[e.address]={identity:e.identity,timestamp:e.timestamp},i.mr.setItem(i.uJ.IDENTITY_CACHE,JSON.stringify(t))}catch{console.info("Unable to update identity cache",e)}},removeIdentityFromCache(e){try{let t=n.getIdentityCache();i.mr.setItem(i.uJ.IDENTITY_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove identity from cache",e)}},clearAddressCache(){try{i.mr.removeItem(i.uJ.PORTFOLIO_CACHE),i.mr.removeItem(i.uJ.NATIVE_BALANCE_CACHE),i.mr.removeItem(i.uJ.ENS_CACHE),i.mr.removeItem(i.uJ.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}}}},46773:function(e,t,r){"use strict";r.d(t,{C:function(){return f}});var i=r(44649),n=r(48415),s=r(36801),o=r(17766),a=r(53357),c=r(93046),l=r(92144),h=r(54173),u=r(54090),d=r(70768);let f={getConnectorsByType(e,t,r){let{customWallets:i}=n.OptionsController.state,o=s.M.getRecentWallets(),a=d.J.filterOutDuplicateWallets(t),c=d.J.filterOutDuplicateWallets(r),l=e.filter(e=>"MULTI_CHAIN"===e.type),h=e.filter(e=>"ANNOUNCED"===e.type),u=e.filter(e=>"INJECTED"===e.type);return{custom:i,recent:o,external:e.filter(e=>"EXTERNAL"===e.type),multiChain:l,announced:h,injected:u,recommended:a,featured:c}},showConnector(e){let t=e.info?.rdns,r=!!t&&o.ApiController.state.excludedWallets.some(e=>e.rdns===t),i=!!e.name&&o.ApiController.state.excludedWallets.some(t=>u.g.isLowerCaseMatch(t.name,e.name));return("INJECTED"!==e.type||(!!a.j.isMobile()||"Browser Wallet"!==e.name)&&(!!t||!!c.ConnectionController.checkInstalled())&&!r&&!i)&&("ANNOUNCED"!==e.type||!r&&!i)},getIsConnectedWithWC:()=>Array.from(l.R.state.chains.values()).some(e=>h.ConnectorController.getConnectorId(e.namespace)===i.b.CONNECTOR_ID.WALLET_CONNECT),getConnectorTypeOrder({recommended:e,featured:t,custom:r,recent:i,announced:s,injected:o,multiChain:a,external:c,overriddenConnectors:l=n.OptionsController.state.features?.connectorTypeOrder??[]}){let h=f.getIsConnectedWithWC(),u=[{type:"walletConnect",isEnabled:n.OptionsController.state.enableWalletConnect&&!h},{type:"recent",isEnabled:i.length>0},{type:"injected",isEnabled:[...o,...s,...a].length>0},{type:"featured",isEnabled:t.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:c.length>0},{type:"recommended",isEnabled:e.length>0}].filter(e=>e.isEnabled),d=new Set(u.map(e=>e.type)),p=l.filter(e=>d.has(e)).map(e=>({type:e,isEnabled:!0})),g=u.filter(({type:e})=>!p.some(({type:t})=>t===e));return Array.from(new Set([...p,...g].map(({type:e})=>e)))}}},54946:function(e,t,r){"use strict";r.d(t,{b:function(){return n}});var i=r(25566);let n={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(void 0!==i&&void 0!==i.env?i.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}}},70768:function(e,t,r){"use strict";r.d(t,{J:function(){return h}});var i=r(48415),n=r(54173),s=r(36801),o=r(53357),a=r(17766),c=r(46773),l=r(54946);let h={filterOutDuplicatesByRDNS(e){let t=i.OptionsController.state.enableEIP6963?n.ConnectorController.state.connectors:[],r=s.M.getRecentWallets(),a=t.map(e=>e.info?.rdns).filter(Boolean),c=r.map(e=>e.rdns).filter(Boolean),l=a.concat(c);if(l.includes("io.metamask.mobile")&&o.j.isMobile()){let e=l.indexOf("io.metamask.mobile");l[e]="io.metamask"}return e.filter(e=>!l.includes(String(e?.rdns)))},filterOutDuplicatesByIds(e){let t=n.ConnectorController.state.connectors.filter(e=>"ANNOUNCED"===e.type||"INJECTED"===e.type),r=s.M.getRecentWallets(),i=t.map(e=>e.explorerId),o=r.map(e=>e.id),a=i.concat(o);return e.filter(e=>!a.includes(e?.id))},filterOutDuplicateWallets(e){let t=this.filterOutDuplicatesByRDNS(e);return this.filterOutDuplicatesByIds(t)},markWalletsAsInstalled(e){let{connectors:t}=n.ConnectorController.state,r=t.filter(e=>"ANNOUNCED"===e.type).reduce((e,t)=>(t.info?.rdns&&(e[t.info.rdns]=!0),e),{});return e.map(e=>({...e,installed:!!e.rdns&&!!r[e.rdns??""]})).sort((e,t)=>Number(t.installed)-Number(e.installed))},getConnectOrderMethod(e,t){let r=e?.connectMethodsOrder||i.OptionsController.state.features?.connectMethodsOrder,s=t||n.ConnectorController.state.connectors;if(r)return r;let{injected:o,announced:h}=c.C.getConnectorsByType(s,a.ApiController.state.recommended,a.ApiController.state.featured),u=o.filter(c.C.showConnector),d=h.filter(c.C.showConnector);return u.length||d.length?["wallet","email","social"]:l.b.DEFAULT_CONNECT_METHOD_ORDER}}},30795:function(e,t,r){"use strict";r.d(t,{Hg:function(){return n.H},Mo:function(){return h.M},n:function(){return i.n},Hs:function(){return i.Hs},R:function(){return i.R}});var i=r(84249),n=r(3874),s=r(71096),o=r(70939),a=r(45721),c=r(96961);s.extend(a),s.extend(c);let l={...o,name:"en-web3-modal",relativeTime:{future:"in %s",past:"%s ago",s:"%d sec",m:"1 min",mm:"%d min",h:"1 hr",hh:"%d hrs",d:"1 d",dd:"%d d",M:"1 mo",MM:"%d mo",y:"1 yr",yy:"%d yr"}};s.locale("en-web3-modal",l);var h=r(57116)},84249:function(e,t,r){"use strict";let i,n,s;r.d(t,{Bp:function(){return p},ET:function(){return d},Hs:function(){return l},R:function(){return h},ZM:function(){return f},n:function(){return c}});var o=r(31133),a=r(62714);function c(e,t){i=document.createElement("style"),n=document.createElement("style"),s=document.createElement("style"),i.textContent=u(e).core.cssText,n.textContent=u(e).dark.cssText,s.textContent=u(e).light.cssText,document.head.appendChild(i),document.head.appendChild(n),document.head.appendChild(s),l(t)}function l(e){n&&s&&("light"===e?(n.removeAttribute("media"),s.media="enabled"):(s.removeAttribute("media"),n.media="enabled"))}function h(e){i&&n&&s&&(i.textContent=u(e).core.cssText,n.textContent=u(e).dark.cssText,s.textContent=u(e).light.cssText)}function u(e){return{core:(0,o.iv)`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${(0,o.$m)(e?.["--w3m-color-mix-strength"]?`${e["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${(0,o.$m)(e?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${(0,o.$m)(e?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${(0,o.$m)(e?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${(0,o.$m)(e?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:(0,o.iv)`
      :root {
        --w3m-color-mix: ${(0,o.$m)(e?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${(0,o.$m)((0,a.t)(e,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${(0,o.$m)((0,a.t)(e,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:(0,o.iv)`
      :root {
        --w3m-color-mix: ${(0,o.$m)(e?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${(0,o.$m)((0,a.t)(e,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${(0,o.$m)((0,a.t)(e,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}let d=(0,o.iv)`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,f=(0,o.iv)`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,p=(0,o.iv)`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`},3874:function(e,t,r){"use strict";r.d(t,{H:function(){return i}});let i={getSpacingStyles:(e,t)=>Array.isArray(e)?e[t]?`var(--wui-spacing-${e[t]})`:void 0:"string"==typeof e?`var(--wui-spacing-${e})`:void 0,getFormattedDate:e=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(e),getHostName(e){try{return new URL(e).hostname}catch(e){return""}},getTruncateString:({string:e,charsStart:t,charsEnd:r,truncate:i})=>e.length<=t+r?e:"end"===i?`${e.substring(0,t)}...`:"start"===i?`...${e.substring(e.length-r)}`:`${e.substring(0,Math.floor(t))}...${e.substring(e.length-Math.floor(r))}`,generateAvatarColors(e){let t=e.toLowerCase().replace(/^0x/iu,"").replace(/[^a-f0-9]/gu,"").substring(0,6).padEnd(6,"0"),r=this.hexToRgb(t),i=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),n=100-3*Number(i?.replace("px","")),s=`${n}% ${n}% at 65% 40%`,o=[];for(let e=0;e<5;e+=1){let t=this.tintColor(r,.15*e);o.push(`rgb(${t[0]}, ${t[1]}, ${t[2]})`)}return`
    --local-color-1: ${o[0]};
    --local-color-2: ${o[1]};
    --local-color-3: ${o[2]};
    --local-color-4: ${o[3]};
    --local-color-5: ${o[4]};
    --local-radial-circle: ${s}
   `},hexToRgb(e){let t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]},tintColor(e,t){let[r,i,n]=e;return[Math.round(r+(255-r)*t),Math.round(i+(255-i)*t),Math.round(n+(255-n)*t)]},isNumber:e=>/^[0-9]+$/u.test(e),getColorTheme:e=>e||("undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light":"dark"),splitBalance(e){let t=e.split(".");return 2===t.length?[t[0],t[1]]:["0","00"]},roundNumber:(e,t,r)=>e.toString().length>=t?Number(e).toFixed(r):e,formatNumberToLocalString:(e,t=2)=>void 0===e?"0.00":"number"==typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t})}},57116:function(e,t,r){"use strict";function i(e){return function(t){return"function"==typeof t?(customElements.get(e)||customElements.define(e,t),t):function(e,t){let{kind:r,elements:i}=t;return{kind:r,elements:i,finisher(t){customElements.get(e)||customElements.define(e,t)}}}(e,t)}}r.d(t,{M:function(){return i}})},88578:function(e,t,r){"use strict";r.d(t,{b:function(){return i}});let i={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"}},54090:function(e,t,r){"use strict";r.d(t,{g:function(){return n}});var i=r(88578);let n={getCaipTokens(e){if(!e)return;let t={};return Object.entries(e).forEach(([e,r])=>{t[`${i.b.EIP155}:${e}`]=r}),t},isLowerCaseMatch:(e,t)=>e?.toLowerCase()===t?.toLowerCase()}},4786:function(e,t,r){"use strict";r.d(t,{y_:function(){return n}});var i=r(25566);void 0!==i&&void 0!==i.env&&i.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL,void 0!==i&&void 0!==i.env&&i.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL,void 0!==i&&void 0!==i.env&&i.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION;let n={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}}},36789:function(e,t,r){"use strict";function i(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function n(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");i(e.outputLen),i(e.blockLen)}function o(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function a(e,t){n(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{$h:function(){return o},eB:function(){return a},gk:function(){return n},k8:function(){return i},z3:function(){return s}})},48466:function(e,t,r){"use strict";r.d(t,{kb:function(){return d},l1:function(){return l},eV:function(){return u},GL:function(){return o},iA:function(){return c},O6:function(){return p},np:function(){return a},O0:function(){return h},Jq:function(){return s},hE:function(){return f}});let i="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var n=r(36789);function s(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function a(e,t){return e<<32-t|e>>>t}let c=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function l(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}}function h(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),(0,n.gk)(e),e}function u(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];(0,n.gk)(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}class d{clone(){return this._cloneInto()}}function f(e){let t=t=>e().update(h(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function p(e=32){if(i&&"function"==typeof i.getRandomValues)return i.getRandomValues(new Uint8Array(e));if(i&&"function"==typeof i.randomBytes)return i.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}},59805:function(e,t,r){"use strict";r.d(t,{mI:function(){return a},i1:function(){return i},H:function(){return l},su:function(){return c}});var i,n,s=r(95589),o=r(74659);(n=i||(i={})).Installed="Installed",n.NotDetected="NotDetected",n.Loadable="Loadable",n.Unsupported="Unsupported";class a extends s{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,r={}){let i=this.publicKey;if(!i)throw new o.oS;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,e}}function c(e){if("undefined"==typeof window||"undefined"==typeof document)return;let t=[];function r(){if(e())for(let e of t)e()}let i=setInterval(r,1e3);t.push(()=>clearInterval(i)),"loading"===document.readyState&&(document.addEventListener("DOMContentLoaded",r,{once:!0}),t.push(()=>document.removeEventListener("DOMContentLoaded",r))),"complete"!==document.readyState&&(window.addEventListener("load",r,{once:!0}),t.push(()=>window.removeEventListener("load",r))),r()}function l(){if(!navigator)return!1;let e=navigator.userAgent.toLowerCase(),t=e.includes("iphone")||e.includes("ipad"),r=e.includes("safari");return t&&r}},74659:function(e,t,r){"use strict";r.d(t,{$w:function(){return a},IW:function(){return f},Nx:function(){return u},OZ:function(){return n},PY:function(){return p},UG:function(){return l},W8:function(){return s},at:function(){return c},bD:function(){return m},cO:function(){return h},fk:function(){return g},hd:function(){return y},lj:function(){return i},oS:function(){return d},p6:function(){return o}});class i extends Error{constructor(e,t){super(e),this.error=t}}class n extends i{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class s extends i{constructor(){super(...arguments),this.name="WalletLoadError"}}class o extends i{constructor(){super(...arguments),this.name="WalletConfigError"}}class a extends i{constructor(){super(...arguments),this.name="WalletConnectionError"}}class c extends i{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class l extends i{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class h extends i{constructor(){super(...arguments),this.name="WalletAccountError"}}class u extends i{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class d extends i{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class f extends i{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class p extends i{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class g extends i{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class m extends i{constructor(){super(...arguments),this.name="WalletSignInError"}}class y extends i{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}},95462:function(e,t,r){"use strict";r.d(t,{eC:function(){return a},qz:function(){return c},sz:function(){return o}});var i=r(59805),n=r(74659),s=r(43887);class o extends i.mI{async sendTransaction(e,t,r={}){let i=!0;try{if((0,s.W)(e)){if(!this.supportedTransactionVersions)throw new n.IW("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new n.IW(`Sending transaction version ${e.version} isn't supported by this wallet`);try{let i=(e=await this.signTransaction(e)).serialize();return await t.sendRawTransaction(i,r)}catch(e){if(e instanceof n.PY)throw i=!1,e;throw new n.IW(e?.message,e)}}else try{let{signers:i,...n}=r;e=await this.prepareTransaction(e,t,n),i?.length&&e.partialSign(...i);let s=(e=await this.signTransaction(e)).serialize();return await t.sendRawTransaction(s,n)}catch(e){if(e instanceof n.PY)throw i=!1,e;throw new n.IW(e?.message,e)}}catch(e){throw i&&this.emit("error",e),e}}async signAllTransactions(e){for(let t of e)if((0,s.W)(t)){if(!this.supportedTransactionVersions)throw new n.PY("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new n.PY(`Signing transaction version ${t.version} isn't supported by this wallet`)}let t=[];for(let r of e)t.push(await this.signTransaction(r));return t}}class a extends o{}class c extends a{}},43887:function(e,t,r){"use strict";function i(e){return"version"in e}r.d(t,{W:function(){return i}})},86454:function(e,t,r){"use strict";var i,n;r.d(t,{Q:function(){return i}}),(n=i||(i={})).Mainnet="mainnet-beta",n.Testnet="testnet",n.Devnet="devnet"},4298:function(e,t,r){"use strict";r.d(t,{O:function(){return c}});var i=r(95462),n=r(59805),s=r(74659),o=r(43887),a=r(64024);class c extends i.eC{constructor(e={}){super(),this.name="Phantom",this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState="undefined"==typeof window||"undefined"==typeof document?n.i1.Unsupported:n.i1.NotDetected,this._disconnected=()=>{let e=this._wallet;e&&(e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new s.at),this.emit("disconnect"))},this._accountChanged=e=>{let t=this._publicKey;if(t){try{e=new a.nh(e.toBytes())}catch(e){this.emit("error",new s.Nx(e?.message,e));return}t.equals(e)||(this._publicKey=e,this.emit("connect",e))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==n.i1.Unsupported&&((0,n.H)()?(this._readyState=n.i1.Loadable,this.emit("readyStateChange",this._readyState)):(0,n.su)(()=>!!(window.phantom?.solana?.isPhantom||window.solana?.isPhantom)&&(this._readyState=n.i1.Installed,this.emit("readyStateChange",this._readyState),!0)))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===n.i1.Installed&&await this.connect()}async connect(){try{let e;if(this.connected||this.connecting)return;if(this.readyState===n.i1.Loadable){let e=encodeURIComponent(window.location.href),t=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${e}?ref=${t}`;return}if(this.readyState!==n.i1.Installed)throw new s.OZ;this._connecting=!0;let t=window.phantom?.solana||window.solana;if(!t.isConnected)try{await t.connect()}catch(e){throw new s.$w(e?.message,e)}if(!t.publicKey)throw new s.cO;try{e=new a.nh(t.publicKey.toBytes())}catch(e){throw new s.Nx(e?.message,e)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=e,this.emit("connect",e)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){let e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(e){this.emit("error",new s.UG(e?.message,e))}}this.emit("disconnect")}async sendTransaction(e,t,r={}){try{let i=this._wallet;if(!i)throw new s.oS;try{let{signers:n,...s}=r;(0,o.W)(e)?n?.length&&e.sign(n):(e=await this.prepareTransaction(e,t,s),n?.length&&e.partialSign(...n)),s.preflightCommitment=s.preflightCommitment||t.commitment;let{signature:a}=await i.signAndSendTransaction(e,s);return a}catch(e){if(e instanceof s.lj)throw e;throw new s.IW(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signTransaction(e){try{let t=this._wallet;if(!t)throw new s.oS;try{return await t.signTransaction(e)||e}catch(e){throw new s.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new s.oS;try{return await t.signAllTransactions(e)||e}catch(e){throw new s.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new s.oS;try{let{signature:r}=await t.signMessage(e);return r}catch(e){throw new s.fk(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}},76625:function(e,t,r){"use strict";r.d(t,{z:function(){return n}});var i=r(2265);let n=e=>i.createElement("button",{className:`wallet-adapter-button ${e.className||""}`,disabled:e.disabled,style:e.style,onClick:e.onClick,tabIndex:e.tabIndex||0,type:"button"},e.startIcon&&i.createElement("i",{className:"wallet-adapter-button-start-icon"},e.startIcon),e.children,e.endIcon&&i.createElement("i",{className:"wallet-adapter-button-end-icon"},e.endIcon))},90724:function(e,t,r){"use strict";r.d(t,{o:function(){return n}});var i=r(2265);let n=({wallet:e,...t})=>e&&i.createElement("img",{src:e.adapter.icon,alt:`${e.adapter.name} icon`,...t})},12948:function(e,t,r){"use strict";r.d(t,{s:function(){return p}});var i=r(2265),n=r(72941),s=r(59805),o=r(15408),a=r(54887);let c=({id:e,children:t,expanded:r=!1})=>{let n=(0,i.useRef)(null),s=(0,i.useRef)(!0),o=()=>{let e=n.current;e&&requestAnimationFrame(()=>{e.style.height=e.scrollHeight+"px"})},a=()=>{let e=n.current;e&&requestAnimationFrame(()=>{e.style.height=e.offsetHeight+"px",e.style.overflow="hidden",requestAnimationFrame(()=>{e.style.height="0"})})};return(0,i.useLayoutEffect)(()=>{r?o():a()},[r]),(0,i.useLayoutEffect)(()=>{let e=n.current;if(e)return s.current&&(t(),s.current=!1),e.addEventListener("transitionend",i),()=>e.removeEventListener("transitionend",i);function t(){e&&(e.style.overflow=r?"initial":"hidden",r&&(e.style.height="auto"))}function i(r){e&&r.target===e&&"height"===r.propertyName&&t()}},[r]),i.createElement("div",{className:"wallet-adapter-collapse",id:e,ref:n,role:"region",style:{height:0,transition:s.current?void 0:"height 250ms ease-out"}},t)};var l=r(76625),h=r(90724);let u=({handleClick:e,tabIndex:t,wallet:r})=>i.createElement("li",null,i.createElement(l.z,{onClick:e,startIcon:i.createElement(h.o,{wallet:r}),tabIndex:t},r.adapter.name,r.readyState===s.i1.Installed&&i.createElement("span",null,"Detected"))),d=()=>i.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),i.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),i.createElement("g",{clipPath:"url(#clip0_880_5115)"},i.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),i.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#9945FF"}),i.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),i.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),i.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),i.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),i.createElement("stop",{offset:"1",stopColor:"#00D18C"})),i.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#9945FF"}),i.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),i.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),i.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),i.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),i.createElement("stop",{offset:"1",stopColor:"#00D18C"})),i.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#9945FF"}),i.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),i.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),i.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),i.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),i.createElement("stop",{offset:"1",stopColor:"#00D18C"})),i.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#9945FF"}),i.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),i.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),i.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),i.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),i.createElement("stop",{offset:"1",stopColor:"#00D18C"})),i.createElement("clipPath",{id:"clip0_880_5115"},i.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),f=({className:e="",container:t="body"})=>{let r=(0,i.useRef)(null),{wallets:l,select:h}=(0,o.O)(),{setVisible:f}=(0,n.h)(),[p,g]=(0,i.useState)(!1),[m,y]=(0,i.useState)(!1),[b,w]=(0,i.useState)(null),[v,E]=(0,i.useMemo)(()=>{let e=[],t=[];for(let r of l)r.readyState===s.i1.Installed?e.push(r):t.push(r);return e.length?[e,t]:[t,[]]},[l]),I=(0,i.useCallback)(()=>{y(!1),setTimeout(()=>f(!1),150)},[f]),_=(0,i.useCallback)(e=>{e.preventDefault(),I()},[I]),A=(0,i.useCallback)((e,t)=>{h(t),_(e)},[h,_]),S=(0,i.useCallback)(()=>g(!p),[p]),C=(0,i.useCallback)(e=>{let t=r.current;if(!t)return;let i=t.querySelectorAll("button"),n=i[0],s=i[i.length-1];e.shiftKey?document.activeElement===n&&(s.focus(),e.preventDefault()):document.activeElement===s&&(n.focus(),e.preventDefault())},[r]);return(0,i.useLayoutEffect)(()=>{let e=e=>{"Escape"===e.key?I():"Tab"===e.key&&C(e)},{overflow:t}=window.getComputedStyle(document.body);return setTimeout(()=>y(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",e,!1),()=>{document.body.style.overflow=t,window.removeEventListener("keydown",e,!1)}},[I,C]),(0,i.useLayoutEffect)(()=>w(document.querySelector(t)),[t]),b&&(0,a.createPortal)(i.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${m&&"wallet-adapter-modal-fade-in"} ${e}`,ref:r,role:"dialog"},i.createElement("div",{className:"wallet-adapter-modal-container"},i.createElement("div",{className:"wallet-adapter-modal-wrapper"},i.createElement("button",{onClick:_,className:"wallet-adapter-modal-button-close"},i.createElement("svg",{width:"14",height:"14"},i.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),v.length?i.createElement(i.Fragment,null,i.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),i.createElement("ul",{className:"wallet-adapter-modal-list"},v.map(e=>i.createElement(u,{key:e.adapter.name,handleClick:t=>A(t,e.adapter.name),wallet:e})),E.length?i.createElement(c,{expanded:p,id:"wallet-adapter-modal-collapse"},E.map(e=>i.createElement(u,{key:e.adapter.name,handleClick:t=>A(t,e.adapter.name),tabIndex:p?0:-1,wallet:e}))):null),E.length?i.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:S,tabIndex:0},i.createElement("span",null,p?"Less ":"More ","options"),i.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${p?"wallet-adapter-modal-list-more-icon-rotate":""}`},i.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):i.createElement(i.Fragment,null,i.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),i.createElement("div",{className:"wallet-adapter-modal-middle"},i.createElement(d,null)),E.length?i.createElement(i.Fragment,null,i.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:S,tabIndex:0},i.createElement("span",null,p?"Hide ":"Already have a wallet? View ","options"),i.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${p?"wallet-adapter-modal-list-more-icon-rotate":""}`},i.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),i.createElement(c,{expanded:p,id:"wallet-adapter-modal-collapse"},i.createElement("ul",{className:"wallet-adapter-modal-list"},E.map(e=>i.createElement(u,{key:e.adapter.name,handleClick:t=>A(t,e.adapter.name),tabIndex:p?0:-1,wallet:e}))))):null))),i.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:_})),b)},p=({children:e,...t})=>{let[r,s]=(0,i.useState)(!1);return i.createElement(n.g.Provider,{value:{visible:r,setVisible:s}},e,r&&i.createElement(f,{...t}))}},72941:function(e,t,r){"use strict";r.d(t,{g:function(){return o},h:function(){return a}});var i=r(2265);let n={setVisible(e){console.error(s("call","setVisible"))},visible:!1};function s(e,t){return`You have tried to  ${e} "${t}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}Object.defineProperty(n,"visible",{get:()=>(console.error(s("read","visible")),!1)});let o=(0,i.createContext)(n);function a(){return(0,i.useContext)(o)}},54968:function(e,t,r){"use strict";r.d(t,{U:function(){return o}});var i=r(64024),n=r(2265),s=r(13816);let o=({children:e,endpoint:t,config:r={commitment:"confirmed"}})=>{let o=(0,n.useMemo)(()=>new i.ew(t,r),[t,r]);return n.createElement(s.h.Provider,{value:{connection:o}},e)}},55950:function(e,t,r){"use strict";let i,n,s,o;r.d(t,{n:function(){return tY}});var a,c,l,h,u,d,f,p,g,m,y,b,w,v,E,I,_,A,S,C,N,M,x,O,P,T,R,D,k,L,j,U,B,z,$,q,F,H,W,V,K,Y,J,G,Z,Q,X,ee,et,er,ei,en,es,eo,ea,ec,el,eh,eu,ed,ef,ep,eg,em,ey,eb,ew,ev,eE,eI,e_,eA,eS,eC,eN,eM,ex=r(95462),eO=r(59805),eP=r(74659),eT=r(64024);let eR="solana:signIn";var eD=r(34402),ek=r(77684),eL=r(10282);r(35819);let ej=`(?:\\nURI: (?<uri>[^\\n]+))?(?:\\nVersion: (?<version>[^\\n]+))?(?:\\nChain ID: (?<chainId>[^\\n]+))?(?:\\nNonce: (?<nonce>[^\\n]+))?(?:\\nIssued At: (?<issuedAt>[^\\n]+))?(?:\\nExpiration Time: (?<expirationTime>[^\\n]+))?(?:\\nNot Before: (?<notBefore>[^\\n]+))?(?:\\nRequest ID: (?<requestId>[^\\n]+))?(?:\\nResources:(?<resources>(?:\\n- [^\\n]+)*))?`;RegExp(`^(?<domain>[^\\n]+?) wants you to sign in with your Solana account:\\n(?<address>[^\\n]+)(?:\\n|$)(?:\\n(?<statement>[\\S\\s]*?)(?:\\n|$))??${ej}\\n*$`);var eU=e=>{var t;return Object.freeze({...t={read(t,r){let i=0===r?t:t.slice(r);if(0===i.length)return["",0];let n=i.findIndex(e=>0!==e);n=-1===n?i.length:n;let s=e[0].repeat(n);return n===i.length?[s,t.length]:[s+function(e,t){let r=BigInt(t.length),i=[];for(;e>0n;)i.unshift(t[Number(e%r)]),e/=r;return i.join("")}(i.slice(n).reduce((e,t)=>256n*e+BigInt(t),0n),e),t.length]}},decode:(e,r=0)=>t.read(e,r)[0]})},eB=()=>eU("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");let ez={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class e$ extends Error{constructor(...e){let[t,r,i]=e;super(r),this.code=t,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class eq extends Error{constructor(...e){let[t,r,i,n]=e;super(i),this.code=r,this.data=n,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function eF(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((i=i.apply(e,t||[])).next())})}function eH(e,t){let r=window.btoa(String.fromCharCode.call(null,...e));return t?r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):r}function eW(e){return new Uint8Array(window.atob(e).split("").map(e=>e.charCodeAt(0)))}function eV(e,t){return eF(this,void 0,void 0,function*(){let r=yield crypto.subtle.exportKey("raw",e),i=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,r),n=new Uint8Array(r.byteLength+i.byteLength);return n.set(new Uint8Array(r),0),n.set(new Uint8Array(i),r.byteLength),n})}let eK="solana:cloneAuthorization";function eY(e,t){return eF(this,void 0,void 0,function*(){let r=e.slice(0,4),n=e.slice(4,16),s=e.slice(16),o=yield crypto.subtle.decrypt(eJ(r,n),t,s);return(void 0===i&&(i=new TextDecoder("utf-8")),i).decode(o)})}function eJ(e,t){return{additionalData:e,iv:t,name:"AES-GCM",tagLength:128}}function eG(){return eF(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function eZ(e){if(e<49152||e>65535)throw new e$(ez.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${e} given.`,{port:e});return e}function eQ(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}let eX={Firefox:0,Other:1},e0=null,e1=[150,150,200,500,500,750,750,1e3];function e2(e){return new DataView(e).getUint32(0,!1)}var e3=r(59186),e8=r(3005),e5=r(83747),e6=r(59147),e4=r(88746);function e9(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((i=i.apply(e,t||[])).next())})}function e7(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)}function te(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r}let tt=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,tr=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,ti=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class tn{constructor(){c.add(this),l.set(this,null),h.set(this,{}),u.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),e7(this,c,"m",f).call(this),e7(this,l,"f")&&(e7(this,l,"f").style.display="flex")},this.close=e=>{var t;console.debug("Modal close"),e7(this,c,"m",p).call(this),e7(this,l,"f")&&(e7(this,l,"f").style.display="none"),null===(t=e7(this,h,"f").close)||void 0===t||t.forEach(t=>t(e))},g.set(this,e=>{"Escape"===e.key&&this.close(e)}),this.init=this.init.bind(this),te(this,l,document.getElementById("mobile-wallet-adapter-embedded-root-ui"),"f")}init(){return e9(this,void 0,void 0,function*(){console.log("Injecting modal"),e7(this,c,"m",d).call(this)})}addEventListener(e,t){var r;return(null===(r=e7(this,h,"f")[e])||void 0===r?void 0:r.push(t))||(e7(this,h,"f")[e]=[t]),()=>this.removeEventListener(e,t)}removeEventListener(e,t){var r;e7(this,h,"f")[e]=null===(r=e7(this,h,"f")[e])||void 0===r?void 0:r.filter(e=>t!==e)}}function ts(e){return window.btoa(String.fromCharCode.call(null,...e))}function to(e){return new Uint8Array(window.atob(e).split("").map(e=>e.charCodeAt(0)))}l=new WeakMap,h=new WeakMap,u=new WeakMap,g=new WeakMap,c=new WeakSet,d=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){e7(this,l,"f")||te(this,l,document.getElementById("mobile-wallet-adapter-embedded-root-ui"),"f");return}te(this,l,document.createElement("div"),"f"),e7(this,l,"f").id="mobile-wallet-adapter-embedded-root-ui",e7(this,l,"f").innerHTML=tt,e7(this,l,"f").style.display="none";let e=e7(this,l,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");e&&(e.innerHTML=this.contentHtml);let t=document.createElement("style");t.id="mobile-wallet-adapter-embedded-modal-styles",t.textContent=tr+this.contentStyles;let r=document.createElement("div");r.innerHTML=ti,this.dom=r.attachShadow({mode:"closed"}),this.dom.appendChild(t),this.dom.appendChild(e7(this,l,"f")),document.body.appendChild(r)},f=function(){!e7(this,l,"f")||e7(this,u,"f")||([...e7(this,l,"f").querySelectorAll("[data-modal-close]")].forEach(e=>null==e?void 0:e.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",e7(this,g,"f")),te(this,u,!0,"f"))},p=function(){e7(this,u,"f")&&(window.removeEventListener("load",this.close),document.removeEventListener("keydown",e7(this,g,"f")),e7(this,l,"f")&&([...e7(this,l,"f").querySelectorAll("[data-modal-close]")].forEach(e=>null==e?void 0:e.removeEventListener("click",this.close)),te(this,u,!1,"f")))};let ta="Mobile Wallet Adapter",tc=[ek.G,eL.R,eD.g,eR];class tl{constructor(e){m.add(this),y.set(this,{}),b.set(this,"1.0.0"),w.set(this,ta),v.set(this,"https://solanamobile.com/wallets"),E.set(this,"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo="),I.set(this,void 0),_.set(this,void 0),A.set(this,void 0),S.set(this,!1),C.set(this,0),N.set(this,[]),M.set(this,void 0),x.set(this,void 0),O.set(this,void 0),P.set(this,(e,t)=>{var r;return(null===(r=e7(this,y,"f")[e])||void 0===r?void 0:r.push(t))||(e7(this,y,"f")[e]=[t]),()=>e7(this,m,"m",R).call(this,e,t)}),D.set(this,({silent:e}={})=>e9(this,void 0,void 0,function*(){if(e7(this,S,"f")||this.connected)return{accounts:this.accounts};te(this,S,!0,"f");try{if(e){let e=yield e7(this,A,"f").get();if(!e)return{accounts:this.accounts};yield e7(this,j,"f").call(this,e.capabilities),yield e7(this,L,"f").call(this,e)}else yield e7(this,k,"f").call(this)}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}finally{te(this,S,!1,"f")}return{accounts:this.accounts}})),k.set(this,e=>e9(this,void 0,void 0,function*(){try{let t=yield e7(this,A,"f").get();if(t)return e7(this,L,"f").call(this,t),t;let r=yield e7(this,M,"f").select(e7(this,N,"f"));return yield e7(this,z,"f").call(this,t=>e9(this,void 0,void 0,function*(){let[i,n]=yield Promise.all([t.getCapabilities(),t.authorize({chain:r,identity:e7(this,I,"f"),sign_in_payload:e})]),s=e7(this,q,"f").call(this,n.accounts),o=Object.assign(Object.assign({},n),{accounts:s,chain:r,capabilities:i});return Promise.all([e7(this,j,"f").call(this,i),e7(this,A,"f").set(o),e7(this,L,"f").call(this,o)]),o}))}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}})),L.set(this,e=>e9(this,void 0,void 0,function*(){var t;let r=null==e7(this,_,"f")||(null===(t=e7(this,_,"f"))||void 0===t?void 0:t.accounts.length)!==e.accounts.length||e7(this,_,"f").accounts.some((t,r)=>t.address!==e.accounts[r].address);te(this,_,e,"f"),r&&e7(this,m,"m",T).call(this,"change",{accounts:this.accounts})})),j.set(this,e=>e9(this,void 0,void 0,function*(){let t=e.features.includes("solana:signTransactions"),r=e.supports_sign_and_send_transactions,i=ek.G in this.features!==r||eL.R in this.features!==t;te(this,x,Object.assign(Object.assign({},(r||!r&&!t)&&{[ek.G]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:e7(this,W,"f")}}),t&&{[eL.R]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:e7(this,V,"f")}}),"f"),i&&e7(this,m,"m",T).call(this,"change",{features:this.features})})),U.set(this,(e,t,r)=>e9(this,void 0,void 0,function*(){var i,n;try{let[s,o]=yield Promise.all([null!==(n=null===(i=e7(this,_,"f"))||void 0===i?void 0:i.capabilities)&&void 0!==n?n:yield e.getCapabilities(),e.authorize({auth_token:t,identity:e7(this,I,"f"),chain:r})]),a=e7(this,q,"f").call(this,o.accounts),c=Object.assign(Object.assign({},o),{accounts:a,chain:r,capabilities:s});Promise.all([e7(this,A,"f").set(c),e7(this,L,"f").call(this,c)])}catch(e){throw e7(this,B,"f").call(this),Error(e instanceof Error&&e.message||"Unknown error")}})),B.set(this,()=>e9(this,void 0,void 0,function*(){var e;e7(this,A,"f").clear(),te(this,S,!1,"f"),te(this,C,(e=e7(this,C,"f"),++e),"f"),te(this,_,void 0,"f"),e7(this,m,"m",T).call(this,"change",{accounts:this.accounts})})),z.set(this,e=>e9(this,void 0,void 0,function*(){var t;let r=null===(t=e7(this,_,"f"))||void 0===t?void 0:t.wallet_uri_base,i=e7(this,C,"f");try{return yield function(e,t){return eF(this,void 0,void 0,function*(){let r;!function(){if("undefined"==typeof window||!0!==window.isSecureContext)throw new e$(ez.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}();let i=yield function(){return eF(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}(),n=yield function(e,t){return eF(this,void 0,void 0,function*(){let r=eZ(49152+Math.floor(16384*Math.random())),i=yield function(e,t,r,i=["v1"]){return eF(this,void 0,void 0,function*(){let n=eZ(t),s=function(e){let t="",r=new Uint8Array(e),i=r.byteLength;for(let e=0;e<i;e++)t+=String.fromCharCode(r[e]);return window.btoa(t)}((yield crypto.subtle.exportKey("raw",e))),o=function(e,t){let r=null;if(t){try{r=new URL(t)}catch(e){}if((null==r?void 0:r.protocol)!=="https:")throw new e$(ez.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}return r||(r=new URL("solana-wallet:/")),new URL(e.startsWith("/")?e:[...eQ(r.pathname),...eQ(e)].join("/"),r)}("v1/associate/local",r);return o.searchParams.set("association",s.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])),o.searchParams.set("port",`${n}`),i.forEach(e=>{o.searchParams.set("v",e)}),o})}(e,r,t);return yield function(e){return eF(this,void 0,void 0,function*(){if("https:"===e.protocol)window.location.assign(e);else try{switch(-1!==navigator.userAgent.indexOf("Firefox/")?eX.Firefox:eX.Other){case eX.Firefox:null==e0&&((e0=document.createElement("iframe")).style.display="none",document.body.appendChild(e0)),e0.contentWindow.location.href=e.toString();break;case eX.Other:{let t=new Promise((e,t)=>{function r(){clearTimeout(n),window.removeEventListener("blur",i)}function i(){r(),e()}window.addEventListener("blur",i);let n=setTimeout(()=>{r(),t()},3e3)});window.location.assign(e),yield t}}}catch(e){throw new e$(ez.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}(i),r})}(i.publicKey,null==t?void 0:t.baseUri),s=`ws://localhost:${n}/solana-wallet`,o=(()=>{let e=[...e1];return()=>e.length>1?e.shift():e[0]})(),a=1,c=0,l={__type:"disconnected"};return new Promise((t,n)=>{let h,u,d;let f={},p=()=>eF(this,void 0,void 0,function*(){if("connecting"!==l.__type){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${l.__type}\`.`);return}h.removeEventListener("open",p);let{associationKeypair:e}=l,t=yield eG();h.send((yield eV(t.publicKey,e.privateKey))),l={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:t.privateKey}}),g=e=>{e.wasClean?l={__type:"disconnected"}:n(new e$(ez.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${e.code}: ${e.reason}).`,{closeEvent:e})),u()},m=e=>eF(this,void 0,void 0,function*(){u(),Date.now()-r>=3e4?n(new e$(ez.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${s}.`)):(yield new Promise(e=>{let t=o();d=window.setTimeout(e,t)}),b())}),y=r=>eF(this,void 0,void 0,function*(){let s=yield r.data.arrayBuffer();switch(l.__type){case"connecting":if(0!==s.byteLength)throw Error("Encountered unexpected message while connecting");let o=yield eG();h.send((yield eV(o.publicKey,i.privateKey))),l={__type:"hello_req_sent",associationPublicKey:i.publicKey,ecdhPrivateKey:o.privateKey};break;case"connected":try{let e=s.slice(0,4),t=e2(e);if(t!==c+1)throw Error("Encrypted message has invalid sequence number");c=t;let r=yield function(e,t){return eF(this,void 0,void 0,function*(){let r=JSON.parse((yield eY(e,t)));if(Object.hasOwnProperty.call(r,"error"))throw new eq(r.id,r.error.code,r.error.message);return r})}(s,l.sharedSecret),i=f[r.id];delete f[r.id],i.resolve(r.result)}catch(e){if(e instanceof eq){let t=f[e.jsonRpcMessageId];delete f[e.jsonRpcMessageId],t.reject(e)}else throw e}break;case"hello_req_sent":{var d,p;if(0===s.byteLength){let e=yield eG();h.send((yield eV(e.publicKey,i.privateKey))),l={__type:"hello_req_sent",associationPublicKey:i.publicKey,ecdhPrivateKey:e.privateKey};break}let r=yield function(e,t,r){return eF(this,void 0,void 0,function*(){let[i,n]=yield Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",e.slice(0,65),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:n},r,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(i),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}(s,l.associationPublicKey,l.ecdhPrivateKey),o=s.slice(65),g=0!==o.byteLength?yield eF(this,void 0,void 0,function*(){let e=e2(o.slice(0,4));if(e!==c+1)throw Error("Encrypted message has invalid sequence number");return c=e,function(e,t){return eF(this,void 0,void 0,function*(){let r=JSON.parse((yield eY(e,t))),i="legacy";if(Object.hasOwnProperty.call(r,"v"))switch(r.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new e$(ez.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${r.v}`)}return{protocol_version:i}})}(o,r)}):{protocol_version:"legacy"};l={__type:"connected",sharedSecret:r,sessionProperties:g};let m=(d=g.protocol_version,p=(e,t)=>eF(this,void 0,void 0,function*(){let i=a++;return h.send((yield function(e,t){return eF(this,void 0,void 0,function*(){let r=JSON.stringify(e);return function(e,t,r){return eF(this,void 0,void 0,function*(){let i=function(e){if(e>=4294967296)throw Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!1),new Uint8Array(t)}(t),n=new Uint8Array(12);crypto.getRandomValues(n);let s=yield crypto.subtle.encrypt(eJ(i,n),r,new TextEncoder().encode(e)),o=new Uint8Array(i.byteLength+n.byteLength+s.byteLength);return o.set(new Uint8Array(i),0),o.set(new Uint8Array(n),i.byteLength),o.set(new Uint8Array(s),i.byteLength+n.byteLength),o})}(r,e.id,t)})}({id:i,jsonrpc:"2.0",method:e,params:null!=t?t:{}},r))),new Promise((t,r)=>{f[i]={resolve(i){switch(e){case"authorize":case"reauthorize":{let{wallet_uri_base:e}=i;if(null!=e)try{!function(e){let t;try{t=new URL(e)}catch(e){throw new e$(ez.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if("https:"!==t.protocol)throw new e$(ez.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}(e)}catch(e){r(e);return}}}t(i)},reject:r}})}),new Proxy({},{get:(e,t)=>"then"===t?null:(null==e[t]&&(e[t]=function(e){return eF(this,void 0,void 0,function*(){let{method:r,params:i}=function(e,t,r){let i=t,n=e.toString().replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`).toLowerCase();switch(e){case"authorize":{let{chain:e}=i;if("legacy"===r){switch(e){case"solana:testnet":e="testnet";break;case"solana:devnet":e="devnet";break;case"solana:mainnet":e="mainnet-beta";break;default:e=i.cluster}i.cluster=e}else{switch(e){case"testnet":case"devnet":e=`solana:${e}`;break;case"mainnet-beta":e="solana:mainnet"}i.chain=e}}case"reauthorize":{let{auth_token:e,identity:t}=i;e&&("legacy"===r?(n="reauthorize",i={auth_token:e,identity:t}):n="authorize")}}return{method:n,params:i}}(t,e,d),n=yield p(r,i);return"authorize"===r&&i.sign_in_payload&&!n.sign_in_result&&(n.sign_in_result=yield function(e,t,r){var i;return eF(this,void 0,void 0,function*(){var n,s,o;let a=null!==(i=e.domain)&&void 0!==i?i:window.location.host,c=t.accounts[0].address,l=(s=Object.assign(Object.assign({},e),{domain:a,address:(n=eW(c),eB().decode(n))}),(o=function(e){let t=`${e.domain} wants you to sign in with your Solana account:
`;t+=`${e.address}`,e.statement&&(t+=`

${e.statement}`);let r=[];if(e.uri&&r.push(`URI: ${e.uri}`),e.version&&r.push(`Version: ${e.version}`),e.chainId&&r.push(`Chain ID: ${e.chainId}`),e.nonce&&r.push(`Nonce: ${e.nonce}`),e.issuedAt&&r.push(`Issued At: ${e.issuedAt}`),e.expirationTime&&r.push(`Expiration Time: ${e.expirationTime}`),e.notBefore&&r.push(`Not Before: ${e.notBefore}`),e.requestId&&r.push(`Request ID: ${e.requestId}`),e.resources)for(let t of(r.push("Resources:"),e.resources))r.push(`- ${t}`);return r.length&&(t+=`

${r.join("\n")}`),t}(s),window.btoa(o)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")),h=eW((yield r("sign_messages",{addresses:[c],payloads:[l]})).signed_payloads[0]),u=eH(h.slice(0,h.length-64)),d=eH(h.slice(h.length-64));return{address:c,signed_message:0==u.length?l:u,signature:d}})}(i.sign_in_payload,n,p)),function(e,t,r){if("getCapabilities"===e)switch(r){case"legacy":{let e=["solana:signTransactions"];return!0===t.supports_clone_authorization&&e.push(eK),Object.assign(Object.assign({},t),{features:e})}case"v1":return Object.assign(Object.assign({},t),{supports_sign_and_send_transactions:!0,supports_clone_authorization:t.features.includes(eK)})}return t}(t,n,d)})}),e[t]),defineProperty:()=>!1,deleteProperty:()=>!1}));try{t((yield e(m)))}catch(e){n(e)}finally{u(),h.close()}}}}),b=()=>{u&&u(),l={__type:"connecting",associationKeypair:i},void 0===r&&(r=Date.now()),(h=new WebSocket(s,["com.solana.mobilewalletadapter.v1"])).addEventListener("open",p),h.addEventListener("close",g),h.addEventListener("error",m),h.addEventListener("message",y),u=()=>{window.clearTimeout(d),h.removeEventListener("open",p),h.removeEventListener("close",g),h.removeEventListener("error",m),h.removeEventListener("message",y)}};b()})})}(e,r?{baseUri:r}:void 0)}catch(e){throw e7(this,C,"f")!==i&&(yield new Promise(()=>{})),e instanceof Error&&"SolanaMobileWalletAdapterError"===e.name&&"ERROR_WALLET_NOT_FOUND"===e.code&&(yield e7(this,O,"f").call(this,this)),e}})),$.set(this,()=>{if(!e7(this,_,"f"))throw Error("Wallet not connected");return{authToken:e7(this,_,"f").auth_token,chain:e7(this,_,"f").chain}}),q.set(this,e=>e.map(e=>{var t,r;let i=to(e.address);return{address:e6.encode(i),publicKey:i,label:e.label,icon:e.icon,chains:null!==(t=e.chains)&&void 0!==t?t:e7(this,N,"f"),features:null!==(r=e.features)&&void 0!==r?r:tc}})),F.set(this,e=>e9(this,void 0,void 0,function*(){let{authToken:t,chain:r}=e7(this,$,"f").call(this);try{let i=e.map(e=>ts(e));return yield e7(this,z,"f").call(this,e=>e9(this,void 0,void 0,function*(){return yield e7(this,U,"f").call(this,e,t,r),(yield e.signTransactions({payloads:i})).signed_payloads.map(to)}))}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}})),H.set(this,(e,t)=>e9(this,void 0,void 0,function*(){let{authToken:r,chain:i}=e7(this,$,"f").call(this);try{return yield e7(this,z,"f").call(this,n=>e9(this,void 0,void 0,function*(){let[s,o]=yield Promise.all([n.getCapabilities(),e7(this,U,"f").call(this,n,r,i)]);if(s.supports_sign_and_send_transactions){let r=ts(e);return(yield n.signAndSendTransactions(Object.assign(Object.assign({},t),{payloads:[r]}))).signatures.map(to)[0]}throw Error("connected wallet does not support signAndSendTransaction")}))}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}})),W.set(this,(...e)=>e9(this,void 0,void 0,function*(){let t=[];for(let r of e){let e=yield e7(this,H,"f").call(this,r.transaction,r.options);t.push({signature:e})}return t})),V.set(this,(...e)=>e9(this,void 0,void 0,function*(){return(yield e7(this,F,"f").call(this,e.map(({transaction:e})=>e))).map(e=>({signedTransaction:e}))})),K.set(this,(...e)=>e9(this,void 0,void 0,function*(){let{authToken:t,chain:r}=e7(this,$,"f").call(this),i=e.map(({account:e})=>ts(e.publicKey)),n=e.map(({message:e})=>ts(e));try{return yield e7(this,z,"f").call(this,e=>e9(this,void 0,void 0,function*(){return yield e7(this,U,"f").call(this,e,t,r),(yield e.signMessages({addresses:i,payloads:n})).signed_payloads.map(to).map(e=>({signedMessage:e,signature:e.slice(-64)}))}))}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}})),Y.set(this,(...e)=>e9(this,void 0,void 0,function*(){let t=[];if(!(e.length>1))return[(yield e7(this,J,"f").call(this,e[0]))];for(let r of e)t.push((yield e7(this,J,"f").call(this,r)));return t})),J.set(this,e=>e9(this,void 0,void 0,function*(){var t,r,i;te(this,S,!0,"f");try{let n=yield e7(this,k,"f").call(this,Object.assign(Object.assign({},e),{domain:null!==(t=null==e?void 0:e.domain)&&void 0!==t?t:window.location.host}));if(!n.sign_in_result)throw Error("Sign in failed, no sign in result returned by wallet");let s=n.sign_in_result.address,o=n.accounts.find(e=>e.address==s);return{account:Object.assign(Object.assign({},null!=o?o:{address:e6.encode(to(s))}),{publicKey:to(s),chains:null!==(r=null==o?void 0:o.chains)&&void 0!==r?r:e7(this,N,"f"),features:null!==(i=null==o?void 0:o.features)&&void 0!==i?i:n.capabilities.features}),signedMessage:to(n.sign_in_result.signed_message),signature:to(n.sign_in_result.signature)}}catch(e){throw Error(e instanceof Error&&e.message||"Unknown error")}finally{te(this,S,!1,"f")}})),te(this,A,e.authorizationCache,"f"),te(this,I,e.appIdentity,"f"),te(this,N,e.chains,"f"),te(this,M,e.chainSelector,"f"),te(this,O,e.onWalletNotFound,"f"),te(this,x,{[ek.G]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:e7(this,W,"f")},[eL.R]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:e7(this,V,"f")}},"f")}get version(){return e7(this,b,"f")}get name(){return e7(this,w,"f")}get url(){return e7(this,v,"f")}get icon(){return e7(this,E,"f")}get chains(){return e7(this,N,"f")}get features(){return Object.assign({[e3.V]:{version:"1.0.0",connect:e7(this,D,"f")},[e8.R]:{version:"1.0.0",disconnect:e7(this,B,"f")},[e5.k]:{version:"1.0.0",on:e7(this,P,"f")},[eD.g]:{version:"1.0.0",signMessage:e7(this,K,"f")},[eR]:{version:"1.0.0",signIn:e7(this,Y,"f")}},e7(this,x,"f"))}get accounts(){var e,t;return null!==(t=null===(e=e7(this,_,"f"))||void 0===e?void 0:e.accounts)&&void 0!==t?t:[]}get connected(){return!!e7(this,_,"f")}get isAuthorized(){return!!e7(this,_,"f")}get currentAuthorization(){return e7(this,_,"f")}get cachedAuthorizationResult(){return e7(this,A,"f").get()}}y=new WeakMap,b=new WeakMap,w=new WeakMap,v=new WeakMap,E=new WeakMap,I=new WeakMap,_=new WeakMap,A=new WeakMap,S=new WeakMap,C=new WeakMap,N=new WeakMap,M=new WeakMap,x=new WeakMap,O=new WeakMap,P=new WeakMap,D=new WeakMap,k=new WeakMap,L=new WeakMap,j=new WeakMap,U=new WeakMap,B=new WeakMap,z=new WeakMap,$=new WeakMap,q=new WeakMap,F=new WeakMap,H=new WeakMap,W=new WeakMap,V=new WeakMap,K=new WeakMap,Y=new WeakMap,J=new WeakMap,m=new WeakSet,T=function(e,...t){var r;null===(r=e7(this,y,"f")[e])||void 0===r||r.forEach(e=>e.apply(null,t))},R=function(e,t){var r;e7(this,y,"f")[e]=null===(r=e7(this,y,"f")[e])||void 0===r?void 0:r.filter(e=>t!==e)},new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakSet,new WeakMap;class th extends tn{constructor(){super(...arguments),this.contentStyles=td,this.contentHtml=tu}initWithError(e){super.init(),this.populateError(e)}populateError(e){var t,r;let i=null===(t=this.dom)||void 0===t?void 0:t.getElementById("mobile-wallet-adapter-error-message"),n=null===(r=this.dom)||void 0===r?void 0:r.getElementById("mobile-wallet-adapter-error-action");if(i){if("SolanaMobileWalletAdapterError"===e.name)switch(e.code){case"ERROR_WALLET_NOT_FOUND":i.innerHTML="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",n&&n.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":i.innerHTML="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.",n&&(n.style.display="none");return}i.innerHTML=`An unexpected error occurred: ${e.message}`}else console.log("Failed to locate error dialog element")}}let tu=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,td=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`,tf="SolanaMobileWalletAdapterDefaultAuthorizationCache";function tp(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((i=i.apply(e,t||[])).next())})}function tg(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)}function tm(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r}let ty="standard:connect";function tb(e){return window.btoa(String.fromCharCode.call(null,...e))}function tw(e){switch(e){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return e}}class tv extends ex.qz{constructor(e,t){super(),G.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),Z.set(this,void 0),Q.set(this,!1),X.set(this,"undefined"!=typeof window&&window.isSecureContext&&"undefined"!=typeof document&&/android/i.test(navigator.userAgent)?eO.i1.Loadable:eO.i1.Unsupported),ee.set(this,void 0),et.set(this,void 0),er.set(this,void 0),ei.set(this,e=>tp(this,void 0,void 0,function*(){if(e.accounts&&e.accounts.length>0){tg(this,G,"m",es).call(this);let t=yield tg(this,ee,"f").call(this,e.accounts);t!==tg(this,et,"f")&&(tm(this,et,t,"f"),tm(this,er,void 0,"f"),this.emit("connect",this.publicKey))}})),tm(this,ee,e=>tp(this,void 0,void 0,function*(){var r;let i=yield t.addressSelector.select(e.map(({publicKey:e})=>tb(e)));return null!==(r=e.find(({publicKey:e})=>tb(e)===i))&&void 0!==r?r:e[0]}),"f"),tm(this,Z,e,"f"),tg(this,Z,"f").features["standard:events"].on("change",tg(this,ei,"f")),this.name=tg(this,Z,"f").name,this.icon=tg(this,Z,"f").icon,this.url=tg(this,Z,"f").url}get publicKey(){var e;if(!tg(this,er,"f")&&tg(this,et,"f"))try{tm(this,er,new eT.nh(tg(this,et,"f").publicKey),"f")}catch(e){throw new eP.Nx(e instanceof Error&&(null==e?void 0:e.message)||"Unknown error",e)}return null!==(e=tg(this,er,"f"))&&void 0!==e?e:null}get connected(){return tg(this,Z,"f").connected}get connecting(){return tg(this,Q,"f")}get readyState(){return tg(this,X,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return tp(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return tp(this,void 0,void 0,function*(){tg(this,G,"m",en).call(this,!0)})}connect(){return tp(this,void 0,void 0,function*(){tg(this,G,"m",en).call(this)})}performAuthorization(e){return tp(this,void 0,void 0,function*(){try{let t=yield tg(this,Z,"f").cachedAuthorizationResult;if(t)return yield tg(this,Z,"f").features[ty].connect({silent:!0}),t;return e?yield tg(this,Z,"f").features[eR].signIn(e):yield tg(this,Z,"f").features[ty].connect(),yield yield tg(this,Z,"f").cachedAuthorizationResult}catch(e){throw new eP.$w(e instanceof Error&&e.message||"Unknown error",e)}})}disconnect(){return tp(this,void 0,void 0,function*(){return yield tg(this,G,"m",ec).call(this,()=>tp(this,void 0,void 0,function*(){tm(this,Q,!1,"f"),tm(this,er,void 0,"f"),tm(this,et,void 0,"f"),yield tg(this,Z,"f").features["standard:disconnect"].disconnect(),this.emit("disconnect")}))})}signIn(e){return tp(this,void 0,void 0,function*(){return tg(this,G,"m",ec).call(this,()=>tp(this,void 0,void 0,function*(){var t;if(tg(this,X,"f")!==eO.i1.Installed&&tg(this,X,"f")!==eO.i1.Loadable)throw new eP.OZ;tm(this,Q,!0,"f");try{let r=yield tg(this,Z,"f").features[eR].signIn(Object.assign(Object.assign({},e),{domain:null!==(t=null==e?void 0:e.domain)&&void 0!==t?t:window.location.host}));if(r.length>0)return r[0];throw Error("Sign in failed, no sign in result returned by wallet")}catch(e){throw new eP.$w(e instanceof Error&&e.message||"Unknown error",e)}finally{tm(this,Q,!1,"f")}}))})}signMessage(e){return tp(this,void 0,void 0,function*(){return yield tg(this,G,"m",ec).call(this,()=>tp(this,void 0,void 0,function*(){let t=tg(this,G,"m",eo).call(this);try{return(yield tg(this,Z,"f").features[eD.g].signMessage({account:t,message:e}))[0].signature}catch(e){throw new eP.fk(null==e?void 0:e.message,e)}}))})}sendTransaction(e,t,r){return tp(this,void 0,void 0,function*(){return yield tg(this,G,"m",ec).call(this,()=>tp(this,void 0,void 0,function*(){let i=tg(this,G,"m",eo).call(this);try{if(ek.G in tg(this,Z,"f").features){let t=tw(tg(this,Z,"f").currentAuthorization.chain),[n]=(yield tg(this,Z,"f").features[ek.G].signAndSendTransaction({account:i,transaction:e.serialize(),chain:t,options:r?{skipPreflight:r.skipPreflight,maxRetries:r.maxRetries}:void 0})).map(e=>tb(e.signature));return n}{let[i]=yield tg(this,G,"m",ea).call(this,[e]);if("version"in i)return yield t.sendTransaction(i);{let e=i.serialize();return yield t.sendRawTransaction(e,Object.assign(Object.assign({},r),{preflightCommitment:function(){let e,i;switch(t.commitment){case"confirmed":case"finalized":case"processed":e=t.commitment;break;default:e="finalized"}switch(null==r?void 0:r.preflightCommitment){case"confirmed":case"finalized":case"processed":i=r.preflightCommitment;break;case void 0:i=e;break;default:i="finalized"}let n="finalized"===i?2:"confirmed"===i?1:0,s="finalized"===e?2:"confirmed"===e?1:0;return n<s?i:e}()}))}}}catch(e){throw new eP.IW(null==e?void 0:e.message,e)}}))})}signTransaction(e){return tp(this,void 0,void 0,function*(){return yield tg(this,G,"m",ec).call(this,()=>tp(this,void 0,void 0,function*(){let[t]=yield tg(this,G,"m",ea).call(this,[e]);return t}))})}signAllTransactions(e){return tp(this,void 0,void 0,function*(){return yield tg(this,G,"m",ec).call(this,()=>tp(this,void 0,void 0,function*(){return yield tg(this,G,"m",ea).call(this,e)}))})}}Z=new WeakMap,Q=new WeakMap,X=new WeakMap,ee=new WeakMap,et=new WeakMap,er=new WeakMap,ei=new WeakMap,G=new WeakSet,en=function(e=!1){return tp(this,void 0,void 0,function*(){if(!this.connecting&&!this.connected)return yield tg(this,G,"m",ec).call(this,()=>tp(this,void 0,void 0,function*(){if(tg(this,X,"f")!==eO.i1.Installed&&tg(this,X,"f")!==eO.i1.Loadable)throw new eP.OZ;tm(this,Q,!0,"f");try{yield tg(this,Z,"f").features[ty].connect({silent:e})}catch(e){throw new eP.$w(e instanceof Error&&e.message||"Unknown error",e)}finally{tm(this,Q,!1,"f")}}))})},es=function(){tg(this,X,"f")!==eO.i1.Installed&&this.emit("readyStateChange",tm(this,X,eO.i1.Installed,"f"))},eo=function(){if(!tg(this,Z,"f").isAuthorized||!tg(this,et,"f"))throw new eP.oS;return tg(this,et,"f")},ea=function(e){return tp(this,void 0,void 0,function*(){let t=tg(this,G,"m",eo).call(this);try{if(eL.R in tg(this,Z,"f").features)return tg(this,Z,"f").features[eL.R].signTransaction(...e.map(e=>({account:t,transaction:e.serialize()}))).then(e=>e.map(e=>{let t=e.signedTransaction,r=t[0],i=eT.EC.deserializeMessageVersion(t.slice(64*r+1,t.length));return"legacy"===i?eT.YW.from(t):eT.GS.deserialize(t)}));throw Error("Connected wallet does not support signing transactions")}catch(e){throw new eP.PY(null==e?void 0:e.message,e)}})},ec=function(e){return tp(this,void 0,void 0,function*(){try{return yield e()}catch(e){throw this.emit("error",e),e}})};class tE extends tv{constructor(e){var t;let r=tw(null!==(t=e.chain)&&void 0!==t?t:e.cluster);super(new tl({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>tp(this,void 0,void 0,function*(){return yield e.authorizationResultCache.get()}),clear:e.authorizationResultCache.clear},chains:[r],chainSelector:{select(e){return e9(this,void 0,void 0,function*(){return 1===e.length?e[0]:e.includes(e4.aI)?e4.aI:e[0]})}},onWalletNotFound:()=>tp(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:r})}}class tI extends tE{}function t_(e){return tp(this,void 0,void 0,function*(){return function(){return e9(this,void 0,void 0,function*(){if("undefined"!=typeof window){let e=window.navigator.userAgent.toLowerCase(),t=new th;e.includes("wv")?t.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):t.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),t.open()}})}()})}let tA=function(e){return e3.V in e.features&&e5.k in e.features&&(ek.G in e.features||eL.R in e.features)};var tS=r(43887);function tC(e){switch(e){case"processed":case"confirmed":case"finalized":case void 0:return e;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap;var tN=function(e){if(e.length>=255)throw TypeError("Alphabet too long");let t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){let i=e.charAt(r),n=i.charCodeAt(0);if(255!==t[n])throw TypeError(i+" is ambiguous");t[n]=r}let r=e.length,i=e.charAt(0),n=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;let s=0,o=0,a=0;for(;e[s]===i;)o++,s++;let c=(e.length-s)*n+1>>>0,l=new Uint8Array(c);for(;s<e.length;){let i=e.charCodeAt(s);if(i>255)return;let n=t[i];if(255===n)return;let o=0;for(let e=c-1;(0!==n||o<a)&&-1!==e;e--,o++)n+=r*l[e]>>>0,l[e]=n%256>>>0,n=n/256>>>0;if(0!==n)throw Error("Non-zero carry");a=o,s++}let h=c-a;for(;h!==c&&0===l[h];)h++;let u=new Uint8Array(o+(c-h)),d=o;for(;h!==c;)u[d++]=l[h++];return u}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";let n=0,o=0,a=0,c=t.length;for(;a!==c&&0===t[a];)a++,n++;let l=(c-a)*s+1>>>0,h=new Uint8Array(l);for(;a!==c;){let e=t[a],i=0;for(let t=l-1;(0!==e||i<o)&&-1!==t;t--,i++)e+=256*h[t]>>>0,h[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw Error("Non-zero carry");o=i,a++}let u=l-o;for(;u!==l&&0===h[u];)u++;let d=i.repeat(n);for(;u<l;++u)d+=e.charAt(h[u]);return d},decodeUnsafe:o,decode:function(e){let t=o(e);if(t)return t;throw Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),tM=function(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)},tx=function(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r};class tO extends eO.mI{get name(){return tM(this,em,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return tM(this,em,"f").icon}get readyState(){return tM(this,ey,"f")}get publicKey(){return tM(this,eu,"f")}get connecting(){return tM(this,ed,"f")}get supportedTransactionVersions(){return tM(this,eg,"f")}get wallet(){return tM(this,em,"f")}get standard(){return!0}constructor({wallet:e}){super(),el.add(this),eh.set(this,void 0),eu.set(this,void 0),ed.set(this,void 0),ef.set(this,void 0),ep.set(this,void 0),eg.set(this,void 0),em.set(this,void 0),ey.set(this,"undefined"==typeof window||"undefined"==typeof document?eO.i1.Unsupported:eO.i1.Installed),eI.set(this,e=>{if("accounts"in e){let e=tM(this,em,"f").accounts[0];tM(this,eh,"f")&&!tM(this,ef,"f")&&e!==tM(this,eh,"f")&&(e?tM(this,el,"m",ew).call(this,e):(this.emit("error",new eP.at),tM(this,el,"m",ev).call(this)))}"features"in e&&tM(this,el,"m",eE).call(this)}),tx(this,em,e,"f"),tx(this,eh,null,"f"),tx(this,eu,null,"f"),tx(this,ed,!1,"f"),tx(this,ef,!1,"f"),tx(this,ep,tM(this,em,"f").features[e5.k].on("change",tM(this,eI,"f")),"f"),tM(this,el,"m",eE).call(this)}destroy(){tx(this,eh,null,"f"),tx(this,eu,null,"f"),tx(this,ed,!1,"f"),tx(this,ef,!1,"f");let e=tM(this,ep,"f");e&&(tx(this,ep,null,"f"),e())}async autoConnect(){return tM(this,el,"m",eb).call(this,{silent:!0})}async connect(){return tM(this,el,"m",eb).call(this)}async disconnect(){if(e8.R in tM(this,em,"f").features)try{tx(this,ef,!0,"f"),await tM(this,em,"f").features[e8.R].disconnect()}catch(e){this.emit("error",new eP.UG(e?.message,e))}finally{tx(this,ef,!1,"f")}tM(this,el,"m",ev).call(this)}async sendTransaction(e,t,r={}){try{var i;let n;let s=tM(this,eh,"f");if(!s)throw new eP.oS;if(ek.G in tM(this,em,"f").features){if(s.features.includes(ek.G))n=ek.G;else if(eL.R in tM(this,em,"f").features&&s.features.includes(eL.R))n=eL.R;else throw new eP.cO}else if(eL.R in tM(this,em,"f").features){if(!s.features.includes(eL.R))throw new eP.cO;n=eL.R}else throw new eP.p6;let o=(i=t.rpcEndpoint).includes("https://api.mainnet-beta.solana.com")?e4.aI:/\bdevnet\b/i.test(i)?e4.BR:/\btestnet\b/i.test(i)?e4.gv:/\blocalhost\b/i.test(i)||/\b127\.0\.0\.1\b/.test(i)?e4.l1:e4.aI;if(!s.chains.includes(o))throw new eP.IW;try{let i;let{signers:a,...c}=r;if((0,tS.W)(e)?(a?.length&&e.sign(a),i=e.serialize()):(e=await this.prepareTransaction(e,t,c),a?.length&&e.partialSign(...a),i=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),n===ek.G){let[e]=await tM(this,em,"f").features[ek.G].signAndSendTransaction({account:s,chain:o,transaction:i,options:{preflightCommitment:tC(c.preflightCommitment||t.commitment),skipPreflight:c.skipPreflight,maxRetries:c.maxRetries,minContextSlot:c.minContextSlot}});return tN.encode(e.signature)}{let[e]=await tM(this,em,"f").features[eL.R].signTransaction({account:s,chain:o,transaction:i,options:{preflightCommitment:tC(c.preflightCommitment||t.commitment),minContextSlot:c.minContextSlot}});return await t.sendRawTransaction(e.signedTransaction,{...c,preflightCommitment:tC(c.preflightCommitment||t.commitment)})}}catch(e){if(e instanceof eP.lj)throw e;throw new eP.IW(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}eh=new WeakMap,eu=new WeakMap,ed=new WeakMap,ef=new WeakMap,ep=new WeakMap,eg=new WeakMap,em=new WeakMap,ey=new WeakMap,eI=new WeakMap,el=new WeakSet,eb=async function(e){try{if(this.connected||this.connecting)return;if(tM(this,ey,"f")!==eO.i1.Installed)throw new eP.OZ;if(tx(this,ed,!0,"f"),!tM(this,em,"f").accounts.length)try{await tM(this,em,"f").features[e3.V].connect(e)}catch(e){throw new eP.$w(e?.message,e)}let t=tM(this,em,"f").accounts[0];if(!t)throw new eP.cO;tM(this,el,"m",ew).call(this,t)}catch(e){throw this.emit("error",e),e}finally{tx(this,ed,!1,"f")}},ew=function(e){let t;try{t=new eT.nh(e.address)}catch(e){throw new eP.Nx(e?.message,e)}tx(this,eh,e,"f"),tx(this,eu,t,"f"),tM(this,el,"m",eE).call(this),this.emit("connect",t)},ev=function(){tx(this,eh,null,"f"),tx(this,eu,null,"f"),tM(this,el,"m",eE).call(this),this.emit("disconnect")},eE=function(){let e=ek.G in tM(this,em,"f").features?tM(this,em,"f").features[ek.G].supportedTransactionVersions:tM(this,em,"f").features[eL.R].supportedTransactionVersions;tx(this,eg,!function(e,t){if(e===t)return!0;let r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}(e,["legacy"])?new Set(e):null,"f"),eL.R in tM(this,em,"f").features&&tM(this,eh,"f")?.features.includes(eL.R)?(this.signTransaction=tM(this,el,"m",e_),this.signAllTransactions=tM(this,el,"m",eA)):(delete this.signTransaction,delete this.signAllTransactions),eD.g in tM(this,em,"f").features&&tM(this,eh,"f")?.features.includes(eD.g)?this.signMessage=tM(this,el,"m",eS):delete this.signMessage,eR in tM(this,em,"f").features?this.signIn=tM(this,el,"m",eC):delete this.signIn},e_=async function(e){try{let t=tM(this,eh,"f");if(!t)throw new eP.oS;if(!(eL.R in tM(this,em,"f").features))throw new eP.p6;if(!t.features.includes(eL.R))throw new eP.cO;try{let r=(await tM(this,em,"f").features[eL.R].signTransaction({account:t,transaction:(0,tS.W)(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return(0,tS.W)(e)?eT.GS.deserialize(r):eT.YW.from(r)}catch(e){if(e instanceof eP.lj)throw e;throw new eP.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}},eA=async function(e){try{let t=tM(this,eh,"f");if(!t)throw new eP.oS;if(!(eL.R in tM(this,em,"f").features))throw new eP.p6;if(!t.features.includes(eL.R))throw new eP.cO;try{let r=await tM(this,em,"f").features[eL.R].signTransaction(...e.map(e=>({account:t,transaction:(0,tS.W)(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((e,t)=>{let i=r[t].signedTransaction;return(0,tS.W)(e)?eT.GS.deserialize(i):eT.YW.from(i)})}catch(e){throw new eP.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}},eS=async function(e){try{let t=tM(this,eh,"f");if(!t)throw new eP.oS;if(!(eD.g in tM(this,em,"f").features))throw new eP.p6;if(!t.features.includes(eD.g))throw new eP.cO;try{return(await tM(this,em,"f").features[eD.g].signMessage({account:t,message:e}))[0].signature}catch(e){throw new eP.fk(e?.message,e)}}catch(e){throw this.emit("error",e),e}},eC=async function(e={}){try{let t;if(!(eR in tM(this,em,"f").features))throw new eP.p6;try{[t]=await tM(this,em,"f").features[eR].signIn(e)}catch(e){throw new eP.bD(e?.message,e)}if(!t)throw new eP.bD;return tM(this,el,"m",ew).call(this,t.account),t}catch(e){throw this.emit("error",e),e}};var tP=function(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)},tT=function(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r};let tR=new Set,tD={};function tk(...e){return(e=e.filter(e=>!tR.has(e))).length?(e.forEach(e=>{n=void 0,tR.add(e)}),tD.register?.forEach(t=>tU(()=>t(...e))),function(){e.forEach(e=>{n=void 0,tR.delete(e)}),tD.unregister?.forEach(t=>tU(()=>t(...e)))}):()=>{}}function tL(){return n||(n=[...tR]),n}function tj(e,t){return tD[e]?.push(t)||(tD[e]=[t]),function(){tD[e]=tD[e]?.filter(e=>t!==e)}}function tU(e){try{e()}catch(e){console.error(e)}}class tB extends Event{get detail(){return tP(this,eN,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),eN.set(this,void 0),tT(this,eN,e,"f")}preventDefault(){throw Error("preventDefault cannot be called")}stopImmediatePropagation(){throw Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw Error("stopPropagation cannot be called")}}eN=new WeakMap;var tz=r(2265);function t$(e){let t=(0,tz.useRef)(void 0);return void 0===t.current&&(t.current={value:e()}),t.current.value}function tq(e){return e.filter(tA).map(e=>new tO({wallet:e}))}(a=eM||(eM={}))[a.DESKTOP_WEB=0]="DESKTOP_WEB",a[a.MOBILE_WEB=1]="MOBILE_WEB";var tF=r(13816);class tH extends eP.lj{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}var tW=r(15408);function tV({children:e,wallets:t,adapter:r,isUnloadingRef:i,onAutoConnectRequest:n,onConnectError:s,onError:o,onSelectWallet:a}){let c=(0,tz.useRef)(!1),[l,h]=(0,tz.useState)(!1),u=(0,tz.useRef)(!1),[d,f]=(0,tz.useState)(!1),[p,g]=(0,tz.useState)(()=>r?.publicKey??null),[m,y]=(0,tz.useState)(()=>r?.connected??!1),b=(0,tz.useRef)(o);(0,tz.useEffect)(()=>(b.current=o,()=>{b.current=void 0}),[o]);let w=(0,tz.useRef)((e,t)=>(!i.current&&(b.current?b.current(e,t):(console.error(e,t),e instanceof eP.OZ&&"undefined"!=typeof window&&t&&window.open(t.url,"_blank"))),e)),[v,E]=(0,tz.useState)(()=>t.map(e=>({adapter:e,readyState:e.readyState})).filter(({readyState:e})=>e!==eO.i1.Unsupported));(0,tz.useEffect)(()=>{function e(e){E(t=>{let r=t.findIndex(({adapter:e})=>e===this);if(-1===r)return t;let{adapter:i}=t[r];return[...t.slice(0,r),{adapter:i,readyState:e},...t.slice(r+1)].filter(({readyState:e})=>e!==eO.i1.Unsupported)})}return E(e=>t.map((t,r)=>{let i=e[r];return i&&i.adapter===t&&i.readyState===t.readyState?i:{adapter:t,readyState:t.readyState}}).filter(({readyState:e})=>e!==eO.i1.Unsupported)),t.forEach(t=>t.on("readyStateChange",e,t)),()=>{t.forEach(t=>t.off("readyStateChange",e,t))}},[r,t]);let I=(0,tz.useMemo)(()=>v.find(e=>e.adapter===r)??null,[r,v]);(0,tz.useEffect)(()=>{if(!r)return;let e=e=>{g(e),c.current=!1,h(!1),y(!0),u.current=!1,f(!1)},t=()=>{i.current||(g(null),c.current=!1,h(!1),y(!1),u.current=!1,f(!1))},n=e=>{w.current(e,r)};return r.on("connect",e),r.on("disconnect",t),r.on("error",n),()=>{r.off("connect",e),r.off("disconnect",t),r.off("error",n),t()}},[r,i]);let _=(0,tz.useRef)(!1);(0,tz.useEffect)(()=>()=>{_.current=!1},[r]),(0,tz.useEffect)(()=>{_.current||c.current||m||!n||I?.readyState!==eO.i1.Installed&&I?.readyState!==eO.i1.Loadable||(c.current=!0,h(!0),_.current=!0,async function(){try{await n()}catch{s()}finally{h(!1),c.current=!1}}())},[m,n,s,I]);let A=(0,tz.useCallback)(async(e,t,i)=>{if(!r)throw w.current(new tH);if(!m)throw w.current(new eP.oS,r);return await r.sendTransaction(e,t,i)},[r,m]),S=(0,tz.useMemo)(()=>r&&"signTransaction"in r?async e=>{if(!m)throw w.current(new eP.oS,r);return await r.signTransaction(e)}:void 0,[r,m]),C=(0,tz.useMemo)(()=>r&&"signAllTransactions"in r?async e=>{if(!m)throw w.current(new eP.oS,r);return await r.signAllTransactions(e)}:void 0,[r,m]),N=(0,tz.useMemo)(()=>r&&"signMessage"in r?async e=>{if(!m)throw w.current(new eP.oS,r);return await r.signMessage(e)}:void 0,[r,m]),M=(0,tz.useMemo)(()=>r&&"signIn"in r?async e=>await r.signIn(e):void 0,[r]),x=(0,tz.useCallback)(async()=>{if(c.current||u.current||I?.adapter.connected)return;if(!I)throw w.current(new tH);let{adapter:e,readyState:t}=I;if(!(t===eO.i1.Installed||t===eO.i1.Loadable))throw w.current(new eP.OZ,e);c.current=!0,h(!0);try{await e.connect()}catch(e){throw s(),e}finally{h(!1),c.current=!1}},[s,I]),O=(0,tz.useCallback)(async()=>{if(!u.current&&r){u.current=!0,f(!0);try{await r.disconnect()}finally{f(!1),u.current=!1}}},[r]);return tz.createElement(tW.z.Provider,{value:{autoConnect:!!n,wallets:v,wallet:I,publicKey:p,connected:m,connecting:l,disconnecting:d,select:a,connect:x,disconnect:O,sendTransaction:A,signTransaction:S,signAllTransactions:C,signMessage:N,signIn:M}},e)}function tK(e){return function({adapters:e,userAgentString:t}){return e.some(e=>e.name!==ta&&e.readyState===eO.i1.Installed)?eM.DESKTOP_WEB:t&&/android/i.test(t)&&!/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)?eM.MOBILE_WEB:eM.DESKTOP_WEB}({adapters:e,userAgentString:(void 0===s&&(s=globalThis.navigator?.userAgent??null),s)})===eM.MOBILE_WEB}function tY({children:e,wallets:t,autoConnect:r,localStorageKey:i="walletName",onError:n}){let{connection:s}=(0,tF.R)(),a=function(e){let t=t$(()=>new Set),{get:r,on:i}=t$(()=>(function(){if(o||(o=function(){if(o||(o=Object.freeze({register:tk,get:tL,on:tj}),"undefined"==typeof window))return o;let e=Object.freeze({register:tk});try{window.addEventListener("wallet-standard:register-wallet",({detail:t})=>t(e))}catch(e){console.error("wallet-standard:register-wallet event listener could not be added\n",e)}try{window.dispatchEvent(new tB(e))}catch(e){console.error("wallet-standard:app-ready event could not be dispatched\n",e)}return o}(),"undefined"==typeof window))return o;let e=window.navigator.wallets||[];if(!Array.isArray(e))return console.error("window.navigator.wallets is not an array"),o;let{register:t}=o,r=(...e)=>e.forEach(e=>tU(()=>e({register:t})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:r})})}catch(e){return console.error("window.navigator.wallets could not be set"),o}return r(...e),o})()),[n,s]=(0,tz.useState)(()=>tq(r()));(0,tz.useEffect)(()=>{let e=[i("register",(...e)=>s(t=>[...t,...tq(e)])),i("unregister",(...e)=>s(t=>t.filter(t=>e.some(e=>e===t.wallet))))];return()=>e.forEach(e=>e())},[i]);let a=function(e){let t=(0,tz.useRef)(void 0);return(0,tz.useEffect)(()=>{t.current=e}),t.current}(n);return(0,tz.useEffect)(()=>{if(!a)return;let e=new Set(n);new Set(a.filter(t=>!e.has(t))).forEach(e=>e.destroy())},[a,n]),(0,tz.useEffect)(()=>()=>n.forEach(e=>e.destroy()),[]),(0,tz.useMemo)(()=>[...n,...e.filter(({name:e})=>!n.some(t=>t.name===e)||(t.has(e)||(t.add(e),console.warn(`${e} was registered as a Standard Wallet. The Wallet Adapter for ${e} can be removed from your app.`)),!1))],[n,e,t])}(t),c=(0,tz.useMemo)(()=>{var e;if(!tK(a))return null;let t=a.find(e=>e.name===ta);return t||new tI({addressSelector:{select(e){return tp(this,void 0,void 0,function*(){return e[0]})}},appIdentity:{uri:function(){let e=globalThis.location;if(e)return`${e.protocol}//${e.host}`}()},authorizationResultCache:function(){let e;try{e=window.localStorage}catch(e){}return{clear(){return e9(this,void 0,void 0,function*(){if(e)try{e.removeItem(tf)}catch(e){}})},get(){return e9(this,void 0,void 0,function*(){if(e)try{let t=JSON.parse(e.getItem(tf));if(!t||!t.accounts)return t||void 0;{let e=t.accounts.map(e=>Object.assign(Object.assign({},e),{publicKey:"publicKey"in e?new Uint8Array(Object.values(e.publicKey)):e6.decode(e.address)}));return Object.assign(Object.assign({},t),{accounts:e})}}catch(e){}})},set(t){return e9(this,void 0,void 0,function*(){if(e)try{e.setItem(tf,JSON.stringify(t))}catch(e){}})}}}(),cluster:(e=s?.rpcEndpoint)?/devnet/i.test(e)?"devnet":/testnet/i.test(e)?"testnet":"mainnet-beta":"mainnet-beta",onWalletNotFound:t_})},[a,s?.rpcEndpoint]),l=(0,tz.useMemo)(()=>null==c||-1!==a.indexOf(c)?a:[c,...a],[a,c]),[h,u]=function(e,t){let r=(0,tz.useState)(()=>{try{let t=localStorage.getItem(e);if(t)return JSON.parse(t)}catch(e){"undefined"!=typeof window&&console.error(e)}return null}),i=r[0],n=(0,tz.useRef)(!0);return(0,tz.useEffect)(()=>{if(n.current){n.current=!1;return}try{null===i?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(i))}catch(e){"undefined"!=typeof window&&console.error(e)}},[i,e]),r}(i,0),d=(0,tz.useMemo)(()=>l.find(e=>e.name===h)??null,[l,h]),f=(0,tz.useCallback)(e=>{h!==e&&(d&&d.name!==ta&&d.disconnect(),u(e))},[d,u,h]);(0,tz.useEffect)(()=>{if(d)return d.on("disconnect",e),()=>{d.off("disconnect",e)};function e(){m.current||u(null)}},[d,a,u,h]);let p=(0,tz.useRef)(!1),g=(0,tz.useMemo)(()=>{if(r&&d)return async()=>{(!0===r||await r(d))&&(p.current?await d.connect():await d.autoConnect())}},[r,d]),m=(0,tz.useRef)(!1);(0,tz.useEffect)(()=>{if(h===ta&&tK(a)){m.current=!1;return}function e(){m.current=!0}return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[a,h]);let y=(0,tz.useCallback)(()=>{d&&f(null)},[d,f]),b=(0,tz.useCallback)(e=>{p.current=!0,f(e)},[f]);return tz.createElement(tV,{wallets:l,adapter:d,isUnloadingRef:m,onAutoConnectRequest:g,onConnectError:y,onError:n,onSelectWallet:b},e)}},13816:function(e,t,r){"use strict";r.d(t,{R:function(){return s},h:function(){return n}});var i=r(2265);let n=(0,i.createContext)({});function s(){return(0,i.useContext)(n)}},15408:function(e,t,r){"use strict";r.d(t,{O:function(){return c},z:function(){return a}});var i=r(2265);let n=[],s={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){o("call","select")},connect:()=>Promise.reject(o("call","connect")),disconnect:()=>Promise.reject(o("call","disconnect")),sendTransaction:()=>Promise.reject(o("call","sendTransaction")),signTransaction:()=>Promise.reject(o("call","signTransaction")),signAllTransactions:()=>Promise.reject(o("call","signAllTransactions")),signMessage:()=>Promise.reject(o("call","signMessage")),signIn:()=>Promise.reject(o("call","signIn"))};function o(e,t){let r=Error(`You have tried to ${e} "${t}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(r),r}Object.defineProperty(s,"wallets",{get:()=>(o("read","wallets"),n)}),Object.defineProperty(s,"wallet",{get:()=>(o("read","wallet"),null)}),Object.defineProperty(s,"publicKey",{get:()=>(o("read","publicKey"),null)});let a=(0,i.createContext)(s);function c(){return(0,i.useContext)(a)}},11867:function(e,t,r){"use strict";r.d(t,{e:function(){return U}});var i,n,s,o,a,c,l,h,u,d,f,p,g,m,y,b=r(95462),w=r(59805),v=r(74659),E=r(43887),I=r(64024),_=function(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)},A=function(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r};class S extends Event{get detail(){return _(this,i,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),i.set(this,void 0),A(this,i,e,"f")}preventDefault(){throw Error("preventDefault cannot be called")}stopImmediatePropagation(){throw Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw Error("stopPropagation cannot be called")}}i=new WeakMap;var C=r(88746),N=r(77684),M=r(10282),x=r(34402),O=r(59186),P=r(3005),T=r(83747),R=function(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)},D=function(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r};class k{constructor(){n.add(this),s.set(this,{}),o.set(this,"1.0.0"),a.set(this,"MetaMask"),c.set(this,"data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4="),l.set(this,null),h.set(this,(e,t)=>(R(this,s,"f")[e]?.push(t)||(R(this,s,"f")[e]=[t]),()=>R(this,n,"m",d).call(this,e,t))),f.set(this,async()=>{if(!R(this,l,"f")){let e;try{e=(await r.e(7572).then(r.bind(r,27572))).default}catch(e){throw Error("Unable to load Solflare MetaMask SDK")}D(this,l,new e,"f"),R(this,l,"f").on("standard_change",e=>R(this,n,"m",u).call(this,"change",e))}return this.accounts.length||await R(this,l,"f").connect(),{accounts:this.accounts}}),p.set(this,async()=>{R(this,l,"f")&&await R(this,l,"f").disconnect()}),g.set(this,async(...e)=>{if(!R(this,l,"f"))throw new v.oS;return await R(this,l,"f").standardSignAndSendTransaction(...e)}),m.set(this,async(...e)=>{if(!R(this,l,"f"))throw new v.oS;return await R(this,l,"f").standardSignTransaction(...e)}),y.set(this,async(...e)=>{if(!R(this,l,"f"))throw new v.oS;return await R(this,l,"f").standardSignMessage(...e)})}get version(){return R(this,o,"f")}get name(){return R(this,a,"f")}get icon(){return R(this,c,"f")}get chains(){return[C.aI,C.BR,C.gv]}get features(){return{[O.V]:{version:"1.0.0",connect:R(this,f,"f")},[P.R]:{version:"1.0.0",disconnect:R(this,p,"f")},[T.k]:{version:"1.0.0",on:R(this,h,"f")},[N.G]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:R(this,g,"f")},[M.R]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:R(this,m,"f")},[x.g]:{version:"1.0.0",signMessage:R(this,y,"f")}}}get accounts(){return R(this,l,"f")?R(this,l,"f").standardAccounts:[]}}s=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,y=new WeakMap,n=new WeakSet,u=function(e,...t){R(this,s,"f")[e]?.forEach(e=>e.apply(null,t))},d=function(e,t){R(this,s,"f")[e]=R(this,s,"f")[e]?.filter(e=>t!==e)};let L=!1;async function j(){let e="solflare-detect-metamask";function t(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:e,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function r(i){let n=i.data;n?.target==="metamask-inpage"&&n.data?.name==="metamask-provider"&&(n.data.data?.id===e?(window.removeEventListener("message",r),!n.data.data.error&&(L||(function(e){let t=({register:t})=>t(e);try{window.dispatchEvent(new S(t))}catch(e){console.error("wallet-standard:register-wallet event could not be dispatched\n",e)}try{window.addEventListener("wallet-standard:app-ready",({detail:e})=>t(e))}catch(e){console.error("wallet-standard:app-ready event listener could not be added\n",e)}}(new k),L=!0))):t())}window.addEventListener("message",r),window.setTimeout(()=>window.removeEventListener("message",r),5e3),t()}class U extends b.eC{constructor(e={}){super(),this.name="Solflare",this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJTIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMwMjA1MGE7c3Ryb2tlOiNmZmVmNDY7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOi41cHg7fS5jbHMtMntmaWxsOiNmZmVmNDY7fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJjbHMtMiIgeD0iMCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiByeD0iMTIiIHJ5PSIxMiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI0LjIzLDI2LjQybDIuNDYtMi4zOCw0LjU5LDEuNWMzLjAxLDEsNC41MSwyLjg0LDQuNTEsNS40MywwLDEuOTYtLjc1LDMuMjYtMi4yNSw0LjkzbC0uNDYuNS4xNy0xLjE3Yy42Ny00LjI2LS41OC02LjA5LTQuNzItNy40M2wtNC4zLTEuMzhoMFpNMTguMDUsMTEuODVsMTIuNTIsNC4xNy0yLjcxLDIuNTktNi41MS0yLjE3Yy0yLjI1LS43NS0zLjAxLTEuOTYtMy4zLTQuNTF2LS4wOGgwWk0xNy4zLDMzLjA2bDIuODQtMi43MSw1LjM0LDEuNzVjMi44LjkyLDMuNzYsMi4xMywzLjQ2LDUuMThsLTExLjY1LTQuMjJoMFpNMTMuNzEsMjAuOTVjMC0uNzkuNDItMS41NCwxLjEzLTIuMTcuNzUsMS4wOSwyLjA1LDIuMDUsNC4wOSwyLjcxbDQuNDIsMS40Ni0yLjQ2LDIuMzgtNC4zNC0xLjQyYy0yLS42Ny0yLjg0LTEuNjctMi44NC0yLjk2TTI2LjgyLDQyLjg3YzkuMTgtNi4wOSwxNC4xMS0xMC4yMywxNC4xMS0xNS4zMiwwLTMuMzgtMi01LjI2LTYuNDMtNi43MmwtMy4zNC0xLjEzLDkuMTQtOC43Ny0xLjg0LTEuOTYtMi43MSwyLjM4LTEyLjgxLTQuMjJjLTMuOTcsMS4yOS04Ljk3LDUuMDktOC45Nyw4Ljg5LDAsLjQyLjA0LjgzLjE3LDEuMjktMy4zLDEuODgtNC42MywzLjYzLTQuNjMsNS44LDAsMi4wNSwxLjA5LDQuMDksNC41NSw1LjIybDIuNzUuOTItOS41Miw5LjE0LDEuODQsMS45NiwyLjk2LTIuNzEsMTQuNzMsNS4yMmgwWiIvPjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState="undefined"==typeof window||"undefined"==typeof document?w.i1.Unsupported:w.i1.Loadable,this._disconnected=()=>{let e=this._wallet;e&&(e.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new v.at),this.emit("disconnect"))},this._accountChanged=e=>{if(!e)return;let t=this._publicKey;if(t){try{e=new I.nh(e.toBytes())}catch(e){this.emit("error",new v.Nx(e?.message,e));return}t.equals(e)||(this._publicKey=e,this.emit("connect",e))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==w.i1.Unsupported&&((0,w.su)(()=>(!!window.solflare?.isSolflare||!!window.SolflareApp)&&(this._readyState=w.i1.Installed,this.emit("readyStateChange",this._readyState),!0)),j())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.connected}get readyState(){return this._readyState}async autoConnect(){this.readyState===w.i1.Loadable&&(0,w.H)()||await this.connect()}async connect(){try{let e,t,i;if(this.connected||this.connecting)return;if(this._readyState!==w.i1.Loadable&&this._readyState!==w.i1.Installed)throw new v.OZ;if(this.readyState===w.i1.Loadable&&(0,w.H)()){let e=encodeURIComponent(window.location.href),t=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${e}?ref=${t}`;return}try{e=(await r.e(5161).then(r.bind(r,15161))).default}catch(e){throw new v.W8(e?.message,e)}try{t=new e({network:this._config.network})}catch(e){throw new v.p6(e?.message,e)}if(this._connecting=!0,!t.connected)try{await t.connect()}catch(e){throw new v.$w(e?.message,e)}if(!t.publicKey)throw new v.$w;try{i=new I.nh(t.publicKey.toBytes())}catch(e){throw new v.Nx(e?.message,e)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){let e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(e){this.emit("error",new v.UG(e?.message,e))}}this.emit("disconnect")}async sendTransaction(e,t,r={}){try{let i=this._wallet;if(!i)throw new v.oS;try{let{signers:n,...s}=r;return(0,E.W)(e)?n?.length&&e.sign(n):(e=await this.prepareTransaction(e,t,s),n?.length&&e.partialSign(...n)),s.preflightCommitment=s.preflightCommitment||t.commitment,await i.signAndSendTransaction(e,s)}catch(e){if(e instanceof v.lj)throw e;throw new v.IW(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signTransaction(e){try{let t=this._wallet;if(!t)throw new v.oS;try{return await t.signTransaction(e)||e}catch(e){throw new v.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new v.oS;try{return await t.signAllTransactions(e)||e}catch(e){throw new v.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new v.oS;try{return await t.signMessage(e,"utf8")}catch(e){throw new v.fk(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}},25223:function(e,t,r){"use strict";r.d(t,{X:function(){return a}});var i=r(95462),n=r(59805),s=r(74659),o=r(64024);class a extends i.eC{constructor({params:e={showTorusButton:!1}}={params:{showTorusButton:!1}}){super(),this.name="Torus",this.url="https://tor.us",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzMiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMyAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYuNSIgY3k9IjE2IiByPSIxNiIgZmlsbD0iIzAzNjRGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjIxODYgOS40OTIxOUMxMC40NTM5IDkuNDkyMTkgOS44MzM5OCAxMC4xMTIxIDkuODMzOTggMTAuODc2OFYxMi40ODk4QzkuODMzOTggMTMuMjU0NSAxMC40NTM5IDEzLjg3NDQgMTEuMjE4NiAxMy44NzQ0SDEzLjY2ODRWMjIuODk3NkMxMy42Njg0IDIzLjY2MjMgMTQuMjg4MyAyNC4yODIyIDE1LjA1MyAyNC4yODIySDE2LjY2NkMxNy40MzA3IDI0LjI4MjIgMTguMDUwNiAyMy42NjIzIDE4LjA1MDYgMjIuODk3NlYxMi41MDE1QzE4LjA1MDYgMTIuNDk3NiAxOC4wNTA2IDEyLjQ5MzcgMTguMDUwNiAxMi40ODk4VjEwLjg3NjhDMTguMDUwNiAxMC4xMTIxIDE3LjQzMDcgOS40OTIxOSAxNi42NjYgOS40OTIxOUgxNS4wNTNIMTEuMjE4NloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMS4zMzc2IDEzLjg3NDRDMjIuNTQ3NyAxMy44NzQ0IDIzLjUyODcgMTIuODkzNCAyMy41Mjg3IDExLjY4MzNDMjMuNTI4NyAxMC40NzMyIDIyLjU0NzcgOS40OTIxOSAyMS4zMzc2IDkuNDkyMTlDMjAuMTI3NSA5LjQ5MjE5IDE5LjE0NjUgMTAuNDczMiAxOS4xNDY1IDExLjY4MzNDMTkuMTQ2NSAxMi44OTM0IDIwLjEyNzUgMTMuODc0NCAyMS4zMzc2IDEzLjg3NDRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",this.supportedTransactionVersions=null,this._readyState="undefined"==typeof window||"undefined"==typeof document?n.i1.Unsupported:n.i1.Loadable,this._connecting=!1,this._wallet=null,this._publicKey=null,this._params=e}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){return!!this._wallet?.isLoggedIn}get readyState(){return this._readyState}async connect(){try{let e,t,i,a;if(this.connected||this.connecting)return;if(this._readyState!==n.i1.Loadable)throw new s.OZ;this._connecting=!0;try{e=(await Promise.all([r.e(8218),r.e(5628),r.e(1156)]).then(r.bind(r,91429))).default}catch(e){throw new s.W8(e?.message,e)}try{t=window.torus||new e}catch(e){throw new s.p6(e?.message,e)}if(!t.isInitialized)try{await t.init(this._params)}catch(e){throw new s.$w(e?.message,e)}try{i=await t.login()}catch(e){throw new s.cO(e?.message,e)}try{a=new o.nh(i[0])}catch(e){throw new s.Nx(e?.message,e)}this._wallet=t,this._publicKey=a,this.emit("connect",a)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){let e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{e.isLoggedIn&&await e.cleanUp()}catch(e){this.emit("error",new s.UG(e?.message,e))}}this.emit("disconnect")}async sendTransaction(e,t,r={}){try{let i=this._wallet;if(!i)throw new s.oS;try{let{signers:n,...s}=r;e=await this.prepareTransaction(e,t,s),n?.length&&e.partialSign(...n),s.preflightCommitment=s.preflightCommitment||t.commitment;let{signature:o}=await i.signAndSendTransaction(e,s);return o}catch(e){if(e instanceof s.lj)throw e;throw new s.IW(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signTransaction(e){try{let t=this._wallet;if(!t)throw new s.oS;try{return await t.signTransaction(e)||e}catch(e){throw new s.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new s.oS;try{return await t.signAllTransactions(e)||e}catch(e){throw new s.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new s.oS;try{return await t.signMessage(e)}catch(e){throw new s.fk(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}},88746:function(e,t,r){"use strict";r.d(t,{BR:function(){return n},aI:function(){return i},gv:function(){return s},l1:function(){return o}});let i="solana:mainnet",n="solana:devnet",s="solana:testnet",o="solana:localnet"},77684:function(e,t,r){"use strict";r.d(t,{G:function(){return i}});let i="solana:signAndSendTransaction"},34402:function(e,t,r){"use strict";r.d(t,{g:function(){return i}});let i="solana:signMessage"},10282:function(e,t,r){"use strict";r.d(t,{R:function(){return i}});let i="solana:signTransaction"},93993:function(e,t,r){"use strict";function i([e,t]){return`${e}=${function e(t){return Array.isArray(t)?"%5B"+t.map(e).join("%2C%20")+"%5D":"bigint"==typeof t?`${t}n`:encodeURIComponent(String(null!=t&&null===Object.getPrototypeOf(t)?{...t}:t))}(t)}`}r.d(t,{GH:function(){return u},bP:function(){return l}});var n,s=class extends Error{cause=this.cause;context;constructor(...[e,t]){let r,n;if(t){let{cause:e,...i}=t;e&&(n={cause:e}),Object.keys(i).length>0&&(r=i)}super(function(e,t={}){{let r=`Solana error #${e}; Decode this error by running \`npx @solana/errors decode -- ${e}`;return Object.keys(t).length&&(r+=` '${btoa(Object.entries(t).map(i).join("&"))}'`),`${r}\``}}(e,r),n),this.context={__code:e,...r},this.name="SolanaError"}};function o(e){return"fixedSize"in e&&"number"==typeof e.fixedSize}var a=((n=a||{})[n.Little=0]="Little",n[n.Big=1]="Big",n);function c(e){return e?.endian!==1}var l=(e={})=>{var t,r;return Object.freeze({...r={fixedSize:(t={config:e,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}).size,write(e,r,i){t.range&&function(e,t,r,i){if(i<t||i>r)throw new s(8078011,{codecDescription:e,max:r,min:t,value:i})}(t.name,t.range[0],t.range[1],e);let n=new ArrayBuffer(t.size);return t.set(new DataView(n),e,c(t.config)),r.set(new Uint8Array(n),i),i+t.size}},encode:e=>{let t=new Uint8Array("fixedSize"in r?r.fixedSize:r.getSizeFromValue(e));return r.write(e,t,0),t}})},h=(e={})=>{var t,r;return Object.freeze({...r={fixedSize:(t={config:e,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}).size,read(e,r=0){!function(e,t,r=0){if(t.length-r<=0)throw new s(8078e3,{codecDescription:e})}(t.name,e,r),function(e,t,r,i=0){let n=r.length-i;if(n<t)throw new s(8078001,{bytesLength:n,codecDescription:e,expected:t})}(t.name,t.size,e,r);let i=new DataView(function(e,t,r){let i=e.byteOffset+(t??0),n=r??e.byteLength;return e.buffer.slice(i,i+n)}(e,r,t.size));return[t.get(i,c(t.config)),r+t.size]}},decode:(e,t=0)=>r.read(e,t)[0]})},u=(e={})=>(function(e,t){if(o(e)!==o(t))throw new s(8078004);if(o(e)&&o(t)&&e.fixedSize!==t.fixedSize)throw new s(8078005,{decoderFixedSize:t.fixedSize,encoderFixedSize:e.fixedSize});if(!o(e)&&!o(t)&&e.maxSize!==t.maxSize)throw new s(8078006,{decoderMaxSize:t.maxSize,encoderMaxSize:e.maxSize});return{...t,...e,decode:t.decode,encode:e.encode,read:t.read,write:e.write}})(l(e),h(e))},59186:function(e,t,r){"use strict";r.d(t,{V:function(){return i}});let i="standard:connect"},3005:function(e,t,r){"use strict";r.d(t,{R:function(){return i}});let i="standard:disconnect"},83747:function(e,t,r){"use strict";r.d(t,{k:function(){return i}});let i="standard:events"},37416:function(e,t,r){"use strict";let i,n;r.d(t,{Z:function(){return C$}});var s,o,a,c,l,h,u,d,f,p,g,m,y,b,w,v,E,I,_,A,S,C,N,M,x,O,P,T,R={};r.r(R),r.d(R,{identity:function(){return nS}});var D={};r.r(D),r.d(D,{base2:function(){return nC}});var k={};r.r(k),r.d(k,{base8:function(){return nN}});var L={};r.r(L),r.d(L,{base10:function(){return nM}});var j={};r.r(j),r.d(j,{base16:function(){return nx},base16upper:function(){return nO}});var U={};r.r(U),r.d(U,{base32:function(){return nP},base32hex:function(){return nk},base32hexpad:function(){return nj},base32hexpadupper:function(){return nU},base32hexupper:function(){return nL},base32pad:function(){return nR},base32padupper:function(){return nD},base32upper:function(){return nT},base32z:function(){return nB}});var B={};r.r(B),r.d(B,{base36:function(){return nz},base36upper:function(){return n$}});var z={};r.r(z),r.d(z,{base58btc:function(){return nq},base58flickr:function(){return nF}});var $={};r.r($),r.d($,{base64:function(){return nH},base64pad:function(){return nW},base64url:function(){return nV},base64urlpad:function(){return nK}});var q={};r.r(q),r.d(q,{base256emoji:function(){return nZ}});var F={};r.r(F),r.d(F,{sha256:function(){return se},sha512:function(){return st}});var H={};r.r(H),r.d(H,{identity:function(){return sr}});var W={};r.r(W),r.d(W,{code:function(){return sn},decode:function(){return so},encode:function(){return ss},name:function(){return si}});var V={};r.r(V),r.d(V,{code:function(){return sh},decode:function(){return sd},encode:function(){return su},name:function(){return sl}});var K=r(95462),Y=r(59805),J=r(74659),G=r(86454);(c=P||(P={})).Mainnet="solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",c.Devnet="solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",c.Deprecated_Mainnet="solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",c.Deprecated_Devnet="solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K",(l=T||(T={})).signTransaction="solana_signTransaction",l.signMessage="solana_signMessage",l.signAndSendTransaction="solana_signAndSendTransaction",l.signAndSendAllTransactions="solana_signAndSendAllTransactions",l.signAllTransactions="solana_signAllTransactions";let Z={Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"};var Q=r(43887),X=r(64024),ee=r(55445),et=r.n(ee),er=r(40537);class ei{}class en extends ei{constructor(e){super()}}let es=er.FIVE_SECONDS,eo="heartbeat_pulse";class ea extends en{constructor(e){super(e),this.events=new ee.EventEmitter,this.interval=es,this.interval=e?.interval||es}static async init(e){let t=new ea(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),(0,er.toMiliseconds)(this.interval))}pulse(){this.events.emit(eo)}}let ec=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,el=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,eh=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function eu(e,t){if("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`);return}return t}function ed(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);let r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!eh.test(e)){if(t.strict)throw SyntaxError("[destr] Invalid JSON");return e}try{if(ec.test(e)||el.test(e)){if(t.strict)throw Error("[destr] Possible prototype pollution");return JSON.parse(e,eu)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}var ef=r(82957).Buffer;function ep(e,...t){try{var r;return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}}function eg(e){if(function(e){let t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){let t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return eg(e.toJSON());throw Error("[unstorage] Cannot stringify value!")}let em="base64:";function ey(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function eb(e){return(e=ey(e))?e+":":""}let ew=()=>{let e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function ev(e,t,r){return e.watch?e.watch((e,i)=>t(e,r+i)):()=>{}}async function eE(e){"function"==typeof e.dispose&&await ep(e.dispose)}function eI(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function e_(e,t){let r;let i=()=>{if(r)return r;let i=indexedDB.open(e);return i.onupgradeneeded=()=>i.result.createObjectStore(t),(r=eI(i)).then(e=>{e.onclose=()=>r=void 0},()=>{}),r};return(e,r)=>i().then(i=>r(i.transaction(t,e).objectStore(t)))}function eA(){return i||(i=e_("keyval-store","keyval")),i}function eS(e,t=eA()){return t("readonly",t=>eI(t.get(e)))}function eC(e,t,r=eA()){return r("readwrite",r=>(r.put(t,e),eI(r.transaction)))}function eN(e,t=eA()){return t("readwrite",t=>(t.delete(e),eI(t.transaction)))}function eM(e=eA()){return e("readwrite",e=>(e.clear(),eI(e.transaction)))}function ex(e=eA()){return e("readonly",e=>{var t;if(e.getAllKeys)return eI(e.getAllKeys());let r=[];return(t=e=>r.push(e.key),e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},eI(e.transaction)).then(()=>r)})}var eO=r(80577),eP=(e={})=>{let t;let r=e.base&&e.base.length>0?`${e.base}:`:"",i=e=>r+e;return e.dbName&&e.storeName&&(t=e_(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await eS(i(e),t)>"u"),getItem:async e=>await eS(i(e),t)??null,setItem:(e,r)=>eC(i(e),r,t),removeItem:e=>eN(i(e),t),getKeys:()=>ex(t),clear:()=>eM(t)}};class eT{constructor(){this.indexedDb=function(e={}){let t={mounts:{"":e.driver||ew()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(let r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},i=(e,r)=>t.mountpoints.filter(t=>t.startsWith(e)||r&&e.startsWith(t)).map(r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]})),n=(e,r)=>{if(t.watching)for(let i of(r=ey(r),t.watchListeners))i(e,r)},s=async()=>{if(!t.watching)for(let e in t.watching=!0,t.mounts)t.unwatch[e]=await ev(t.mounts[e],n,e)},o=async()=>{if(t.watching){for(let e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},a=(e,t,i)=>{let n=new Map,s=e=>{let t=n.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},n.set(e.base,t)),t};for(let i of e){let e="string"==typeof i,n=ey(e?i:i.key),o=e?void 0:i.value,a=e||!i.options?t:{...t,...i.options},c=r(n);s(c).items.push({key:n,value:o,relativeKey:c.relativeKey,options:a})}return Promise.all([...n.values()].map(e=>i(e))).then(e=>e.flat())},c={hasItem(e,t={}){let{relativeKey:i,driver:n}=r(e=ey(e));return ep(n.hasItem,i,t)},getItem(e,t={}){let{relativeKey:i,driver:n}=r(e=ey(e));return ep(n.getItem,i,t).then(e=>ed(e))},getItems:(e,t={})=>a(e,t,e=>e.driver.getItems?ep(e.driver.getItems,e.items.map(e=>({key:e.relativeKey,options:e.options})),t).then(t=>t.map(t=>({key:function(...e){return ey(e.join(":"))}(e.base,t.key),value:ed(t.value)}))):Promise.all(e.items.map(t=>ep(e.driver.getItem,t.relativeKey,t.options).then(e=>({key:t.key,value:ed(e)}))))),getItemRaw(e,t={}){let{relativeKey:i,driver:n}=r(e=ey(e));return n.getItemRaw?ep(n.getItemRaw,i,t):ep(n.getItem,i,t).then(e=>{var t;return"string"==typeof e&&e.startsWith(em)?(t=e.slice(em.length),globalThis.Buffer?ef.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))):e})},async setItem(e,t,i={}){if(void 0===t)return c.removeItem(e);let{relativeKey:s,driver:o}=r(e=ey(e));o.setItem&&(await ep(o.setItem,s,eg(t),i),o.watch||n("update",e))},async setItems(e,t){await a(e,t,async e=>{if(e.driver.setItems)return ep(e.driver.setItems,e.items.map(e=>({key:e.relativeKey,value:eg(e.value),options:e.options})),t);e.driver.setItem&&await Promise.all(e.items.map(t=>ep(e.driver.setItem,t.relativeKey,eg(t.value),t.options)))})},async setItemRaw(e,t,i={}){if(void 0===t)return c.removeItem(e,i);let{relativeKey:s,driver:o}=r(e=ey(e));if(o.setItemRaw)await ep(o.setItemRaw,s,t,i);else{if(!o.setItem)return;await ep(o.setItem,s,"string"==typeof t?t:em+(globalThis.Buffer?ef.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))),i)}o.watch||n("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t});let{relativeKey:i,driver:s}=r(e=ey(e));s.removeItem&&(await ep(s.removeItem,i,t),(t.removeMeta||t.removeMata)&&await ep(s.removeItem,i+"$",t),s.watch||n("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t});let{relativeKey:i,driver:n}=r(e=ey(e)),s=Object.create(null);if(n.getMeta&&Object.assign(s,await ep(n.getMeta,i,t)),!t.nativeOnly){let e=await ep(n.getItem,i+"$",t).then(e=>ed(e));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){let r=i(e=eb(e),!0),n=[],s=[],o=!0;for(let e of r){for(let r of(e.driver.flags?.maxDepth||(o=!1),await ep(e.driver.getKeys,e.relativeBase,t))){let t=e.mountpoint+ey(r);n.some(e=>t.startsWith(e))||s.push(t)}n=[e.mountpoint,...n.filter(t=>!t.startsWith(e.mountpoint))]}let a=void 0!==t.maxDepth&&!o;return s.filter(r=>{var i;return(!a||function(e,t){if(void 0===t)return!0;let r=0,i=e.indexOf(":");for(;i>-1;)r++,i=e.indexOf(":",i+1);return r<=t}(r,t.maxDepth))&&((i=e)?r.startsWith(i)&&"$"!==r[r.length-1]:"$"!==r[r.length-1])})},async clear(e,t={}){e=eb(e),await Promise.all(i(e,!1).map(async e=>e.driver.clear?ep(e.driver.clear,e.relativeBase,t):e.driver.removeItem?Promise.all((await e.driver.getKeys(e.relativeBase||"",t)).map(r=>e.driver.removeItem(r,t))):void 0))},async dispose(){await Promise.all(Object.values(t.mounts).map(e=>eE(e)))},watch:async e=>(await s(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter(t=>t!==e),0===t.watchListeners.length&&await o()}),async unwatch(){t.watchListeners=[],await o()},mount(e,r){if((e=eb(e))&&t.mounts[e])throw Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort((e,t)=>t.length-e.length)),t.mounts[e]=r,t.watching&&Promise.resolve(ev(r,n,e)).then(r=>{t.unwatch[e]=r}).catch(console.error),c},async unmount(e,r=!0){(e=eb(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await eE(t.mounts[e]),t.mountpoints=t.mountpoints.filter(t=>t!==e),delete t.mounts[e])},getMount(e=""){let t=r(e=ey(e)+":");return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>i(e=ey(e),t.parents).map(e=>({driver:e.driver,base:e.mountpoint})),keys:(e,t={})=>c.getKeys(e,t),get:(e,t={})=>c.getItem(e,t),set:(e,t,r={})=>c.setItem(e,t,r),has:(e,t={})=>c.hasItem(e,t),del:(e,t={})=>c.removeItem(e,t),remove:(e,t={})=>c.removeItem(e,t)};return c}({driver:eP({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){let t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,(0,eO.u)(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var eR="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof r.g?r.g:"u">typeof self?self:{},eD={exports:{}};function ek(e){var t;return[e[0],(0,eO.D)(null!=(t=e[1])?t:"")]}!function(){function e(){}e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){let e=this;Object.keys(e).forEach(function(t){e[t]=void 0,delete e[t]})},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof eR&&eR.localStorage?eD.exports=eR.localStorage:"u">typeof window&&window.localStorage?eD.exports=window.localStorage:eD.exports=new e}();class eL{constructor(){this.localStorage=eD.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(ek)}async getItem(e){let t=this.localStorage.getItem(e);if(null!==t)return(0,eO.D)(t)}async setItem(e,t){this.localStorage.setItem(e,(0,eO.u)(t))}async removeItem(e){this.localStorage.removeItem(e)}}let ej=async(e,t,r)=>{let i="wc_storage_version",n=await t.getItem(i);if(n&&n>=1){r(t);return}let s=await e.getKeys();if(!s.length){r(t);return}let o=[];for(;s.length;){let r=s.shift();if(!r)continue;let i=r.toLowerCase();if(i.includes("wc@")||i.includes("walletconnect")||i.includes("wc_")||i.includes("wallet_connect")){let i=await e.getItem(r);await t.setItem(r,i),o.push(r)}}await t.setItem(i,1),r(t),eU(e,o)},eU=async(e,t)=>{t.length&&t.forEach(async t=>{await e.removeItem(t)})};class eB{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};let e=new eL;this.storage=e;try{let t=new eT;ej(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{let t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}}var ez=r(15133),e$=Object.defineProperty,eq=(e,t,r)=>t in e?e$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,eF=(e,t,r)=>eq(e,"symbol"!=typeof t?t+"":t,r);class eH extends ei{constructor(e){super(),this.opts=e,eF(this,"protocol","wc"),eF(this,"version",2)}}var eW=Object.defineProperty,eV=(e,t,r)=>t in e?eW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,eK=(e,t,r)=>eV(e,"symbol"!=typeof t?t+"":t,r);class eY extends ei{constructor(e,t){super(),this.core=e,this.logger=t,eK(this,"records",new Map)}}class eJ{constructor(e,t){this.logger=e,this.core=t}}class eG extends ei{constructor(e,t){super(),this.relayer=e,this.logger=t}}class eZ extends ei{constructor(e){super()}}class eQ{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}}class eX extends ei{constructor(e,t){super(),this.relayer=e,this.logger=t}}class e0 extends ei{constructor(e,t){super(),this.core=e,this.logger=t}}class e1{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class e2{constructor(e,t){this.projectId=e,this.logger=t}}class e3{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}function e8(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function e5(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}let e6="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,e4=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function e9(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),e8(e),e}class e7{clone(){return this._cloneInto()}}function te(e=32){if(e6&&"function"==typeof e6.getRandomValues)return e6.getRandomValues(new Uint8Array(e));if(e6&&"function"==typeof e6.randomBytes)return e6.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}class tt extends e7{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=e4(this.buffer)}update(e){e5(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=e9(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=e4(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){e5(this),function(e,t){e8(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;(function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,l=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+l,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=e4(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let c=a/4,l=this.get();if(c>l.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,l[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let tr=BigInt(4294967296-1),ti=BigInt(32),tn={split:function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=function(e,t=!1){return t?{h:Number(e&tr),l:Number(e>>ti&tr)}:{h:0|Number(e>>ti&tr),l:0|Number(e&tr)}}(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]},shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,add:function(e,t,r,i){let n=(t>>>0)+(i>>>0);return{h:e+r+(n/4294967296|0)|0,l:0|n}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,i)=>t+r+i+(e/4294967296|0)|0,add4L:(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),add4H:(e,t,r,i,n)=>t+r+i+n+(e/4294967296|0)|0,add5H:(e,t,r,i,n,s)=>t+r+i+n+s+(e/4294967296|0)|0,add5L:(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0)},[ts,to]=tn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ta=new Uint32Array(80),tc=new Uint32Array(80);class tl extends tt{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:o,Dl:a,Eh:c,El:l,Fh:h,Fl:u,Gh:d,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,i,n,s,o,a,c,l,h,u,d,f,p,g]}set(e,t,r,i,n,s,o,a,c,l,h,u,d,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|h,this.Fl=0|u,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)ta[r]=e.getUint32(t),tc[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|ta[e-15],r=0|tc[e-15],i=tn.rotrSH(t,r,1)^tn.rotrSH(t,r,8)^tn.shrSH(t,r,7),n=tn.rotrSL(t,r,1)^tn.rotrSL(t,r,8)^tn.shrSL(t,r,7),s=0|ta[e-2],o=0|tc[e-2],a=tn.rotrSH(s,o,19)^tn.rotrBH(s,o,61)^tn.shrSH(s,o,6),c=tn.rotrSL(s,o,19)^tn.rotrBL(s,o,61)^tn.shrSL(s,o,6),l=tn.add4L(n,c,tc[e-7],tc[e-16]),h=tn.add4H(l,i,a,ta[e-7],ta[e-16]);ta[e]=0|h,tc[e]=0|l}let{Ah:r,Al:i,Bh:n,Bl:s,Ch:o,Cl:a,Dh:c,Dl:l,Eh:h,El:u,Fh:d,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let e=0;e<80;e++){let t=tn.rotrSH(h,u,14)^tn.rotrSH(h,u,18)^tn.rotrBH(h,u,41),b=tn.rotrSL(h,u,14)^tn.rotrSL(h,u,18)^tn.rotrBL(h,u,41),w=h&d^~h&p,v=u&f^~u&g,E=tn.add5L(y,b,v,to[e],tc[e]),I=tn.add5H(E,m,t,w,ts[e],ta[e]),_=0|E,A=tn.rotrSH(r,i,28)^tn.rotrBH(r,i,34)^tn.rotrBH(r,i,39),S=tn.rotrSL(r,i,28)^tn.rotrBL(r,i,34)^tn.rotrBL(r,i,39),C=r&n^r&o^n&o,N=i&s^i&a^s&a;m=0|p,y=0|g,p=0|d,g=0|f,d=0|h,f=0|u,({h:h,l:u}=tn.add(0|c,0|l,0|I,0|_)),c=0|o,l=0|a,o=0|n,a=0|s,n=0|r,s=0|i;let M=tn.add3L(_,S,N);r=tn.add3H(M,I,A,C),i=0|M}({h:r,l:i}=tn.add(0|this.Ah,0|this.Al,0|r,0|i)),({h:n,l:s}=tn.add(0|this.Bh,0|this.Bl,0|n,0|s)),({h:o,l:a}=tn.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:l}=tn.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:h,l:u}=tn.add(0|this.Eh,0|this.El,0|h,0|u)),({h:d,l:f}=tn.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:g}=tn.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=tn.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,i,n,s,o,a,c,l,h,u,d,f,p,g,m,y)}roundClean(){ta.fill(0),tc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let th=function(e){let t=t=>e().update(e9(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}(()=>new tl),tu=BigInt(0),td=BigInt(1),tf=BigInt(2);function tp(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function tg(e){if(!tp(e))throw Error("Uint8Array expected")}function tm(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let ty=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function tb(e){tg(e);let t="";for(let r=0;r<e.length;r++)t+=ty[e[r]];return t}function tw(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?tu:BigInt("0x"+e)}let tv={_0:48,_9:57,A:65,F:70,a:97,f:102};function tE(e){return e>=tv._0&&e<=tv._9?e-tv._0:e>=tv.A&&e<=tv.F?e-(tv.A-10):e>=tv.a&&e<=tv.f?e-(tv.a-10):void 0}function tI(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=tE(e.charCodeAt(n)),s=tE(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function t_(e){return tg(e),tw(tb(Uint8Array.from(e).reverse()))}function tA(e,t){return tI(e.toString(16).padStart(2*t,"0"))}function tS(e,t){return tA(e,t).reverse()}function tC(e,t,r){let i;if("string"==typeof t)try{i=tI(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(tp(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(e+" of length "+r+" expected, got "+n);return i}function tN(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];tg(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}let tM=e=>"bigint"==typeof e&&tu<=e;function tx(e,t,r,i){if(!(tM(t)&&tM(r)&&tM(i))||!(r<=t)||!(t<i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}let tO=e=>(tf<<BigInt(e-1))-td,tP={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||tp(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function tT(e,t,r={}){let i=(t,r,i)=>{let n=tP[r];if("function"!=typeof n)throw Error("invalid validator function");let s=e[t];if(!(i&&void 0===s)&&!n(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e}function tR(e){let t=new WeakMap;return(r,...i)=>{let n=t.get(r);if(void 0!==n)return n;let s=e(r,...i);return t.set(r,s),s}}let tD=BigInt(0),tk=BigInt(1),tL=BigInt(2),tj=BigInt(3),tU=BigInt(4),tB=BigInt(5),tz=BigInt(8);function t$(e,t){let r=e%t;return r>=tD?r:t+r}function tq(e,t,r){let i=e;for(;t-- >tD;)i*=i,i%=r;return i}function tF(e,t){if(e===tD)throw Error("invert: expected non-zero number");if(t<=tD)throw Error("invert: expected positive modulus, got "+t);let r=t$(e,t),i=t,n=tD,s=tk;for(;r!==tD;){let e=i/r,t=i%r,o=n-s*e;i=r,r=t,n=s,s=o}if(i!==tk)throw Error("invert: does not exist");return t$(n,t)}let tH=(e,t)=>(t$(e,t)&tk)===tk,tW=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function tV(e,t){let r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function tK(e,t,r=!1,i={}){let n;if(e<=tD)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:s,nByteLength:o}=tV(e,t);if(o>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let a=Object.freeze({ORDER:e,isLE:r,BITS:s,BYTES:o,MASK:tO(s),ZERO:tD,ONE:tk,create:t=>t$(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return tD<=t&&t<e},is0:e=>e===tD,isOdd:e=>(e&tk)===tk,neg:t=>t$(-t,e),eql:(e,t)=>e===t,sqr:t=>t$(t*t,e),add:(t,r)=>t$(t+r,e),sub:(t,r)=>t$(t-r,e),mul:(t,r)=>t$(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<tD)throw Error("invalid exponent, negatives unsupported");if(r===tD)return e.ONE;if(r===tk)return t;let i=e.ONE,n=t;for(;r>tD;)r&tk&&(i=e.mul(i,n)),n=e.sqr(n),r>>=tk;return i})(a,e,t),div:(t,r)=>t$(t*tF(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>tF(t,e),sqrt:i.sqrt||(t=>(n||(n=function(e){if(e%tU===tj){let t=(e+tk)/tU;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%tz===tB){let t=(e-tB)/tz;return function(e,r){let i=e.mul(r,tL),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,tL),n),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return function(e){let t,r,i;let n=(e-tk)/tL;for(t=e-tk,r=0;t%tL===tD;t/=tL,r++);for(i=tL;i<e&&function(e,t,r){if(t<tD)throw Error("invalid exponent, negatives unsupported");if(r<=tD)throw Error("invalid modulus");if(r===tk)return tD;let i=tk;for(;t>tD;)t&tk&&(i=i*e%r),e=e*e%r,t>>=tk;return i}(i,n,e)!==e-tk;i++)if(i>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+tk)/tU;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+tk)/tL;return function(e,o){if(e.pow(o,n)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,c=e.pow(e.mul(e.ONE,i),t),l=e.pow(o,s),h=e.pow(o,t);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(h);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(c,tk<<BigInt(a-t-1));c=e.sqr(r),l=e.mul(l,r),h=e.mul(h,c),a=t}return l}}(e)}(e)),n(a,t))),invertBatch:e=>(function(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r})(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?tS(e,o):tA(e,o),fromBytes:e=>{if(e.length!==o)throw Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);return r?t_(e):tw(tb(e))}});return Object.freeze(a)}let tY=BigInt(0),tJ=BigInt(1);function tG(e,t){let r=t.negate();return e?r:t}function tZ(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function tQ(e,t){return tZ(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}let tX=new WeakMap,t0=new WeakMap;function t1(e){return t0.get(e)||1}let t2=BigInt(0),t3=BigInt(1),t8=BigInt(2),t5=BigInt(8),t6={zip215:!0};BigInt(0),BigInt(1);let t4=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),t9=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);let t7=BigInt(1),re=BigInt(2);BigInt(3);let rt=BigInt(5),rr=BigInt(8),ri=tK(t4,void 0,!0),rn=function(e){var t;let r=function(e){let t=(tT(e.Fp,tW.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),tT(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...tV(e.n,e.nBitLength),...e,p:e.Fp.ORDER}));return tT(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:i,n:n,prehash:s,hash:o,randomBytes:a,nByteLength:c,h:l}=r,h=t8<<BigInt(8*c)-t3,u=i.create,d=tK(r.n,r.nBitLength),f=r.uvRatio||((e,t)=>{try{return{isValid:!0,value:i.sqrt(e*i.inv(t))}}catch{return{isValid:!1,value:t2}}}),p=r.adjustScalarBytes||(e=>e),g=r.domain||((e,t,r)=>{if(tm("phflag",r),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function m(e,t){tx("coordinate "+e,t,t2,h)}function y(e){if(!(e instanceof v))throw Error("ExtendedPoint expected")}let b=tR((e,t)=>{let{ex:r,ey:n,ez:s}=e,o=e.is0();null==t&&(t=o?t5:i.inv(s));let a=u(r*t),c=u(n*t),l=u(s*t);if(o)return{x:t2,y:t3};if(l!==t3)throw Error("invZ was invalid");return{x:a,y:c}}),w=tR(e=>{let{a:t,d:i}=r;if(e.is0())throw Error("bad point: ZERO");let{ex:n,ey:s,ez:o,et:a}=e,c=u(n*n),l=u(s*s),h=u(o*o),d=u(h*h),f=u(c*t);if(u(h*u(f+l))!==u(d+u(i*u(c*l))))throw Error("bad point: equation left != right (1)");if(u(n*s)!==u(o*a))throw Error("bad point: equation left != right (2)");return!0});class v{constructor(e,t,r,i){this.ex=e,this.ey=t,this.ez=r,this.et=i,m("x",e),m("y",t),m("z",r),m("t",i),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof v)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return m("x",t),m("y",r),new v(t,r,t3,u(t*r))}static normalizeZ(e){let t=i.invertBatch(e.map(e=>e.ez));return e.map((e,r)=>e.toAffine(t[r])).map(v.fromAffine)}static msm(e,t){return function(e,t,r,i){if(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(i,t),r.length!==i.length)throw Error("arrays of points and scalars must have equal length");let n=e.ZERO,s=function(e){let t;for(t=0;e>tu;e>>=td,t+=1);return t}(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=Array(a+1).fill(n),l=Math.floor((t.BITS-1)/o)*o,h=n;for(let e=l;e>=0;e-=o){c.fill(n);for(let t=0;t<i.length;t++){let n=Number(i[t]>>BigInt(e)&BigInt(a));c[n]=c[n].add(r[t])}let t=n;for(let e=c.length-1,r=n;e>0;e--)r=r.add(c[e]),t=t.add(r);if(h=h.add(t),0!==e)for(let e=0;e<o;e++)h=h.double()}return h}(v,d,e,t)}_setWindowSize(e){_.setWindowSize(this,e)}assertValidity(){w(this)}equals(e){y(e);let{ex:t,ey:r,ez:i}=this,{ex:n,ey:s,ez:o}=e,a=u(t*o),c=u(n*i),l=u(r*o),h=u(s*i);return a===c&&l===h}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){let{a:e}=r,{ex:t,ey:i,ez:n}=this,s=u(t*t),o=u(i*i),a=u(t8*u(n*n)),c=u(e*s),l=t+i,h=u(u(l*l)-s-o),d=c+o,f=d-a,p=c-o,g=u(h*f),m=u(d*p),y=u(h*p);return new v(g,m,u(f*d),y)}add(e){y(e);let{a:t,d:i}=r,{ex:n,ey:s,ez:o,et:a}=this,{ex:c,ey:l,ez:h,et:d}=e;if(t===BigInt(-1)){let e=u((s-n)*(l+c)),t=u((s+n)*(l-c)),r=u(t-e);if(r===t2)return this.double();let i=u(o*t8*d),f=u(a*t8*h),p=f+i,g=t+e,m=f-i,y=u(p*r),b=u(g*m),w=u(p*m);return new v(y,b,u(r*g),w)}let f=u(n*c),p=u(s*l),g=u(a*i*d),m=u(o*h),b=u((n+s)*(c+l)-f-p),w=m-g,E=m+g,I=u(p-t*f),_=u(b*w),A=u(E*I),S=u(b*I);return new v(_,A,u(w*E),S)}subtract(e){return this.add(e.negate())}wNAF(e){return _.wNAFCached(this,e,v.normalizeZ)}multiply(e){tx("scalar",e,t3,n);let{p:t,f:r}=this.wNAF(e);return v.normalizeZ([t,r])[0]}multiplyUnsafe(e,t=v.ZERO){return tx("scalar",e,t2,n),e===t2?I:this.is0()||e===t3?this:_.wNAFCachedUnsafe(this,e,v.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return _.unsafeLadder(this,n).is0()}toAffine(e){return b(this,e)}clearCofactor(){let{h:e}=r;return e===t3?this:this.multiplyUnsafe(e)}static fromHex(e,t=!1){let{d:n,a:s}=r,o=i.BYTES;e=tC("pointHex",e,o),tm("zip215",t);let a=e.slice(),c=e[o-1];a[o-1]=-129&c;let l=t_(a);tx("pointHex.y",l,t2,t?h:i.ORDER);let d=u(l*l),{isValid:p,value:g}=f(u(d-t3),u(n*d-s));if(!p)throw Error("Point.fromHex: invalid y coordinate");let m=(g&t3)===t3,y=(128&c)!=0;if(!t&&g===t2&&y)throw Error("Point.fromHex: x=0 and x_0=1");return y!==m&&(g=u(-g)),v.fromAffine({x:g,y:l})}static fromPrivateKey(e){return A(e).point}toRawBytes(){let{x:e,y:t}=this.toAffine(),r=tS(t,i.BYTES);return r[r.length-1]|=e&t3?128:0,r}toHex(){return tb(this.toRawBytes())}}v.BASE=new v(r.Gx,r.Gy,t3,u(r.Gx*r.Gy)),v.ZERO=new v(t2,t3,t3,t2);let{BASE:E,ZERO:I}=v,_=(t=8*c,{constTimeNegate:tG,hasPrecomputes:e=>1!==t1(e),unsafeLadder(e,t,r=v.ZERO){let i=e;for(;t>tY;)t&tJ&&(r=r.add(i)),i=i.double(),t>>=tJ;return r},precomputeWindow(e,r){let{windows:i,windowSize:n}=tQ(r,t),s=[],o=e,a=o;for(let e=0;e<i;e++){a=o,s.push(a);for(let e=1;e<n;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,r,i){let{windows:n,windowSize:s}=tQ(e,t),o=v.ZERO,a=v.BASE,c=BigInt(2**e-1),l=2**e,h=BigInt(e);for(let e=0;e<n;e++){let t=e*s,n=Number(i&c);i>>=h,n>s&&(n-=l,i+=tJ);let u=t+Math.abs(n)-1,d=e%2!=0,f=n<0;0===n?a=a.add(tG(d,r[t])):o=o.add(tG(f,r[u]))}return{p:o,f:a}},wNAFUnsafe(e,r,i,n=v.ZERO){let{windows:s,windowSize:o}=tQ(e,t),a=BigInt(2**e-1),c=2**e,l=BigInt(e);for(let e=0;e<s;e++){let t=e*o;if(i===tY)break;let s=Number(i&a);if(i>>=l,s>o&&(s-=c,i+=tJ),0===s)continue;let h=r[t+Math.abs(s)-1];s<0&&(h=h.negate()),n=n.add(h)}return n},getPrecomputes(e,t,r){let i=tX.get(t);return i||(i=this.precomputeWindow(t,e),1!==e&&tX.set(t,r(i))),i},wNAFCached(e,t,r){let i=t1(e);return this.wNAF(i,this.getPrecomputes(i,e,r),t)},wNAFCachedUnsafe(e,t,r,i){let n=t1(e);return 1===n?this.unsafeLadder(e,t,i):this.wNAFUnsafe(n,this.getPrecomputes(n,e,r),t,i)},setWindowSize(e,r){tZ(r,t),t0.set(e,r),tX.delete(e)}});function A(e){let t=i.BYTES;e=tC("private key",e,t);let r=tC("hashed private key",o(e),2*t),s=p(r.slice(0,t)),a=r.slice(t,2*t),c=t$(t_(s),n),l=E.multiply(c),h=l.toRawBytes();return{head:s,prefix:a,scalar:c,point:l,pointBytes:h}}function S(e=new Uint8Array,...t){return t$(t_(o(g(tN(...t),tC("context",e),!!s))),n)}return E._setWindowSize(8),{CURVE:r,getPublicKey:function(e){return A(e).pointBytes},sign:function(e,t,r={}){e=tC("message",e),s&&(e=s(e));let{prefix:o,scalar:a,pointBytes:c}=A(t),l=S(r.context,o,e),h=E.multiply(l).toRawBytes(),u=t$(l+S(r.context,h,c,e)*a,n);return tx("signature.s",u,t2,n),tC("result",tN(h,tS(u,i.BYTES)),2*i.BYTES)},verify:function(e,t,r,n=t6){let o,a,c;let{context:l,zip215:h}=n,u=i.BYTES;e=tC("signature",e,2*u),t=tC("message",t),r=tC("publicKey",r,u),void 0!==h&&tm("zip215",h),s&&(t=s(t));let d=t_(e.slice(u,2*u));try{o=v.fromHex(r,h),a=v.fromHex(e.slice(0,u),h),c=E.multiplyUnsafe(d)}catch{return!1}if(!h&&o.isSmallOrder())return!1;let f=S(l,a.toRawBytes(),o.toRawBytes(),t);return a.add(o.multiplyUnsafe(f)).subtract(c).clearCofactor().equals(v.ZERO)},ExtendedPoint:v,utils:{getExtendedPublicKey:A,randomPrivateKey:()=>a(i.BYTES),precompute:(e=8,t=v.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ri,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:rr,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:th,randomBytes:te,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:function(e,t){let r=t$(t*t*t,t4),i=function(e){let t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=e*e%t4*e%t4,o=tq(s,re,t4)*s%t4,a=tq(o,t7,t4)*e%t4,c=tq(a,rt,t4)*a%t4,l=tq(c,t,t4)*c%t4,h=tq(l,r,t4)*l%t4,u=tq(h,i,t4)*h%t4,d=tq(u,n,t4)*u%t4,f=tq(d,n,t4)*u%t4,p=tq(f,t,t4)*c%t4;return{pow_p_5_8:tq(p,re,t4)*e%t4,b2:s}}(e*t$(r*r*t,t4)).pow_p_5_8,n=t$(e*r*i,t4),s=t$(t*n*n,t4),o=n,a=t$(n*t9,t4),c=s===e,l=s===t$(-e,t4),h=s===t$(-e*t9,t4);return c&&(n=o),(l||h)&&(n=a),tH(n,t4)&&(n=t$(-n,t4)),{isValid:c||l,value:n}}}),rs="base64url",ro="utf8",ra="utf8",rc="base58btc";function rl(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function rh(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?rl(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function ru(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=rh(t),i=0;for(let t of e)r.set(t,i),i+=t.length;return rl(r)}var rd=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function u(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===c;)i++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var h=r[e.charCodeAt(t)];if(255===h)return;for(var u=0,d=s-1;(0!==h||u<n)&&-1!==d;d--,u++)h+=a*o[d]>>>0,o[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw Error("Non-zero carry");n=u,t++}if(" "!==e[t]){for(var f=s-n;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(i+(s-f)),g=i;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*h+1>>>0,l=new Uint8Array(o);n!==s;){for(var u=t[n],d=0,f=o-1;(0!==u||d<i)&&-1!==f;f--,d++)u+=256*l[f]>>>0,l[f]=u%a>>>0,u=u/a>>>0;if(0!==u)throw Error("Non-zero carry");i=d,n++}for(var p=o-i;p!==o&&0===l[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:u,decode:function(e){var r=u(e);if(r)return r;throw Error(`Non-${t} character`)}}};let rf=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},rp=e=>new TextEncoder().encode(e),rg=e=>new TextDecoder().decode(e);class rm{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ry{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return rw(this,e)}}class rb{constructor(e){this.decoders=e}or(e){return rw(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let rw=(e,t)=>new rb({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class rv{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new rm(e,t,r),this.decoder=new ry(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let rE=({name:e,prefix:t,encode:r,decode:i})=>new rv(e,t,r,i),rI=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=rd(r,t);return rE({prefix:e,name:t,encode:i,decode:e=>rf(n(e))})},r_=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,l=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);c=c<<r|s,(a+=r)>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw SyntaxError("Unexpected end of data");return o},rA=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},rS=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>rE({prefix:t,name:e,encode:e=>rA(e,i,r),decode:t=>r_(t,i,r,e)});var rC=Object.freeze({__proto__:null,identity:rE({prefix:"\0",name:"identity",encode:e=>rg(e),decode:e=>rp(e)})}),rN=Object.freeze({__proto__:null,base2:rS({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),rM=Object.freeze({__proto__:null,base8:rS({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),rx=Object.freeze({__proto__:null,base10:rI({prefix:"9",name:"base10",alphabet:"0123456789"})}),rO=Object.freeze({__proto__:null,base16:rS({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:rS({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});let rP=rS({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),rT=rS({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rR=rS({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),rD=rS({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),rk=rS({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),rL=rS({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});var rj=Object.freeze({__proto__:null,base32:rP,base32upper:rT,base32pad:rR,base32padupper:rD,base32hex:rk,base32hexupper:rL,base32hexpad:rS({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:rS({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:rS({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),rU=Object.freeze({__proto__:null,base36:rI({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:rI({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),rB=Object.freeze({__proto__:null,base58btc:rI({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:rI({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});let rz=rS({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});var r$=Object.freeze({__proto__:null,base64:rz,base64pad:rS({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:rS({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:rS({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let rq=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),rF=rq.reduce((e,t,r)=>(e[r]=t,e),[]),rH=rq.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var rW=Object.freeze({__proto__:null,base256emoji:rE({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=rF[t],"")},decode:function(e){let t=[];for(let r of e){let e=rH[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})});function rV(e,t){var r,i=0,t=t||0,n=0,s=t,o=e.length;do{if(s>=o)throw rV.bytes=0,RangeError("Could not decode varint");r=e[s++],i+=n<28?(127&r)<<n:(127&r)*Math.pow(2,n),n+=7}while(r>=128);return rV.bytes=s-t,i}var rK=function e(t,r,i){r=r||[],i=i||0;for(var n=i;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r};let rY=(e,t,r=0)=>(rK(e,t,r),t),rJ=e=>e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10,rG=(e,t)=>{let r=t.byteLength,i=rJ(e),n=i+rJ(r),s=new Uint8Array(n+r);return rY(e,s,0),rY(r,s,i),s.set(t,n),new rZ(e,r,t,s)};class rZ{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let rQ=({name:e,code:t,encode:r})=>new rX(e,t,r);class rX{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?rG(this.code,t):t.then(e=>rG(this.code,e))}throw Error("Unknown type, must be binary type")}}let r0=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var r1=Object.freeze({__proto__:null,sha256:rQ({name:"sha2-256",code:18,encode:r0("SHA-256")}),sha512:rQ({name:"sha2-512",code:19,encode:r0("SHA-512")})}),r2=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:rf,digest:e=>rG(0,rf(e))}});new TextEncoder,new TextDecoder;let r3={...rC,...rN,...rM,...rx,...rO,...rj,...rU,...rB,...r$,...rW};function r8(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...r1,...r2});let r5=r8("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),r6=r8("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=rh((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),r4={utf8:r5,"utf-8":r5,hex:r3.base16,latin1:r6,ascii:r6,binary:r6,...r3};function r9(e,t="utf8"){let r=r4[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}function r7(e,t="utf8"){let r=r4[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?rl(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function ie(e){return(0,eO.D)(r9(r7(e,rs),ro))}function it(e){return r9(r7((0,eO.u)(e),ro),rs)}function ir(e){return["did","key","z"+r9(ru([r7("K36",rc),e]),rc)].join(":")}function ii(e){let t=e.split("."),r=ie(t[0]);return{header:r,payload:ie(t[1]),signature:r7(t[2],rs),data:r7(t.slice(0,2).join("."),ra)}}function is(e=te(32)){let t=rn.getPublicKey(e);return{secretKey:ru([e,t]),publicKey:t}}async function io(e,t,r,i,n=(0,er.fromMiliseconds)(Date.now())){var s,o;let a={alg:"EdDSA",typ:"JWT"},c={iss:ir(i.publicKey),sub:e,aud:t,iat:n,exp:n+r},l=r7([it((s={header:a,payload:c}).header),it(s.payload)].join("."),ra);return[it((o={header:a,payload:c,signature:rn.sign(l,i.secretKey.slice(0,32))}).header),it(o.payload),r9(o.signature,rs)].join(".")}var ia=r(25566),ic=function(e,t,r){if(r||2==arguments.length)for(var i,n=0,s=t.length;n<s;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},il=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},ih=function(e){this.version=e,this.type="node",this.name="node",this.os=ia.platform},iu=function(e,t,r,i){this.name=e,this.version=t,this.os=r,this.bot=i,this.type="bot-device"},id=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},ip=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},ig=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,im=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],iy=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ib(e){return e?iw(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new ip:"undefined"!=typeof navigator?iw(navigator.userAgent):void 0!==ia&&ia.version?new ih(ia.version.slice(1)):null}function iw(e){var t=""!==e&&im.reduce(function(t,r){var i=r[0],n=r[1];if(t)return t;var s=n.exec(e);return!!s&&[i,s]},!1);if(!t)return null;var r=t[0],i=t[1];if("searchbot"===r)return new id;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<3&&(n=ic(ic([],n,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-n.length),!0)):n=[];var s=n.join("."),o=function(e){for(var t=0,r=iy.length;t<r;t++){var i=iy[t],n=i[0];if(i[1].exec(e))return n}return null}(e),a=ig.exec(e);return a&&a[1]?new iu(r,s,o,a[1]):new il(r,s,o)}var iv=r(76454),iE=r(3897);let iI="2.23.2",i_={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,version:`viem@${iI}`};class iA extends Error{constructor(e,t={}){let r=t.cause instanceof iA?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof iA&&t.cause.docsPath||t.docsPath,n=i_.getDocsUrl?.({...t,docsPath:i});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: ${n}`]:[],...r?[`Details: ${r}`]:[],...i_.version?[`Version: ${i_.version}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=iI}walk(e){return function e(t,r){return r?.(t)?t:t&&"object"==typeof t&&"cause"in t&&void 0!==t.cause?e(t.cause,r):r?null:t}(this,e)}}function iS(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}class iC extends iA{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function iN(e,{dir:t,size:r=32}={}){return"string"==typeof e?function(e,{dir:t,size:r=32}={}){if(null===r)return e;let i=e.replace("0x","");if(i.length>2*r)throw new iC({size:Math.ceil(i.length/2),targetSize:r,type:"hex"});return`0x${i["right"===t?"padEnd":"padStart"](2*r,"0")}`}(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new iC({size:e.length,targetSize:r,type:"bytes"});let i=new Uint8Array(r);for(let n=0;n<r;n++){let s="right"===t;i[s?n:r-n-1]=e[s?n:e.length-n-1]}return i}(e,{dir:t,size:r})}class iM extends iA{constructor({max:e,min:t,signed:r,size:i,value:n}){super(`Number "${n}" is not in safe ${i?`${8*i}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class ix extends iA{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function iO(e){return iS(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function iP(e,{size:t}){if(iO(e)>t)throw new ix({givenSize:iO(e),maxSize:t})}function iT(e,t={}){let{signed:r}=t;t.size&&iP(e,{size:t.size});let i=BigInt(e);if(!r)return i;let n=(e.length-2)/2;return i<=(1n<<8n*BigInt(n)-1n)-1n?i:i-BigInt(`0x${"f".padStart(2*n,"f")}`)-1n}let iR=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function iD(e,t={}){return"number"==typeof e||"bigint"==typeof e?iL(e,t):"string"==typeof e?function(e,t={}){return ik(ij.encode(e),t)}(e,t):"boolean"==typeof e?function(e,t={}){let r=`0x${Number(e)}`;return"number"==typeof t.size?(iP(r,{size:t.size}),iN(r,{size:t.size})):r}(e,t):ik(e,t)}function ik(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=iR[e[t]];let i=`0x${r}`;return"number"==typeof t.size?(iP(i,{size:t.size}),iN(i,{dir:"right",size:t.size})):i}function iL(e,t={}){let r;let{signed:i,size:n}=t,s=BigInt(e);n?r=i?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));let o="bigint"==typeof r&&i?-r-1n:0;if(r&&s>r||s<o){let t="bigint"==typeof e?"n":"";throw new iM({max:r?`${r}${t}`:void 0,min:`${o}${t}`,signed:i,size:n,value:`${e}${t}`})}let a=`0x${(i&&s<0?(1n<<BigInt(8*n))+BigInt(s):s).toString(16)}`;return n?iN(a,{size:n}):a}let ij=new TextEncoder,iU=new TextEncoder,iB={zero:48,nine:57,A:65,F:70,a:97,f:102};function iz(e){return e>=iB.zero&&e<=iB.nine?e-iB.zero:e>=iB.A&&e<=iB.F?e-(iB.A-10):e>=iB.a&&e<=iB.f?e-(iB.a-10):void 0}function i$(e,t={}){let r=e;t.size&&(iP(r,{size:t.size}),r=iN(r,{dir:"right",size:t.size}));let i=r.slice(2);i.length%2&&(i=`0${i}`);let n=i.length/2,s=new Uint8Array(n);for(let e=0,t=0;e<n;e++){let r=iz(i.charCodeAt(t++)),n=iz(i.charCodeAt(t++));if(void 0===r||void 0===n)throw new iA(`Invalid byte sequence ("${i[t-2]}${i[t-1]}" in "${i}").`);s[e]=16*r+n}return s}function iq(e,t={}){let r=iU.encode(e);return"number"==typeof t.size?(iP(r,{size:t.size}),iN(r,{dir:"right",size:t.size})):r}var iF=r(85689);let iH=BigInt(4294967296-1),iW=BigInt(32),iV=(e,t,r)=>e<<r|t>>>32-r,iK=(e,t,r)=>t<<r|e>>>32-r,iY=(e,t,r)=>t<<r-32|e>>>64-r,iJ=(e,t,r)=>e<<r-32|t>>>64-r;var iG=r(38043);let iZ=[],iQ=[],iX=[],i0=BigInt(0),i1=BigInt(1),i2=BigInt(2),i3=BigInt(7),i8=BigInt(256),i5=BigInt(113);for(let e=0,t=i1,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],iZ.push(2*(5*i+r)),iQ.push((e+1)*(e+2)/2%64);let n=i0;for(let e=0;e<7;e++)(t=(t<<i1^(t>>i3)*i5)%i8)&i2&&(n^=i1<<(i1<<BigInt(e))-i1);iX.push(n)}let[i6,i4]=function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=function(e,t=!1){return t?{h:Number(e&iH),l:Number(e>>iW&iH)}:{h:0|Number(e>>iW&iH),l:0|Number(e&iH)}}(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}(iX,!0),i9=(e,t,r)=>r>32?iY(e,t,r):iV(e,t,r),i7=(e,t,r)=>r>32?iJ(e,t,r):iK(e,t,r);class ne extends iG.kb{constructor(e,t,r,i=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,iF.k8)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,iG.Jq)(this.state)}keccak(){iG.iA||(0,iG.l1)(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=i9(s,o,1)^r[i],c=i7(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=iQ[r],s=i9(t,n,i),o=i7(t,n,i),a=iZ[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=i6[i],e[1]^=i4[i]}r.fill(0)}(this.state32,this.rounds),iG.iA||(0,iG.l1)(this.state32),this.posOut=0,this.pos=0}update(e){(0,iF.$h)(this);let{blockLen:t,state:r}=this,i=(e=(0,iG.O0)(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){(0,iF.$h)(this,!1),(0,iF.gk)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,iF.k8)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,iF.eB)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new ne(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let nt=(0,iG.hE)(()=>new ne(136,1,32));function nr(e,t){let r=nt(iS(e,{strict:!1})?function(e,t={}){return"number"==typeof e||"bigint"==typeof e?i$(iL(e,t)):"boolean"==typeof e?function(e,t={}){let r=new Uint8Array(1);return(r[0]=Number(e),"number"==typeof t.size)?(iP(r,{size:t.size}),iN(r,{size:t.size})):r}(e,t):iS(e)?i$(e,t):iq(e,t)}(e):e);return"bytes"===(t||"hex")?r:iD(r)}class ni extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=this.keys().next().value;e&&this.delete(e)}return this}}let nn=new ni(8192);async function ns({hash:e,signature:t}){let i=iS(e)?e:iD(e),{secp256k1:n}=await r.e(2851).then(r.bind(r,72851)),s=(()=>{if("object"==typeof t&&"r"in t&&"s"in t){let{r:e,s:r,v:i,yParity:s}=t,o=no(Number(s??i));return new n.Signature(iT(e),iT(r)).addRecoveryBit(o)}let e=iS(t)?t:iD(t),r=no(function(e,t={}){return Number(iT(e,t))}(`0x${e.slice(130)}`));return n.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(r)})().recoverPublicKey(i.substring(2)).toHex(!1);return`0x${s}`}function no(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw Error("Invalid yParityOrV value")}async function na({hash:e,signature:t}){return function(e){let t=nr(`0x${e.substring(4)}`).substring(26);return function(e,t){if(nn.has(`${e}.undefined`))return nn.get(`${e}.undefined`);let r=e.substring(2).toLowerCase(),i=nr(iq(r),"bytes"),n=(t?r.substring(`${t}0x`.length):r).split("");for(let e=0;e<40;e+=2)i[e>>1]>>4>=8&&n[e]&&(n[e]=n[e].toUpperCase()),(15&i[e>>1])>=8&&n[e+1]&&(n[e+1]=n[e+1].toUpperCase());let s=`0x${n.join("")}`;return nn.set(`${e}.${t}`,s),s}(`0x${t}`)}(await ns({hash:e,signature:t}))}function nc(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function nl(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=nc(t),i=0;for(let t of e)r.set(t,i),i+=t.length;return r}var nh=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function u(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===c;)i++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var h=r[e.charCodeAt(t)];if(255===h)return;for(var u=0,d=s-1;(0!==h||u<n)&&-1!==d;d--,u++)h+=a*o[d]>>>0,o[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw Error("Non-zero carry");n=u,t++}if(" "!==e[t]){for(var f=s-n;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(i+(s-f)),g=i;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*h+1>>>0,l=new Uint8Array(o);n!==s;){for(var u=t[n],d=0,f=o-1;(0!==u||d<i)&&-1!==f;f--,d++)u+=256*l[f]>>>0,l[f]=u%a>>>0,u=u/a>>>0;if(0!==u)throw Error("Non-zero carry");i=d,n++}for(var p=o-i;p!==o&&0===l[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:u,decode:function(e){var r=u(e);if(r)return r;throw Error(`Non-${t} character`)}}};new Uint8Array(0);let nu=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},nd=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},nf=e=>new TextEncoder().encode(e),np=e=>new TextDecoder().decode(e);class ng{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class nm{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return nb(this,e)}}class ny{constructor(e){this.decoders=e}or(e){return nb(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let nb=(e,t)=>new ny({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class nw{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new ng(e,t,r),this.decoder=new nm(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let nv=({name:e,prefix:t,encode:r,decode:i})=>new nw(e,t,r,i),nE=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=nh(r,t);return nv({prefix:e,name:t,encode:i,decode:e=>nd(n(e))})},nI=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,l=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);c=c<<r|s,(a+=r)>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw SyntaxError("Unexpected end of data");return o},n_=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},nA=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>nv({prefix:t,name:e,encode:e=>n_(e,i,r),decode:t=>nI(t,i,r,e)}),nS=nv({prefix:"\0",name:"identity",encode:e=>np(e),decode:e=>nf(e)}),nC=nA({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),nN=nA({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),nM=nE({prefix:"9",name:"base10",alphabet:"0123456789"}),nx=nA({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),nO=nA({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),nP=nA({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nT=nA({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),nR=nA({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),nD=nA({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),nk=nA({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),nL=nA({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),nj=nA({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),nU=nA({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),nB=nA({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),nz=nE({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),n$=nE({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),nq=nE({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),nF=nE({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),nH=nA({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),nW=nA({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nV=nA({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),nK=nA({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),nY=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),nJ=nY.reduce((e,t,r)=>(e[r]=t,e),[]),nG=nY.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),nZ=nv({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=nJ[t],"")},decode:function(e){let t=[];for(let r of e){let e=nG[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var nQ=function e(t,r,i){r=r||[];for(var n=i=i||0;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r},nX=function e(t,r){var i,n=0,r=r||0,s=0,o=r,a=t.length;do{if(o>=a)throw e.bytes=0,RangeError("Could not decode varint");i=t[o++],n+=s<28?(127&i)<<s:(127&i)*Math.pow(2,s),s+=7}while(i>=128);return e.bytes=o-r,n};let n0=(e,t=0)=>[nX(e,t),nX.bytes],n1=(e,t,r=0)=>(nQ(e,t,r),t),n2=e=>e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10,n3=(e,t)=>{let r=t.byteLength,i=n2(e),n=i+n2(r),s=new Uint8Array(n+r);return n1(e,s,0),n1(r,s,i),s.set(t,n),new n6(e,r,t,s)},n8=e=>{let t=nd(e),[r,i]=n0(t),[n,s]=n0(t.subarray(i)),o=t.subarray(i+s);if(o.byteLength!==n)throw Error("Incorrect length");return new n6(r,n,o,t)},n5=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&nu(e.bytes,t.bytes);class n6{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let n4=({name:e,code:t,encode:r})=>new n9(e,t,r);class n9{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?n3(this.code,t):t.then(e=>n3(this.code,e))}throw Error("Unknown type, must be binary type")}}let n7=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),se=n4({name:"sha2-256",code:18,encode:n7("SHA-256")}),st=n4({name:"sha2-512",code:19,encode:n7("SHA-512")}),sr={code:0,name:"identity",encode:nd,digest:e=>n3(0,nd(e))},si="raw",sn=85,ss=e=>nd(e),so=e=>nd(e),sa=new TextEncoder,sc=new TextDecoder,sl="json",sh=512,su=e=>sa.encode(JSON.stringify(e)),sd=e=>JSON.parse(sc.decode(e));class sf{constructor(e,t,r,i){this.code=t,this.version=e,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:sI,byteLength:sI,code:sE,version:sE,multihash:sE,bytes:sE,_baseCache:sI,asCID:sI})}toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==sy)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==sb)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return sf.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=n3(e,t);return sf.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&n5(this.multihash,e.multihash)}toString(e){let{bytes:t,version:r,_baseCache:i}=this;return 0===r?sg(t,i,e||nq.encoder):sm(t,i,e||nP.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return s_(/^0\.0/,sA),!!(e&&(e[sv]||e.asCID===e))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof sf)return e;if(null!=e&&e.asCID===e){let{version:t,code:r,multihash:i,bytes:n}=e;return new sf(t,r,i,n||sw(t,r,i.bytes))}if(null==e||!0!==e[sv])return null;{let{version:t,multihash:r,code:i}=e,n=n8(r);return sf.create(t,i,n)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");switch(e){case 0:if(t===sy)return new sf(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${sy}) block encoding`);case 1:{let i=sw(e,t,r.bytes);return new sf(e,t,r,i)}default:throw Error("Invalid version")}}static createV0(e){return sf.create(0,sy,e)}static createV1(e,t){return sf.create(1,e,t)}static decode(e){let[t,r]=sf.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=sf.inspectBytes(e),r=t.size-t.multihashSize,i=nd(e.subarray(r,r+t.multihashSize));if(i.byteLength!==t.multihashSize)throw Error("Incorrect length");let n=i.subarray(t.multihashSize-t.digestSize),s=new n6(t.multihashCode,t.digestSize,n,i);return[0===t.version?sf.createV0(s):sf.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,i]=n0(e.subarray(t));return t+=i,r},i=r(),n=sy;if(18===i?(i=0,t=0):1===i&&(n=r()),0!==i&&1!==i)throw RangeError(`Invalid CID version ${i}`);let s=t,o=r(),a=r(),c=t+a;return{version:i,codec:n,multihashCode:o,digestSize:a,multihashSize:c-s,size:c}}static parse(e,t){let[r,i]=sp(e,t),n=sf.decode(i);return n._baseCache.set(r,e),n}}let sp=(e,t)=>{switch(e[0]){case"Q":return[nq.prefix,(t||nq).decode(`${nq.prefix}${e}`)];case nq.prefix:return[nq.prefix,(t||nq).decode(e)];case nP.prefix:return[nP.prefix,(t||nP).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},sg=(e,t,r)=>{let{prefix:i}=r;if(i!==nq.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let n=t.get(i);if(null!=n)return n;{let n=r.encode(e).slice(1);return t.set(i,n),n}},sm=(e,t,r)=>{let{prefix:i}=r,n=t.get(i);if(null!=n)return n;{let n=r.encode(e);return t.set(i,n),n}},sy=112,sb=18,sw=(e,t,r)=>{let i=n2(e),n=i+n2(t),s=new Uint8Array(n+r.byteLength);return n1(e,s,0),n1(t,s,i),s.set(r,n),s},sv=Symbol.for("@ipld/js-cid/CID"),sE={writable:!1,configurable:!1,enumerable:!0},sI={writable:!1,enumerable:!1,configurable:!1},s_=(e,t)=>{if(e.test("0.0.0-dev"))console.warn(t);else throw Error(t)},sA=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,sS={...R,...D,...k,...L,...j,...U,...B,...z,...$,...q};function sC(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...F,...H});let sN=sC("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),sM=sC("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=nc((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),sx={utf8:sN,"utf-8":sN,hex:sS.base16,latin1:sM,ascii:sM,binary:sM,...sS};function sO(e,t="utf8"){let r=sx[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}function sP(e,t="utf8"){let r=sx[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var sT=r(61984);let sR={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var sD=r(25566),sk=r(82957).Buffer;function sL(e){let[t,r]=e.split(":");return{namespace:t,reference:r}}function sj(e,t){return e.includes(":")?[e]:t.chains||[]}let sU={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function sB(){return"u">typeof sD&&"u">typeof sD.versions&&"u">typeof sD.versions.node}function sz(){return!(0,iv.getDocument)()&&!!(0,iv.getNavigator)()&&"ReactNative"===navigator.product}function s$(){return!sB()&&!!(0,iv.getNavigator)()&&!!(0,iv.getDocument)()}function sq(){return sz()?sU.reactNative:sB()?sU.node:s$()?sU.browser:sU.unknown}function sF(){var e;try{return sz()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Application)?null==(e=r.g.Application)?void 0:e.applicationId:void 0}catch{return}}function sH(){return(0,iE.D)()||{name:"",description:"",url:"",icons:[""]}}function sW(e,t,i){let n=function(){if(sq()===sU.reactNative&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)){let{OS:e,Version:t}=r.g.Platform;return[e,t].join("-")}let e=ib();if(null===e)return"unknown";let t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),s=function(){var e;let t=sq();return t===sU.browser?[t,(null==(e=(0,iv.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),["js",i].join("-"),n,s].join("/")}function sV(e,t){return e.filter(e=>t.includes(e)).length===e.length}function sK(e){return Object.fromEntries(e.entries())}function sY(e){return new Map(Object.entries(e))}function sJ(e=er.FIVE_MINUTES,t){let r,i,n,s;let o=(0,er.toMiliseconds)(e||er.FIVE_MINUTES);return{resolve:e=>{n&&r&&(clearTimeout(n),r(e),s=Promise.resolve(e))},reject:e=>{n&&i&&(clearTimeout(n),i(e))},done:()=>new Promise((e,a)=>{if(s)return e(s);n=setTimeout(()=>{let e=Error(t);s=Promise.reject(e),a(e)},o),r=e,i=a})}}function sG(e,t,r){return new Promise(async(i,n)=>{let s=setTimeout(()=>n(Error(r)),t);try{let t=await e;i(t)}catch(e){n(e)}clearTimeout(s)})}function sZ(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw Error(`Unknown expirer target type: ${e}`)}function sQ(e){let[t,r]=e.split(":"),i={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)i.topic=r;else if("id"===t&&Number.isInteger(Number(r)))i.id=Number(r);else throw Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function sX(e,t){return(0,er.fromMiliseconds)((t||Date.now())+(0,er.toMiliseconds)(e))}function s0(e){return Date.now()>=(0,er.toMiliseconds)(e)}function s1(e,t){return`${e}${t?`:${t}`:""}`}function s2(e=[],t=[]){return[...new Set([...e,...t])]}async function s3({id:e,topic:t,wcDeepLink:i}){var n;try{if(!i)return;let s="string"==typeof i?JSON.parse(i):i,o=s?.href;if("string"!=typeof o)return;let a=function(e,t,r){let i=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let n=`${e}`;if(e.startsWith("https://t.me")){let t=e.includes("?")?"&startapp=":"?startapp=";n=`${n}${t}${function(e,t=!1){let r=sk.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(i,!0)}`}else n=`${n}/wc?${i}`;return n}(o,e,t),c=sq();if(c===sU.browser){let e;if(!(null!=(n=(0,iv.getDocument)())&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}e="_self",function(){try{return window.self!==window.top}catch{return!1}}()?e="_top":("u">typeof window&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||a.startsWith("https://")||a.startsWith("http://"))&&(e="_blank"),window.open(a,e,"noreferrer noopener")}else c===sU.reactNative&&"u">typeof(null==r.g?void 0:r.g.Linking)&&await r.g.Linking.openURL(a)}catch(e){console.error(e)}}async function s8(e,t){let r="";try{if(s$()&&(r=localStorage.getItem(t)))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}function s5(e,t){if(!e.includes(t))return null;let r=e.split(/([&,?,=])/),i=r.indexOf(t);return r[i+2]}function s6(){return"u">typeof crypto&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function s4(){return"u">typeof sD&&"true"===sD.env.IS_VITEST}function s9(e){return sk.from(e,"base64").toString("utf-8")}function s7(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function oe(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function ot(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");s7(e.outputLen),s7(e.blockLen)}function or(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function oi(e,t){oe(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}let on=BigInt(4294967296-1),os=BigInt(32),oo=(e,t,r)=>e<<r|t>>>32-r,oa=(e,t,r)=>t<<r|e>>>32-r,oc=(e,t,r)=>t<<r-32|e>>>64-r,ol=(e,t,r)=>e<<r-32|t>>>64-r,oh="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function ou(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function od(e,t){return e<<32-t|e>>>t}let of=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function op(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}}function og(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),oe(e),e}class om{clone(){return this._cloneInto()}}function oy(e){let t=t=>e().update(og(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ob(e=32){if(oh&&"function"==typeof oh.getRandomValues)return oh.getRandomValues(new Uint8Array(e));if(oh&&"function"==typeof oh.randomBytes)return oh.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}let ow=[],ov=[],oE=[],oI=BigInt(0),o_=BigInt(1),oA=BigInt(2),oS=BigInt(7),oC=BigInt(256),oN=BigInt(113);for(let e=0,t=o_,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],ow.push(2*(5*i+r)),ov.push((e+1)*(e+2)/2%64);let n=oI;for(let e=0;e<7;e++)(t=(t<<o_^(t>>oS)*oN)%oC)&oA&&(n^=o_<<(o_<<BigInt(e))-o_);oE.push(n)}let[oM,ox]=function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=function(e,t=!1){return t?{h:Number(e&on),l:Number(e>>os&on)}:{h:0|Number(e>>os&on),l:0|Number(e&on)}}(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}(oE,!0),oO=(e,t,r)=>r>32?oc(e,t,r):oo(e,t,r),oP=(e,t,r)=>r>32?ol(e,t,r):oa(e,t,r);class oT extends om{constructor(e,t,r,i=!1,n=24){var s;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,s7(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=new Uint32Array((s=this.state).buffer,s.byteOffset,Math.floor(s.byteLength/4))}keccak(){of||op(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=oO(s,o,1)^r[i],c=oP(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=ov[r],s=oO(t,n,i),o=oP(t,n,i),a=ow[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=oM[i],e[1]^=ox[i]}r.fill(0)}(this.state32,this.rounds),of||op(this.state32),this.posOut=0,this.pos=0}update(e){or(this);let{blockLen:t,state:r}=this,i=(e=og(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){or(this,!1),oe(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return s7(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(oi(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new oT(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let oR=oy(()=>new oT(136,1,32));function oD(e){let t=`Ethereum Signed Message:
${e.length}`,r=new TextEncoder().encode(t+e);return"0x"+sk.from(oR(r)).toString("hex")}async function ok(e,t,r,i,n,s){switch(r.t){case"eip191":return await oL(e,t,r.s);case"eip1271":return await oj(e,t,r.s,i,n,s);default:throw Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function oL(e,t,r){return(await na({hash:oD(t),signature:r})).toLowerCase()===e.toLowerCase()}async function oj(e,t,r,i,n,s){let o=sL(i);if(!o.namespace||!o.reference)throw Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{let o="0x1626ba7e",a=r.substring(2),c=oD(t).substring(2),l=await fetch(`${s||"https://rpc.walletconnect.org/v1"}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:o+c+"00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000041"+a},"latest"]})}),{result:h}=await l.json();return!!h&&h.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}var oU=Object.defineProperty,oB=Object.defineProperties,oz=Object.getOwnPropertyDescriptors,o$=Object.getOwnPropertySymbols,oq=Object.prototype.hasOwnProperty,oF=Object.prototype.propertyIsEnumerable,oH=(e,t,r)=>t in e?oU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,oW=(e,t)=>{for(var r in t||(t={}))oq.call(t,r)&&oH(e,r,t[r]);if(o$)for(var r of o$(t))oF.call(t,r)&&oH(e,r,t[r]);return e},oV=(e,t)=>oB(e,oz(t));let oK=e=>e?.split(":"),oY=e=>{let t=e&&oK(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]},oJ=e=>{let t=e&&oK(e);if(t)return t[2]+":"+t[3]},oG=e=>{let t=e&&oK(e);if(t)return t.pop()};async function oZ(e){let{cacao:t,projectId:r}=e,{s:i,p:n}=t,s=oQ(n,n.iss),o=oG(n.iss);return await ok(o,s,i,oJ(n.iss),r)}let oQ=(e,t)=>{let r=`${e.domain} wants you to sign in with your Ethereum account:`,i=oG(t);if(!e.aud&&!e.uri)throw Error("Either `aud` or `uri` is required to construct the message");let n=e.statement||void 0,s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${oY(t)}`,c=`Nonce: ${e.nonce}`,l=`Issued At: ${e.iat}`,h=e.exp?`Expiration Time: ${e.exp}`:void 0,u=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,f=e.resources?`Resources:${e.resources.map(e=>`
- ${e}`).join("")}`:void 0,p=o8(e.resources);return p&&(n=function(e="",t){oX(t);let r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;let i=[],n=0;Object.keys(t.att).forEach(e=>{let r=Object.keys(t.att[e]).map(e=>({ability:e.split("/")[0],action:e.split("/")[1]}));r.sort((e,t)=>e.action.localeCompare(t.action));let s={};r.forEach(e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)});let o=Object.keys(s).map(t=>(n++,`(${n}) '${t}': '${s[t].join("', '")}' for '${e}'.`));i.push(o.join(", ").replace(".,","."))});let s=i.join(" "),o=`${r}${s}`;return`${e?e+" ":""}${o}`}(n,o1(p))),[r,i,"",n,"",s,o,a,c,l,h,u,d,f].filter(e=>null!=e).join(`
`)};function oX(e){if(!e)throw Error("No recap provided, value is undefined");if(!e.att)throw Error("No `att` property found");let t=Object.keys(e.att);if(!(null!=t&&t.length))throw Error("No resources found in `att` property");t.forEach(t=>{let r=e.att[t];if(Array.isArray(r)||"object"!=typeof r)throw Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(e=>{let t=r[e];if(!Array.isArray(t))throw Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach(t=>{if("object"!=typeof t)throw Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)})})})}function o0(e){return oX(e),`urn:recap:${sk.from(JSON.stringify(e)).toString("base64").replace(/=/g,"")}`}function o1(e){var t;let r=(t=e.replace("urn:recap:",""),JSON.parse(sk.from(t,"base64").toString("utf-8")));return oX(r),r}function o2(e){var t;let r=o1(e);oX(r);let i=null==(t=r.att)?void 0:t.eip155;return i?Object.keys(i).map(e=>e.split("/")[1]):[]}function o3(e){let t=o1(e);oX(t);let r=[];return Object.values(t.att).forEach(e=>{Object.values(e).forEach(e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)})}),[...new Set(r.flat())]}function o8(e){if(!e)return;let t=e?.[e.length-1];return t&&t.includes("urn:recap:")?t:void 0}function o5(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function o6(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function o4(e,...t){if(!o6(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function o9(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function o7(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}let ae=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),at=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw Error("Non little-endian hardware is not supported");function ar(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e);else if(o6(e))e=as(e);else throw Error("Uint8Array expected, got "+typeof e);return e}function ai(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw Error("invalid output length, expected "+e+", got: "+t.length);if(r&&t.byteOffset%4!=0)throw Error("invalid output, must be aligned");return t}function an(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,l=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+l,a,i)}function as(e){return Uint8Array.from(e)}function ao(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}let aa=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),ac=aa("expand 16-byte k"),al=aa("expand 32-byte k"),ah=ae(ac),au=ae(al);function ad(e,t){return e<<t|e>>>32-t}function af(e){return e.byteOffset%4==0}let ap=4294967296-1,ag=new Uint32Array,am=(e,t)=>255&e[t++]|(255&e[t++])<<8;class ay{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,o4(e=ar(e),32);let t=am(e,0),r=am(e,2),i=am(e,4),n=am(e,6),s=am(e,8),o=am(e,10),a=am(e,12),c=am(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|n<<9)&8191,this.r[4]=(n>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|o<<2)&8191,this.r[7]=(o>>>11|a<<5)&8065,this.r[8]=(a>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let t=0;t<8;t++)this.pad[t]=am(e,16+2*t)}process(e,t,r=!1){let{h:i,r:n}=this,s=n[0],o=n[1],a=n[2],c=n[3],l=n[4],h=n[5],u=n[6],d=n[7],f=n[8],p=n[9],g=am(e,t+0),m=am(e,t+2),y=am(e,t+4),b=am(e,t+6),w=am(e,t+8),v=am(e,t+10),E=am(e,t+12),I=am(e,t+14),_=i[0]+(8191&g),A=i[1]+((g>>>13|m<<3)&8191),S=i[2]+((m>>>10|y<<6)&8191),C=i[3]+((y>>>7|b<<9)&8191),N=i[4]+((b>>>4|w<<12)&8191),M=i[5]+(w>>>1&8191),x=i[6]+((w>>>14|v<<2)&8191),O=i[7]+((v>>>11|E<<5)&8191),P=i[8]+((E>>>8|I<<8)&8191),T=i[9]+(I>>>5|(r?0:2048)),R=0,D=0+_*s+5*p*A+5*f*S+5*d*C+5*u*N;R=D>>>13,D&=8191,D+=5*h*M+5*l*x+5*c*O+5*a*P+5*o*T,R+=D>>>13,D&=8191;let k=R+_*o+A*s+5*p*S+5*f*C+5*d*N;R=k>>>13,k&=8191,k+=5*u*M+5*h*x+5*l*O+5*c*P+5*a*T,R+=k>>>13,k&=8191;let L=R+_*a+A*o+S*s+5*p*C+5*f*N;R=L>>>13,L&=8191,L+=5*d*M+5*u*x+5*h*O+5*l*P+5*c*T,R+=L>>>13,L&=8191;let j=R+_*c+A*a+S*o+C*s+5*p*N;R=j>>>13,j&=8191,j+=5*f*M+5*d*x+5*u*O+5*h*P+5*l*T,R+=j>>>13,j&=8191;let U=R+_*l+A*c+S*a+C*o+N*s;R=U>>>13,U&=8191,U+=5*p*M+5*f*x+5*d*O+5*u*P+5*h*T,R+=U>>>13,U&=8191;let B=R+_*h+A*l+S*c+C*a+N*o;R=B>>>13,B&=8191,B+=M*s+5*p*x+5*f*O+5*d*P+5*u*T,R+=B>>>13,B&=8191;let z=R+_*u+A*h+S*l+C*c+N*a;R=z>>>13,z&=8191,z+=M*o+x*s+5*p*O+5*f*P+5*d*T,R+=z>>>13,z&=8191;let $=R+_*d+A*u+S*h+C*l+N*c;R=$>>>13,$&=8191,$+=M*a+x*o+O*s+5*p*P+5*f*T,R+=$>>>13,$&=8191;let q=R+_*f+A*d+S*u+C*h+N*l;R=q>>>13,q&=8191,q+=M*c+x*a+O*o+P*s+5*p*T,R+=q>>>13,q&=8191;let F=R+_*p+A*f+S*d+C*u+N*h;R=F>>>13,F&=8191,F+=M*l+x*c+O*a+P*o+T*s,R+=F>>>13,F&=8191,D=8191&(R=(R=(R<<2)+R|0)+D|0),R>>>=13,k+=R,i[0]=D,i[1]=k,i[2]=L,i[3]=j,i[4]=U,i[5]=B,i[6]=z,i[7]=$,i[8]=q,i[9]=F}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=i,i=e[t]>>>13,e[t]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+i,i=r[t]>>>13,r[t]&=8191;r[9]-=8192;let n=(1^i)-1;for(let e=0;e<10;e++)r[e]&=n;n=~n;for(let t=0;t<10;t++)e[t]=e[t]&n|r[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;ao(r)}update(e){o9(this);let{buffer:t,blockLen:r}=this,i=(e=ar(e)).length;for(let n=0;n<i;){let s=Math.min(r-this.pos,i-n);if(s===r){for(;r<=i-n;n+=r)this.process(e,n);continue}t.set(e.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){ao(this.h,this.r,this.buffer,this.pad)}digestInto(e){o9(this),function(e,t){o4(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,h:r}=this,{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let n=0;for(let t=0;t<8;t++)e[n++]=r[t]>>>0,e[n++]=r[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}let ab=function(e){let t=(t,r)=>e(r).update(ar(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}(e=>new ay(e)),aw=function(e,t){let{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return o5(n),o5(o),o7(s),o7(r),(t,a,c,l,h=0)=>{o4(t),o4(a),o4(c);let u=c.length;if(void 0===l&&(l=new Uint8Array(u)),o4(l),o5(h),h<0||h>=ap)throw Error("arx: counter overflow");if(l.length<u)throw Error(`arx: output (${l.length}) is shorter than data (${u})`);let d=[],f=t.length,p,g;if(32===f)d.push(p=as(t)),g=au;else if(16===f&&r)(p=new Uint8Array(32)).set(t),p.set(t,16),g=ah,d.push(p);else throw Error(`arx: invalid 32-byte key, got length=${f}`);af(a)||d.push(a=as(a));let m=ae(p);if(i){if(24!==a.length)throw Error("arx: extended nonce must be 24 bytes");i(g,m,ae(a.subarray(0,16)),m),a=a.subarray(16)}let y=16-n;if(y!==a.length)throw Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){let e=new Uint8Array(12);e.set(a,s?0:12-a.length),a=e,d.push(a)}return function(e,t,r,i,n,s,o,a){let c=n.length,l=new Uint8Array(64),h=ae(l),u=af(n)&&af(s),d=u?ae(n):ag,f=u?ae(s):ag;for(let p=0;p<c;o++){if(e(t,r,i,h,o,a),o>=ap)throw Error("arx: counter overflow");let g=Math.min(64,c-p);if(u&&64===g){let e=p/4;if(p%4!=0)throw Error("arx: invalid block position");for(let t=0,r;t<16;t++)f[r=e+t]=d[r]^h[t];p+=64;continue}for(let e=0,t;e<g;e++)s[t=p+e]=n[t]^l[e];p+=g}}(e,g,m,ae(a),c,l,h,o),ao(...d),l}}(function(e,t,r,i,n,s=20){let o=e[0],a=e[1],c=e[2],l=e[3],h=t[0],u=t[1],d=t[2],f=t[3],p=t[4],g=t[5],m=t[6],y=t[7],b=r[0],w=r[1],v=r[2],E=o,I=a,_=c,A=l,S=h,C=u,N=d,M=f,x=p,O=g,P=m,T=y,R=n,D=b,k=w,L=v;for(let e=0;e<s;e+=2)x=x+(R=ad(R^(E=E+S|0),16))|0,E=E+(S=ad(S^x,12))|0,x=x+(R=ad(R^E,8))|0,S=ad(S^x,7),O=O+(D=ad(D^(I=I+C|0),16))|0,I=I+(C=ad(C^O,12))|0,O=O+(D=ad(D^I,8))|0,C=ad(C^O,7),P=P+(k=ad(k^(_=_+N|0),16))|0,_=_+(N=ad(N^P,12))|0,P=P+(k=ad(k^_,8))|0,N=ad(N^P,7),T=T+(L=ad(L^(A=A+M|0),16))|0,A=A+(M=ad(M^T,12))|0,T=T+(L=ad(L^A,8))|0,M=ad(M^T,7),P=P+(L=ad(L^(E=E+C|0),16))|0,E=E+(C=ad(C^P,12))|0,P=P+(L=ad(L^E,8))|0,C=ad(C^P,7),T=T+(R=ad(R^(I=I+N|0),16))|0,I=I+(N=ad(N^T,12))|0,T=T+(R=ad(R^I,8))|0,N=ad(N^T,7),x=x+(D=ad(D^(_=_+M|0),16))|0,_=_+(M=ad(M^x,12))|0,x=x+(D=ad(D^_,8))|0,M=ad(M^x,7),O=O+(k=ad(k^(A=A+S|0),16))|0,A=A+(S=ad(S^O,12))|0,O=O+(k=ad(k^A,8))|0,S=ad(S^O,7);let j=0;i[j++]=o+E|0,i[j++]=a+I|0,i[j++]=c+_|0,i[j++]=l+A|0,i[j++]=h+S|0,i[j++]=u+C|0,i[j++]=d+N|0,i[j++]=f+M|0,i[j++]=p+x|0,i[j++]=g+O|0,i[j++]=m+P|0,i[j++]=y+T|0,i[j++]=n+R|0,i[j++]=b+D|0,i[j++]=w+k|0,i[j++]=v+L|0},{counterRight:!1,counterLength:4,allowShortKeys:!1}),av=new Uint8Array(16),aE=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(av.subarray(r))},aI=new Uint8Array(32);function a_(e,t,r,i,n){let s=e(t,r,aI),o=ab.create(s);n&&aE(o,n),aE(o,i);let a=new Uint8Array(16),c=at(a);an(c,0,BigInt(n?n.length:0),!0),an(c,8,BigInt(i.length),!0),o.update(a);let l=o.digest();return ao(s,a),l}let aA=((e,t)=>{function r(i,...n){if(o4(i),void 0!==e.nonceLength){let t=n[0];if(!t)throw Error("nonce / iv required");e.varSizeNonce?o4(t):o4(t,e.nonceLength)}let s=e.tagLength;s&&void 0!==n[1]&&o4(n[1]);let o=t(i,...n),a=(e,t)=>{if(void 0!==t){if(2!==e)throw Error("cipher output not supported");o4(t)}},c=!1;return{encrypt(e,t){if(c)throw Error("cannot encrypt() twice with same key + nonce");return c=!0,o4(e),a(o.encrypt.length,t),o.encrypt(e,t)},decrypt(e,t){if(o4(e),s&&e.length<s)throw Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,t),o.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},(e,t,r)=>({encrypt(i,n){let s=i.length;(n=ai(s+16,n,!1)).set(i);let o=n.subarray(0,-16);aw(e,t,o,o,1);let a=a_(aw,e,t,o,r);return n.set(a,s),ao(a),n},decrypt(i,n){n=ai(i.length-16,n,!1);let s=i.subarray(0,-16),o=i.subarray(-16),a=a_(aw,e,t,s,r);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}(o,a))throw Error("invalid tag");return n.set(i.subarray(0,-16)),aw(e,t,n,n,1),ao(a),n}}));class aS extends om{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ot(e);let r=og(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return or(this),this.iHash.update(e),this}digestInto(e){or(this),oe(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let aC=(e,t,r)=>new aS(e,t).update(r).digest();aC.create=(e,t)=>new aS(e,t);let aN=new Uint8Array([0]),aM=new Uint8Array,ax=(e,t,r,i,n)=>{var s;return function(e,t,r,i=32){if(ot(e),s7(i),i>255*e.outputLen)throw Error("Length should be <= 255*HashLen");let n=Math.ceil(i/e.outputLen);void 0===r&&(r=aM);let s=new Uint8Array(n*e.outputLen),o=aC.create(e,t),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let t=0;t<n;t++)aN[0]=t+1,a.update(0===t?aM:c).update(r).update(aN).digestInto(c),s.set(c,e.outputLen*t),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),aN.fill(0),s.slice(0,i)}(e,(s=r,ot(e),void 0===s&&(s=new Uint8Array(e.outputLen)),aC(e,og(s),og(t))),i,n)};class aO extends om{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ou(this.buffer)}update(e){or(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=og(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=ou(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){or(this),oi(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;(function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,l=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+l,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=ou(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let c=a/4,l=this.get();if(c>l.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,l[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let aP=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),aT=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),aR=new Uint32Array(64);class aD extends aO{constructor(){super(64,32,8,!1),this.A=0|aT[0],this.B=0|aT[1],this.C=0|aT[2],this.D=0|aT[3],this.E=0|aT[4],this.F=0|aT[5],this.G=0|aT[6],this.H=0|aT[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)aR[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=aR[e-15],r=aR[e-2],i=od(t,7)^od(t,18)^t>>>3,n=od(r,17)^od(r,19)^r>>>10;aR[e]=n+aR[e-7]+i+aR[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:c,H:l}=this;for(let e=0;e<64;e++){var h,u,d,f;let t=l+(od(o,6)^od(o,11)^od(o,25))+((h=o)&a^~h&c)+aP[e]+aR[e]|0,p=(od(r,2)^od(r,13)^od(r,22))+((u=r)&(d=i)^u&(f=n)^d&f)|0;l=c,c=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+p|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(r,i,n,s,o,a,c,l)}roundClean(){aR.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let ak=oy(()=>new aD),aL=BigInt(0);function aj(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function aU(e){if(!aj(e))throw Error("Uint8Array expected")}let aB=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),az={_0:48,_9:57,A:65,F:70,a:97,f:102};function a$(e){return e>=az._0&&e<=az._9?e-az._0:e>=az.A&&e<=az.F?e-(az.A-10):e>=az.a&&e<=az.f?e-(az.a-10):void 0}function aq(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=a$(e.charCodeAt(n)),s=a$(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function aF(e){return aU(e),function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?aL:BigInt("0x"+e)}(function(e){aU(e);let t="";for(let r=0;r<e.length;r++)t+=aB[e[r]];return t}(Uint8Array.from(e).reverse()))}function aH(e,t,r){let i;if("string"==typeof t)try{i=aq(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(aj(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(e+" of length "+r+" expected, got "+n);return i}let aW=e=>"bigint"==typeof e&&aL<=e;function aV(e,t,r,i){if(!(aW(t)&&aW(r)&&aW(i))||!(r<=t)||!(t<i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}let aK={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||aj(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)},aY=BigInt(0),aJ=BigInt(1);function aG(e,t){let r=e%t;return r>=aY?r:t+r}function aZ(e,t,r){let i=e;for(;t-- >aY;)i*=i,i%=r;return i}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);let aQ=BigInt(0),aX=BigInt(1),a0=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);let a1=BigInt(1),a2=BigInt(2),a3=BigInt(3),a8=BigInt(5);BigInt(8);let a5=function(e){let t=(function(e,t,r={}){let i=(t,r,i)=>{let n=aK[r];if("function"!=typeof n)throw Error("invalid validator function");let s=e[t];if(!(i&&void 0===s)&&!n(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0)}(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})),{P:r}=t,i=e=>aG(e,r),n=t.montgomeryBits,s=Math.ceil(n/8),o=t.nByteLength,a=t.adjustScalarBytes||(e=>e),c=t.powPminus2||(e=>(function(e,t,r){if(t<aY)throw Error("invalid exponent, negatives unsupported");if(r<=aY)throw Error("invalid modulus");if(r===aJ)return aY;let i=aJ;for(;t>aY;)t&aJ&&(i=i*e%r),e=e*e%r,t>>=aJ;return i})(e,r-BigInt(2),r));function l(e,t,r){let n=i(e*(t-r));return[t=i(t-n),r=i(r+n)]}let h=(t.a-BigInt(2))/BigInt(4);function u(e){var t;return aq(i(e).toString(16).padStart(2*s,"0")).reverse()}function d(e,t){let d=function(e,t){aV("u",e,aQ,r),aV("scalar",t,aQ,r);let s=aX,o=aQ,a=e,u=aX,d=aQ,f;for(let r=BigInt(n-1);r>=aQ;r--){let n=t>>r&aX;d^=n,s=(f=l(d,s,a))[0],a=f[1],o=(f=l(d,o,u))[0],u=f[1],d=n;let c=s+o,p=i(c*c),g=s-o,m=i(g*g),y=p-m,b=a+u,w=i((a-u)*c),v=i(b*g),E=w+v,I=w-v;a=i(E*E),u=i(e*i(I*I)),s=i(p*m),o=i(y*(p+i(h*y)))}return s=(f=l(d,s,a))[0],a=f[1],o=(f=l(d,o,u))[0],u=f[1],i(s*c(o))}(function(e){let t=aH("u coordinate",e,s);return 32===o&&(t[31]&=127),aF(t)}(t),function(e){let t=aH("scalar",e),r=t.length;if(r!==s&&r!==o)throw Error("invalid scalar, expected "+s+" or "+o+" bytes, got "+r);return aF(a(t))}(e));if(d===aQ)throw Error("invalid private or public key received");return u(d)}let f=u(t.Gu);function p(e){return d(e,f)}return{scalarMult:d,scalarMultBase:p,getSharedSecret:(e,t)=>d(e,t),getPublicKey:e=>p(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:f}}({P:a0,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{let{pow_p_5_8:t,b2:r}=function(e){let t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=e*e%a0*e%a0,o=aZ(s,a2,a0)*s%a0,a=aZ(o,a1,a0)*e%a0,c=aZ(a,a8,a0)*a%a0,l=aZ(c,t,a0)*c%a0,h=aZ(l,r,a0)*l%a0,u=aZ(h,i,a0)*h%a0,d=aZ(u,n,a0)*u%a0,f=aZ(d,n,a0)*u%a0,p=aZ(f,t,a0)*c%a0;return{pow_p_5_8:aZ(p,a2,a0)*e%a0,b2:s}}(e);return aG(aZ(t,a3,a0)*r,a0)},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},randomBytes:ob}),a6="base10",a4="base16",a9="base64pad",a7="base64url",ce="utf8";function ct(){return sP(ob(32),a4)}function cr(e){return sP(ak(sO(e,a4)),a4)}function ci(e){return sP(ak(sO(e,ce)),a4)}function cn(e){return Number(sP(e,a6))}function cs(e){let{encoding:t=a9}=e;if(2===cn(e.type))return sP(nl([e.type,e.sealed]),t);if(1===cn(e.type)){if(typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return sP(nl([e.type,e.senderPublicKey,e.iv,e.sealed]),t)}return sP(nl([e.type,e.iv,e.sealed]),t)}function co(e){let{encoded:t,encoding:r=a9}=e,i=sO(t,r),n=i.slice(0,1);if(1===cn(n)){let e=i.slice(1,33),t=i.slice(33,45);return{type:n,sealed:i.slice(45),iv:t,senderPublicKey:e}}if(2===cn(n))return{type:n,sealed:i.slice(1),iv:ob(12)};let s=i.slice(1,13);return{type:n,sealed:i.slice(13),iv:s}}function ca(e){let t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function cc(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function cl(e){return e?.relay||{protocol:"irn"}}function ch(e){let t=sR[e];if(typeof t>"u")throw Error(`Relay Protocol not supported: ${e}`);return t}function cu(e){var t;if(!e.includes("wc:")){let t=s9(e);null!=t&&t.includes("wc:")&&(e=t)}let r=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),i=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,r),s=e.substring(r+1,i).split("@"),o=new URLSearchParams("u">typeof i?e.substring(i):""),a={};o.forEach((e,t)=>{a[t]=e});let c="string"==typeof a.methods?a.methods.split(","):void 0;return{protocol:n,topic:(t=s[0]).startsWith("//")?t.substring(2):t,version:parseInt(s[1],10),symKey:a.symKey,relay:function(e,t="-"){let r={},i="relay"+t;return Object.keys(e).forEach(t=>{if(t.startsWith(i)){let n=t.replace(i,""),s=e[t];r[n]=s}}),r}(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function cd(e){let t=new URLSearchParams,r=function(e,t="-"){let r={};return Object.keys(e).forEach(i=>{e[i]&&(r["relay"+t+i]=e[i])}),r}(e.relay);Object.keys(r).sort().forEach(e=>{t.set(e,r[e])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));let i=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${i}`}function cf(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}function cp(e){let t=[];return e.forEach(e=>{let[r,i]=e.split(":");t.push(`${r}:${i}`)}),t}function cg(e){return e.includes(":")}function cm(e){return cg(e)?e.split(":")[0]:e}function cy(e,t){let r=function(e){let t={};return e?.forEach(e=>{var r;let[i,n]=e.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(e),null==(r=t[i].chains)||r.push(`${i}:${n}`)}),t}(t=t.map(e=>e.replace("did:pkh:","")));for(let[t,i]of Object.entries(r))i.methods?i.methods=s2(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return r}Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;let cb={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},cw={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function cv(e,t){let{message:r,code:i}=cw[e];return{message:t?`${r} ${t}`:r,code:i}}function cE(e,t){let{message:r,code:i}=cb[e];return{message:t?`${r} ${t}`:r,code:i}}function cI(e,t){return!!Array.isArray(e)&&(!("u">typeof t)||!e.length||e.every(t))}function c_(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function cA(e){return typeof e>"u"}function cS(e,t){return!!(t&&cA(e))||"string"==typeof e&&!!e.trim().length}function cC(e,t){return!!(t&&cA(e))||"number"==typeof e&&!isNaN(e)}function cN(e){return!!(cS(e,!1)&&e.includes(":"))&&2===e.split(":").length}function cM(e){let t=!0;return cI(e)?e.length&&(t=e.every(e=>cS(e,!1))):t=!1,t}function cx(e,t){let r=null;return Object.values(e).forEach(e=>{var i;let n;if(r)return;let s=(i=`${t}, namespace`,n=null,cM(e?.methods)?cM(e?.events)||(n=cE("UNSUPPORTED_EVENTS",`${i}, events should be an array of strings or empty array for no events`)):n=cE("UNSUPPORTED_METHODS",`${i}, methods should be an array of strings or empty array for no methods`),n);s&&(r=s)}),r}function cO(e,t){let r=null;if(e&&c_(e)){let i;let n=cx(e,t);n&&(r=n);let s=(i=null,Object.values(e).forEach(e=>{var r,n;let s;if(i)return;let o=(r=e?.accounts,n=`${t} namespace`,s=null,cI(r)?r.forEach(e=>{s||function(e){if(cS(e,!1)&&e.includes(":")){let t=e.split(":");if(3===t.length){let e=t[0]+":"+t[1];return!!t[2]&&cN(e)}}return!1}(e)||(s=cE("UNSUPPORTED_ACCOUNTS",`${n}, account ${e} should be a string and conform to "namespace:chainId:address" format`))}):s=cE("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),s);o&&(i=o)}),i);s&&(r=s)}else r=cv("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function cP(e){return cS(e.protocol,!0)}function cT(e){return"u">typeof e}function cR(e,t){return!(!cN(t)||!(function(e){let t=[];return Object.values(e).forEach(e=>{t.push(...cp(e.accounts))}),t})(e).includes(t))}function cD(e,t,r){let i=null,n=function(e){let t={};return Object.keys(e).forEach(r=>{var i;r.includes(":")?t[r]=e[r]:null==(i=e[r].chains)||i.forEach(i=>{t[i]={methods:e[r].methods,events:e[r].events}})}),t}(e),s=function(e){let t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{let i=cp(e[r].accounts);i?.forEach(i=>{t[i]={accounts:e[r].accounts.filter(e=>e.includes(`${i}:`)),methods:e[r].methods,events:e[r].events}})}}),t}(t),o=Object.keys(n),a=Object.keys(s),c=ck(Object.keys(e)),l=ck(Object.keys(t)),h=c.filter(e=>!l.includes(e));return h.length&&(i=cv("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${h.toString()}
      Received: ${Object.keys(t).toString()}`)),sV(o,a)||(i=cv("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(e=>{if(!e.includes(":")||i)return;let n=cp(t[e].accounts);n.includes(e)||(i=cv("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}
        Required: ${e}
        Approved: ${n.toString()}`))}),o.forEach(e=>{i||(sV(n[e].methods,s[e].methods)?sV(n[e].events,s[e].events)||(i=cv("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):i=cv("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))}),i}function ck(e){return[...new Set(e.map(e=>e.includes(":")?e.split(":")[0]:e))]}function cL(){let e=sq();return new Promise(t=>{switch(e){case sU.browser:t(s$()&&navigator?.onLine);break;case sU.reactNative:t(cj());break;case sU.node:default:t(!0)}})}async function cj(){if(sz()&&"u">typeof r.g&&null!=r.g&&r.g.NetInfo){let e=await (null==r.g?void 0:r.g.NetInfo.fetch());return e?.isConnected}return!0}let cU={};class cB{static get(e){return cU[e]}static set(e,t){cU[e]=t}static delete(e){delete cU[e]}}var cz=r(38979),c$=r(5276);let cq=()=>"u">typeof WebSocket||"u">typeof r.g&&"u">typeof r.g.WebSocket||"u">typeof window&&"u">typeof window.WebSocket||"u">typeof self&&"u">typeof self.WebSocket,cF=e=>e.split("?")[0],cH="u">typeof WebSocket?WebSocket:"u">typeof r.g&&"u">typeof r.g.WebSocket?r.g.WebSocket:"u">typeof window&&"u">typeof window.WebSocket?window.WebSocket:"u">typeof self&&"u">typeof self.WebSocket?self.WebSocket:r(16854);class cW{constructor(e){if(this.url=e,this.events=new ee.EventEmitter,this.registering=!1,!(0,c$.isWsUrl)(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return"u">typeof this.socket}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(Error("Connection already closed"));return}this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send((0,eO.u)(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!(0,c$.isWsUrl)(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(Error("WebSocket connection is missing or invalid"));e(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{let i=(0,c$.isReactNative)()?void 0:{rejectUnauthorized:!(0,c$.isLocalhostUrl)(e)},n=new cH(e,[],i);cq()?n.onerror=e=>{r(this.emitError(e.error))}:n.on("error",e=>{r(this.emitError(e))}),n.onopen=()=>{this.onOpen(n),t(n)}})}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,eO.D)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let r=this.parseError(t),i=r.message||r.toString(),n=(0,c$.formatJsonRpcError)(e,i);this.events.emit("payload",n)}parseError(e,t=this.url){return(0,c$.parseConnectionError)(e,cF(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){let t=this.parseError(Error(e?.message||`WebSocket connection failed for host: ${cF(this.url)}`));return this.events.emit("register_error",t),t}}var cV=r(15586),cK=r.n(cV);let cY="core",cJ=`wc@2:${cY}:`,cG={logger:"error"},cZ={database:":memory:"},cQ="client_ed25519_seed",cX=er.ONE_DAY,c0=er.SIX_HOURS,c1="wss://relay.walletconnect.org",c2={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},c3={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},c8="2.19.0",c5={link_mode:"link_mode",relay:"relay"},c6="WALLETCONNECT_LINK_MODE_APPS",c4={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},c9=1e3*er.FIVE_SECONDS,c7={wc_pairingDelete:{req:{ttl:er.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:er.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:er.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:er.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:er.ONE_DAY,prompt:!1,tag:0},res:{ttl:er.ONE_DAY,prompt:!1,tag:0}}},le={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},lt={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},lr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},li="https://verify.walletconnect.org",ln=`${li}/v3`,ls=["https://verify.walletconnect.com",li],lo={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal"},la={no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_listener_not_found:"proposal_listener_not_found"},lc={session_approve_started:"session_approve_started",session_namespaces_validation_success:"session_namespaces_validation_success",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ll={no_internet_connection:"no_internet_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},lh={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},lu={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"};var ld=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function u(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===c;)i++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var h=r[e.charCodeAt(t)];if(255===h)return;for(var u=0,d=s-1;(0!==h||u<n)&&-1!==d;d--,u++)h+=a*o[d]>>>0,o[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw Error("Non-zero carry");n=u,t++}if(" "!==e[t]){for(var f=s-n;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(i+(s-f)),g=i;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*h+1>>>0,l=new Uint8Array(o);n!==s;){for(var u=t[n],d=0,f=o-1;(0!==u||d<i)&&-1!==f;f--,d++)u+=256*l[f]>>>0,l[f]=u%a>>>0,u=u/a>>>0;if(0!==u)throw Error("Non-zero carry");i=d,n++}for(var p=o-i;p!==o&&0===l[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:u,decode:function(e){var r=u(e);if(r)return r;throw Error(`Non-${t} character`)}}};let lf=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},lp=e=>new TextEncoder().encode(e),lg=e=>new TextDecoder().decode(e);class lm{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ly{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return lw(this,e)}}class lb{constructor(e){this.decoders=e}or(e){return lw(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let lw=(e,t)=>new lb({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class lv{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new lm(e,t,r),this.decoder=new ly(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let lE=({name:e,prefix:t,encode:r,decode:i})=>new lv(e,t,r,i),lI=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=ld(r,t);return lE({prefix:e,name:t,encode:i,decode:e=>lf(n(e))})},l_=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,l=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);c=c<<r|s,(a+=r)>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw SyntaxError("Unexpected end of data");return o},lA=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},lS=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>lE({prefix:t,name:e,encode:e=>lA(e,i,r),decode:t=>l_(t,i,r,e)});var lC=Object.freeze({__proto__:null,identity:lE({prefix:"\0",name:"identity",encode:e=>lg(e),decode:e=>lp(e)})}),lN=Object.freeze({__proto__:null,base2:lS({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),lM=Object.freeze({__proto__:null,base8:lS({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),lx=Object.freeze({__proto__:null,base10:lI({prefix:"9",name:"base10",alphabet:"0123456789"})}),lO=Object.freeze({__proto__:null,base16:lS({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:lS({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});let lP=lS({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),lT=lS({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lR=lS({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lD=lS({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lk=lS({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),lL=lS({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});var lj=Object.freeze({__proto__:null,base32:lP,base32upper:lT,base32pad:lR,base32padupper:lD,base32hex:lk,base32hexupper:lL,base32hexpad:lS({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:lS({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:lS({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),lU=Object.freeze({__proto__:null,base36:lI({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:lI({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),lB=Object.freeze({__proto__:null,base58btc:lI({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:lI({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});let lz=lS({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});var l$=Object.freeze({__proto__:null,base64:lz,base64pad:lS({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:lS({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:lS({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let lq=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),lF=lq.reduce((e,t,r)=>(e[r]=t,e),[]),lH=lq.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var lW=Object.freeze({__proto__:null,base256emoji:lE({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=lF[t],"")},decode:function(e){let t=[];for(let r of e){let e=lH[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})});function lV(e,t){var r,i=0,t=t||0,n=0,s=t,o=e.length;do{if(s>=o)throw lV.bytes=0,RangeError("Could not decode varint");r=e[s++],i+=n<28?(127&r)<<n:(127&r)*Math.pow(2,n),n+=7}while(r>=128);return lV.bytes=s-t,i}var lK=function e(t,r,i){r=r||[],i=i||0;for(var n=i;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r};let lY=(e,t,r=0)=>(lK(e,t,r),t),lJ=e=>e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10,lG=(e,t)=>{let r=t.byteLength,i=lJ(e),n=i+lJ(r),s=new Uint8Array(n+r);return lY(e,s,0),lY(r,s,i),s.set(t,n),new lZ(e,r,t,s)};class lZ{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let lQ=({name:e,code:t,encode:r})=>new lX(e,t,r);class lX{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?lG(this.code,t):t.then(e=>lG(this.code,e))}throw Error("Unknown type, must be binary type")}}let l0=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var l1=Object.freeze({__proto__:null,sha256:lQ({name:"sha2-256",code:18,encode:l0("SHA-256")}),sha512:lQ({name:"sha2-512",code:19,encode:l0("SHA-512")})}),l2=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:lf,digest:e=>lG(0,lf(e))}});new TextEncoder,new TextDecoder;let l3={...lC,...lN,...lM,...lx,...lO,...lj,...lU,...lB,...l$,...lW};function l8(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...l1,...l2});let l5=l8("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),l6=l8("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),l4={utf8:l5,"utf-8":l5,hex:l3.base16,latin1:l6,ascii:l6,binary:l6,...l3};var l9=Object.defineProperty,l7=(e,t,r)=>t in e?l9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,he=(e,t,r)=>l7(e,"symbol"!=typeof t?t+"":t,r);class ht{constructor(e,t){this.core=e,this.logger=t,he(this,"keychain",new Map),he(this,"name","keychain"),he(this,"version","0.3"),he(this,"initialized",!1),he(this,"storagePrefix",cJ),he(this,"init",async()=>{if(!this.initialized){let e=await this.getKeyChain();"u">typeof e&&(this.keychain=e),this.initialized=!0}}),he(this,"has",e=>(this.isInitialized(),this.keychain.has(e))),he(this,"set",async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()}),he(this,"get",e=>{this.isInitialized();let t=this.keychain.get(e);if(typeof t>"u"){let{message:t}=cv("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}),he(this,"del",async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()}),this.core=e,this.logger=(0,ez.Ep)(t,this.name)}get context(){return(0,ez.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,sK(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?sY(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=cv("NOT_INITIALIZED",this.name);throw Error(e)}}}var hr=Object.defineProperty,hi=(e,t,r)=>t in e?hr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hn=(e,t,r)=>hi(e,"symbol"!=typeof t?t+"":t,r);class hs{constructor(e,t,r){this.core=e,this.logger=t,hn(this,"name","crypto"),hn(this,"keychain"),hn(this,"randomSessionIdentifier",ct()),hn(this,"initialized",!1),hn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),hn(this,"hasKeys",e=>(this.isInitialized(),this.keychain.has(e))),hn(this,"getClientId",async()=>(this.isInitialized(),ir(is(await this.getClientSeed()).publicKey))),hn(this,"generateKeyPair",()=>{this.isInitialized();let e=function(){let e=a5.utils.randomPrivateKey(),t=a5.getPublicKey(e);return{privateKey:sP(e,a4),publicKey:sP(t,a4)}}();return this.setPrivateKey(e.publicKey,e.privateKey)}),hn(this,"signJWT",async e=>{this.isInitialized();let t=is(await this.getClientSeed()),r=this.randomSessionIdentifier;return await io(r,e,cX,t)}),hn(this,"generateSharedKey",(e,t,r)=>{var i;this.isInitialized();let n=(i=this.getPrivateKey(e),sP(ax(ak,a5.getSharedSecret(sO(i,a4),sO(t,a4)),void 0,void 0,32),a4));return this.setSymKey(n,r)}),hn(this,"setSymKey",async(e,t)=>{this.isInitialized();let r=t||cr(e);return await this.keychain.set(r,e),r}),hn(this,"deleteKeyPair",async e=>{this.isInitialized(),await this.keychain.del(e)}),hn(this,"deleteSymKey",async e=>{this.isInitialized(),await this.keychain.del(e)}),hn(this,"encode",async(e,t,r)=>{this.isInitialized();let i=ca(r),n=(0,eO.u)(t);if(2===i.type)return function(e,t){let r=sO("2",a6),i=ob(12);return cs({type:r,sealed:sO(e,ce),iv:i,encoding:t})}(n,r?.encoding);if(cc(i)){let t=i.senderPublicKey,r=i.receiverPublicKey;e=await this.generateSharedKey(t,r)}let s=this.getSymKey(e),{type:o,senderPublicKey:a}=i;return function(e){var t;let r=(t="u">typeof e.type?e.type:0,sO(`${t}`,a6));if(1===cn(r)&&typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let i="u">typeof e.senderPublicKey?sO(e.senderPublicKey,a4):void 0,n="u">typeof e.iv?sO(e.iv,a4):ob(12);return cs({type:r,sealed:aA(sO(e.symKey,a4),n).encrypt(sO(e.message,ce)),iv:n,senderPublicKey:i,encoding:e.encoding})}({type:o,symKey:s,message:n,senderPublicKey:a,encoding:r?.encoding})}),hn(this,"decode",async(e,t,r)=>{this.isInitialized();let i=function(e,t){let r=co({encoded:e,encoding:t?.encoding});return ca({type:cn(r.type),senderPublicKey:"u">typeof r.senderPublicKey?sP(r.senderPublicKey,a4):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(2===i.type){let e=function(e,t){let{sealed:r}=co({encoded:e,encoding:t});return sP(r,ce)}(t,r?.encoding);return(0,eO.D)(e)}if(cc(i)){let t=i.receiverPublicKey,r=i.senderPublicKey;e=await this.generateSharedKey(t,r)}try{let i=this.getSymKey(e),n=function(e){let t=sO(e.symKey,a4),{sealed:r,iv:i}=co(e),n=aA(t,i).decrypt(r);if(null===n)throw Error("Failed to decrypt");return sP(n,ce)}({symKey:i,encoded:t,encoding:r?.encoding});return(0,eO.D)(n)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}}),hn(this,"getPayloadType",(e,t=a9)=>cn(co({encoded:e,encoding:t}).type)),hn(this,"getPayloadSenderPublicKey",(e,t=a9)=>{let r=co({encoded:e,encoding:t});return r.senderPublicKey?sP(r.senderPublicKey,a4):void 0}),this.core=e,this.logger=(0,ez.Ep)(t,this.name),this.keychain=r||new ht(this.core,this.logger)}get context(){return(0,ez.Fd)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(cQ)}catch{e=ct(),await this.keychain.set(cQ,e)}return function(e,t="utf8"){let r=l4[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=cv("NOT_INITIALIZED",this.name);throw Error(e)}}}var ho=Object.defineProperty,ha=(e,t,r)=>t in e?ho(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hc=(e,t,r)=>ha(e,"symbol"!=typeof t?t+"":t,r);class hl extends eJ{constructor(e,t){super(e,t),this.logger=e,this.core=t,hc(this,"messages",new Map),hc(this,"name","messages"),hc(this,"version","0.3"),hc(this,"initialized",!1),hc(this,"storagePrefix",cJ),hc(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let e=await this.getRelayerMessages();"u">typeof e&&(this.messages=e),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}}),hc(this,"set",async(e,t)=>{this.isInitialized();let r=ci(t),i=this.messages.get(e);return typeof i>"u"&&(i={}),"u">typeof i[r]||(i[r]=t,this.messages.set(e,i),await this.persist()),r}),hc(this,"get",e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t}),hc(this,"has",(e,t)=>(this.isInitialized(),"u">typeof this.get(e)[ci(t)])),hc(this,"del",async e=>{this.isInitialized(),this.messages.delete(e),await this.persist()}),this.logger=(0,ez.Ep)(e,this.name),this.core=t}get context(){return(0,ez.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,sK(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?sY(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:e}=cv("NOT_INITIALIZED",this.name);throw Error(e)}}}var hh=Object.defineProperty,hu=Object.defineProperties,hd=Object.getOwnPropertyDescriptors,hf=Object.getOwnPropertySymbols,hp=Object.prototype.hasOwnProperty,hg=Object.prototype.propertyIsEnumerable,hm=(e,t,r)=>t in e?hh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hy=(e,t)=>{for(var r in t||(t={}))hp.call(t,r)&&hm(e,r,t[r]);if(hf)for(var r of hf(t))hg.call(t,r)&&hm(e,r,t[r]);return e},hb=(e,t)=>hu(e,hd(t)),hw=(e,t,r)=>hm(e,"symbol"!=typeof t?t+"":t,r);class hv extends eG{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,hw(this,"events",new ee.EventEmitter),hw(this,"name","publisher"),hw(this,"queue",new Map),hw(this,"publishTimeout",(0,er.toMiliseconds)(er.ONE_MINUTE)),hw(this,"initialPublishTimeout",(0,er.toMiliseconds)(15*er.ONE_SECOND)),hw(this,"needsTransportRestart",!1),hw(this,"publish",async(e,t,r)=>{var i;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});let n=r?.ttl||c0,s=cl(r),o=r?.prompt||!1,a=r?.tag||0,c=r?.id||(0,c$.getBigIntRpcId)().toString(),l={topic:e,message:t,opts:{ttl:n,relay:s,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}},h=`Failed to publish payload, please try again. id:${c} tag:${a}`;try{let i=new Promise(async i=>{let s=({id:e})=>{l.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(c2.publish,s),i(l))};this.relayer.events.on(c2.publish,s);let h=sG(new Promise((i,s)=>{this.rpcPublish({topic:e,message:t,ttl:n,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}).then(i).catch(e=>{this.logger.warn(e,e?.message),s(e)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${c} tag:${a}`);try{await h,this.events.removeListener(c2.publish,s)}catch(e){this.queue.set(c,hb(hy({},l),{attempt:1})),this.logger.warn(e,e?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:r}}),await sG(i,this.publishTimeout,h)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(i=r?.internal)&&i.throwOnFailedPublish)throw e}finally{this.queue.delete(c)}}),hw(this,"on",(e,t)=>{this.events.on(e,t)}),hw(this,"once",(e,t)=>{this.events.once(e,t)}),hw(this,"off",(e,t)=>{this.events.off(e,t)}),hw(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.relayer=e,this.logger=(0,ez.Ep)(t,this.name),this.registerEventListeners()}get context(){return(0,ez.Fd)(this.logger)}async rpcPublish(e){var t,r,i,n;let{topic:s,message:o,ttl:a=c0,prompt:c,tag:l,id:h,attestation:u,tvf:d}=e,f={method:ch(cl().protocol).publish,params:hy({topic:s,message:o,ttl:a,prompt:c,tag:l,attestation:u},d),id:h};cA(null==(t=f.params)?void 0:t.prompt)&&(null==(r=f.params)||delete r.prompt),cA(null==(i=f.params)?void 0:i.tag)&&(null==(n=f.params)||delete n.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:f});let p=await this.relayer.request(f);return this.relayer.events.emit(c2.publish,e),this.logger.debug("Successfully Published Payload"),p}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{let r=e.attempt+1;this.queue.set(t,hb(hy({},e),{attempt:r}));let{topic:i,message:n,opts:s,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(hb(hy({},e),{topic:i,message:n,ttl:s.ttl,prompt:s.prompt,tag:s.tag,id:s.id,attestation:o,tvf:s.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(eo,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(c2.connection_stalled);return}this.checkQueue()}),this.relayer.on(c2.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var hE=Object.defineProperty,hI=(e,t,r)=>t in e?hE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h_=(e,t,r)=>hI(e,"symbol"!=typeof t?t+"":t,r);class hA{constructor(){h_(this,"map",new Map),h_(this,"set",(e,t)=>{let r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),h_(this,"get",e=>this.map.get(e)||[]),h_(this,"exists",(e,t)=>this.get(e).includes(t)),h_(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let r=this.get(e);if(!this.exists(e,t))return;let i=r.filter(e=>e!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),h_(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var hS=Object.defineProperty,hC=Object.defineProperties,hN=Object.getOwnPropertyDescriptors,hM=Object.getOwnPropertySymbols,hx=Object.prototype.hasOwnProperty,hO=Object.prototype.propertyIsEnumerable,hP=(e,t,r)=>t in e?hS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hT=(e,t)=>{for(var r in t||(t={}))hx.call(t,r)&&hP(e,r,t[r]);if(hM)for(var r of hM(t))hO.call(t,r)&&hP(e,r,t[r]);return e},hR=(e,t)=>hC(e,hN(t)),hD=(e,t,r)=>hP(e,"symbol"!=typeof t?t+"":t,r);class hk extends eX{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,hD(this,"subscriptions",new Map),hD(this,"topicMap",new hA),hD(this,"events",new ee.EventEmitter),hD(this,"name","subscription"),hD(this,"version","0.3"),hD(this,"pending",new Map),hD(this,"cached",[]),hD(this,"initialized",!1),hD(this,"pendingSubscriptionWatchLabel","pending_sub_watch_label"),hD(this,"pollingInterval",20),hD(this,"storagePrefix",cJ),hD(this,"subscribeTimeout",(0,er.toMiliseconds)(er.ONE_MINUTE)),hD(this,"initialSubscribeTimeout",(0,er.toMiliseconds)(15*er.ONE_SECOND)),hD(this,"clientId"),hD(this,"batchSubscribeTopicsLimit",500),hD(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),hD(this,"subscribe",async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{let r=cl(t),i={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,i);let n=await this.rpcSubscribe(e,r,t);return"string"==typeof n&&(this.onSubscribe(n,i),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),n}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}}),hD(this,"unsubscribe",async(e,t)=>{this.isInitialized(),"u">typeof t?.id?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)}),hD(this,"isSubscribed",async e=>{if(this.topics.includes(e))return!0;let t=`${this.pendingSubscriptionWatchLabel}_${e}`;return await new Promise((r,i)=>{let n=new er.Watch;n.start(t);let s=setInterval(()=>{(!this.pending.has(e)&&this.topics.includes(e)||this.cached.some(t=>t.topic===e))&&(clearInterval(s),n.stop(t),r(!0)),n.elapsed(t)>=c9&&(clearInterval(s),n.stop(t),i(Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)}),hD(this,"on",(e,t)=>{this.events.on(e,t)}),hD(this,"once",(e,t)=>{this.events.once(e,t)}),hD(this,"off",(e,t)=>{this.events.off(e,t)}),hD(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),hD(this,"start",async()=>{await this.onConnect()}),hD(this,"stop",async()=>{await this.onDisconnect()}),hD(this,"restart",async()=>{await this.restore(),await this.onRestart()}),hD(this,"checkPending",async()=>{if(0===this.pending.size&&(!this.initialized||!this.relayer.connected))return;let e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}),hD(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(eo,async()=>{await this.checkPending()}),this.events.on(c4.created,async e=>{let t=c4.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(c4.deleted,async e=>{let t=c4.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}),this.relayer=e,this.logger=(0,ez.Ep)(t,this.name),this.clientId=""}get context(){return(0,ez.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){let r=this.topicMap.get(e);await Promise.all(r.map(async r=>await this.unsubscribeById(e,r,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{let i=cl(r);await this.restartToComplete({topic:e,id:t,relay:i}),await this.rpcUnsubscribe(e,t,i);let n=cE("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var i;r&&r?.transportType!==c5.relay||await this.restartToComplete({topic:e,id:e,relay:t});let n={method:ch(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s=null==(i=r?.internal)?void 0:i.throwOnFailedPublish;try{let t=await this.getSubscriptionId(e);if(r?.transportType===c5.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(n).catch(e=>this.logger.warn(e))},(0,er.toMiliseconds)(er.ONE_SECOND)),t;let i=new Promise(async t=>{let r=i=>{i.topic===e&&(this.events.removeListener(c4.created,r),t(i.id))};this.events.on(c4.created,r);try{let i=await sG(new Promise((e,t)=>{this.relayer.request(n).catch(e=>{this.logger.warn(e,e?.message),t(e)}).then(e)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(c4.created,r),t(i)}catch{}}),o=await sG(i,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!o&&s)throw Error(`Subscribing to ${e} failed, please try again`);return o?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(c2.connection_stalled),s)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;let t={method:ch(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await sG(new Promise(e=>{this.relayer.request(t).catch(e=>this.logger.warn(e)).then(e)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(c2.connection_stalled)}}async rpcBatchFetchMessages(e){let t;if(!e.length)return;let r={method:ch(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{t=await await sG(new Promise((e,t)=>{this.relayer.request(r).catch(e=>{this.logger.warn(e),t(e)}).then(e)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(c2.connection_stalled)}return t}rpcUnsubscribe(e,t,r){let i={method:ch(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,hR(hT({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,hT({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,hT({},t)),this.topicMap.set(t.topic,e),this.events.emit(c4.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:t}=cv("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(c4.deleted,hR(hT({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(c4.sync)}async onRestart(){if(this.cached.length){let e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){let t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(c4.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:e}=cv("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async e=>hR(hT({},e),{id:await this.getSubscriptionId(e.topic)})))))}async batchFetchMessages(e){var t;if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);let r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await (t=(0,er.toMiliseconds)(er.ONE_SECOND),new Promise(e=>setTimeout(e,t))),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){let{message:e}=cv("NOT_INITIALIZED",this.name);throw Error(e)}}async restartToComplete(e){this.relayer.connected||this.relayer.connecting||(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return ci(e+await this.getClientId())}}var hL=Object.defineProperty,hj=Object.getOwnPropertySymbols,hU=Object.prototype.hasOwnProperty,hB=Object.prototype.propertyIsEnumerable,hz=(e,t,r)=>t in e?hL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h$=(e,t)=>{for(var r in t||(t={}))hU.call(t,r)&&hz(e,r,t[r]);if(hj)for(var r of hj(t))hB.call(t,r)&&hz(e,r,t[r]);return e},hq=(e,t,r)=>hz(e,"symbol"!=typeof t?t+"":t,r);class hF extends eZ{constructor(e){super(e),hq(this,"protocol","wc"),hq(this,"version",2),hq(this,"core"),hq(this,"logger"),hq(this,"events",new ee.EventEmitter),hq(this,"provider"),hq(this,"messages"),hq(this,"subscriber"),hq(this,"publisher"),hq(this,"name","relayer"),hq(this,"transportExplicitlyClosed",!1),hq(this,"initialized",!1),hq(this,"connectionAttemptInProgress",!1),hq(this,"relayUrl"),hq(this,"projectId"),hq(this,"packageName"),hq(this,"bundleId"),hq(this,"hasExperiencedNetworkDisruption",!1),hq(this,"pingTimeout"),hq(this,"heartBeatTimeout",(0,er.toMiliseconds)(er.THIRTY_SECONDS+er.FIVE_SECONDS)),hq(this,"reconnectTimeout"),hq(this,"connectPromise"),hq(this,"reconnectInProgress",!1),hq(this,"requestsInFlight",[]),hq(this,"connectTimeout",(0,er.toMiliseconds)(15*er.ONE_SECOND)),hq(this,"request",async e=>{var t,r;this.logger.debug("Publishing Request Payload");let i=e.id||(0,c$.getBigIntRpcId)().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");let n=`${i}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(n);let s=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter(e=>e!==n),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${i}`),e}}),hq(this,"resetPingTimeout",()=>{if(sB())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var e,t,r;this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)||r.terminate()},this.heartBeatTimeout)}catch(e){this.logger.warn(e,e?.message)}}),hq(this,"onPayloadHandler",e=>{this.onProviderPayload(e),this.resetPingTimeout()}),hq(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \uD83D\uDEDC"),this.startPingTimeout(),this.events.emit(c2.connect)}),hq(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \uD83D\uDED1"),this.requestsInFlight=[],this.onProviderDisconnect()}),hq(this,"onProviderErrorHandler",e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit(c2.error,e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),hq(this,"registerProviderListeners",()=>{this.provider.on(c3.payload,this.onPayloadHandler),this.provider.on(c3.connect,this.onConnectHandler),this.provider.on(c3.disconnect,this.onDisconnectHandler),this.provider.on(c3.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger="u">typeof e.logger&&"string"!=typeof e.logger?(0,ez.Ep)(e.logger,this.name):(0,ez.gw)((0,ez.jI)({level:e.logger||"error"})),this.messages=new hl(this.logger,e.core),this.subscriber=new hk(this,this.logger),this.publisher=new hv(this,this.logger),this.relayUrl=e?.relayUrl||c1,this.projectId=e.projectId,sz()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)&&(null==r.g?void 0:r.g.Platform.OS)==="android"?this.packageName=sF():sz()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)&&(null==r.g?void 0:r.g.Platform.OS)==="ios"&&(this.bundleId=sF()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return(0,ez.Fd)(this.logger)}get connected(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===1}get connecting(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===0||void 0!==this.connectPromise}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:c5.relay})}async subscribe(e,t){var r,i,n;this.isInitialized(),null!=t&&t.transportType&&t?.transportType!=="relay"||await this.toEstablishConnection();let s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(i=t?.internal)?void 0:i.throwOnFailedPublish),o=(null==(n=this.subscriber.topicMap.get(e))?void 0:n[0])||"",a,c=t=>{t.topic===e&&(this.subscriber.off(c4.created,c),a())};return await Promise.all([new Promise(e=>{a=e,this.subscriber.on(c4.created,c)}),new Promise(async(r,i)=>{o=await this.subscriber.subscribe(e,h$({internal:{throwOnFailedPublish:s}},t)).catch(e=>{s&&i(e)})||o,r()})]),o}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await sG(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await cL())throw Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}let t=e.sort((e,t)=>e.publishedAt-t.publishedAt);for(let e of(this.logger.debug(`Batch of ${t.length} message events sorted`),t))try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){let{topic:r}=e;if(!t.sessionExists){let e=sX(er.FIVE_MINUTES);await this.core.pairing.pairings.set(r,{topic:r,expiry:e,relay:{protocol:"irn"},active:!1})}this.events.emit(c2.message,e),await this.recordMessageEvent(e)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(e,t)=>{let r=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(c3.disconnect,r),await sG(new Promise((e,t)=>{this.provider.connect().then(e).catch(t)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(e=>{t(e)}).finally(()=>{this.provider.off(c3.disconnect,r),clearTimeout(this.reconnectTimeout)}),await new Promise(async(e,t)=>{let r=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(c3.disconnect,r),await this.subscriber.start().then(e).catch(t).finally(()=>{this.provider.off(c3.disconnect,r)})}),this.hasExperiencedNetworkDisruption=!1,e()})}catch(e){await this.subscriber.stop(),this.logger.warn({},e.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(e=>setTimeout(e,(0,er.toMiliseconds)(1*t))),t++}}startPingTimeout(){var e,t,r,i,n;if(sB())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(n=null==(i=null==(r=this.provider)?void 0:r.connection)?void 0:i.socket)||n.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new cz.r(new cW(function({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){let l=r.split("?"),h=sW(e,t,i),u=function(e,t){let r=new URLSearchParams(e);for(let e of Object.keys(t).sort())if(t.hasOwnProperty(e)){let i=t[e];void 0!==i&&r.set(e,i)}return r.toString()}(l[1]||"",{auth:n,ua:h,projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0});return l[0]+"?"+u}({sdkVersion:c8,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e){let{topic:t,message:r}=e;await this.messages.set(t,r)}async shouldIgnoreMessageEvent(e){let{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.warn(`Ignoring message for non-subscribed topic ${t}`),!0;let i=this.messages.has(t,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,c$.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:r,message:i,publishedAt:n,attestation:s}=t.data,o={topic:r,message:i,publishedAt:n,transportType:c5.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(h$({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else(0,c$.isJsonRpcResponse)(e)&&this.events.emit(c2.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(c2.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){let t=(0,c$.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(c3.payload,this.onPayloadHandler),this.provider.off(c3.connect,this.onConnectHandler),this.provider.off(c3.disconnect,this.onDisconnectHandler),this.provider.off(c3.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await cL();!function(e){switch(sq()){case sU.browser:!sz()&&s$()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)));break;case sU.reactNative:sz()&&"u">typeof r.g&&null!=r.g&&r.g.NetInfo&&r.g?.NetInfo.addEventListener(t=>e(t?.isConnected));case sU.node:}}(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(e=>this.logger.error(e,e?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(c2.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},(0,er.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){let{message:e}=cv("NOT_INITIALIZED",this.name);throw Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),this.connected||await this.connect()}}var hH=Object.defineProperty,hW=Object.getOwnPropertySymbols,hV=Object.prototype.hasOwnProperty,hK=Object.prototype.propertyIsEnumerable,hY=(e,t,r)=>t in e?hH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hJ=(e,t)=>{for(var r in t||(t={}))hV.call(t,r)&&hY(e,r,t[r]);if(hW)for(var r of hW(t))hK.call(t,r)&&hY(e,r,t[r]);return e},hG=(e,t,r)=>hY(e,"symbol"!=typeof t?t+"":t,r);class hZ extends eQ{constructor(e,t,r,i=cJ,n){super(e,t,r,i),this.core=e,this.logger=t,this.name=r,hG(this,"map",new Map),hG(this,"version","0.3"),hG(this,"cached",[]),hG(this,"initialized",!1),hG(this,"getKey"),hG(this,"storagePrefix",cJ),hG(this,"recentlyDeleted",[]),hG(this,"recentlyDeletedLimit",200),hG(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>{var t;this.getKey&&null!==e&&!cA(e)?this.map.set(this.getKey(e),e):(null==(t=e?.proposer)?void 0:t.publicKey)?this.map.set(e.id,e):e?.topic&&this.map.set(e.topic,e)}),this.cached=[],this.initialized=!0)}),hG(this,"set",async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())}),hG(this,"get",e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e))),hG(this,"getAll",e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(r=>cK()(t[r],e[r]))):this.values)),hG(this,"update",async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});let r=hJ(hJ({},this.getData(e)),t);this.map.set(e,r),await this.persist()}),hG(this,"delete",async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())}),this.logger=(0,ez.Ep)(t,this.name),this.storagePrefix=i,this.getKey=n}get context(){return(0,ez.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){let{message:t}=cv("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),Error(t)}let{message:t}=cv("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:e}=cv("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=cv("NOT_INITIALIZED",this.name);throw Error(e)}}}var hQ=Object.defineProperty,hX=(e,t,r)=>t in e?hQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h0=(e,t,r)=>hX(e,"symbol"!=typeof t?t+"":t,r);class h1{constructor(e,t){this.core=e,this.logger=t,h0(this,"name","pairing"),h0(this,"version","0.3"),h0(this,"events",new(et())),h0(this,"pairings"),h0(this,"initialized",!1),h0(this,"storagePrefix",cJ),h0(this,"ignoredPayloadTypes",[1]),h0(this,"registeredMethods",[]),h0(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),h0(this,"register",({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]}),h0(this,"create",async e=>{this.isInitialized();let t=ct(),r=await this.core.crypto.setSymKey(t),i=sX(er.FIVE_MINUTES),n={protocol:"irn"},s={topic:r,expiry:i,relay:n,active:!1,methods:e?.methods},o=cd({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:n,expiryTimestamp:i,methods:e?.methods});return this.events.emit(le.create,s),this.core.expirer.set(r,i),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:o}}),h0(this,"pair",async e=>{let t;this.isInitialized();let r=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:[lo.pairing_started]}});this.isValidPair(e,r);let{topic:i,symKey:n,relay:s,expiryTimestamp:o,methods:a}=cu(e.uri);if(r.props.properties.topic=i,r.addTrace(lo.pairing_uri_validation_success),r.addTrace(lo.pairing_uri_not_expired),this.pairings.keys.includes(i)){if(t=this.pairings.get(i),r.addTrace(lo.existing_pairing),t.active)throw r.setError(la.active_pairing_already_exists),Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);r.addTrace(lo.pairing_not_expired)}let c=o||sX(er.FIVE_MINUTES),l={topic:i,relay:s,expiry:c,active:!1,methods:a};this.core.expirer.set(i,c),await this.pairings.set(i,l),r.addTrace(lo.store_new_pairing),e.activatePairing&&await this.activate({topic:i}),this.events.emit(le.create,l),r.addTrace(lo.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(n,i),r.addTrace(lo.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{r.setError(la.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:s})}catch(e){throw r.setError(la.subscribe_pairing_topic_failure),e}return r.addTrace(lo.subscribe_pairing_topic_success),l}),h0(this,"activate",async({topic:e})=>{this.isInitialized();let t=sX(er.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})}),h0(this,"ping",async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");let{topic:t}=e;if(this.pairings.keys.includes(t)){let e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:i,reject:n}=sJ();this.events.once(s1("pairing_ping",e),({error:e})=>{e?n(e):i()}),await r()}}),h0(this,"updateExpiry",async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})}),h0(this,"updateMetadata",async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})}),h0(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),h0(this,"disconnect",async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",cE("USER_DISCONNECTED")),await this.deletePairing(t))}),h0(this,"formatUriFromPairing",e=>{this.isInitialized();let{topic:t,relay:r,expiry:i,methods:n}=e,s=this.core.crypto.keychain.get(t);return cd({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:i,methods:n})}),h0(this,"sendRequest",async(e,t,r)=>{let i=(0,c$.formatJsonRpcRequest)(t,r),n=await this.core.crypto.encode(e,i),s=c7[t].req;return this.core.history.set(e,i),this.core.relayer.publish(e,n,s),i.id}),h0(this,"sendResult",async(e,t,r)=>{let i=(0,c$.formatJsonRpcResult)(e,r),n=await this.core.crypto.encode(t,i),s=c7[(await this.core.history.get(t,e)).request.method].res;await this.core.relayer.publish(t,n,s),await this.core.history.resolve(i)}),h0(this,"sendError",async(e,t,r)=>{let i=(0,c$.formatJsonRpcError)(e,r),n=await this.core.crypto.encode(t,i),s=(await this.core.history.get(t,e)).request.method,o=c7[s]?c7[s].res:c7.unregistered_method.res;await this.core.relayer.publish(t,n,o),await this.core.history.resolve(i)}),h0(this,"deletePairing",async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,cE("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])}),h0(this,"cleanup",async()=>{let e=this.pairings.getAll().filter(e=>s0(e.expiry));await Promise.all(e.map(e=>this.deletePairing(e.topic)))}),h0(this,"onRelayEventRequest",e=>{let{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return this.onPairingPingRequest(t,r);case"wc_pairingDelete":return this.onPairingDeleteRequest(t,r);default:return this.onUnknownRpcMethodRequest(t,r)}}),h0(this,"onRelayEventResponse",async e=>{let{topic:t,payload:r}=e,i=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===i?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(i)}),h0(this,"onPairingPingRequest",async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit(le.ping,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),h0(this,"onPairingPingResponse",(e,t)=>{let{id:r}=t;setTimeout(()=>{(0,c$.isJsonRpcResult)(t)?this.events.emit(s1("pairing_ping",r),{}):(0,c$.isJsonRpcError)(t)&&this.events.emit(s1("pairing_ping",r),{error:t.error})},500)}),h0(this,"onPairingDeleteRequest",async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(le.delete,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),h0(this,"onUnknownRpcMethodRequest",async(e,t)=>{let{id:r,method:i}=t;try{if(this.registeredMethods.includes(i))return;let t=cE("WC_METHOD_UNSUPPORTED",i);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),h0(this,"onUnknownRpcMethodResponse",e=>{this.registeredMethods.includes(e)||this.logger.error(cE("WC_METHOD_UNSUPPORTED",e))}),h0(this,"isValidPair",(e,t)=>{var r;if(!cT(e)){let{message:r}=cv("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(la.malformed_pairing_uri),Error(r)}if(!function(e){function t(e){try{return"u">typeof new URL(e)}catch{return!1}}try{if(cS(e,!1)){if(t(e))return!0;let r=s9(e);return t(r)}}catch{}return!1}(e.uri)){let{message:r}=cv("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(la.malformed_pairing_uri),Error(r)}let i=cu(e?.uri);if(!(null!=(r=i?.relay)&&r.protocol)){let{message:e}=cv("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(la.malformed_pairing_uri),Error(e)}if(!(null!=i&&i.symKey)){let{message:e}=cv("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(la.malformed_pairing_uri),Error(e)}if(null!=i&&i.expiryTimestamp&&(0,er.toMiliseconds)(i?.expiryTimestamp)<Date.now()){t.setError(la.pairing_expired);let{message:e}=cv("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(e)}}),h0(this,"isValidPing",async e=>{if(!cT(e)){let{message:t}=cv("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),h0(this,"isValidDisconnect",async e=>{if(!cT(e)){let{message:t}=cv("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),h0(this,"isValidPairingTopic",async e=>{if(!cS(e,!1)){let{message:t}=cv("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.pairings.keys.includes(e)){let{message:t}=cv("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(s0(this.pairings.get(e).expiry)){await this.deletePairing(e);let{message:t}=cv("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}),this.core=e,this.logger=(0,ez.Ep)(t,this.name),this.pairings=new hZ(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,ez.Fd)(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=cv("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(c2.message,async e=>{let{topic:t,message:r,transportType:i}=e;if(!this.pairings.keys.includes(t)||i===c5.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))return;let n=await this.core.crypto.decode(t,r);try{(0,c$.isJsonRpcRequest)(n)?(this.core.history.set(t,n),this.onRelayEventRequest({topic:t,payload:n})):(0,c$.isJsonRpcResponse)(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:t,payload:n}),this.core.history.delete(t,n.id))}catch(e){this.logger.error(e)}})}registerExpirerEvents(){this.core.expirer.on(lr.expired,async e=>{let{topic:t}=sQ(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(le.expire,{topic:t}))})}}var h2=Object.defineProperty,h3=(e,t,r)=>t in e?h2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h8=(e,t,r)=>h3(e,"symbol"!=typeof t?t+"":t,r);class h5 extends eY{constructor(e,t){super(e,t),this.core=e,this.logger=t,h8(this,"records",new Map),h8(this,"events",new ee.EventEmitter),h8(this,"name","history"),h8(this,"version","0.3"),h8(this,"cached",[]),h8(this,"initialized",!1),h8(this,"storagePrefix",cJ),h8(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.records.set(e.id,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),h8(this,"set",(e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;let i={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:sX(er.THIRTY_DAYS)};this.records.set(i.id,i),this.persist(),this.events.emit(lt.created,i)}),h8(this,"resolve",async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;let t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,c$.isJsonRpcError)(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(lt.updated,t))}),h8(this,"get",async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t))),h8(this,"delete",(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(r=>{r.topic!==e||"u">typeof t&&r.id!==t||(this.records.delete(r.id),this.events.emit(lt.deleted,r))}),this.persist()}),h8(this,"exists",async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e)),h8(this,"on",(e,t)=>{this.events.on(e,t)}),h8(this,"once",(e,t)=>{this.events.once(e,t)}),h8(this,"off",(e,t)=>{this.events.off(e,t)}),h8(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=(0,ez.Ep)(t,this.name)}get context(){return(0,ez.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let r={topic:t.topic,request:(0,c$.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:t}=cv("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(lt.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:e}=cv("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(lt.created,e=>{let t=lt.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(lt.updated,e=>{let t=lt.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(lt.deleted,e=>{let t=lt.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(eo,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,er.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(lt.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=cv("NOT_INITIALIZED",this.name);throw Error(e)}}}var h6=Object.defineProperty,h4=(e,t,r)=>t in e?h6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h9=(e,t,r)=>h4(e,"symbol"!=typeof t?t+"":t,r);class h7 extends e0{constructor(e,t){super(e,t),this.core=e,this.logger=t,h9(this,"expirations",new Map),h9(this,"events",new ee.EventEmitter),h9(this,"name","expirer"),h9(this,"version","0.3"),h9(this,"cached",[]),h9(this,"initialized",!1),h9(this,"storagePrefix",cJ),h9(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.expirations.set(e.target,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),h9(this,"has",e=>{try{let t=this.formatTarget(e);return"u">typeof this.getExpiration(t)}catch{return!1}}),h9(this,"set",(e,t)=>{this.isInitialized();let r=this.formatTarget(e),i={target:r,expiry:t};this.expirations.set(r,i),this.checkExpiry(r,i),this.events.emit(lr.created,{target:r,expiration:i})}),h9(this,"get",e=>{this.isInitialized();let t=this.formatTarget(e);return this.getExpiration(t)}),h9(this,"del",e=>{if(this.isInitialized(),this.has(e)){let t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(lr.deleted,{target:t,expiration:r})}}),h9(this,"on",(e,t)=>{this.events.on(e,t)}),h9(this,"once",(e,t)=>{this.events.once(e,t)}),h9(this,"off",(e,t)=>{this.events.off(e,t)}),h9(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=(0,ez.Ep)(t,this.name)}get context(){return(0,ez.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return sZ("topic",e);if("number"==typeof e)return sZ("id",e);let{message:t}=cv("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(lr.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:e}=cv("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:t}=cv("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),Error(t)}return t}checkExpiry(e,t){let{expiry:r}=t;(0,er.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(lr.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(eo,()=>this.checkExpirations()),this.events.on(lr.created,e=>{let t=lr.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(lr.expired,e=>{let t=lr.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(lr.deleted,e=>{let t=lr.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=cv("NOT_INITIALIZED",this.name);throw Error(e)}}}var ue=Object.defineProperty,ut=(e,t,r)=>t in e?ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ur=(e,t,r)=>ut(e,"symbol"!=typeof t?t+"":t,r);class ui extends e1{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,ur(this,"name","verify-api"),ur(this,"abortController"),ur(this,"isDevEnv"),ur(this,"verifyUrlV3",ln),ur(this,"storagePrefix",cJ),ur(this,"version",2),ur(this,"publicKey"),ur(this,"fetchPromise"),ur(this,"init",async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,er.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ur(this,"register",async e=>{if(!s$()||this.isDevEnv)return;let t=window.location.origin,{id:r,decryptedId:i}=e,n=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${i}`;try{let e=(0,iv.getDocument)(),t=this.startAbortTimer(5*er.ONE_SECOND),i=await new Promise((i,s)=>{let o=()=>{window.removeEventListener("message",c),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);let a=e.createElement("iframe");a.src=n,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});let c=n=>{if(n.data&&"string"==typeof n.data)try{let s=JSON.parse(n.data);if("verify_attestation"===s.type){if(ii(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",c),i(null===s.attestation?"":s.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",c,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",i),i}catch(e){this.logger.warn(e)}return""}),ur(this,"resolve",async e=>{if(this.isDevEnv)return"";let{attestationId:t,hash:r,encryptedId:i}=e;if(""===t){this.logger.debug("resolve: attestationId is empty, skipping");return}if(t){if(ii(t).payload.id!==i)return;let e=await this.isValidJwtAttestation(t);if(e){if(!e.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return e}}if(!r)return;let n=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,n)}),ur(this,"fetchAttestation",async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);let r=this.startAbortTimer(5*er.ONE_SECOND),i=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===i.status?await i.json():void 0}),ur(this,"getVerifyUrl",e=>{let t=e||li;return ls.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${li}`),t=li),t}),ur(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);let e=this.startAbortTimer(er.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}}),ur(this,"persistPublicKey",async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e}),ur(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ur(this,"isValidJwtAttestation",async e=>{let t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}let r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}}),ur(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ur(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async e=>{let t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))});let e=await this.fetchPromise;return this.fetchPromise=void 0,e}),ur(this,"validateAttestation",(e,t)=>{let r=function(e,t){let[r,i,n]=e.split("."),s=sk.from(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=t.length%4;return r>0&&(t+="=".repeat(4-r)),t}(n),"base64");if(64!==s.length)throw Error("Invalid signature length");let o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=ak(`${r}.${i}`),l=new sT.ec("p256").keyFromPublic({x:sk.from(t.x,"base64").toString("hex"),y:sk.from(t.y,"base64").toString("hex")},"hex"),h=sP(c,a4);if(!l.verify(h,{r:o,s:a}))throw Error("Invalid signature");return ii(e).payload}(e,t.publicKey),i={hasExpired:(0,er.toMiliseconds)(r.exp)<Date.now(),payload:r};if(i.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),Error("JWT attestation expired");return{origin:i.payload.origin,isScam:i.payload.isScam,isVerified:i.payload.isVerified}}),this.logger=(0,ez.Ep)(t,this.name),this.abortController=new AbortController,this.isDevEnv=s4(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return(0,ez.Fd)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,er.toMiliseconds)(e))}}var un=Object.defineProperty,us=(e,t,r)=>t in e?un(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uo=(e,t,r)=>us(e,"symbol"!=typeof t?t+"":t,r);class ua extends e2{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,uo(this,"context","echo"),uo(this,"registerDeviceToken",async e=>{let{clientId:t,token:r,notificationType:i,enableEncrypted:n=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:i,token:r,always_raw:n})})}),this.logger=(0,ez.Ep)(t,this.context)}}var uc=Object.defineProperty,ul=Object.getOwnPropertySymbols,uh=Object.prototype.hasOwnProperty,uu=Object.prototype.propertyIsEnumerable,ud=(e,t,r)=>t in e?uc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uf=(e,t)=>{for(var r in t||(t={}))uh.call(t,r)&&ud(e,r,t[r]);if(ul)for(var r of ul(t))uu.call(t,r)&&ud(e,r,t[r]);return e},up=(e,t,r)=>ud(e,"symbol"!=typeof t?t+"":t,r);class ug extends e3{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,up(this,"context","event-client"),up(this,"storagePrefix",cJ),up(this,"storageVersion",.1),up(this,"events",new Map),up(this,"shouldPersist",!1),up(this,"init",async()=>{if(!s4())try{let e={eventId:s6(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:sW(this.core.relayer.protocol,this.core.relayer.version,c8)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}}),up(this,"createEvent",e=>{let{event:t="ERROR",type:r="",properties:{topic:i,trace:n}}=e,s=s6(),o=this.core.projectId||"",a=uf({eventId:s,timestamp:Date.now(),props:{event:t,type:r,properties:{topic:i,trace:n}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,a),this.shouldPersist=!0),a}),up(this,"getEvent",e=>{let{eventId:t,topic:r}=e;if(t)return this.events.get(t);let i=Array.from(this.events.values()).find(e=>e.props.properties.topic===r);if(i)return uf(uf({},i),this.setMethods(i.eventId))}),up(this,"deleteEvent",e=>{let{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0}),up(this,"setEventListeners",()=>{this.core.heartbeat.on(eo,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(e=>{(0,er.fromMiliseconds)(Date.now())-(0,er.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)})})}),up(this,"setMethods",e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)})),up(this,"addTrace",(e,t)=>{let r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)}),up(this,"setError",(e,t)=>{let r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)}),up(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),up(this,"restore",async()=>{try{let e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach(e=>{this.events.set(e.eventId,uf(uf({},e),this.setMethods(e.eventId)))})}catch(e){this.logger.warn(e)}}),up(this,"submit",async()=>{if(!this.telemetryEnabled||0===this.events.size)return;let e=[];for(let[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(let t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}}),up(this,"sendEvent",async e=>{let t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${c8}${t}`,{method:"POST",body:JSON.stringify(e)})}),up(this,"getAppDomain",()=>sH().url),this.logger=(0,ez.Ep)(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var um=Object.defineProperty,uy=Object.getOwnPropertySymbols,ub=Object.prototype.hasOwnProperty,uw=Object.prototype.propertyIsEnumerable,uv=(e,t,r)=>t in e?um(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uE=(e,t)=>{for(var r in t||(t={}))ub.call(t,r)&&uv(e,r,t[r]);if(uy)for(var r of uy(t))uw.call(t,r)&&uv(e,r,t[r]);return e},uI=(e,t,r)=>uv(e,"symbol"!=typeof t?t+"":t,r);class u_ extends eH{constructor(e){var t;super(e),uI(this,"protocol","wc"),uI(this,"version",2),uI(this,"name",cY),uI(this,"relayUrl"),uI(this,"projectId"),uI(this,"customStoragePrefix"),uI(this,"events",new ee.EventEmitter),uI(this,"logger"),uI(this,"heartbeat"),uI(this,"relayer"),uI(this,"crypto"),uI(this,"storage"),uI(this,"history"),uI(this,"expirer"),uI(this,"pairing"),uI(this,"verify"),uI(this,"echoClient"),uI(this,"linkModeSupportedApps"),uI(this,"eventClient"),uI(this,"initialized",!1),uI(this,"logChunkController"),uI(this,"on",(e,t)=>this.events.on(e,t)),uI(this,"once",(e,t)=>this.events.once(e,t)),uI(this,"off",(e,t)=>this.events.off(e,t)),uI(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),uI(this,"dispatchEnvelope",({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;let i={topic:e,message:t,publishedAt:Date.now(),transportType:c5.link_mode};this.relayer.onLinkMessageEvent(i,{sessionExists:r})}),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||c1,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let r=(0,ez.jI)({level:"string"==typeof e?.logger&&e.logger?e.logger:cG.logger,name:cY}),{logger:i,chunkLoggerController:n}=(0,ez.Rt)({opts:r,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=n,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=(0,ez.Ep)(i,this.name),this.heartbeat=new ea,this.crypto=new hs(this,this.logger,e?.keychain),this.history=new h5(this,this.logger),this.expirer=new h7(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new eB(uE(uE({},cZ),e?.storageOptions)),this.relayer=new hF({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new h1(this,this.logger),this.verify=new ui(this,this.logger,this.storage),this.echoClient=new ua(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new ug(this,this.logger,e?.telemetryEnabled)}static async init(e){let t=new u_(e);await t.initialize();let r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return(0,ez.Fd)(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(c6,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(c6)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}var uA=Object.defineProperty,uS=(e,t,r)=>t in e?uA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uC=(e,t,r)=>uS(e,"symbol"!=typeof t?t+"":t,r);class uN{constructor(e){this.opts=e,uC(this,"protocol","wc"),uC(this,"version",2)}}class uM{constructor(e){this.client=e}}let ux="client",uO=`wc@2:${ux}:`,uP={name:ux,logger:"error"},uT="WALLETCONNECT_DEEPLINK_CHOICE",uR="Proposal expired",uD=er.SEVEN_DAYS,uk={wc_sessionPropose:{req:{ttl:er.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:er.ONE_DAY,prompt:!1,tag:1104},res:{ttl:er.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:er.ONE_DAY,prompt:!1,tag:1106},res:{ttl:er.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:er.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:er.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:er.ONE_DAY,prompt:!1,tag:1112},res:{ttl:er.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:er.ONE_DAY,prompt:!1,tag:1114},res:{ttl:er.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:er.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:er.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1119}}},uL={min:er.FIVE_MINUTES,max:er.SEVEN_DAYS},uj={idle:"IDLE",active:"ACTIVE"},uU={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},uB=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],uz="wc@1.5:auth:",u$=`${uz}:PUB_KEY`;var uq=Object.defineProperty,uF=Object.defineProperties,uH=Object.getOwnPropertyDescriptors,uW=Object.getOwnPropertySymbols,uV=Object.prototype.hasOwnProperty,uK=Object.prototype.propertyIsEnumerable,uY=(e,t,r)=>t in e?uq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uJ=(e,t)=>{for(var r in t||(t={}))uV.call(t,r)&&uY(e,r,t[r]);if(uW)for(var r of uW(t))uK.call(t,r)&&uY(e,r,t[r]);return e},uG=(e,t)=>uF(e,uH(t)),uZ=(e,t,r)=>uY(e,"symbol"!=typeof t?t+"":t,r);class uQ extends uM{constructor(e){super(e),uZ(this,"name","engine"),uZ(this,"events",new(et())),uZ(this,"initialized",!1),uZ(this,"requestQueue",{state:uj.idle,queue:[]}),uZ(this,"sessionRequestQueue",{state:uj.idle,queue:[]}),uZ(this,"requestQueueDelay",er.ONE_SECOND),uZ(this,"expectedPairingMethodMap",new Map),uZ(this,"recentlyDeletedMap",new Map),uZ(this,"recentlyDeletedLimit",200),uZ(this,"relayMessageCache",[]),uZ(this,"pendingSessions",new Map),uZ(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(uk)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,er.toMiliseconds)(this.requestQueueDelay)))}),uZ(this,"connect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();let t=uG(uJ({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,relays:o}=t,a=r,c,l=!1;try{if(a){let e=this.client.core.pairing.pairings.get(a);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),l=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${a}) failed`),e}if(!a||!l){let{topic:e,uri:t}=await this.client.core.pairing.create();a=e,c=t}if(!a){let{message:e}=cv("NO_MATCHING_KEY",`connect() pairing topic: ${a}`);throw Error(e)}let h=await this.client.core.crypto.generateKeyPair(),u=uk.wc_sessionPropose.req.ttl||er.FIVE_MINUTES,d=sX(u),f=uG(uJ({requiredNamespaces:i,optionalNamespaces:n,relays:o??[{protocol:"irn"}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:d,pairingTopic:a},s&&{sessionProperties:s}),{id:(0,c$.payloadId)()}),p=s1("session_connect",f.id),{reject:g,resolve:m,done:y}=sJ(u,uR),b=({id:e})=>{e===f.id&&(this.client.events.off("proposal_expire",b),this.pendingSessions.delete(f.id),this.events.emit(p,{error:{message:uR,code:0}}))};return this.client.events.on("proposal_expire",b),this.events.once(p,({error:e,session:t})=>{this.client.events.off("proposal_expire",b),e?g(e):t&&m(t)}),await this.sendRequest({topic:a,method:"wc_sessionPropose",params:f,throwOnFailedPublish:!0,clientRpcId:f.id}),await this.setProposal(f.id,f),{uri:c,approval:y}}),uZ(this,"pair",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}}),uZ(this,"approve",async e=>{var t,r,i;let n=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[lc.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw n.setError(ll.no_internet_connection),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),n.setError(ll.proposal_not_found),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),n.setError(ll.session_approve_namespace_validation_failure),e}let{id:s,relayProtocol:o,namespaces:a,sessionProperties:c,sessionConfig:l}=e,h=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:n.eventId});let{pairingTopic:u,proposer:d,requiredNamespaces:f,optionalNamespaces:p}=h,g=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:u});g||(g=null==(i=this.client.core.eventClient)?void 0:i.createEvent({type:lc.session_approve_started,properties:{topic:u,trace:[lc.session_approve_started,lc.session_namespaces_validation_success]}}));let m=await this.client.core.crypto.generateKeyPair(),y=d.publicKey,b=await this.client.core.crypto.generateSharedKey(m,y),w=uJ(uJ({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:m,metadata:this.client.metadata},expiry:sX(uD)},c&&{sessionProperties:c}),l&&{sessionConfig:l}),v=c5.relay;g.addTrace(lc.subscribing_session_topic);try{await this.client.core.relayer.subscribe(b,{transportType:v})}catch(e){throw g.setError(ll.subscribe_session_topic_failure),e}g.addTrace(lc.subscribe_session_topic_success);let E=uG(uJ({},w),{topic:b,requiredNamespaces:f,optionalNamespaces:p,pairingTopic:u,acknowledged:!1,self:w.controller,peer:{publicKey:d.publicKey,metadata:d.metadata},controller:m,transportType:c5.relay});await this.client.session.set(b,E),g.addTrace(lc.store_session);try{g.addTrace(lc.publishing_session_settle),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:w,throwOnFailedPublish:!0}).catch(e=>{throw g?.setError(ll.session_settle_publish_failure),e}),g.addTrace(lc.session_settle_publish_success),g.addTrace(lc.publishing_session_approve),await this.sendResult({id:s,topic:u,result:{relay:{protocol:o??"irn"},responderPublicKey:m},throwOnFailedPublish:!0}).catch(e=>{throw g?.setError(ll.session_approve_publish_failure),e}),g.addTrace(lc.session_approve_publish_success)}catch(e){throw this.client.logger.error(e),this.client.session.delete(b,cE("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(b),e}return this.client.core.eventClient.deleteEvent({eventId:g.eventId}),await this.client.core.pairing.updateMetadata({topic:u,metadata:d.metadata}),await this.client.proposal.delete(s,cE("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:u}),await this.setExpiry(b,sX(uD)),{topic:b,acknowledged:()=>Promise.resolve(this.client.session.get(b))}}),uZ(this,"reject",async e=>{let t;this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}let{id:r,reason:i}=e;try{t=this.client.proposal.get(r).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),e}t&&(await this.sendError({id:r,topic:t,error:i,rpcOpts:uk.wc_sessionPropose.reject}),await this.client.proposal.delete(r,cE("USER_DISCONNECTED")))}),uZ(this,"update",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}let{topic:t,namespaces:r}=e,{done:i,resolve:n,reject:s}=sJ(),o=(0,c$.payloadId)(),a=(0,c$.getBigIntRpcId)().toString(),c=this.client.session.get(t).namespaces;return this.events.once(s1("session_update",o),({error:e})=>{e?s(e):n()}),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch(e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),s(e)}),{acknowledged:i}}),uZ(this,"extend",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}let{topic:t}=e,r=(0,c$.payloadId)(),{done:i,resolve:n,reject:s}=sJ();return this.events.once(s1("session_extend",r),({error:e})=>{e?s(e):n()}),await this.setExpiry(t,sX(uD)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch(e=>{s(e)}),{acknowledged:i}}),uZ(this,"request",async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}let{chainId:t,request:r,topic:i,expiry:n=uk.wc_sessionRequest.req.ttl}=e,s=this.client.session.get(i);s?.transportType===c5.relay&&await this.confirmOnlineStateOrThrow();let o=(0,c$.payloadId)(),a=(0,c$.getBigIntRpcId)().toString(),{done:c,resolve:l,reject:h}=sJ(n,"Request expired. Please try again.");this.events.once(s1("session_request",o),({error:e,result:t})=>{e?h(e):l(t)});let u="wc_sessionRequest",d=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);if(d)return await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:i,method:u,params:{request:uG(uJ({},r),{expiryTimestamp:sX(n)}),chainId:t},expiry:n,throwOnFailedPublish:!0,appLink:d}).catch(e=>h(e)),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),await c();let f={request:uG(uJ({},r),{expiryTimestamp:sX(n)}),chainId:t},p=this.shouldSetTVF(u,f);return await Promise.all([new Promise(async e=>{await this.sendRequest(uJ({clientRpcId:o,relayRpcId:a,topic:i,method:u,params:f,expiry:n,throwOnFailedPublish:!0},p&&{tvf:this.getTVFParams(o,f)})).catch(e=>h(e)),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),e()}),new Promise(async e=>{var t;if(!(null!=(t=s.sessionConfig)&&t.disableDeepLink)){let e=await s8(this.client.core.storage,uT);await s3({id:o,topic:i,wcDeepLink:e})}e()}),c()]).then(e=>e[2])}),uZ(this,"respond",async e=>{this.isInitialized(),await this.isValidRespond(e);let{topic:t,response:r}=e,{id:i}=r,n=this.client.session.get(t);n.transportType===c5.relay&&await this.confirmOnlineStateOrThrow();let s=this.getAppLinkIfEnabled(n.peer.metadata,n.transportType);(0,c$.isJsonRpcResult)(r)?await this.sendResult({id:i,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:s}):(0,c$.isJsonRpcError)(r)&&await this.sendError({id:i,topic:t,error:r.error,appLink:s}),this.cleanupAfterResponse(e)}),uZ(this,"ping",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}let{topic:t}=e;if(this.client.session.keys.includes(t)){let e=(0,c$.payloadId)(),r=(0,c$.getBigIntRpcId)().toString(),{done:i,resolve:n,reject:s}=sJ();this.events.once(s1("session_ping",e),({error:e})=>{e?s(e):n()}),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),i()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))}),uZ(this,"emit",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);let{topic:t,event:r,chainId:i}=e,n=(0,c$.getBigIntRpcId)().toString(),s=(0,c$.payloadId)();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:i},throwOnFailedPublish:!0,relayRpcId:n,clientRpcId:s})}),uZ(this,"disconnect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);let{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:cE("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(t))await this.client.core.pairing.disconnect({topic:t});else{let{message:e}=cv("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw Error(e)}}),uZ(this,"find",e=>(this.isInitialized(),this.client.session.getAll().filter(t=>(function(e,t){let{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),n=Object.keys(r),s=!0;return!!sV(n,i)&&(i.forEach(t=>{let{accounts:i,methods:n,events:o}=e.namespaces[t],a=cp(i),c=r[t];sV(sj(t,c),a)&&sV(c.methods,n)&&sV(c.events,o)||(s=!1)}),s)})(t,e)))),uZ(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),uZ(this,"authenticate",async(e,t)=>{var r,i,n;let s;this.isInitialized(),this.isValidAuthenticate(e);let o=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),a=o?c5.link_mode:c5.relay;a===c5.relay&&await this.confirmOnlineStateOrThrow();let{chains:c,statement:l="",uri:h,domain:u,nonce:d,type:f,exp:p,nbf:g,methods:m=[],expiry:y}=e,b=[...e.resources||[]],{topic:w,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:a});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:v}});let E=await this.client.core.crypto.generateKeyPair(),I=cr(E);if(await Promise.all([this.client.auth.authKeys.set(u$,{responseTopic:I,publicKey:E}),this.client.auth.pairingTopics.set(I,{topic:I,pairingTopic:w})]),await this.client.core.relayer.subscribe(I,{transportType:a}),this.client.logger.info(`sending request to new pairing topic: ${w}`),m.length>0){let{namespace:e}=sL(c[0]),t=o0(function(e,t,r,i={}){return r?.sort((e,t)=>e.localeCompare(t)),{att:{[e]:function(e,t,r={}){return Object.assign({},...(t=t?.sort((e,t)=>e.localeCompare(t))).map(t=>({[`${e}/${t}`]:[r]})))}(t,r,i)}}}(e,"request",m));o8(b)&&(i=t,n=b.pop(),t=o0(function(e,t){oX(e),oX(t);let r=Object.keys(e.att).concat(Object.keys(t.att)).sort((e,t)=>e.localeCompare(t)),i={att:{}};return r.forEach(r=>{var n,s;Object.keys((null==(n=e.att)?void 0:n[r])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[r])||{})).sort((e,t)=>e.localeCompare(t)).forEach(n=>{var s,o;i.att[r]=oV(oW({},i.att[r]),{[n]:(null==(s=e.att[r])?void 0:s[n])||(null==(o=t.att[r])?void 0:o[n])})})}),i}(o1(i),o1(n)))),b.push(t)}let _=y&&y>uk.wc_sessionAuthenticate.req.ttl?y:uk.wc_sessionAuthenticate.req.ttl,A={authPayload:{type:f??"caip122",chains:c,statement:l,aud:h,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:p,nbf:g,resources:b},requester:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:sX(_)},S={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:c,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:sX(uk.wc_sessionPropose.req.ttl),id:(0,c$.payloadId)()},{done:C,resolve:N,reject:M}=sJ(_,"Request expired"),x=(0,c$.payloadId)(),O=s1("session_connect",S.id),P=s1("session_request",x),T=async({error:e,session:t})=>{this.events.off(P,R),e?M(e):t&&N({session:t})},R=async e=>{var r,i,n;let s;if(await this.deletePendingAuthRequest(x,{message:"fulfilled",code:0}),e.error){let t=cE("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(O,T),M(e.error.message))}await this.deleteProposal(S.id),this.events.off(O,T);let{cacaos:o,responder:c}=e.result,l=[],h=[];for(let e of o){await oZ({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),M(cE("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:t}=e,r=o8(t.resources),i=[oJ(t.iss)],n=oG(t.iss);if(r){let e=o2(r),t=o3(r);l.push(...e),i.push(...t)}for(let e of i)h.push(`${e}:${n}`)}let u=await this.client.core.crypto.generateSharedKey(E,c.publicKey);l.length>0&&(s={topic:u,acknowledged:!0,self:{publicKey:E,metadata:this.client.metadata},peer:c,controller:c.publicKey,expiry:sX(uD),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:cy([...new Set(l)],[...new Set(h)]),transportType:a},await this.client.core.relayer.subscribe(u,{transportType:a}),await this.client.session.set(u,s),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:c.metadata}),s=this.client.session.get(u)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(i=c.metadata.redirect)&&i.linkMode&&null!=(n=c.metadata.redirect)&&n.universal&&t&&(this.client.core.addLinkModeSupportedApp(c.metadata.redirect.universal),this.client.session.update(u,{transportType:c5.link_mode})),N({auths:o,session:s})};this.events.once(O,T),this.events.once(P,R);try{if(o){let e=(0,c$.formatJsonRpcRequest)("wc_sessionAuthenticate",A,x);this.client.core.history.set(w,e);let r=await this.client.core.crypto.encode("",e,{type:2,encoding:a7});s=cf(t,w,r)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:A,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:x}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:S,expiry:uk.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(e){throw this.events.off(O,T),this.events.off(P,R),e}return await this.setProposal(S.id,S),await this.setAuthRequest(x,{request:uG(uJ({},A),{verifyContext:{}}),pairingTopic:w,transportType:a}),{uri:s??v,response:C}}),uZ(this,"approveSessionAuthenticate",async e=>{let t;let{id:r,auths:i}=e,n=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[lh.authenticated_session_approve_started]}});try{this.isInitialized()}catch(e){throw n.setError(lu.no_internet_connection),e}let s=this.getPendingAuthRequest(r);if(!s)throw n.setError(lu.authenticated_session_pending_request_not_found),Error(`Could not find pending auth request with id ${r}`);let o=s.transportType||c5.relay;o===c5.relay&&await this.confirmOnlineStateOrThrow();let a=s.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),l=cr(a),h={type:1,receiverPublicKey:a,senderPublicKey:c},u=[],d=[];for(let e of i){if(!await oZ({cacao:e,projectId:this.client.core.projectId})){n.setError(lu.invalid_cacao);let e=cE("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:l,error:e,encodeOpts:h}),Error(e.message)}n.addTrace(lh.cacaos_verified);let{p:t}=e,i=o8(t.resources),s=[oJ(t.iss)],o=oG(t.iss);if(i){let e=o2(i),t=o3(i);u.push(...e),s.push(...t)}for(let e of s)d.push(`${e}:${o}`)}let f=await this.client.core.crypto.generateSharedKey(c,a);if(n.addTrace(lh.create_authenticated_session_topic),u?.length>0){t={topic:f,acknowledged:!0,self:{publicKey:c,metadata:this.client.metadata},peer:{publicKey:a,metadata:s.requester.metadata},controller:a,expiry:sX(uD),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:s.pairingTopic,namespaces:cy([...new Set(u)],[...new Set(d)]),transportType:o},n.addTrace(lh.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(f,{transportType:o})}catch(e){throw n.setError(lu.subscribe_authenticated_session_topic_failure),e}n.addTrace(lh.subscribe_authenticated_session_topic_success),await this.client.session.set(f,t),n.addTrace(lh.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:s.pairingTopic,metadata:s.requester.metadata})}n.addTrace(lh.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:r,result:{cacaos:i,responder:{publicKey:c,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(s.requester.metadata,o)})}catch(e){throw n.setError(lu.authenticated_session_approve_publish_failure),e}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:s.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:t}}),uZ(this,"rejectSessionAuthenticate",async e=>{this.isInitialized();let{id:t,reason:r}=e,i=this.getPendingAuthRequest(t);if(!i)throw Error(`Could not find pending auth request with id ${t}`);i.transportType===c5.relay&&await this.confirmOnlineStateOrThrow();let n=i.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=cr(n);await this.sendError({id:t,topic:o,error:r,encodeOpts:{type:1,receiverPublicKey:n,senderPublicKey:s},rpcOpts:uk.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,cE("USER_DISCONNECTED"))}),uZ(this,"formatAuthMessage",e=>{this.isInitialized();let{request:t,iss:r}=e;return oQ(t,r)}),uZ(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{let e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}},50)}),uZ(this,"cleanupDuplicatePairings",async e=>{if(e.pairingTopic)try{let t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter(r=>{var i,n;return(null==(i=r.peerMetadata)?void 0:i.url)&&(null==(n=r.peerMetadata)?void 0:n.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic});if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map(e=>this.client.core.pairing.disconnect({topic:e.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}}),uZ(this,"deleteSession",async e=>{var t;let{topic:r,expirerHasDeleted:i=!1,emitEvent:n=!0,id:s=0}=e,{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,cE("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),i||this.client.core.expirer.del(r),this.client.core.storage.removeItem(uT).catch(e=>this.client.logger.warn(e)),this.getPendingSessionRequests().forEach(e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,cE("USER_DISCONNECTED"))}),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=uj.idle),n&&this.client.events.emit("session_delete",{id:s,topic:r})}),uZ(this,"deleteProposal",async(e,t)=>{if(t)try{let t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError(ll.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(e,cE("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")}),uZ(this,"deletePendingSessionRequest",async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(t=>t.id!==e),r&&(this.sessionRequestQueue.state=uj.idle,this.client.events.emit("session_request_expire",{id:e}))}),uZ(this,"deletePendingAuthRequest",async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])}),uZ(this,"setExpiry",async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))}),uZ(this,"setProposal",async(e,t)=>{this.client.core.expirer.set(e,sX(uk.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)}),uZ(this,"setAuthRequest",async(e,t)=>{let{request:r,pairingTopic:i,transportType:n=c5.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:i,verifyContext:r.verifyContext,transportType:n})}),uZ(this,"setPendingSessionRequest",async e=>{let{id:t,topic:r,params:i,verifyContext:n}=e,s=i.request.expiryTimestamp||sX(uk.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:r,params:i,verifyContext:n})}),uZ(this,"sendRequest",async e=>{let t,i;let{topic:n,method:s,params:o,expiry:a,relayRpcId:c,clientRpcId:l,throwOnFailedPublish:h,appLink:u,tvf:d}=e,f=(0,c$.formatJsonRpcRequest)(s,o,l),p=!!u;try{let e=p?a7:a9;t=await this.client.core.crypto.encode(n,f,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),e}if(uB.includes(s)){let e=ci(JSON.stringify(f)),r=ci(t);i=await this.client.core.verify.register({id:r,decryptedId:e})}let g=uk[s].req;if(g.attestation=i,a&&(g.ttl=a),c&&(g.id=c),this.client.core.history.set(n,f),p){let e=cf(u,n,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=uk[s].req;a&&(e.ttl=a),c&&(e.id=c),e.tvf=uG(uJ({},d),{correlationId:f.id}),h?(e.internal=uG(uJ({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,t,e)):this.client.core.relayer.publish(n,t,e).catch(e=>this.client.logger.error(e))}return f.id}),uZ(this,"sendResult",async e=>{let t,i,n;let{id:s,topic:o,result:a,throwOnFailedPublish:c,encodeOpts:l,appLink:h}=e,u=(0,c$.formatJsonRpcResult)(s,a),d=h&&"u">typeof(null==r.g?void 0:r.g.Linking);try{let e=d?a7:a9;t=await this.client.core.crypto.encode(o,u,uG(uJ({},l||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${o} failed`),e}try{let e=(i=await this.client.core.history.get(o,s)).request;try{this.shouldSetTVF(e.method,e.params)&&(n=this.getTVFParams(s,e.params,a))}catch(e){this.client.logger.warn("sendResult() -> getTVFParams() failed",e)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${o}, ${s}) failed`),e}if(d){let e=cf(h,o,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=uk[i.request.method].res;e.tvf=uG(uJ({},n),{correlationId:s}),c?(e.internal=uG(uJ({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,t,e)):this.client.core.relayer.publish(o,t,e).catch(e=>this.client.logger.error(e))}await this.client.core.history.resolve(u)}),uZ(this,"sendError",async e=>{let t,i;let{id:n,topic:s,error:o,encodeOpts:a,rpcOpts:c,appLink:l}=e,h=(0,c$.formatJsonRpcError)(n,o),u=l&&"u">typeof(null==r.g?void 0:r.g.Linking);try{let e=u?a7:a9;t=await this.client.core.crypto.encode(s,h,uG(uJ({},a||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),e}try{i=await this.client.core.history.get(s,n)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),e}if(u){let e=cf(l,s,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=i.request.method,r=c||uk[e].res;this.client.core.relayer.publish(s,t,r)}await this.client.core.history.resolve(h)}),uZ(this,"cleanup",async()=>{let e=[],t=[];this.client.session.getAll().forEach(t=>{let r=!1;s0(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)}),this.client.proposal.getAll().forEach(e=>{s0(e.expiryTimestamp)&&t.push(e.id)}),await Promise.all([...e.map(e=>this.deleteSession({topic:e})),...t.map(e=>this.deleteProposal(e))])}),uZ(this,"onRelayEventRequest",async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()}),uZ(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===uj.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=uj.active;let e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=uj.idle}),uZ(this,"processRequest",async e=>{let{topic:t,payload:r,attestation:i,transportType:n,encryptedId:s}=e,o=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:i,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});default:return this.client.logger.info(`Unsupported request method ${o}`)}}),uZ(this,"onRelayEventResponse",async e=>{let{topic:t,payload:r,transportType:i}=e,n=(await this.client.core.history.get(t,r.id)).request.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,i);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${n}`)}}),uZ(this,"onRelayEventUnknownPayload",e=>{let{topic:t}=e,{message:r}=cv("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw Error(r)}),uZ(this,"shouldIgnorePairingRequest",e=>{let{topic:t,requestMethod:r}=e,i=this.expectedPairingMethodMap.get(t);return!(!i||i.includes(r))&&!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),uZ(this,"onSessionProposeRequest",async e=>{let{topic:t,payload:r,attestation:i,encryptedId:n}=e,{params:s,id:o}=r;try{let e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError(la.proposal_listener_not_found)),this.isValidConnect(uJ({},r.params));let a=s.expiryTimestamp||sX(uk.wc_sessionPropose.req.ttl),c=uJ({id:o,pairingTopic:t,expiryTimestamp:a},s);await this.setProposal(o,c);let l=await this.getVerifyContext({attestationId:i,hash:ci(JSON.stringify(r)),encryptedId:n,metadata:c.proposer.metadata});e?.addTrace(lo.emit_session_proposal),this.client.events.emit("session_proposal",{id:o,params:c,verifyContext:l})}catch(e){await this.sendError({id:o,topic:t,error:e,rpcOpts:uk.wc_sessionPropose.autoReject}),this.client.logger.error(e)}}),uZ(this,"onSessionProposeResponse",async(e,t,r)=>{let{id:i}=t;if((0,c$.isJsonRpcResult)(t)){let{result:n}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:n});let s=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});let o=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});let a=n.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});let c=await this.client.core.crypto.generateSharedKey(o,a);this.pendingSessions.set(i,{sessionTopic:c,pairingTopic:e,proposalId:i,publicKey:o});let l=await this.client.core.relayer.subscribe(c,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:l}),await this.client.core.pairing.activate({topic:e})}else if((0,c$.isJsonRpcError)(t)){await this.client.proposal.delete(i,cE("USER_DISCONNECTED"));let e=s1("session_connect",i);if(0===this.events.listenerCount(e))throw Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}}),uZ(this,"onSessionSettleRequest",async(e,t)=>{let{id:r,params:i}=t;try{this.isValidSessionSettleRequest(i);let{relay:r,controller:n,expiry:s,namespaces:o,sessionProperties:a,sessionConfig:c}=t.params,l=[...this.pendingSessions.values()].find(t=>t.sessionTopic===e);if(!l)return this.client.logger.error(`Pending session not found for topic ${e}`);let h=this.client.proposal.get(l.proposalId),u=uG(uJ(uJ({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:l.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:n.publicKey,self:{publicKey:l.publicKey,metadata:this.client.metadata},peer:{publicKey:n.publicKey,metadata:n.metadata}},a&&{sessionProperties:a}),c&&{sessionConfig:c}),{transportType:c5.relay});await this.client.session.set(u.topic,u),await this.setExpiry(u.topic,u.expiry),await this.client.core.pairing.updateMetadata({topic:l.pairingTopic,metadata:u.peer.metadata}),this.client.events.emit("session_connect",{session:u}),this.events.emit(s1("session_connect",l.proposalId),{session:u}),this.pendingSessions.delete(l.proposalId),this.deleteProposal(l.proposalId,!1),this.cleanupDuplicatePairings(u),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),uZ(this,"onSessionSettleResponse",async(e,t)=>{let{id:r}=t;(0,c$.isJsonRpcResult)(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(s1("session_approve",r),{})):(0,c$.isJsonRpcError)(t)&&(await this.client.session.delete(e,cE("USER_DISCONNECTED")),this.events.emit(s1("session_approve",r),{error:t.error}))}),uZ(this,"onSessionUpdateRequest",async(e,t)=>{let{params:r,id:i}=t;try{let t=`${e}_session_update`,n=cB.get(t);if(n&&this.isRequestOutOfSync(n,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:e,error:cE("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(uJ({topic:e},r));try{cB.set(t,i),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw cB.delete(t),e}this.client.events.emit("session_update",{id:i,topic:e,params:r})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}}),uZ(this,"isRequestOutOfSync",(e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3)),uZ(this,"onSessionUpdateResponse",(e,t)=>{let{id:r}=t,i=s1("session_update",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);(0,c$.isJsonRpcResult)(t)?this.events.emit(s1("session_update",r),{}):(0,c$.isJsonRpcError)(t)&&this.events.emit(s1("session_update",r),{error:t.error})}),uZ(this,"onSessionExtendRequest",async(e,t)=>{let{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,sX(uD)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),uZ(this,"onSessionExtendResponse",(e,t)=>{let{id:r}=t,i=s1("session_extend",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);(0,c$.isJsonRpcResult)(t)?this.events.emit(s1("session_extend",r),{}):(0,c$.isJsonRpcError)(t)&&this.events.emit(s1("session_extend",r),{error:t.error})}),uZ(this,"onSessionPingRequest",async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),uZ(this,"onSessionPingResponse",(e,t)=>{let{id:r}=t,i=s1("session_ping",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);setTimeout(()=>{(0,c$.isJsonRpcResult)(t)?this.events.emit(s1("session_ping",r),{}):(0,c$.isJsonRpcError)(t)&&this.events.emit(s1("session_ping",r),{error:t.error})},500)}),uZ(this,"onSessionDeleteRequest",async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise(t=>{this.client.core.relayer.once(c2.publish,async()=>{t(await this.deleteSession({topic:e,id:r}))})}),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:cE("USER_DISCONNECTED")})]).catch(e=>this.client.logger.error(e))}catch(e){this.client.logger.error(e)}}),uZ(this,"onSessionRequest",async e=>{var t,r,i;let{topic:n,payload:s,attestation:o,encryptedId:a,transportType:c}=e,{id:l,params:h}=s;try{await this.isValidRequest(uJ({topic:n},h));let e=this.client.session.get(n),s=await this.getVerifyContext({attestationId:o,hash:ci(JSON.stringify((0,c$.formatJsonRpcRequest)("wc_sessionRequest",h,l))),encryptedId:a,metadata:e.peer.metadata,transportType:c}),u={id:l,topic:n,params:h,verifyContext:s};await this.setPendingSessionRequest(u),c===c5.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(i=this.client.signConfig)&&i.disableRequestQueue?this.emitSessionRequest(u):(this.addSessionRequestToSessionRequestQueue(u),this.processSessionRequestQueue())}catch(e){await this.sendError({id:l,topic:n,error:e}),this.client.logger.error(e)}}),uZ(this,"onSessionRequestResponse",(e,t)=>{let{id:r}=t,i=s1("session_request",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);(0,c$.isJsonRpcResult)(t)?this.events.emit(s1("session_request",r),{result:t.result}):(0,c$.isJsonRpcError)(t)&&this.events.emit(s1("session_request",r),{error:t.error})}),uZ(this,"onSessionEventRequest",async(e,t)=>{let{id:r,params:i}=t;try{let t=`${e}_session_event_${i.event.name}`,n=cB.get(t);if(n&&this.isRequestOutOfSync(n,r)){this.client.logger.info(`Discarding out of sync request - ${r}`);return}this.isValidEmit(uJ({topic:e},i)),this.client.events.emit("session_event",{id:r,topic:e,params:i}),cB.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),uZ(this,"onSessionAuthenticateResponse",(e,t)=>{let{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),(0,c$.isJsonRpcResult)(t)?this.events.emit(s1("session_request",r),{result:t.result}):(0,c$.isJsonRpcError)(t)&&this.events.emit(s1("session_request",r),{error:t.error})}),uZ(this,"onSessionAuthenticateRequest",async e=>{var t;let{topic:r,payload:i,attestation:n,encryptedId:s,transportType:o}=e;try{let{requester:e,authPayload:a,expiryTimestamp:c}=i.params,l=await this.getVerifyContext({attestationId:n,hash:ci(JSON.stringify(i)),encryptedId:s,metadata:e.metadata,transportType:o}),h={requester:e,pairingTopic:r,id:i.id,authPayload:a,verifyContext:l,expiryTimestamp:c};await this.setAuthRequest(i.id,{request:h,pairingTopic:r,transportType:o}),o===c5.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:i.params,id:i.id,verifyContext:l})}catch(s){this.client.logger.error(s);let e=i.params.requester.publicKey,t=await this.client.core.crypto.generateKeyPair(),n=this.getAppLinkIfEnabled(i.params.requester.metadata,o);await this.sendError({id:i.id,topic:r,error:s,encodeOpts:{type:1,receiverPublicKey:e,senderPublicKey:t},rpcOpts:uk.wc_sessionAuthenticate.autoReject,appLink:n})}}),uZ(this,"addSessionRequestToSessionRequestQueue",e=>{this.sessionRequestQueue.queue.push(e)}),uZ(this,"cleanupAfterResponse",e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=uj.idle,this.processSessionRequestQueue()},(0,er.toMiliseconds)(this.requestQueueDelay))}),uZ(this,"cleanupPendingSentRequestsForTopic",({topic:e,error:t})=>{let r=this.client.core.history.pending;r.length>0&&r.filter(t=>t.topic===e&&"wc_sessionRequest"===t.request.method).forEach(e=>{let r=s1("session_request",e.request.id);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);this.events.emit(s1("session_request",e.request.id),{error:t})})}),uZ(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===uj.active){this.client.logger.info("session request queue is already active.");return}let e=this.sessionRequestQueue.queue[0];if(!e){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=uj.active,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}}),uZ(this,"emitSessionRequest",e=>{this.client.events.emit("session_request",e)}),uZ(this,"onPairingCreated",e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;let t=this.client.proposal.getAll().find(t=>t.pairingTopic===e.topic);t&&this.onSessionProposeRequest({topic:e.topic,payload:(0,c$.formatJsonRpcRequest)("wc_sessionPropose",{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties},t.id)})}),uZ(this,"isValidConnect",async e=>{let t;if(!cT(e)){let{message:t}=cv("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw Error(t)}let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,relays:o}=e;if(cA(r)||await this.isValidPairingTopic(r),t=!1,o?o&&cI(o)&&o.length&&o.forEach(e=>{t=cP(e)}):t=!0,!t){let{message:e}=cv("MISSING_OR_INVALID",`connect() relays: ${o}`);throw Error(e)}cA(i)||0===c_(i)||this.validateNamespaces(i,"requiredNamespaces"),cA(n)||0===c_(n)||this.validateNamespaces(n,"optionalNamespaces"),cA(s)||this.validateSessionProps(s,"sessionProperties")}),uZ(this,"validateNamespaces",(e,t)=>{let r=function(e,t,r){let i=null;if(e&&c_(e)){let n;let s=cx(e,t);s&&(i=s);let o=(n=null,Object.entries(e).forEach(([e,i])=>{var s,o;let a;if(n)return;let c=(s=sj(e,i),o=`${t} ${r}`,a=null,cI(s)&&s.length?s.forEach(e=>{a||cN(e)||(a=cE("UNSUPPORTED_CHAINS",`${o}, chain ${e} should be a string and conform to "namespace:chainId" format`))}):cN(e)||(a=cE("UNSUPPORTED_CHAINS",`${o}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),a);c&&(n=c)}),n);o&&(i=o)}else i=cv("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}(e,"connect()",t);if(r)throw Error(r.message)}),uZ(this,"isValidApprove",async e=>{if(!cT(e))throw Error(cv("MISSING_OR_INVALID",`approve() params: ${e}`).message);let{id:t,namespaces:r,relayProtocol:i,sessionProperties:n}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);let s=this.client.proposal.get(t),o=cO(r,"approve()");if(o)throw Error(o.message);let a=cD(s.requiredNamespaces,r,"approve()");if(a)throw Error(a.message);if(!cS(i,!0)){let{message:e}=cv("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw Error(e)}cA(n)||this.validateSessionProps(n,"sessionProperties")}),uZ(this,"isValidReject",async e=>{if(!cT(e)){let{message:t}=cv("MISSING_OR_INVALID",`reject() params: ${e}`);throw Error(t)}let{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!r||"object"!=typeof r||!r.code||!cC(r.code,!1)||!r.message||!cS(r.message,!1)){let{message:e}=cv("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw Error(e)}}),uZ(this,"isValidSessionSettleRequest",e=>{let t;if(!cT(e)){let{message:t}=cv("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw Error(t)}let{relay:r,controller:i,namespaces:n,expiry:s}=e;if(!cP(r)){let{message:e}=cv("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(e)}let o=(t=null,cS(i?.publicKey,!1)||(t=cv("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t);if(o)throw Error(o.message);let a=cO(n,"onSessionSettleRequest()");if(a)throw Error(a.message);if(s0(s)){let{message:e}=cv("EXPIRED","onSessionSettleRequest()");throw Error(e)}}),uZ(this,"isValidUpdate",async e=>{if(!cT(e)){let{message:t}=cv("MISSING_OR_INVALID",`update() params: ${e}`);throw Error(t)}let{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);let i=this.client.session.get(t),n=cO(r,"update()");if(n)throw Error(n.message);let s=cD(i.requiredNamespaces,r,"update()");if(s)throw Error(s.message)}),uZ(this,"isValidExtend",async e=>{if(!cT(e)){let{message:t}=cv("MISSING_OR_INVALID",`extend() params: ${e}`);throw Error(t)}let{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)}),uZ(this,"isValidRequest",async e=>{var t;if(!cT(e)){let{message:t}=cv("MISSING_OR_INVALID",`request() params: ${e}`);throw Error(t)}let{topic:r,request:i,chainId:n,expiry:s}=e;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);let{namespaces:o}=this.client.session.get(r);if(!cR(o,n)){let{message:e}=cv("MISSING_OR_INVALID",`request() chainId: ${n}`);throw Error(e)}if(cA(i)||!cS(i.method,!1)){let{message:e}=cv("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw Error(e)}if(!(cS(t=i.method,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{cp(e.accounts).includes(t)&&r.push(...e.methods)}),r})(o,n).includes(t))){let{message:e}=cv("MISSING_OR_INVALID",`request() method: ${i.method}`);throw Error(e)}if(s&&(!cC(s,!1)||!(s<=uL.max)||!(s>=uL.min))){let{message:e}=cv("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${uL.min} and ${uL.max}`);throw Error(e)}}),uZ(this,"isValidRespond",async e=>{var t;if(!cT(e)){let{message:t}=cv("MISSING_OR_INVALID",`respond() params: ${e}`);throw Error(t)}let{topic:r,response:i}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(cA(i)||cA(i.result)&&cA(i.error)||!cC(i.id,!1)||!cS(i.jsonrpc,!1)){let{message:e}=cv("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw Error(e)}}),uZ(this,"isValidPing",async e=>{if(!cT(e)){let{message:t}=cv("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),uZ(this,"isValidEmit",async e=>{var t;if(!cT(e)){let{message:t}=cv("MISSING_OR_INVALID",`emit() params: ${e}`);throw Error(t)}let{topic:r,event:i,chainId:n}=e;await this.isValidSessionTopic(r);let{namespaces:s}=this.client.session.get(r);if(!cR(s,n)){let{message:e}=cv("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw Error(e)}if(cA(i)||!cS(i.name,!1)){let{message:e}=cv("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}if(!(cS(t=i.name,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{cp(e.accounts).includes(t)&&r.push(...e.events)}),r})(s,n).includes(t))){let{message:e}=cv("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}}),uZ(this,"isValidDisconnect",async e=>{if(!cT(e)){let{message:t}=cv("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),uZ(this,"isValidAuthenticate",e=>{let{chains:t,uri:r,domain:i,nonce:n}=e;if(!Array.isArray(t)||0===t.length)throw Error("chains is required and must be a non-empty array");if(!cS(r,!1))throw Error("uri is required parameter");if(!cS(i,!1))throw Error("domain is required parameter");if(!cS(n,!1))throw Error("nonce is required parameter");if([...new Set(t.map(e=>sL(e).namespace))].length>1)throw Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:s}=sL(t[0]);if("eip155"!==s)throw Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),uZ(this,"getVerifyContext",async e=>{let{attestationId:t,hash:r,encryptedId:i,metadata:n,transportType:s}=e,o={verified:{verifyUrl:n.verifyUrl||li,validation:"UNKNOWN",origin:n.url||""}};try{if(s===c5.link_mode){let e=this.getAppLinkIfEnabled(n,s);return o.verified.validation=e&&new URL(e).origin===new URL(n.url).origin?"VALID":"INVALID",o}let e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:i,verifyUrl:n.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o}),uZ(this,"validateSessionProps",(e,t)=>{Object.values(e).forEach(e=>{if(!cS(e,!1)){let{message:r}=cv("MISSING_OR_INVALID",`${t} must be in Record<string, string> format. Received: ${JSON.stringify(e)}`);throw Error(r)}})}),uZ(this,"getPendingAuthRequest",e=>{let t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0}),uZ(this,"addToRecentlyDeleted",(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0,t=this.recentlyDeletedLimit/2;for(let r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}}),uZ(this,"checkRecentlyDeleted",e=>{let t=this.recentlyDeletedMap.get(e);if(t){let{message:r}=cv("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw Error(r)}}),uZ(this,"isLinkModeEnabled",(e,t)=>{var i,n,s,o,a,c,l,h,u;return!!e&&t===c5.link_mode&&(null==(n=null==(i=this.client.metadata)?void 0:i.redirect)?void 0:n.linkMode)===!0&&(null==(o=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:o.universal)!==void 0&&(null==(c=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:c.universal)!==""&&(null==(l=e?.redirect)?void 0:l.universal)!==void 0&&(null==(h=e?.redirect)?void 0:h.universal)!==""&&(null==(u=e?.redirect)?void 0:u.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&"u">typeof(null==r.g?void 0:r.g.Linking)}),uZ(this,"getAppLinkIfEnabled",(e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0}),uZ(this,"handleLinkModeMessage",({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;let t=s5(e,"topic")||"",r=decodeURIComponent(s5(e,"wc_ev")||""),i=this.client.session.keys.includes(t);i&&this.client.session.update(t,{transportType:c5.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:i})}),uZ(this,"registerLinkModeListeners",async()=>{var e;if(s4()||sz()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){let e=null==r.g?void 0:r.g.Linking;if("u">typeof e){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);let t=await e.getInitialURL();t&&setTimeout(()=>{this.handleLinkModeMessage({url:t})},50)}}}),uZ(this,"shouldSetTVF",(e,t)=>{if(!t||"wc_sessionRequest"!==e)return!1;let{request:r}=t;return Object.keys(uU).includes(r.method)}),uZ(this,"getTVFParams",(e,t,r)=>{var i,n;try{let s=t.request.method,o=this.extractTxHashesFromResult(s,r);return uG(uJ({correlationId:e,rpcMethods:[s],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[null==(n=null==(i=t.request.params)?void 0:i[0])?void 0:n.to]}),{txHashes:o})}catch(e){this.client.logger.warn("Error getting TVF params",e)}return{}}),uZ(this,"isValidContractData",e=>{var t;if(!e)return!1;try{let r=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!r.startsWith("0x"))return!1;let i=r.slice(2);return!!/^[0-9a-fA-F]*$/.test(i)&&i.length%2==0}catch{}return!1}),uZ(this,"extractTxHashesFromResult",(e,t)=>{try{let r=uU[e];if("string"==typeof t)return[t];let i=t[r.key];if(cI(i))return i;if("string"==typeof i)return[i]}catch(e){this.client.logger.warn("Error extracting tx hashes from result",e)}return[]})}isInitialized(){if(!this.initialized){let{message:e}=cv("NOT_INITIALIZED",this.name);throw Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(c2.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){let{topic:t,message:r,attestation:i,transportType:n}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(u$)?this.client.auth.authKeys.get(u$):{responseTopic:void 0,publicKey:void 0},o=await this.client.core.crypto.decode(t,r,{receiverPublicKey:s,encoding:n===c5.link_mode?a7:a9});try{(0,c$.isJsonRpcRequest)(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o,attestation:i,transportType:n,encryptedId:ci(r)})):(0,c$.isJsonRpcResponse)(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o,transportType:n}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o,transportType:n})}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(lr.expired,async e=>{let{topic:t,id:r}=sQ(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,cv("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,cv("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))})}registerPairingEvents(){this.client.core.pairing.events.on(le.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(le.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!cS(e,!1)){let{message:t}=cv("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=cv("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(s0(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=cv("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}async isValidSessionTopic(e){if(!cS(e,!1)){let{message:t}=cv("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:t}=cv("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw Error(t)}if(s0(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});let{message:t}=cv("EXPIRED",`session topic: ${e}`);throw Error(t)}if(!this.client.core.crypto.keychain.has(e)){let{message:t}=cv("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(cS(e,!1)){let{message:t}=cv("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw Error(t)}else{let{message:t}=cv("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw Error(t)}}async isValidProposalId(e){if("number"!=typeof e){let{message:t}=cv("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=cv("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw Error(t)}if(s0(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);let{message:t}=cv("EXPIRED",`proposal id: ${e}`);throw Error(t)}}}class uX extends hZ{constructor(e,t){super(e,t,"proposal",uO),this.core=e,this.logger=t}}class u0 extends hZ{constructor(e,t){super(e,t,"session",uO),this.core=e,this.logger=t}}class u1 extends hZ{constructor(e,t){super(e,t,"request",uO,e=>e.id),this.core=e,this.logger=t}}class u2 extends hZ{constructor(e,t){super(e,t,"authKeys",uz,()=>u$),this.core=e,this.logger=t}}class u3 extends hZ{constructor(e,t){super(e,t,"pairingTopics",uz),this.core=e,this.logger=t}}class u8 extends hZ{constructor(e,t){super(e,t,"requests",uz,e=>e.id),this.core=e,this.logger=t}}var u5=Object.defineProperty,u6=(e,t,r)=>t in e?u5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u4=(e,t,r)=>u6(e,"symbol"!=typeof t?t+"":t,r);class u9{constructor(e,t){this.core=e,this.logger=t,u4(this,"authKeys"),u4(this,"pairingTopics"),u4(this,"requests"),this.authKeys=new u2(this.core,this.logger),this.pairingTopics=new u3(this.core,this.logger),this.requests=new u8(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var u7=Object.defineProperty,de=(e,t,r)=>t in e?u7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dt=(e,t,r)=>de(e,"symbol"!=typeof t?t+"":t,r);class dr extends uN{constructor(e){super(e),dt(this,"protocol","wc"),dt(this,"version",2),dt(this,"name",uP.name),dt(this,"metadata"),dt(this,"core"),dt(this,"logger"),dt(this,"events",new ee.EventEmitter),dt(this,"engine"),dt(this,"session"),dt(this,"proposal"),dt(this,"pendingRequest"),dt(this,"auth"),dt(this,"signConfig"),dt(this,"on",(e,t)=>this.events.on(e,t)),dt(this,"once",(e,t)=>this.events.once(e,t)),dt(this,"off",(e,t)=>this.events.off(e,t)),dt(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),dt(this,"removeAllListeners",e=>this.events.removeAllListeners(e)),dt(this,"connect",async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"pair",async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"approve",async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"reject",async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"update",async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"extend",async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"request",async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"respond",async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"ping",async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"emit",async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"disconnect",async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"find",e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}}),dt(this,"authenticate",async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"formatAuthMessage",e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"approveSessionAuthenticate",async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),dt(this,"rejectSessionAuthenticate",async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),this.name=e?.name||uP.name,this.metadata=e?.metadata||sH(),this.signConfig=e?.signConfig;let t="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,ez.gw)((0,ez.jI)({level:e?.logger||uP.logger}));this.core=e?.core||new u_(e),this.logger=(0,ez.Ep)(t,this.name),this.session=new u0(this.core,this.logger),this.proposal=new uX(this.core,this.logger),this.pendingRequest=new u1(this.core,this.logger),this.engine=new uQ(this),this.auth=new u9(this.core,this.logger)}static async init(e){let t=new dr(e);return await t.initialize(),t}get context(){return(0,ez.Fd)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},(0,er.toMiliseconds)(er.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var di=r(5071);let dn="error",ds="wc@2:universal_provider:",da="https://rpc.walletconnect.org/v1/",dc="generic",dl=`${da}bundler`,dh="default_chain_changed";var du="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof r.g?r.g:"u">typeof self?self:{},dd=function(e,t){return e===t||e!=e&&t!=t},df=function(e,t){for(var r=e.length;r--;)if(dd(e[r][0],t))return r;return -1},dp=Array.prototype.splice;function dg(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}dg.prototype.clear=function(){this.__data__=[],this.size=0},dg.prototype.delete=function(e){var t=this.__data__,r=df(t,e);return!(r<0)&&(r==t.length-1?t.pop():dp.call(t,r,1),--this.size,!0)},dg.prototype.get=function(e){var t=this.__data__,r=df(t,e);return r<0?void 0:t[r][1]},dg.prototype.has=function(e){return df(this.__data__,e)>-1},dg.prototype.set=function(e,t){var r=this.__data__,i=df(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};var dm="object"==typeof du&&du&&du.Object===Object&&du,dy="object"==typeof self&&self&&self.Object===Object&&self,db=dm||dy||Function("return this")(),dw=db.Symbol,dv=Object.prototype,dE=dv.hasOwnProperty,dI=dv.toString,d_=dw?dw.toStringTag:void 0,dA=Object.prototype.toString,dS=function(e){var t=dE.call(e,d_),r=e[d_];try{e[d_]=void 0;var i=!0}catch{}var n=dI.call(e);return i&&(t?e[d_]=r:delete e[d_]),n},dC=dw?dw.toStringTag:void 0,dN=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":dC&&dC in Object(e)?dS(e):dA.call(e)},dM=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},dx=function(e){if(!dM(e))return!1;var t=dN(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},dO=db["__core-js_shared__"],dP=(h=/[^.]+$/.exec(dO&&dO.keys&&dO.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",dT=Function.prototype.toString,dR=function(e){if(null!=e){try{return dT.call(e)}catch{}try{return e+""}catch{}}return""},dD=/^\[object .+?Constructor\]$/,dk=Object.prototype,dL=Function.prototype.toString,dj=dk.hasOwnProperty,dU=RegExp("^"+dL.call(dj).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dB=function(e,t){var r,i=e?.[t];return dM(r=i)&&(!dP||!(dP in r))&&(dx(r)?dU:dD).test(dR(r))?i:void 0},dz=dB(db,"Map"),d$=dB(Object,"create"),dq=Object.prototype.hasOwnProperty,dF=Object.prototype.hasOwnProperty;function dH(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}dH.prototype.clear=function(){this.__data__=d$?d$(null):{},this.size=0},dH.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},dH.prototype.get=function(e){var t=this.__data__;if(d$){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return dq.call(t,e)?t[e]:void 0},dH.prototype.has=function(e){var t=this.__data__;return d$?void 0!==t[e]:dF.call(t,e)},dH.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=d$&&void 0===t?"__lodash_hash_undefined__":t,this};var dW=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},dV=function(e,t){var r=e.__data__;return dW(t)?r["string"==typeof t?"string":"hash"]:r.map};function dK(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function dY(e){var t=this.__data__=new dg(e);this.size=t.size}dK.prototype.clear=function(){this.size=0,this.__data__={hash:new dH,map:new(dz||dg),string:new dH}},dK.prototype.delete=function(e){var t=dV(this,e).delete(e);return this.size-=t?1:0,t},dK.prototype.get=function(e){return dV(this,e).get(e)},dK.prototype.has=function(e){return dV(this,e).has(e)},dK.prototype.set=function(e,t){var r=dV(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this},dY.prototype.clear=function(){this.__data__=new dg,this.size=0},dY.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},dY.prototype.get=function(e){return this.__data__.get(e)},dY.prototype.has=function(e){return this.__data__.has(e)},dY.prototype.set=function(e,t){var r=this.__data__;if(r instanceof dg){var i=r.__data__;if(!dz||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new dK(i)}return r.set(e,t),this.size=r.size,this};var dJ=function(){try{var e=dB(Object,"defineProperty");return e({},"",{}),e}catch{}}(),dG=function(e,t,r){"__proto__"==t&&dJ?dJ(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},dZ=function(e,t,r){(void 0===r||dd(e[t],r))&&(void 0!==r||t in e)||dG(e,t,r)},dQ={exports:{}};g=(p=(f=(d=(u=dQ.exports)&&!u.nodeType&&u)&&dQ&&!dQ.nodeType&&dQ)&&f.exports===d?db.Buffer:void 0)?p.allocUnsafe:void 0,dQ.exports=function(e,t){if(t)return e.slice();var r=e.length,i=g?g(r):new e.constructor(r);return e.copy(i),i};var dX=db.Uint8Array,d0=function(e){var t=new e.constructor(e.byteLength);return new dX(t).set(new dX(e)),t},d1=Object.create,d2=function(){function e(){}return function(t){if(!dM(t))return{};if(d1)return d1(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),d3=(m=Object.getPrototypeOf,y=Object,function(e){return m(y(e))}),d8=Object.prototype,d5=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||d8)},d6=function(e){return null!=e&&"object"==typeof e},d4=function(e){return d6(e)&&"[object Arguments]"==dN(e)},d9=Object.prototype,d7=d9.hasOwnProperty,fe=d9.propertyIsEnumerable,ft=d4(function(){return arguments}())?d4:function(e){return d6(e)&&d7.call(e,"callee")&&!fe.call(e,"callee")},fr=Array.isArray,fi=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},fn=function(e){return null!=e&&fi(e.length)&&!dx(e)},fs={exports:{}};I=(E=(v=(w=(b=fs.exports)&&!b.nodeType&&b)&&fs&&!fs.nodeType&&fs)&&v.exports===w?db.Buffer:void 0)?E.isBuffer:void 0,fs.exports=I||function(){return!1};var fo=Object.prototype,fa=Function.prototype.toString,fc=fo.hasOwnProperty,fl=fa.call(Object),fh={};fh["[object Float32Array]"]=fh["[object Float64Array]"]=fh["[object Int8Array]"]=fh["[object Int16Array]"]=fh["[object Int32Array]"]=fh["[object Uint8Array]"]=fh["[object Uint8ClampedArray]"]=fh["[object Uint16Array]"]=fh["[object Uint32Array]"]=!0,fh["[object Arguments]"]=fh["[object Array]"]=fh["[object ArrayBuffer]"]=fh["[object Boolean]"]=fh["[object DataView]"]=fh["[object Date]"]=fh["[object Error]"]=fh["[object Function]"]=fh["[object Map]"]=fh["[object Number]"]=fh["[object Object]"]=fh["[object RegExp]"]=fh["[object Set]"]=fh["[object String]"]=fh["[object WeakMap]"]=!1;var fu={exports:{}};C=(S=(A=(_=fu.exports)&&!_.nodeType&&_)&&fu&&!fu.nodeType&&fu)&&S.exports===A&&dm.process,N=function(){try{return S&&S.require&&S.require("util").types||C&&C.binding&&C.binding("util")}catch{}}(),fu.exports=N;var fd=fu.exports,ff=fd&&fd.isTypedArray,fp=ff?function(e){return ff(e)}:function(e){return d6(e)&&fi(e.length)&&!!fh[dN(e)]},fg=function(e,t){if(!("constructor"===t&&"function"==typeof e[t])&&"__proto__"!=t)return e[t]},fm=Object.prototype.hasOwnProperty,fy=function(e,t,r){var i=e[t];fm.call(e,t)&&dd(i,r)&&(void 0!==r||t in e)||dG(e,t,r)},fb=/^(?:0|[1-9]\d*)$/,fw=function(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&fb.test(e))&&e>-1&&e%1==0&&e<t},fv=function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i},fE=fs.exports,fI=Object.prototype.hasOwnProperty,f_=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},fA=Object.prototype.hasOwnProperty,fS=function(e,t){var r=fr(e),i=!r&&ft(e),n=!r&&!i&&fE(e),s=!r&&!i&&!n&&fp(e),o=r||i||n||s,a=o?fv(e.length,String):[],c=a.length;for(var l in e)(t||fI.call(e,l))&&!(o&&("length"==l||n&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||fw(l,c)))&&a.push(l);return a},fC=function(e){if(!dM(e))return f_(e);var t=d5(e),r=[];for(var i in e)"constructor"==i&&(t||!fA.call(e,i))||r.push(i);return r},fN=function(e){return fn(e)?fS(e,!0):fC(e)},fM=function(e,t,r,i){var n=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var a=t[s],c=i?i(r[a],e[a],a,r,e):void 0;void 0===c&&(c=e[a]),n?dG(r,a,c):fy(r,a,c)}return r},fx=dQ.exports,fO=function(e,t){var r=t?d0(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},fP=function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t},fT=fs.exports,fR=function(e){if(!d6(e)||"[object Object]"!=dN(e))return!1;var t=d3(e);if(null===t)return!0;var r=fc.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&fa.call(r)==fl},fD=function(e,t,r){for(var i=-1,n=Object(e),s=r(e),o=s.length;o--;){var a=s[++i];if(!1===t(n[a],a,n))break}return e},fk=function(e,t,r,i,n,s,o){var a=fg(e,r),c=fg(t,r),l=o.get(c);if(l){dZ(e,r,l);return}var h=s?s(a,c,r+"",e,t,o):void 0,u=void 0===h;if(u){var d=fr(c),f=!d&&fT(c),p=!d&&!f&&fp(c);h=c,d||f||p?fr(a)?h=a:d6(a)&&fn(a)?h=fP(a):f?(u=!1,h=fx(c,!0)):p?(u=!1,h=fO(c,!0)):h=[]:fR(c)||ft(c)?(h=a,ft(a)?h=fM(a,fN(a)):(!dM(a)||dx(a))&&(h="function"!=typeof c.constructor||d5(c)?{}:d2(d3(c)))):u=!1}u&&(o.set(c,h),n(h,c,i,s,o),o.delete(c)),dZ(e,r,h)},fL=function(e){return e},fj=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},fU=Math.max,fB=dJ?function(e,t){return dJ(e,"toString",{configurable:!0,enumerable:!1,value:function(){return t},writable:!0})}:fL,fz=Date.now,f$=(M=0,x=0,function(){var e=fz(),t=16-(e-x);if(x=e,t>0){if(++M>=800)return arguments[0]}else M=0;return fB.apply(void 0,arguments)}),fq=function(e,t,r){if(!dM(r))return!1;var i=typeof t;return("number"==i?!!(fn(r)&&fw(t,r.length)):"string"==i&&t in r)&&dd(r[t],e)},fF=function e(t,r,i,n,s){t!==r&&fD(r,function(o,a){if(s||(s=new dY),dM(o))fk(t,r,a,i,e,n,s);else{var c=n?n(fg(t,a),o,a+"",t,r,s):void 0;void 0===c&&(c=o),dZ(t,a,c)}},fN)},fH=(O=function(e,t,r){fF(e,t,r)},s=function(e,t){var r=-1,i=t.length,n=i>1?t[i-1]:void 0,s=i>2?t[2]:void 0;for(n=O.length>3&&"function"==typeof n?(i--,n):void 0,s&&fq(t[0],t[1],s)&&(n=i<3?void 0:n,i=1),e=Object(e);++r<i;){var o=t[r];o&&O(e,o,r,n)}return e},f$((a=fU(void 0===(a=o)?s.length-1:a,0),function(){for(var e=arguments,t=-1,r=fU(e.length-a,0),i=Array(r);++t<r;)i[t]=e[a+t];t=-1;for(var n=Array(a+1);++t<a;)n[t]=e[t];return n[a]=fL(i),fj(s,this,n)}),s+"")),fW=Object.defineProperty,fV=Object.defineProperties,fK=Object.getOwnPropertyDescriptors,fY=Object.getOwnPropertySymbols,fJ=Object.prototype.hasOwnProperty,fG=Object.prototype.propertyIsEnumerable,fZ=(e,t,r)=>t in e?fW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fQ=(e,t)=>{for(var r in t||(t={}))fJ.call(t,r)&&fZ(e,r,t[r]);if(fY)for(var r of fY(t))fG.call(t,r)&&fZ(e,r,t[r]);return e},fX=(e,t)=>fV(e,fK(t));function f0(e,t,r){var i;let n=sL(e);return(null==(i=t.rpcMap)?void 0:i[n.reference])||`${da}?chainId=${n.namespace}:${n.reference}&projectId=${r}`}function f1(e){return e.includes(":")?e.split(":")[1]:e}function f2(e){return e.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function f3(e={},t={}){return fH(f8(e),f8(t))}function f8(e){var t,r,i,n;let s={};if(!c_(e))return s;for(let[o,a]of Object.entries(e)){let e=cg(o)?[o]:a.chains,c=a.methods||[],l=a.events||[],h=a.rpcMap||{},u=cm(o);s[u]=fX(fQ(fQ({},s[u]),a),{chains:s2(e,null==(t=s[u])?void 0:t.chains),methods:s2(c,null==(r=s[u])?void 0:r.methods),events:s2(l,null==(i=s[u])?void 0:i.events),rpcMap:fQ(fQ({},h),null==(n=s[u])?void 0:n.rpcMap)})}return s}function f5(e){return e.includes(":")?e.split(":")[2]:e}function f6(e){let t={};for(let[r,i]of Object.entries(e)){let e=i.methods||[],n=i.events||[],s=i.accounts||[],o=cg(r)?[r]:i.chains?i.chains:f2(i.accounts);t[r]={chains:o,methods:e,events:n,accounts:s}}return t}function f4(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):isNaN(Number(e=e.includes(":")?e.split(":")[1]:e))?e:Number(e)}let f9={},f7=e=>f9[e],pe=(e,t)=>{f9[e]=t};var pt=Object.defineProperty,pr=(e,t,r)=>t in e?pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pi=(e,t,r)=>pr(e,"symbol"!=typeof t?t+"":t,r);class pn{constructor(e){pi(this,"name","polkadot"),pi(this,"client"),pi(this,"httpProviders"),pi(this,"events"),pi(this,"namespace"),pi(this,"chainId"),this.namespace=e.namespace,this.events=f7("events"),this.client=f7("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(dh,`${this.name}:${e}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=f1(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||f0(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,f7("disableProviderPing")))}}var ps=Object.defineProperty,po=Object.defineProperties,pa=Object.getOwnPropertyDescriptors,pc=Object.getOwnPropertySymbols,pl=Object.prototype.hasOwnProperty,ph=Object.prototype.propertyIsEnumerable,pu=(e,t,r)=>t in e?ps(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pd=(e,t)=>{for(var r in t||(t={}))pl.call(t,r)&&pu(e,r,t[r]);if(pc)for(var r of pc(t))ph.call(t,r)&&pu(e,r,t[r]);return e},pf=(e,t)=>po(e,pa(t)),pp=(e,t,r)=>pu(e,"symbol"!=typeof t?t+"":t,r);class pg{constructor(e){pp(this,"name","eip155"),pp(this,"client"),pp(this,"chainId"),pp(this,"namespace"),pp(this,"httpProviders"),pp(this,"events"),this.namespace=e.namespace,this.events=f7("events"),this.client=f7("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(dh,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){let r=t||f0(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.k(r,f7("disableProviderPing")))}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=parseInt(f1(t));e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(){let e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let i=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0",n=parseInt(i=i.startsWith("0x")?i:`0x${i}`,16);if(this.isChainApproved(n))this.setDefaultChain(`${n}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${n}`);else throw Error(`Failed to switch to chain 'eip155:${n}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,i;let n=null==(r=null==(t=e.request)?void 0:t.params)?void 0:r[0];if(!n)throw Error("Missing address parameter in `wallet_getCapabilities` request");let s=this.client.session.get(e.topic),o=(null==(i=s?.sessionProperties)?void 0:i.capabilities)||{};if(null!=o&&o[n])return o?.[n];let a=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:pf(pd({},s.sessionProperties||{}),{capabilities:pf(pd({},o||{}),{[n]:a})})})}catch(e){console.warn("Failed to update session with capabilities",e)}return a}async getCallStatus(e){var t,r;let i=this.client.session.get(e.topic),n=null==(t=i.sessionProperties)?void 0:t.bundler_name;if(n){let t=this.getBundlerUrl(e.chainId,n);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}let s=null==(r=i.sessionProperties)?void 0:r.bundler_url;if(s)try{return await this.getUserOperationReceipt(s,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,s)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;let i=new URL(e),n=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,c$.formatJsonRpcRequest)("eth_getUserOperationReceipt",[null==(r=t.request.params)?void 0:r[0]]))});if(!n.ok)throw Error(`Failed to fetch user operation receipt - ${n.status}`);return await n.json()}getBundlerUrl(e,t){return`${dl}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var pm=Object.defineProperty,py=(e,t,r)=>t in e?pm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pb=(e,t,r)=>py(e,"symbol"!=typeof t?t+"":t,r);class pw{constructor(e){pb(this,"name","solana"),pb(this,"client"),pb(this,"httpProviders"),pb(this,"events"),pb(this,"namespace"),pb(this,"chainId"),this.namespace=e.namespace,this.events=f7("events"),this.client=f7("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(dh,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=f1(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||f0(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,f7("disableProviderPing")))}}var pv=Object.defineProperty,pE=(e,t,r)=>t in e?pv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pI=(e,t,r)=>pE(e,"symbol"!=typeof t?t+"":t,r);class p_{constructor(e){pI(this,"name","cosmos"),pI(this,"client"),pI(this,"httpProviders"),pI(this,"events"),pI(this,"namespace"),pI(this,"chainId"),this.namespace=e.namespace,this.events=f7("events"),this.client=f7("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(dh,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=f1(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||f0(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,f7("disableProviderPing")))}}var pA=Object.defineProperty,pS=(e,t,r)=>t in e?pA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pC=(e,t,r)=>pS(e,"symbol"!=typeof t?t+"":t,r);class pN{constructor(e){pC(this,"name","algorand"),pC(this,"client"),pC(this,"httpProviders"),pC(this,"events"),pC(this,"namespace"),pC(this,"chainId"),this.namespace=e.namespace,this.events=f7("events"),this.client=f7("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){let r=t||f0(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(dh,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||f0(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new cz.r(new di.Z(r,f7("disableProviderPing")))}}var pM=Object.defineProperty,px=(e,t,r)=>t in e?pM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pO=(e,t,r)=>px(e,"symbol"!=typeof t?t+"":t,r);class pP{constructor(e){pO(this,"name","cip34"),pO(this,"client"),pO(this,"httpProviders"),pO(this,"events"),pO(this,"namespace"),pO(this,"chainId"),this.namespace=e.namespace,this.events=f7("events"),this.client=f7("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(dh,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let r=this.getCardanoRPCUrl(t),i=f1(t);e[i]=this.createHttpProvider(i,r)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){let t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||this.getCardanoRPCUrl(e);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,f7("disableProviderPing")))}}var pT=Object.defineProperty,pR=(e,t,r)=>t in e?pT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pD=(e,t,r)=>pR(e,"symbol"!=typeof t?t+"":t,r);class pk{constructor(e){pD(this,"name","elrond"),pD(this,"client"),pD(this,"httpProviders"),pD(this,"events"),pD(this,"namespace"),pD(this,"chainId"),this.namespace=e.namespace,this.events=f7("events"),this.client=f7("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(dh,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=f1(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||f0(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,f7("disableProviderPing")))}}var pL=Object.defineProperty,pj=(e,t,r)=>t in e?pL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pU=(e,t,r)=>pj(e,"symbol"!=typeof t?t+"":t,r);class pB{constructor(e){pU(this,"name","multiversx"),pU(this,"client"),pU(this,"httpProviders"),pU(this,"events"),pU(this,"namespace"),pU(this,"chainId"),this.namespace=e.namespace,this.events=f7("events"),this.client=f7("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(dh,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=f1(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||f0(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,f7("disableProviderPing")))}}var pz=Object.defineProperty,p$=(e,t,r)=>t in e?pz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pq=(e,t,r)=>p$(e,"symbol"!=typeof t?t+"":t,r);class pF{constructor(e){pq(this,"name","near"),pq(this,"client"),pq(this,"httpProviders"),pq(this,"events"),pq(this,"namespace"),pq(this,"chainId"),this.namespace=e.namespace,this.events=f7("events"),this.client=f7("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let r=t||f0(`${this.name}:${e}`,this.namespace);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(dh,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||f0(e,this.namespace);return typeof r>"u"?void 0:new cz.r(new di.Z(r,f7("disableProviderPing")))}}var pH=Object.defineProperty,pW=(e,t,r)=>t in e?pH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pV=(e,t,r)=>pW(e,"symbol"!=typeof t?t+"":t,r);class pK{constructor(e){pV(this,"name","tezos"),pV(this,"client"),pV(this,"httpProviders"),pV(this,"events"),pV(this,"namespace"),pV(this,"chainId"),this.namespace=e.namespace,this.events=f7("events"),this.client=f7("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let r=t||f0(`${this.name}:${e}`,this.namespace);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(dh,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||f0(e,this.namespace);return typeof r>"u"?void 0:new cz.r(new di.Z(r))}}var pY=Object.defineProperty,pJ=(e,t,r)=>t in e?pY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pG=(e,t,r)=>pJ(e,"symbol"!=typeof t?t+"":t,r);class pZ{constructor(e){pG(this,"name",dc),pG(this,"client"),pG(this,"httpProviders"),pG(this,"events"),pG(this,"namespace"),pG(this,"chainId"),this.namespace=e.namespace,this.events=f7("events"),this.client=f7("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(dh,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){var e,t;let r={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach(e=>{let t=sL(e);r[`${t.namespace}:${t.reference}`]=this.createHttpProvider(e)}),r}getHttpProvider(e){let t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||f0(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,f7("disableProviderPing")))}}var pQ=Object.defineProperty,pX=Object.defineProperties,p0=Object.getOwnPropertyDescriptors,p1=Object.getOwnPropertySymbols,p2=Object.prototype.hasOwnProperty,p3=Object.prototype.propertyIsEnumerable,p8=(e,t,r)=>t in e?pQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p5=(e,t)=>{for(var r in t||(t={}))p2.call(t,r)&&p8(e,r,t[r]);if(p1)for(var r of p1(t))p3.call(t,r)&&p8(e,r,t[r]);return e},p6=(e,t)=>pX(e,p0(t)),p4=(e,t,r)=>p8(e,"symbol"!=typeof t?t+"":t,r);class p9{constructor(e){p4(this,"client"),p4(this,"namespaces"),p4(this,"optionalNamespaces"),p4(this,"sessionProperties"),p4(this,"events",new(et())),p4(this,"rpcProviders",{}),p4(this,"session"),p4(this,"providerOpts"),p4(this,"logger"),p4(this,"uri"),p4(this,"disableProviderPing",!1),this.providerOpts=e,this.logger="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,ez.gw)((0,ez.jI)({level:e?.logger||dn})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){let t=new p9(e);return await t.initialize(),t}async request(e,t,r){let[i,n]=this.validateChain(t);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(i).request({request:p5({},e),chainId:`${i}:${n}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,i){let n=new Date().getTime();this.request(e,r,i).then(e=>t(null,(0,c$.formatJsonRpcResult)(n,e))).catch(e=>t(e,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:cE("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();let{uri:r,response:i}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));let n=await i();if(this.session=n.session,this.session){let e=f6(this.session.namespaces);this.namespaces=f3(this.namespaces,e),this.persist("namespaces",this.namespaces),this.onConnect()}return n}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){let{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});t&&(this.uri=t,this.events.emit("display_uri",t));let i=await r();this.session=i;let n=f6(i.namespaces);return this.namespaces=f3(this.namespaces,n),this.persist("namespaces",this.namespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;let[r,i]=this.validateChain(e),n=this.getProvider(r);n.name===dc?n.setDefaultChain(`${r}:${i}`,t):n.setDefaultChain(i,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");let t=this.client.pairing.getAll();if(cI(t)){for(let r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){let e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await dr.init({core:this.providerOpts.core,logger:this.providerOpts.logger||dn,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).map(e=>cm(e)))];pe("client",this.client),pe("events",this.events),pe("disableProviderPing",this.disableProviderPing),e.forEach(e=>{if(!this.session)return;let t=function(e,t){let r=Object.keys(t.namespaces).filter(t=>t.includes(e));if(!r.length)return[];let i=[];return r.forEach(e=>{let r=t.namespaces[e].accounts;i.push(...r)}),i}(e,this.session),r=f2(t),i=p6(p5({},f3(this.namespaces,this.optionalNamespaces)[e]),{accounts:t,chains:r});switch(e){case"eip155":this.rpcProviders[e]=new pg({namespace:i});break;case"algorand":this.rpcProviders[e]=new pN({namespace:i});break;case"solana":this.rpcProviders[e]=new pw({namespace:i});break;case"cosmos":this.rpcProviders[e]=new p_({namespace:i});break;case"polkadot":this.rpcProviders[e]=new pn({namespace:i});break;case"cip34":this.rpcProviders[e]=new pP({namespace:i});break;case"elrond":this.rpcProviders[e]=new pk({namespace:i});break;case"multiversx":this.rpcProviders[e]=new pB({namespace:i});break;case"near":this.rpcProviders[e]=new pF({namespace:i});break;case"tezos":this.rpcProviders[e]=new pK({namespace:i});break;default:this.rpcProviders[dc]?this.rpcProviders[dc].updateNamespace(i):this.rpcProviders[dc]=new pZ({namespace:i})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{let{params:t}=e,{event:r}=t;if("accountsChanged"===r.name){let e=r.data;e&&cI(e)&&this.events.emit("accountsChanged",e.map(f5))}else if("chainChanged"===r.name){let e=t.chainId,r=t.event.data,i=cm(e),n=f4(e)!==f4(r)?`${i}:${f4(r)}`:e;this.onChainChanged(n)}else this.events.emit(r.name,r.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r;let{namespaces:i}=t,n=null==(r=this.client)?void 0:r.session.get(e);this.session=p6(p5({},n),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",p6(p5({},cE("USER_DISCONNECTED")),{data:e.topic}))}),this.on(dh,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[dc]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){let{namespaces:t,optionalNamespaces:r,sessionProperties:i}=e;t&&Object.keys(t).length&&(this.namespaces=t),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=i,this.persist("namespaces",t),this.persist("optionalNamespaces",r)}validateChain(e){let[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(e=>cm(e)).includes(t))throw Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];let i=cm(Object.keys(this.namespaces)[0]),n=this.rpcProviders[i].getDefaultChain();return[i,n]}async requestAccounts(){let[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){if(!this.namespaces)return;let[r,i]=this.validateChain(e);i&&(t||this.getProvider(r).setDefaultChain(i),this.namespaces[r]?this.namespaces[r].defaultChain=i:this.namespaces[`${r}:${i}`]?this.namespaces[`${r}:${i}`].defaultChain=i:this.namespaces[`${r}:${i}`]={defaultChain:i},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${ds}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${ds}/${e}`)}}var p7=r(54173),ge=r(93046),gt=r(53357),gr=r(48415),gi=r(82957).Buffer;function gn(e,...t){try{var r;return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}}function gs(e){if(function(e){let t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){let t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return gs(e.toJSON());throw Error("[unstorage] Cannot stringify value!")}let go="base64:";function ga(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function gc(e){return(e=ga(e))?e+":":""}let gl=()=>{let e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function gh(e,t,r){return e.watch?e.watch((e,i)=>t(e,r+i)):()=>{}}async function gu(e){"function"==typeof e.dispose&&await gn(e.dispose)}var gd=(e={})=>{let t;let r=e.base&&e.base.length>0?`${e.base}:`:"",i=e=>r+e;return e.dbName&&e.storeName&&(t=e_(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await eS(i(e),t)>"u"),getItem:async e=>await eS(i(e),t)??null,setItem:(e,r)=>eC(i(e),r,t),removeItem:e=>eN(i(e),t),getKeys:()=>ex(t),clear:()=>eM(t)}};class gf{constructor(){this.indexedDb=function(e={}){let t={mounts:{"":e.driver||gl()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(let r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},i=(e,r)=>t.mountpoints.filter(t=>t.startsWith(e)||r&&e.startsWith(t)).map(r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]})),n=(e,r)=>{if(t.watching)for(let i of(r=ga(r),t.watchListeners))i(e,r)},s=async()=>{if(!t.watching)for(let e in t.watching=!0,t.mounts)t.unwatch[e]=await gh(t.mounts[e],n,e)},o=async()=>{if(t.watching){for(let e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},a=(e,t,i)=>{let n=new Map,s=e=>{let t=n.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},n.set(e.base,t)),t};for(let i of e){let e="string"==typeof i,n=ga(e?i:i.key),o=e?void 0:i.value,a=e||!i.options?t:{...t,...i.options},c=r(n);s(c).items.push({key:n,value:o,relativeKey:c.relativeKey,options:a})}return Promise.all([...n.values()].map(e=>i(e))).then(e=>e.flat())},c={hasItem(e,t={}){let{relativeKey:i,driver:n}=r(e=ga(e));return gn(n.hasItem,i,t)},getItem(e,t={}){let{relativeKey:i,driver:n}=r(e=ga(e));return gn(n.getItem,i,t).then(e=>ed(e))},getItems:(e,t={})=>a(e,t,e=>e.driver.getItems?gn(e.driver.getItems,e.items.map(e=>({key:e.relativeKey,options:e.options})),t).then(t=>t.map(t=>({key:function(...e){return ga(e.join(":"))}(e.base,t.key),value:ed(t.value)}))):Promise.all(e.items.map(t=>gn(e.driver.getItem,t.relativeKey,t.options).then(e=>({key:t.key,value:ed(e)}))))),getItemRaw(e,t={}){let{relativeKey:i,driver:n}=r(e=ga(e));return n.getItemRaw?gn(n.getItemRaw,i,t):gn(n.getItem,i,t).then(e=>{var t;return"string"==typeof e&&e.startsWith(go)?(t=e.slice(go.length),globalThis.Buffer?gi.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))):e})},async setItem(e,t,i={}){if(void 0===t)return c.removeItem(e);let{relativeKey:s,driver:o}=r(e=ga(e));o.setItem&&(await gn(o.setItem,s,gs(t),i),o.watch||n("update",e))},async setItems(e,t){await a(e,t,async e=>{if(e.driver.setItems)return gn(e.driver.setItems,e.items.map(e=>({key:e.relativeKey,value:gs(e.value),options:e.options})),t);e.driver.setItem&&await Promise.all(e.items.map(t=>gn(e.driver.setItem,t.relativeKey,gs(t.value),t.options)))})},async setItemRaw(e,t,i={}){if(void 0===t)return c.removeItem(e,i);let{relativeKey:s,driver:o}=r(e=ga(e));if(o.setItemRaw)await gn(o.setItemRaw,s,t,i);else{if(!o.setItem)return;await gn(o.setItem,s,"string"==typeof t?t:go+(globalThis.Buffer?gi.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))),i)}o.watch||n("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t});let{relativeKey:i,driver:s}=r(e=ga(e));s.removeItem&&(await gn(s.removeItem,i,t),(t.removeMeta||t.removeMata)&&await gn(s.removeItem,i+"$",t),s.watch||n("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t});let{relativeKey:i,driver:n}=r(e=ga(e)),s=Object.create(null);if(n.getMeta&&Object.assign(s,await gn(n.getMeta,i,t)),!t.nativeOnly){let e=await gn(n.getItem,i+"$",t).then(e=>ed(e));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){let r=i(e=gc(e),!0),n=[],s=[],o=!0;for(let e of r){for(let r of(e.driver.flags?.maxDepth||(o=!1),await gn(e.driver.getKeys,e.relativeBase,t))){let t=e.mountpoint+ga(r);n.some(e=>t.startsWith(e))||s.push(t)}n=[e.mountpoint,...n.filter(t=>!t.startsWith(e.mountpoint))]}let a=void 0!==t.maxDepth&&!o;return s.filter(r=>{var i;return(!a||function(e,t){if(void 0===t)return!0;let r=0,i=e.indexOf(":");for(;i>-1;)r++,i=e.indexOf(":",i+1);return r<=t}(r,t.maxDepth))&&((i=e)?r.startsWith(i)&&"$"!==r[r.length-1]:"$"!==r[r.length-1])})},async clear(e,t={}){e=gc(e),await Promise.all(i(e,!1).map(async e=>e.driver.clear?gn(e.driver.clear,e.relativeBase,t):e.driver.removeItem?Promise.all((await e.driver.getKeys(e.relativeBase||"",t)).map(r=>e.driver.removeItem(r,t))):void 0))},async dispose(){await Promise.all(Object.values(t.mounts).map(e=>gu(e)))},watch:async e=>(await s(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter(t=>t!==e),0===t.watchListeners.length&&await o()}),async unwatch(){t.watchListeners=[],await o()},mount(e,r){if((e=gc(e))&&t.mounts[e])throw Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort((e,t)=>t.length-e.length)),t.mounts[e]=r,t.watching&&Promise.resolve(gh(r,n,e)).then(r=>{t.unwatch[e]=r}).catch(console.error),c},async unmount(e,r=!0){(e=gc(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await gu(t.mounts[e]),t.mountpoints=t.mountpoints.filter(t=>t!==e),delete t.mounts[e])},getMount(e=""){let t=r(e=ga(e)+":");return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>i(e=ga(e),t.parents).map(e=>({driver:e.driver,base:e.mountpoint})),keys:(e,t={})=>c.getKeys(e,t),get:(e,t={})=>c.getItem(e,t),set:(e,t,r={})=>c.setItem(e,t,r),has:(e,t={})=>c.hasItem(e,t),del:(e,t={})=>c.removeItem(e,t),remove:(e,t={})=>c.removeItem(e,t)};return c}({driver:gd({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){let t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,(0,eO.u)(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var gp="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof r.g?r.g:"u">typeof self?self:{},gg={exports:{}};function gm(e){var t;return[e[0],(0,eO.D)(null!=(t=e[1])?t:"")]}!function(){function e(){}e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){let e=this;Object.keys(e).forEach(function(t){e[t]=void 0,delete e[t]})},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),"u">typeof gp&&gp.localStorage?gg.exports=gp.localStorage:"u">typeof window&&window.localStorage?gg.exports=window.localStorage:gg.exports=new e}();class gy{constructor(){this.localStorage=gg.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(gm)}async getItem(e){let t=this.localStorage.getItem(e);if(null!==t)return(0,eO.D)(t)}async setItem(e,t){this.localStorage.setItem(e,(0,eO.u)(t))}async removeItem(e){this.localStorage.removeItem(e)}}let gb=async(e,t,r)=>{let i="wc_storage_version",n=await t.getItem(i);if(n&&n>=1){r(t);return}let s=await e.getKeys();if(!s.length){r(t);return}let o=[];for(;s.length;){let r=s.shift();if(!r)continue;let i=r.toLowerCase();if(i.includes("wc@")||i.includes("walletconnect")||i.includes("wc_")||i.includes("wallet_connect")){let i=await e.getItem(r);await t.setItem(r,i),o.push(r)}}await t.setItem(i,1),r(t),gw(e,o)},gw=async(e,t)=>{t.length&&t.forEach(async t=>{await e.removeItem(t)})};class gv{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};let e=new gy;this.storage=e;try{let t=new gf;gb(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{let t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}}var gE=Object.defineProperty,gI=(e,t,r)=>t in e?gE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g_=(e,t,r)=>gI(e,"symbol"!=typeof t?t+"":t,r);class gA extends ei{constructor(e){super(),this.opts=e,g_(this,"protocol","wc"),g_(this,"version",2)}}var gS=Object.defineProperty,gC=(e,t,r)=>t in e?gS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gN=(e,t,r)=>gC(e,"symbol"!=typeof t?t+"":t,r);class gM extends ei{constructor(e,t){super(),this.core=e,this.logger=t,gN(this,"records",new Map)}}class gx{constructor(e,t){this.logger=e,this.core=t}}class gO extends ei{constructor(e,t){super(),this.relayer=e,this.logger=t}}class gP extends ei{constructor(e){super()}}class gT{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}}class gR extends ei{constructor(e,t){super(),this.relayer=e,this.logger=t}}class gD extends ei{constructor(e,t){super(),this.core=e,this.logger=t}}class gk{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class gL{constructor(e,t){this.projectId=e,this.logger=t}}class gj{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}var gU=Object.defineProperty,gB=(e,t,r)=>t in e?gU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gz=(e,t,r)=>gB(e,"symbol"!=typeof t?t+"":t,r);class g${constructor(e){this.opts=e,gz(this,"protocol","wc"),gz(this,"version",2)}}class gq{constructor(e){this.client=e}}let gF="2.23.2",gH={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,version:`viem@${gF}`};class gW extends Error{constructor(e,t={}){let r=t.cause instanceof gW?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof gW&&t.cause.docsPath||t.docsPath,n=gH.getDocsUrl?.({...t,docsPath:i});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: ${n}`]:[],...r?[`Details: ${r}`]:[],...gH.version?[`Version: ${gH.version}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=gF}walk(e){return function e(t,r){return r?.(t)?t:t&&"object"==typeof t&&"cause"in t&&void 0!==t.cause?e(t.cause,r):r?null:t}(this,e)}}function gV(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}class gK extends gW{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function gY(e,{dir:t,size:r=32}={}){return"string"==typeof e?function(e,{dir:t,size:r=32}={}){if(null===r)return e;let i=e.replace("0x","");if(i.length>2*r)throw new gK({size:Math.ceil(i.length/2),targetSize:r,type:"hex"});return`0x${i["right"===t?"padEnd":"padStart"](2*r,"0")}`}(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new gK({size:e.length,targetSize:r,type:"bytes"});let i=new Uint8Array(r);for(let n=0;n<r;n++){let s="right"===t;i[s?n:r-n-1]=e[s?n:e.length-n-1]}return i}(e,{dir:t,size:r})}class gJ extends gW{constructor({max:e,min:t,signed:r,size:i,value:n}){super(`Number "${n}" is not in safe ${i?`${8*i}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class gG extends gW{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function gZ(e){return gV(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function gQ(e,{size:t}){if(gZ(e)>t)throw new gG({givenSize:gZ(e),maxSize:t})}function gX(e,t={}){let{signed:r}=t;t.size&&gQ(e,{size:t.size});let i=BigInt(e);if(!r)return i;let n=(e.length-2)/2;return i<=(1n<<8n*BigInt(n)-1n)-1n?i:i-BigInt(`0x${"f".padStart(2*n,"f")}`)-1n}let g0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function g1(e,t={}){return"number"==typeof e||"bigint"==typeof e?g3(e,t):"string"==typeof e?function(e,t={}){return g2(g8.encode(e),t)}(e,t):"boolean"==typeof e?function(e,t={}){let r=`0x${Number(e)}`;return"number"==typeof t.size?(gQ(r,{size:t.size}),gY(r,{size:t.size})):r}(e,t):g2(e,t)}function g2(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=g0[e[t]];let i=`0x${r}`;return"number"==typeof t.size?(gQ(i,{size:t.size}),gY(i,{dir:"right",size:t.size})):i}function g3(e,t={}){let r;let{signed:i,size:n}=t,s=BigInt(e);n?r=i?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));let o="bigint"==typeof r&&i?-r-1n:0;if(r&&s>r||s<o){let t="bigint"==typeof e?"n":"";throw new gJ({max:r?`${r}${t}`:void 0,min:`${o}${t}`,signed:i,size:n,value:`${e}${t}`})}let a=`0x${(i&&s<0?(1n<<BigInt(8*n))+BigInt(s):s).toString(16)}`;return n?gY(a,{size:n}):a}let g8=new TextEncoder,g5=new TextEncoder,g6={zero:48,nine:57,A:65,F:70,a:97,f:102};function g4(e){return e>=g6.zero&&e<=g6.nine?e-g6.zero:e>=g6.A&&e<=g6.F?e-(g6.A-10):e>=g6.a&&e<=g6.f?e-(g6.a-10):void 0}function g9(e,t={}){let r=e;t.size&&(gQ(r,{size:t.size}),r=gY(r,{dir:"right",size:t.size}));let i=r.slice(2);i.length%2&&(i=`0${i}`);let n=i.length/2,s=new Uint8Array(n);for(let e=0,t=0;e<n;e++){let r=g4(i.charCodeAt(t++)),n=g4(i.charCodeAt(t++));if(void 0===r||void 0===n)throw new gW(`Invalid byte sequence ("${i[t-2]}${i[t-1]}" in "${i}").`);s[e]=16*r+n}return s}function g7(e,t={}){let r=g5.encode(e);return"number"==typeof t.size?(gQ(r,{size:t.size}),gY(r,{dir:"right",size:t.size})):r}var me=r(36789);let mt=BigInt(4294967296-1),mr=BigInt(32),mi=(e,t,r)=>e<<r|t>>>32-r,mn=(e,t,r)=>t<<r|e>>>32-r,ms=(e,t,r)=>t<<r-32|e>>>64-r,mo=(e,t,r)=>e<<r-32|t>>>64-r;var ma=r(48466);let mc=[],ml=[],mh=[],mu=BigInt(0),md=BigInt(1),mf=BigInt(2),mp=BigInt(7),mg=BigInt(256),mm=BigInt(113);for(let e=0,t=md,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],mc.push(2*(5*i+r)),ml.push((e+1)*(e+2)/2%64);let n=mu;for(let e=0;e<7;e++)(t=(t<<md^(t>>mp)*mm)%mg)&mf&&(n^=md<<(md<<BigInt(e))-md);mh.push(n)}let[my,mb]=function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=function(e,t=!1){return t?{h:Number(e&mt),l:Number(e>>mr&mt)}:{h:0|Number(e>>mr&mt),l:0|Number(e&mt)}}(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}(mh,!0),mw=(e,t,r)=>r>32?ms(e,t,r):mi(e,t,r),mv=(e,t,r)=>r>32?mo(e,t,r):mn(e,t,r);class mE extends ma.kb{constructor(e,t,r,i=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,me.k8)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,ma.Jq)(this.state)}keccak(){ma.iA||(0,ma.l1)(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=mw(s,o,1)^r[i],c=mv(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=ml[r],s=mw(t,n,i),o=mv(t,n,i),a=mc[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=my[i],e[1]^=mb[i]}r.fill(0)}(this.state32,this.rounds),ma.iA||(0,ma.l1)(this.state32),this.posOut=0,this.pos=0}update(e){(0,me.$h)(this);let{blockLen:t,state:r}=this,i=(e=(0,ma.O0)(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){(0,me.$h)(this,!1),(0,me.gk)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,me.k8)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,me.eB)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new mE(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let mI=(0,ma.hE)(()=>new mE(136,1,32));function m_(e,t){let r=mI(gV(e,{strict:!1})?function(e,t={}){return"number"==typeof e||"bigint"==typeof e?g9(g3(e,t)):"boolean"==typeof e?function(e,t={}){let r=new Uint8Array(1);return(r[0]=Number(e),"number"==typeof t.size)?(gQ(r,{size:t.size}),gY(r,{size:t.size})):r}(e,t):gV(e)?g9(e,t):g7(e,t)}(e):e);return"bytes"===(t||"hex")?r:g1(r)}class mA extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=this.keys().next().value;e&&this.delete(e)}return this}}let mS=new mA(8192);async function mC({hash:e,signature:t}){let i=gV(e)?e:g1(e),{secp256k1:n}=await r.e(7024).then(r.bind(r,97024)),s=(()=>{if("object"==typeof t&&"r"in t&&"s"in t){let{r:e,s:r,v:i,yParity:s}=t,o=mN(Number(s??i));return new n.Signature(gX(e),gX(r)).addRecoveryBit(o)}let e=gV(t)?t:g1(t),r=mN(function(e,t={}){return Number(gX(e,t))}(`0x${e.slice(130)}`));return n.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(r)})().recoverPublicKey(i.substring(2)).toHex(!1);return`0x${s}`}function mN(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw Error("Invalid yParityOrV value")}async function mM({hash:e,signature:t}){return function(e){let t=m_(`0x${e.substring(4)}`).substring(26);return function(e,t){if(mS.has(`${e}.undefined`))return mS.get(`${e}.undefined`);let r=e.substring(2).toLowerCase(),i=m_(g7(r),"bytes"),n=(t?r.substring(`${t}0x`.length):r).split("");for(let e=0;e<40;e+=2)i[e>>1]>>4>=8&&n[e]&&(n[e]=n[e].toUpperCase()),(15&i[e>>1])>=8&&n[e+1]&&(n[e+1]=n[e+1].toUpperCase());let s=`0x${n.join("")}`;return mS.set(`${e}.${t}`,s),s}(`0x${t}`)}(await mC({hash:e,signature:t}))}var mx=function(e){if(e.length>=255)throw TypeError("Alphabet too long");let t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){let i=e.charAt(r),n=i.charCodeAt(0);if(255!==t[n])throw TypeError(i+" is ambiguous");t[n]=r}let r=e.length,i=e.charAt(0),n=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;let s=0,o=0,a=0;for(;e[s]===i;)o++,s++;let c=(e.length-s)*n+1>>>0,l=new Uint8Array(c);for(;s<e.length;){let i=e.charCodeAt(s);if(i>255)return;let n=t[i];if(255===n)return;let o=0;for(let e=c-1;(0!==n||o<a)&&-1!==e;e--,o++)n+=r*l[e]>>>0,l[e]=n%256>>>0,n=n/256>>>0;if(0!==n)throw Error("Non-zero carry");a=o,s++}let h=c-a;for(;h!==c&&0===l[h];)h++;let u=new Uint8Array(o+(c-h)),d=o;for(;h!==c;)u[d++]=l[h++];return u}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";let n=0,o=0,a=0,c=t.length;for(;a!==c&&0===t[a];)a++,n++;let l=(c-a)*s+1>>>0,h=new Uint8Array(l);for(;a!==c;){let e=t[a],i=0;for(let t=l-1;(0!==e||i<o)&&-1!==t;t--,i++)e+=256*h[t]>>>0,h[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw Error("Non-zero carry");o=i,a++}let u=l-o;for(;u!==l&&0===h[u];)u++;let d=i.repeat(n);for(;u<l;++u)d+=e.charAt(h[u]);return d},decodeUnsafe:o,decode:function(e){let t=o(e);if(t)return t;throw Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),mO=r(25566),mP=r(82957).Buffer;function mT(e){let[t,r]=e.split(":");return{namespace:t,reference:r}}function mR(e,t){return e.includes(":")?[e]:t.chains||[]}let mD={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function mk(){return"u">typeof mO&&"u">typeof mO.versions&&"u">typeof mO.versions.node}function mL(){return!(0,iv.getDocument)()&&!!(0,iv.getNavigator)()&&"ReactNative"===navigator.product}function mj(){return!mk()&&!!(0,iv.getNavigator)()&&!!(0,iv.getDocument)()}function mU(){return mL()?mD.reactNative:mk()?mD.node:mj()?mD.browser:mD.unknown}function mB(){var e;try{return mL()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Application)?null==(e=r.g.Application)?void 0:e.applicationId:void 0}catch{return}}function mz(){return(0,iE.D)()||{name:"",description:"",url:"",icons:[""]}}function m$(e,t,i){let n=function(){if(mU()===mD.reactNative&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)){let{OS:e,Version:t}=r.g.Platform;return[e,t].join("-")}let e=ib();if(null===e)return"unknown";let t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[t,e.name,e.version].join("-"):[t,e.version].join("-")}(),s=function(){var e;let t=mU();return t===mD.browser?[t,(null==(e=(0,iv.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),["js",i].join("-"),n,s].join("/")}function mq(e,t){return e.filter(e=>t.includes(e)).length===e.length}function mF(e){return Object.fromEntries(e.entries())}function mH(e){return new Map(Object.entries(e))}function mW(e=er.FIVE_MINUTES,t){let r,i,n,s;let o=(0,er.toMiliseconds)(e||er.FIVE_MINUTES);return{resolve:e=>{n&&r&&(clearTimeout(n),r(e),s=Promise.resolve(e))},reject:e=>{n&&i&&(clearTimeout(n),i(e))},done:()=>new Promise((e,a)=>{if(s)return e(s);n=setTimeout(()=>{let e=Error(t);s=Promise.reject(e),a(e)},o),r=e,i=a})}}function mV(e,t,r){return new Promise(async(i,n)=>{let s=setTimeout(()=>n(Error(r)),t);try{let t=await e;i(t)}catch(e){n(e)}clearTimeout(s)})}function mK(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw Error(`Unknown expirer target type: ${e}`)}function mY(e){let[t,r]=e.split(":"),i={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)i.topic=r;else if("id"===t&&Number.isInteger(Number(r)))i.id=Number(r);else throw Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function mJ(e,t){return(0,er.fromMiliseconds)((t||Date.now())+(0,er.toMiliseconds)(e))}function mG(e){return Date.now()>=(0,er.toMiliseconds)(e)}function mZ(e,t){return`${e}${t?`:${t}`:""}`}function mQ(e=[],t=[]){return[...new Set([...e,...t])]}async function mX({id:e,topic:t,wcDeepLink:i}){var n;try{if(!i)return;let s="string"==typeof i?JSON.parse(i):i,o=s?.href;if("string"!=typeof o)return;let a=function(e,t,r){let i=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let n=`${e}`;if(e.startsWith("https://t.me")){let t=e.includes("?")?"&startapp=":"?startapp=";n=`${n}${t}${function(e,t=!1){let r=mP.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(i,!0)}`}else n=`${n}/wc?${i}`;return n}(o,e,t),c=mU();if(c===mD.browser){let e;if(!(null!=(n=(0,iv.getDocument)())&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}e="_self",function(){try{return window.self!==window.top}catch{return!1}}()?e="_top":("u">typeof window&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||a.startsWith("https://")||a.startsWith("http://"))&&(e="_blank"),window.open(a,e,"noreferrer noopener")}else c===mD.reactNative&&"u">typeof(null==r.g?void 0:r.g.Linking)&&await r.g.Linking.openURL(a)}catch(e){console.error(e)}}async function m0(e,t){let r="";try{if(mj()&&(r=localStorage.getItem(t)))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}function m1(e,t){if(!e.includes(t))return null;let r=e.split(/([&,?,=])/),i=r.indexOf(t);return r[i+2]}function m2(){return"u">typeof crypto&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function m3(){return"u">typeof mO&&"true"===mO.env.IS_VITEST}function m8(e){return mP.from(e,"base64").toString("utf-8")}function m5(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function m6(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function m4(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");m5(e.outputLen),m5(e.blockLen)}function m9(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function m7(e,t){m6(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}let ye=BigInt(4294967296-1),yt=BigInt(32),yr=(e,t,r)=>e<<r|t>>>32-r,yi=(e,t,r)=>t<<r|e>>>32-r,yn=(e,t,r)=>t<<r-32|e>>>64-r,ys=(e,t,r)=>e<<r-32|t>>>64-r,yo="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function ya(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function yc(e,t){return e<<32-t|e>>>t}let yl=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function yh(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}}function yu(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),m6(e),e}class yd{clone(){return this._cloneInto()}}function yf(e){let t=t=>e().update(yu(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function yp(e=32){if(yo&&"function"==typeof yo.getRandomValues)return yo.getRandomValues(new Uint8Array(e));if(yo&&"function"==typeof yo.randomBytes)return yo.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}let yg=[],ym=[],yy=[],yb=BigInt(0),yw=BigInt(1),yv=BigInt(2),yE=BigInt(7),yI=BigInt(256),y_=BigInt(113);for(let e=0,t=yw,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],yg.push(2*(5*i+r)),ym.push((e+1)*(e+2)/2%64);let n=yb;for(let e=0;e<7;e++)(t=(t<<yw^(t>>yE)*y_)%yI)&yv&&(n^=yw<<(yw<<BigInt(e))-yw);yy.push(n)}let[yA,yS]=function(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:o}=function(e,t=!1){return t?{h:Number(e&ye),l:Number(e>>yt&ye)}:{h:0|Number(e>>yt&ye),l:0|Number(e&ye)}}(e[n],t);[r[n],i[n]]=[s,o]}return[r,i]}(yy,!0),yC=(e,t,r)=>r>32?yn(e,t,r):yr(e,t,r),yN=(e,t,r)=>r>32?ys(e,t,r):yi(e,t,r);class yM extends yd{constructor(e,t,r,i=!1,n=24){var s;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,m5(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=new Uint32Array((s=this.state).buffer,s.byteOffset,Math.floor(s.byteLength/4))}keccak(){yl||yh(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],o=r[n+1],a=yC(s,o,1)^r[i],c=yN(s,o,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=ym[r],s=yC(t,n,i),o=yN(t,n,i),a=yg[r];t=e[a],n=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=yA[i],e[1]^=yS[i]}r.fill(0)}(this.state32,this.rounds),yl||yh(this.state32),this.posOut=0,this.pos=0}update(e){m9(this);let{blockLen:t,state:r}=this,i=(e=yu(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){m9(this,!1),m6(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return m5(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(m7(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new yM(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let yx=yf(()=>new yM(136,1,32));function yO(e){let t=`Ethereum Signed Message:
${e.length}`,r=new TextEncoder().encode(t+e);return"0x"+mP.from(yx(r)).toString("hex")}async function yP(e,t,r,i,n,s){switch(r.t){case"eip191":return await yT(e,t,r.s);case"eip1271":return await yR(e,t,r.s,i,n,s);default:throw Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function yT(e,t,r){return(await mM({hash:yO(t),signature:r})).toLowerCase()===e.toLowerCase()}async function yR(e,t,r,i,n,s){let o=mT(i);if(!o.namespace||!o.reference)throw Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${i}`);try{let o="0x1626ba7e",a=r.substring(2),c=yO(t).substring(2),l=await fetch(`${s||"https://rpc.walletconnect.org/v1"}/?chainId=${i}&projectId=${n}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:o+c+"00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000041"+a},"latest"]})}),{result:h}=await l.json();return!!h&&h.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}var yD=Object.defineProperty,yk=Object.defineProperties,yL=Object.getOwnPropertyDescriptors,yj=Object.getOwnPropertySymbols,yU=Object.prototype.hasOwnProperty,yB=Object.prototype.propertyIsEnumerable,yz=(e,t,r)=>t in e?yD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,y$=(e,t)=>{for(var r in t||(t={}))yU.call(t,r)&&yz(e,r,t[r]);if(yj)for(var r of yj(t))yB.call(t,r)&&yz(e,r,t[r]);return e},yq=(e,t)=>yk(e,yL(t));let yF=e=>e?.split(":"),yH=e=>{let t=e&&yF(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]},yW=e=>{let t=e&&yF(e);if(t)return t[2]+":"+t[3]},yV=e=>{let t=e&&yF(e);if(t)return t.pop()};async function yK(e){let{cacao:t,projectId:r}=e,{s:i,p:n}=t,s=yY(n,n.iss),o=yV(n.iss);return await yP(o,s,i,yW(n.iss),r)}let yY=(e,t)=>{let r=`${e.domain} wants you to sign in with your Ethereum account:`,i=yV(t);if(!e.aud&&!e.uri)throw Error("Either `aud` or `uri` is required to construct the message");let n=e.statement||void 0,s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${yH(t)}`,c=`Nonce: ${e.nonce}`,l=`Issued At: ${e.iat}`,h=e.exp?`Expiration Time: ${e.exp}`:void 0,u=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,f=e.resources?`Resources:${e.resources.map(e=>`
- ${e}`).join("")}`:void 0,p=y0(e.resources);return p&&(n=function(e="",t){yJ(t);let r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;let i=[],n=0;Object.keys(t.att).forEach(e=>{let r=Object.keys(t.att[e]).map(e=>({ability:e.split("/")[0],action:e.split("/")[1]}));r.sort((e,t)=>e.action.localeCompare(t.action));let s={};r.forEach(e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)});let o=Object.keys(s).map(t=>(n++,`(${n}) '${t}': '${s[t].join("', '")}' for '${e}'.`));i.push(o.join(", ").replace(".,","."))});let s=i.join(" "),o=`${r}${s}`;return`${e?e+" ":""}${o}`}(n,yZ(p))),[r,i,"",n,"",s,o,a,c,l,h,u,d,f].filter(e=>null!=e).join(`
`)};function yJ(e){if(!e)throw Error("No recap provided, value is undefined");if(!e.att)throw Error("No `att` property found");let t=Object.keys(e.att);if(!(null!=t&&t.length))throw Error("No resources found in `att` property");t.forEach(t=>{let r=e.att[t];if(Array.isArray(r)||"object"!=typeof r)throw Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw Error(`Resource object is empty: ${t}`);Object.keys(r).forEach(e=>{let t=r[e];if(!Array.isArray(t))throw Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach(t=>{if("object"!=typeof t)throw Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)})})})}function yG(e){return yJ(e),`urn:recap:${mP.from(JSON.stringify(e)).toString("base64").replace(/=/g,"")}`}function yZ(e){var t;let r=(t=e.replace("urn:recap:",""),JSON.parse(mP.from(t,"base64").toString("utf-8")));return yJ(r),r}function yQ(e){var t;let r=yZ(e);yJ(r);let i=null==(t=r.att)?void 0:t.eip155;return i?Object.keys(i).map(e=>e.split("/")[1]):[]}function yX(e){let t=yZ(e);yJ(t);let r=[];return Object.values(t.att).forEach(e=>{Object.values(e).forEach(e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)})}),[...new Set(r.flat())]}function y0(e){if(!e)return;let t=e?.[e.length-1];return t&&t.includes("urn:recap:")?t:void 0}function y1(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function y2(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function y3(e,...t){if(!y2(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function y8(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function y5(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}let y6=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),y4=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw Error("Non little-endian hardware is not supported");function y9(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e);else if(y2(e))e=bt(e);else throw Error("Uint8Array expected, got "+typeof e);return e}function y7(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw Error("invalid output length, expected "+e+", got: "+t.length);if(r&&t.byteOffset%4!=0)throw Error("invalid output, must be aligned");return t}function be(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,l=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+l,a,i)}function bt(e){return Uint8Array.from(e)}function br(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}let bi=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),bn=bi("expand 16-byte k"),bs=bi("expand 32-byte k"),bo=y6(bn),ba=y6(bs);function bc(e,t){return e<<t|e>>>32-t}function bl(e){return e.byteOffset%4==0}let bh=4294967296-1,bu=new Uint32Array,bd=(e,t)=>255&e[t++]|(255&e[t++])<<8;class bf{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,y3(e=y9(e),32);let t=bd(e,0),r=bd(e,2),i=bd(e,4),n=bd(e,6),s=bd(e,8),o=bd(e,10),a=bd(e,12),c=bd(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|n<<9)&8191,this.r[4]=(n>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|o<<2)&8191,this.r[7]=(o>>>11|a<<5)&8065,this.r[8]=(a>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let t=0;t<8;t++)this.pad[t]=bd(e,16+2*t)}process(e,t,r=!1){let{h:i,r:n}=this,s=n[0],o=n[1],a=n[2],c=n[3],l=n[4],h=n[5],u=n[6],d=n[7],f=n[8],p=n[9],g=bd(e,t+0),m=bd(e,t+2),y=bd(e,t+4),b=bd(e,t+6),w=bd(e,t+8),v=bd(e,t+10),E=bd(e,t+12),I=bd(e,t+14),_=i[0]+(8191&g),A=i[1]+((g>>>13|m<<3)&8191),S=i[2]+((m>>>10|y<<6)&8191),C=i[3]+((y>>>7|b<<9)&8191),N=i[4]+((b>>>4|w<<12)&8191),M=i[5]+(w>>>1&8191),x=i[6]+((w>>>14|v<<2)&8191),O=i[7]+((v>>>11|E<<5)&8191),P=i[8]+((E>>>8|I<<8)&8191),T=i[9]+(I>>>5|(r?0:2048)),R=0,D=0+_*s+5*p*A+5*f*S+5*d*C+5*u*N;R=D>>>13,D&=8191,D+=5*h*M+5*l*x+5*c*O+5*a*P+5*o*T,R+=D>>>13,D&=8191;let k=R+_*o+A*s+5*p*S+5*f*C+5*d*N;R=k>>>13,k&=8191,k+=5*u*M+5*h*x+5*l*O+5*c*P+5*a*T,R+=k>>>13,k&=8191;let L=R+_*a+A*o+S*s+5*p*C+5*f*N;R=L>>>13,L&=8191,L+=5*d*M+5*u*x+5*h*O+5*l*P+5*c*T,R+=L>>>13,L&=8191;let j=R+_*c+A*a+S*o+C*s+5*p*N;R=j>>>13,j&=8191,j+=5*f*M+5*d*x+5*u*O+5*h*P+5*l*T,R+=j>>>13,j&=8191;let U=R+_*l+A*c+S*a+C*o+N*s;R=U>>>13,U&=8191,U+=5*p*M+5*f*x+5*d*O+5*u*P+5*h*T,R+=U>>>13,U&=8191;let B=R+_*h+A*l+S*c+C*a+N*o;R=B>>>13,B&=8191,B+=M*s+5*p*x+5*f*O+5*d*P+5*u*T,R+=B>>>13,B&=8191;let z=R+_*u+A*h+S*l+C*c+N*a;R=z>>>13,z&=8191,z+=M*o+x*s+5*p*O+5*f*P+5*d*T,R+=z>>>13,z&=8191;let $=R+_*d+A*u+S*h+C*l+N*c;R=$>>>13,$&=8191,$+=M*a+x*o+O*s+5*p*P+5*f*T,R+=$>>>13,$&=8191;let q=R+_*f+A*d+S*u+C*h+N*l;R=q>>>13,q&=8191,q+=M*c+x*a+O*o+P*s+5*p*T,R+=q>>>13,q&=8191;let F=R+_*p+A*f+S*d+C*u+N*h;R=F>>>13,F&=8191,F+=M*l+x*c+O*a+P*o+T*s,R+=F>>>13,F&=8191,D=8191&(R=(R=(R<<2)+R|0)+D|0),R>>>=13,k+=R,i[0]=D,i[1]=k,i[2]=L,i[3]=j,i[4]=U,i[5]=B,i[6]=z,i[7]=$,i[8]=q,i[9]=F}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),i=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=i,i=e[t]>>>13,e[t]&=8191;e[0]+=5*i,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+i,i=r[t]>>>13,r[t]&=8191;r[9]-=8192;let n=(1^i)-1;for(let e=0;e<10;e++)r[e]&=n;n=~n;for(let t=0;t<10;t++)e[t]=e[t]&n|r[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;br(r)}update(e){y8(this);let{buffer:t,blockLen:r}=this,i=(e=y9(e)).length;for(let n=0;n<i;){let s=Math.min(r-this.pos,i-n);if(s===r){for(;r<=i-n;n+=r)this.process(e,n);continue}t.set(e.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){br(this.h,this.r,this.buffer,this.pad)}digestInto(e){y8(this),function(e,t){y3(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,h:r}=this,{pos:i}=this;if(i){for(t[i++]=1;i<16;i++)t[i]=0;this.process(t,0,!0)}this.finalize();let n=0;for(let t=0;t<8;t++)e[n++]=r[t]>>>0,e[n++]=r[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}let bp=function(e){let t=(t,r)=>e(r).update(y9(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}(e=>new bf(e)),bg=function(e,t){let{allowShortKeys:r,extendNonceFn:i,counterLength:n,counterRight:s,rounds:o}=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return y1(n),y1(o),y5(s),y5(r),(t,a,c,l,h=0)=>{y3(t),y3(a),y3(c);let u=c.length;if(void 0===l&&(l=new Uint8Array(u)),y3(l),y1(h),h<0||h>=bh)throw Error("arx: counter overflow");if(l.length<u)throw Error(`arx: output (${l.length}) is shorter than data (${u})`);let d=[],f=t.length,p,g;if(32===f)d.push(p=bt(t)),g=ba;else if(16===f&&r)(p=new Uint8Array(32)).set(t),p.set(t,16),g=bo,d.push(p);else throw Error(`arx: invalid 32-byte key, got length=${f}`);bl(a)||d.push(a=bt(a));let m=y6(p);if(i){if(24!==a.length)throw Error("arx: extended nonce must be 24 bytes");i(g,m,y6(a.subarray(0,16)),m),a=a.subarray(16)}let y=16-n;if(y!==a.length)throw Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){let e=new Uint8Array(12);e.set(a,s?0:12-a.length),a=e,d.push(a)}return function(e,t,r,i,n,s,o,a){let c=n.length,l=new Uint8Array(64),h=y6(l),u=bl(n)&&bl(s),d=u?y6(n):bu,f=u?y6(s):bu;for(let p=0;p<c;o++){if(e(t,r,i,h,o,a),o>=bh)throw Error("arx: counter overflow");let g=Math.min(64,c-p);if(u&&64===g){let e=p/4;if(p%4!=0)throw Error("arx: invalid block position");for(let t=0,r;t<16;t++)f[r=e+t]=d[r]^h[t];p+=64;continue}for(let e=0,t;e<g;e++)s[t=p+e]=n[t]^l[e];p+=g}}(e,g,m,y6(a),c,l,h,o),br(...d),l}}(function(e,t,r,i,n,s=20){let o=e[0],a=e[1],c=e[2],l=e[3],h=t[0],u=t[1],d=t[2],f=t[3],p=t[4],g=t[5],m=t[6],y=t[7],b=r[0],w=r[1],v=r[2],E=o,I=a,_=c,A=l,S=h,C=u,N=d,M=f,x=p,O=g,P=m,T=y,R=n,D=b,k=w,L=v;for(let e=0;e<s;e+=2)x=x+(R=bc(R^(E=E+S|0),16))|0,E=E+(S=bc(S^x,12))|0,x=x+(R=bc(R^E,8))|0,S=bc(S^x,7),O=O+(D=bc(D^(I=I+C|0),16))|0,I=I+(C=bc(C^O,12))|0,O=O+(D=bc(D^I,8))|0,C=bc(C^O,7),P=P+(k=bc(k^(_=_+N|0),16))|0,_=_+(N=bc(N^P,12))|0,P=P+(k=bc(k^_,8))|0,N=bc(N^P,7),T=T+(L=bc(L^(A=A+M|0),16))|0,A=A+(M=bc(M^T,12))|0,T=T+(L=bc(L^A,8))|0,M=bc(M^T,7),P=P+(L=bc(L^(E=E+C|0),16))|0,E=E+(C=bc(C^P,12))|0,P=P+(L=bc(L^E,8))|0,C=bc(C^P,7),T=T+(R=bc(R^(I=I+N|0),16))|0,I=I+(N=bc(N^T,12))|0,T=T+(R=bc(R^I,8))|0,N=bc(N^T,7),x=x+(D=bc(D^(_=_+M|0),16))|0,_=_+(M=bc(M^x,12))|0,x=x+(D=bc(D^_,8))|0,M=bc(M^x,7),O=O+(k=bc(k^(A=A+S|0),16))|0,A=A+(S=bc(S^O,12))|0,O=O+(k=bc(k^A,8))|0,S=bc(S^O,7);let j=0;i[j++]=o+E|0,i[j++]=a+I|0,i[j++]=c+_|0,i[j++]=l+A|0,i[j++]=h+S|0,i[j++]=u+C|0,i[j++]=d+N|0,i[j++]=f+M|0,i[j++]=p+x|0,i[j++]=g+O|0,i[j++]=m+P|0,i[j++]=y+T|0,i[j++]=n+R|0,i[j++]=b+D|0,i[j++]=w+k|0,i[j++]=v+L|0},{counterRight:!1,counterLength:4,allowShortKeys:!1}),bm=new Uint8Array(16),by=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(bm.subarray(r))},bb=new Uint8Array(32);function bw(e,t,r,i,n){let s=e(t,r,bb),o=bp.create(s);n&&by(o,n),by(o,i);let a=new Uint8Array(16),c=y4(a);be(c,0,BigInt(n?n.length:0),!0),be(c,8,BigInt(i.length),!0),o.update(a);let l=o.digest();return br(s,a),l}let bv=((e,t)=>{function r(i,...n){if(y3(i),void 0!==e.nonceLength){let t=n[0];if(!t)throw Error("nonce / iv required");e.varSizeNonce?y3(t):y3(t,e.nonceLength)}let s=e.tagLength;s&&void 0!==n[1]&&y3(n[1]);let o=t(i,...n),a=(e,t)=>{if(void 0!==t){if(2!==e)throw Error("cipher output not supported");y3(t)}},c=!1;return{encrypt(e,t){if(c)throw Error("cannot encrypt() twice with same key + nonce");return c=!0,y3(e),a(o.encrypt.length,t),o.encrypt(e,t)},decrypt(e,t){if(y3(e),s&&e.length<s)throw Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,t),o.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},(e,t,r)=>({encrypt(i,n){let s=i.length;(n=y7(s+16,n,!1)).set(i);let o=n.subarray(0,-16);bg(e,t,o,o,1);let a=bw(bg,e,t,o,r);return n.set(a,s),br(a),n},decrypt(i,n){n=y7(i.length-16,n,!1);let s=i.subarray(0,-16),o=i.subarray(-16),a=bw(bg,e,t,s,r);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return 0===r}(o,a))throw Error("invalid tag");return n.set(i.subarray(0,-16)),bg(e,t,n,n,1),br(a),n}}));class bE extends yd{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,m4(e);let r=yu(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return m9(this),this.iHash.update(e),this}digestInto(e){m9(this),m6(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:o}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let bI=(e,t,r)=>new bE(e,t).update(r).digest();bI.create=(e,t)=>new bE(e,t);let b_=new Uint8Array([0]),bA=new Uint8Array,bS=(e,t,r,i,n)=>{var s;return function(e,t,r,i=32){if(m4(e),m5(i),i>255*e.outputLen)throw Error("Length should be <= 255*HashLen");let n=Math.ceil(i/e.outputLen);void 0===r&&(r=bA);let s=new Uint8Array(n*e.outputLen),o=bI.create(e,t),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let t=0;t<n;t++)b_[0]=t+1,a.update(0===t?bA:c).update(r).update(b_).digestInto(c),s.set(c,e.outputLen*t),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),b_.fill(0),s.slice(0,i)}(e,(s=r,m4(e),void 0===s&&(s=new Uint8Array(e.outputLen)),bI(e,yu(s),yu(t))),i,n)};class bC extends yd{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ya(this.buffer)}update(e){m9(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=yu(e)).length;for(let s=0;s<n;){let o=Math.min(i-this.pos,n-s);if(o===i){let t=ya(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){m9(this),m7(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;(function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),o=Number(r>>n&s),a=Number(r&s),c=i?4:0,l=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+l,a,i)})(r,i-8,BigInt(8*this.length),n),this.process(r,0);let o=ya(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let c=a/4,l=this.get();if(c>l.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,l[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:o}=this;return e.length=i,e.pos=o,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let bN=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),bM=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),bx=new Uint32Array(64);class bO extends bC{constructor(){super(64,32,8,!1),this.A=0|bM[0],this.B=0|bM[1],this.C=0|bM[2],this.D=0|bM[3],this.E=0|bM[4],this.F=0|bM[5],this.G=0|bM[6],this.H=0|bM[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:o,H:a}=this;return[e,t,r,i,n,s,o,a]}set(e,t,r,i,n,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)bx[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=bx[e-15],r=bx[e-2],i=yc(t,7)^yc(t,18)^t>>>3,n=yc(r,17)^yc(r,19)^r>>>10;bx[e]=n+bx[e-7]+i+bx[e-16]|0}let{A:r,B:i,C:n,D:s,E:o,F:a,G:c,H:l}=this;for(let e=0;e<64;e++){var h,u,d,f;let t=l+(yc(o,6)^yc(o,11)^yc(o,25))+((h=o)&a^~h&c)+bN[e]+bx[e]|0,p=(yc(r,2)^yc(r,13)^yc(r,22))+((u=r)&(d=i)^u&(f=n)^d&f)|0;l=c,c=a,a=o,o=s+t|0,s=n,n=i,i=r,r=t+p|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(r,i,n,s,o,a,c,l)}roundClean(){bx.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let bP=yf(()=>new bO),bT=BigInt(0);function bR(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function bD(e){if(!bR(e))throw Error("Uint8Array expected")}let bk=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),bL={_0:48,_9:57,A:65,F:70,a:97,f:102};function bj(e){return e>=bL._0&&e<=bL._9?e-bL._0:e>=bL.A&&e<=bL.F?e-(bL.A-10):e>=bL.a&&e<=bL.f?e-(bL.a-10):void 0}function bU(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let i=new Uint8Array(r);for(let t=0,n=0;t<r;t++,n+=2){let r=bj(e.charCodeAt(n)),s=bj(e.charCodeAt(n+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[n]+e[n+1])+'" at index '+n);i[t]=16*r+s}return i}function bB(e){return bD(e),function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?bT:BigInt("0x"+e)}(function(e){bD(e);let t="";for(let r=0;r<e.length;r++)t+=bk[e[r]];return t}(Uint8Array.from(e).reverse()))}function bz(e,t,r){let i;if("string"==typeof t)try{i=bU(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(bR(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let n=i.length;if("number"==typeof r&&n!==r)throw Error(e+" of length "+r+" expected, got "+n);return i}let b$=e=>"bigint"==typeof e&&bT<=e;function bq(e,t,r,i){if(!(b$(t)&&b$(r)&&b$(i))||!(r<=t)||!(t<i))throw Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}let bF={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||bR(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)},bH=BigInt(0),bW=BigInt(1);function bV(e,t){let r=e%t;return r>=bH?r:t+r}function bK(e,t,r){let i=e;for(;t-- >bH;)i*=i,i%=r;return i}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);let bY=BigInt(0),bJ=BigInt(1),bG=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);let bZ=BigInt(1),bQ=BigInt(2),bX=BigInt(3),b0=BigInt(5);BigInt(8);let b1=function(e){let t=(function(e,t,r={}){let i=(t,r,i)=>{let n=bF[r];if("function"!=typeof n)throw Error("invalid validator function");let s=e[t];if(!(i&&void 0===s)&&!n(s,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0)}(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})),{P:r}=t,i=e=>bV(e,r),n=t.montgomeryBits,s=Math.ceil(n/8),o=t.nByteLength,a=t.adjustScalarBytes||(e=>e),c=t.powPminus2||(e=>(function(e,t,r){if(t<bH)throw Error("invalid exponent, negatives unsupported");if(r<=bH)throw Error("invalid modulus");if(r===bW)return bH;let i=bW;for(;t>bH;)t&bW&&(i=i*e%r),e=e*e%r,t>>=bW;return i})(e,r-BigInt(2),r));function l(e,t,r){let n=i(e*(t-r));return[t=i(t-n),r=i(r+n)]}let h=(t.a-BigInt(2))/BigInt(4);function u(e){var t;return bU(i(e).toString(16).padStart(2*s,"0")).reverse()}function d(e,t){let d=function(e,t){bq("u",e,bY,r),bq("scalar",t,bY,r);let s=bJ,o=bY,a=e,u=bJ,d=bY,f;for(let r=BigInt(n-1);r>=bY;r--){let n=t>>r&bJ;d^=n,s=(f=l(d,s,a))[0],a=f[1],o=(f=l(d,o,u))[0],u=f[1],d=n;let c=s+o,p=i(c*c),g=s-o,m=i(g*g),y=p-m,b=a+u,w=i((a-u)*c),v=i(b*g),E=w+v,I=w-v;a=i(E*E),u=i(e*i(I*I)),s=i(p*m),o=i(y*(p+i(h*y)))}return s=(f=l(d,s,a))[0],a=f[1],o=(f=l(d,o,u))[0],u=f[1],i(s*c(o))}(function(e){let t=bz("u coordinate",e,s);return 32===o&&(t[31]&=127),bB(t)}(t),function(e){let t=bz("scalar",e),r=t.length;if(r!==s&&r!==o)throw Error("invalid scalar, expected "+s+" or "+o+" bytes, got "+r);return bB(a(t))}(e));if(d===bY)throw Error("invalid private or public key received");return u(d)}let f=u(t.Gu);function p(e){return d(e,f)}return{scalarMult:d,scalarMultBase:p,getSharedSecret:(e,t)=>d(e,t),getPublicKey:e=>p(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:f}}({P:bG,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{let{pow_p_5_8:t,b2:r}=function(e){let t=BigInt(10),r=BigInt(20),i=BigInt(40),n=BigInt(80),s=e*e%bG*e%bG,o=bK(s,bQ,bG)*s%bG,a=bK(o,bZ,bG)*e%bG,c=bK(a,b0,bG)*a%bG,l=bK(c,t,bG)*c%bG,h=bK(l,r,bG)*l%bG,u=bK(h,i,bG)*h%bG,d=bK(u,n,bG)*u%bG,f=bK(d,n,bG)*u%bG,p=bK(f,t,bG)*c%bG;return{pow_p_5_8:bK(p,bQ,bG)*e%bG,b2:s}}(e);return bV(bK(t,bX,bG)*r,bG)},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},randomBytes:yp}),b2="base10",b3="base16",b8="base64pad",b5="base64url",b6="utf8";function b4(){return sP(yp(32),b3)}function b9(e){return sP(bP(sO(e,b3)),b3)}function b7(e){return sP(bP(sO(e,b6)),b3)}function we(e){return Number(sP(e,b2))}function wt(e){let{encoding:t=b8}=e;if(2===we(e.type))return sP(nl([e.type,e.sealed]),t);if(1===we(e.type)){if(typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return sP(nl([e.type,e.senderPublicKey,e.iv,e.sealed]),t)}return sP(nl([e.type,e.iv,e.sealed]),t)}function wr(e){let{encoded:t,encoding:r=b8}=e,i=sO(t,r),n=i.slice(0,1);if(1===we(n)){let e=i.slice(1,33),t=i.slice(33,45);return{type:n,sealed:i.slice(45),iv:t,senderPublicKey:e}}if(2===we(n))return{type:n,sealed:i.slice(1),iv:yp(12)};let s=i.slice(1,13);return{type:n,sealed:i.slice(13),iv:s}}function wi(e){let t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function wn(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function ws(e){return e?.relay||{protocol:"irn"}}function wo(e){let t=sR[e];if(typeof t>"u")throw Error(`Relay Protocol not supported: ${e}`);return t}function wa(e){var t;if(!e.includes("wc:")){let t=m8(e);null!=t&&t.includes("wc:")&&(e=t)}let r=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),i=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,r),s=e.substring(r+1,i).split("@"),o=new URLSearchParams("u">typeof i?e.substring(i):""),a={};o.forEach((e,t)=>{a[t]=e});let c="string"==typeof a.methods?a.methods.split(","):void 0;return{protocol:n,topic:(t=s[0]).startsWith("//")?t.substring(2):t,version:parseInt(s[1],10),symKey:a.symKey,relay:function(e,t="-"){let r={},i="relay"+t;return Object.keys(e).forEach(t=>{if(t.startsWith(i)){let n=t.replace(i,""),s=e[t];r[n]=s}}),r}(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function wc(e){let t=new URLSearchParams,r=function(e,t="-"){let r={};return Object.keys(e).forEach(i=>{e[i]&&(r["relay"+t+i]=e[i])}),r}(e.relay);Object.keys(r).sort().forEach(e=>{t.set(e,r[e])}),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));let i=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${i}`}function wl(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}function wh(e){let t=[];return e.forEach(e=>{let[r,i]=e.split(":");t.push(`${r}:${i}`)}),t}function wu(e){return e.includes(":")}function wd(e){return wu(e)?e.split(":")[0]:e}function wf(e,t){let r=function(e){let t={};return e?.forEach(e=>{var r;let[i,n]=e.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[],methods:[]}),t[i].accounts.push(e),null==(r=t[i].chains)||r.push(`${i}:${n}`)}),t}(t=t.map(e=>e.replace("did:pkh:","")));for(let[t,i]of Object.entries(r))i.methods?i.methods=mQ(i.methods,e):i.methods=e,i.events=["chainChanged","accountsChanged"];return r}Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;let wp={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},wg={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function wm(e,t){let{message:r,code:i}=wg[e];return{message:t?`${r} ${t}`:r,code:i}}function wy(e,t){let{message:r,code:i}=wp[e];return{message:t?`${r} ${t}`:r,code:i}}function wb(e,t){return!!Array.isArray(e)&&(!("u">typeof t)||!e.length||e.every(t))}function ww(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function wv(e){return typeof e>"u"}function wE(e,t){return!!(t&&wv(e))||"string"==typeof e&&!!e.trim().length}function wI(e,t){return!!(t&&wv(e))||"number"==typeof e&&!isNaN(e)}function w_(e){return!!(wE(e,!1)&&e.includes(":"))&&2===e.split(":").length}function wA(e){let t=!0;return wb(e)?e.length&&(t=e.every(e=>wE(e,!1))):t=!1,t}function wS(e,t){let r=null;return Object.values(e).forEach(e=>{var i;let n;if(r)return;let s=(i=`${t}, namespace`,n=null,wA(e?.methods)?wA(e?.events)||(n=wy("UNSUPPORTED_EVENTS",`${i}, events should be an array of strings or empty array for no events`)):n=wy("UNSUPPORTED_METHODS",`${i}, methods should be an array of strings or empty array for no methods`),n);s&&(r=s)}),r}function wC(e,t){let r=null;if(e&&ww(e)){let i;let n=wS(e,t);n&&(r=n);let s=(i=null,Object.values(e).forEach(e=>{var r,n;let s;if(i)return;let o=(r=e?.accounts,n=`${t} namespace`,s=null,wb(r)?r.forEach(e=>{s||function(e){if(wE(e,!1)&&e.includes(":")){let t=e.split(":");if(3===t.length){let e=t[0]+":"+t[1];return!!t[2]&&w_(e)}}return!1}(e)||(s=wy("UNSUPPORTED_ACCOUNTS",`${n}, account ${e} should be a string and conform to "namespace:chainId:address" format`))}):s=wy("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),s);o&&(i=o)}),i);s&&(r=s)}else r=wm("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function wN(e){return wE(e.protocol,!0)}function wM(e){return"u">typeof e}function wx(e,t){return!(!w_(t)||!(function(e){let t=[];return Object.values(e).forEach(e=>{t.push(...wh(e.accounts))}),t})(e).includes(t))}function wO(e,t,r){let i=null,n=function(e){let t={};return Object.keys(e).forEach(r=>{var i;r.includes(":")?t[r]=e[r]:null==(i=e[r].chains)||i.forEach(i=>{t[i]={methods:e[r].methods,events:e[r].events}})}),t}(e),s=function(e){let t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{let i=wh(e[r].accounts);i?.forEach(i=>{t[i]={accounts:e[r].accounts.filter(e=>e.includes(`${i}:`)),methods:e[r].methods,events:e[r].events}})}}),t}(t),o=Object.keys(n),a=Object.keys(s),c=wP(Object.keys(e)),l=wP(Object.keys(t)),h=c.filter(e=>!l.includes(e));return h.length&&(i=wm("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${h.toString()}
      Received: ${Object.keys(t).toString()}`)),mq(o,a)||(i=wm("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(e=>{if(!e.includes(":")||i)return;let n=wh(t[e].accounts);n.includes(e)||(i=wm("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}
        Required: ${e}
        Approved: ${n.toString()}`))}),o.forEach(e=>{i||(mq(n[e].methods,s[e].methods)?mq(n[e].events,s[e].events)||(i=wm("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):i=wm("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))}),i}function wP(e){return[...new Set(e.map(e=>e.includes(":")?e.split(":")[0]:e))]}function wT(){let e=mU();return new Promise(t=>{switch(e){case mD.browser:t(mj()&&navigator?.onLine);break;case mD.reactNative:t(wR());break;case mD.node:default:t(!0)}})}async function wR(){if(mL()&&"u">typeof r.g&&null!=r.g&&r.g.NetInfo){let e=await (null==r.g?void 0:r.g.NetInfo.fetch());return e?.isConnected}return!0}let wD={};class wk{static get(e){return wD[e]}static set(e,t){wD[e]=t}static delete(e){delete wD[e]}}var wL=r(82957).Buffer;let wj="core",wU=`wc@2:${wj}:`,wB={logger:"error"},wz={database:":memory:"},w$="client_ed25519_seed",wq=er.ONE_DAY,wF=er.SIX_HOURS,wH="wss://relay.walletconnect.org",wW={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},wV={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},wK="2.19.1",wY={link_mode:"link_mode",relay:"relay"},wJ={inbound:"inbound",outbound:"outbound"},wG="WALLETCONNECT_LINK_MODE_APPS",wZ={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},wQ=(er.FIVE_SECONDS,{wc_pairingDelete:{req:{ttl:er.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:er.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:er.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:er.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:er.ONE_DAY,prompt:!1,tag:0},res:{ttl:er.ONE_DAY,prompt:!1,tag:0}}}),wX={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},w0={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},w1={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},w2="https://verify.walletconnect.org",w3=`${w2}/v3`,w8=["https://verify.walletconnect.com",w2],w5={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal"},w6={no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_listener_not_found:"proposal_listener_not_found"},w4={session_approve_started:"session_approve_started",session_namespaces_validation_success:"session_namespaces_validation_success",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},w9={no_internet_connection:"no_internet_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},w7={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},ve={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"};var vt=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=n}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function u(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var i=0,n=0;e[t]===c;)i++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var h=r[e.charCodeAt(t)];if(255===h)return;for(var u=0,d=s-1;(0!==h||u<n)&&-1!==d;d--,u++)h+=a*o[d]>>>0,o[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw Error("Non-zero carry");n=u,t++}if(" "!==e[t]){for(var f=s-n;f!==s&&0===o[f];)f++;for(var p=new Uint8Array(i+(s-f)),g=i;f!==s;)p[g++]=o[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,i=0,n=0,s=t.length;n!==s&&0===t[n];)n++,r++;for(var o=(s-n)*h+1>>>0,l=new Uint8Array(o);n!==s;){for(var u=t[n],d=0,f=o-1;(0!==u||d<i)&&-1!==f;f--,d++)u+=256*l[f]>>>0,l[f]=u%a>>>0,u=u/a>>>0;if(0!==u)throw Error("Non-zero carry");i=d,n++}for(var p=o-i;p!==o&&0===l[p];)p++;for(var g=c.repeat(r);p<o;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:u,decode:function(e){var r=u(e);if(r)return r;throw Error(`Non-${t} character`)}}};let vr=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},vi=e=>new TextEncoder().encode(e),vn=e=>new TextDecoder().decode(e);class vs{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class vo{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return vc(this,e)}}class va{constructor(e){this.decoders=e}or(e){return vc(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let vc=(e,t)=>new va({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class vl{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new vs(e,t,r),this.decoder=new vo(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let vh=({name:e,prefix:t,encode:r,decode:i})=>new vl(e,t,r,i),vu=({prefix:e,name:t,alphabet:r})=>{let{encode:i,decode:n}=vt(r,t);return vh({prefix:e,name:t,encode:i,decode:e=>vr(n(e))})},vd=(e,t,r,i)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,c=0,l=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${i} character`);c=c<<r|s,(a+=r)>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw SyntaxError("Unexpected end of data");return o},vf=(e,t,r)=>{let i="="===t[t.length-1],n=(1<<r)-1,s="",o=0,a=0;for(let i=0;i<e.length;++i)for(a=a<<8|e[i],o+=8;o>r;)o-=r,s+=t[n&a>>o];if(o&&(s+=t[n&a<<r-o]),i)for(;s.length*r&7;)s+="=";return s},vp=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>vh({prefix:t,name:e,encode:e=>vf(e,i,r),decode:t=>vd(t,i,r,e)});var vg=Object.freeze({__proto__:null,identity:vh({prefix:"\0",name:"identity",encode:e=>vn(e),decode:e=>vi(e)})}),vm=Object.freeze({__proto__:null,base2:vp({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),vy=Object.freeze({__proto__:null,base8:vp({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),vb=Object.freeze({__proto__:null,base10:vu({prefix:"9",name:"base10",alphabet:"0123456789"})}),vw=Object.freeze({__proto__:null,base16:vp({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:vp({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});let vv=vp({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),vE=vp({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),vI=vp({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),v_=vp({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),vA=vp({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),vS=vp({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});var vC=Object.freeze({__proto__:null,base32:vv,base32upper:vE,base32pad:vI,base32padupper:v_,base32hex:vA,base32hexupper:vS,base32hexpad:vp({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:vp({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:vp({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),vN=Object.freeze({__proto__:null,base36:vu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:vu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),vM=Object.freeze({__proto__:null,base58btc:vu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:vu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});let vx=vp({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});var vO=Object.freeze({__proto__:null,base64:vx,base64pad:vp({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:vp({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:vp({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let vP=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),vT=vP.reduce((e,t,r)=>(e[r]=t,e),[]),vR=vP.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);var vD=Object.freeze({__proto__:null,base256emoji:vh({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=vT[t],"")},decode:function(e){let t=[];for(let r of e){let e=vR[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}})});function vk(e,t){var r,i=0,t=t||0,n=0,s=t,o=e.length;do{if(s>=o)throw vk.bytes=0,RangeError("Could not decode varint");r=e[s++],i+=n<28?(127&r)<<n:(127&r)*Math.pow(2,n),n+=7}while(r>=128);return vk.bytes=s-t,i}var vL=function e(t,r,i){r=r||[],i=i||0;for(var n=i;t>=2147483648;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-n+1,r};let vj=(e,t,r=0)=>(vL(e,t,r),t),vU=e=>e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10,vB=(e,t)=>{let r=t.byteLength,i=vU(e),n=i+vU(r),s=new Uint8Array(n+r);return vj(e,s,0),vj(r,s,i),s.set(t,n),new vz(e,r,t,s)};class vz{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}let v$=({name:e,code:t,encode:r})=>new vq(e,t,r);class vq{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?vB(this.code,t):t.then(e=>vB(this.code,e))}throw Error("Unknown type, must be binary type")}}let vF=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var vH=Object.freeze({__proto__:null,sha256:v$({name:"sha2-256",code:18,encode:vF("SHA-256")}),sha512:v$({name:"sha2-512",code:19,encode:vF("SHA-512")})}),vW=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:vr,digest:e=>vB(0,vr(e))}});new TextEncoder,new TextDecoder;let vV={...vg,...vm,...vy,...vb,...vw,...vC,...vN,...vM,...vO,...vD};function vK(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}({...vH,...vW});let vY=vK("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),vJ=vK("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{let t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),vG={utf8:vY,"utf-8":vY,hex:vV.base16,latin1:vJ,ascii:vJ,binary:vJ,...vV};var vZ=Object.defineProperty,vQ=(e,t,r)=>t in e?vZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vX=(e,t,r)=>vQ(e,"symbol"!=typeof t?t+"":t,r);class v0{constructor(e,t){this.core=e,this.logger=t,vX(this,"keychain",new Map),vX(this,"name","keychain"),vX(this,"version","0.3"),vX(this,"initialized",!1),vX(this,"storagePrefix",wU),vX(this,"init",async()=>{if(!this.initialized){let e=await this.getKeyChain();"u">typeof e&&(this.keychain=e),this.initialized=!0}}),vX(this,"has",e=>(this.isInitialized(),this.keychain.has(e))),vX(this,"set",async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()}),vX(this,"get",e=>{this.isInitialized();let t=this.keychain.get(e);if(typeof t>"u"){let{message:t}=wm("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}),vX(this,"del",async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()}),this.core=e,this.logger=(0,ez.Ep)(t,this.name)}get context(){return(0,ez.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,mF(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?mH(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=wm("NOT_INITIALIZED",this.name);throw Error(e)}}}var v1=Object.defineProperty,v2=(e,t,r)=>t in e?v1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,v3=(e,t,r)=>v2(e,"symbol"!=typeof t?t+"":t,r);class v8{constructor(e,t,r){this.core=e,this.logger=t,v3(this,"name","crypto"),v3(this,"keychain"),v3(this,"randomSessionIdentifier",b4()),v3(this,"initialized",!1),v3(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),v3(this,"hasKeys",e=>(this.isInitialized(),this.keychain.has(e))),v3(this,"getClientId",async()=>(this.isInitialized(),ir(is(await this.getClientSeed()).publicKey))),v3(this,"generateKeyPair",()=>{this.isInitialized();let e=function(){let e=b1.utils.randomPrivateKey(),t=b1.getPublicKey(e);return{privateKey:sP(e,b3),publicKey:sP(t,b3)}}();return this.setPrivateKey(e.publicKey,e.privateKey)}),v3(this,"signJWT",async e=>{this.isInitialized();let t=is(await this.getClientSeed()),r=this.randomSessionIdentifier;return await io(r,e,wq,t)}),v3(this,"generateSharedKey",(e,t,r)=>{var i;this.isInitialized();let n=(i=this.getPrivateKey(e),sP(bS(bP,b1.getSharedSecret(sO(i,b3),sO(t,b3)),void 0,void 0,32),b3));return this.setSymKey(n,r)}),v3(this,"setSymKey",async(e,t)=>{this.isInitialized();let r=t||b9(e);return await this.keychain.set(r,e),r}),v3(this,"deleteKeyPair",async e=>{this.isInitialized(),await this.keychain.del(e)}),v3(this,"deleteSymKey",async e=>{this.isInitialized(),await this.keychain.del(e)}),v3(this,"encode",async(e,t,r)=>{this.isInitialized();let i=wi(r),n=(0,eO.u)(t);if(2===i.type)return function(e,t){let r=sO("2",b2),i=yp(12);return wt({type:r,sealed:sO(e,b6),iv:i,encoding:t})}(n,r?.encoding);if(wn(i)){let t=i.senderPublicKey,r=i.receiverPublicKey;e=await this.generateSharedKey(t,r)}let s=this.getSymKey(e),{type:o,senderPublicKey:a}=i;return function(e){var t;let r=(t="u">typeof e.type?e.type:0,sO(`${t}`,b2));if(1===we(r)&&typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let i="u">typeof e.senderPublicKey?sO(e.senderPublicKey,b3):void 0,n="u">typeof e.iv?sO(e.iv,b3):yp(12);return wt({type:r,sealed:bv(sO(e.symKey,b3),n).encrypt(sO(e.message,b6)),iv:n,senderPublicKey:i,encoding:e.encoding})}({type:o,symKey:s,message:n,senderPublicKey:a,encoding:r?.encoding})}),v3(this,"decode",async(e,t,r)=>{this.isInitialized();let i=function(e,t){let r=wr({encoded:e,encoding:t?.encoding});return wi({type:we(r.type),senderPublicKey:"u">typeof r.senderPublicKey?sP(r.senderPublicKey,b3):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(2===i.type){let e=function(e,t){let{sealed:r}=wr({encoded:e,encoding:t});return sP(r,b6)}(t,r?.encoding);return(0,eO.D)(e)}if(wn(i)){let t=i.receiverPublicKey,r=i.senderPublicKey;e=await this.generateSharedKey(t,r)}try{let i=this.getSymKey(e),n=function(e){let t=sO(e.symKey,b3),{sealed:r,iv:i}=wr(e),n=bv(t,i).decrypt(r);if(null===n)throw Error("Failed to decrypt");return sP(n,b6)}({symKey:i,encoded:t,encoding:r?.encoding});return(0,eO.D)(n)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}}),v3(this,"getPayloadType",(e,t=b8)=>we(wr({encoded:e,encoding:t}).type)),v3(this,"getPayloadSenderPublicKey",(e,t=b8)=>{let r=wr({encoded:e,encoding:t});return r.senderPublicKey?sP(r.senderPublicKey,b3):void 0}),this.core=e,this.logger=(0,ez.Ep)(t,this.name),this.keychain=r||new v0(this.core,this.logger)}get context(){return(0,ez.Fd)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(w$)}catch{e=b4(),await this.keychain.set(w$,e)}return function(e,t="utf8"){let r=vG[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):r.decoder.decode(`${r.prefix}${e}`)}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=wm("NOT_INITIALIZED",this.name);throw Error(e)}}}var v5=Object.defineProperty,v6=Object.defineProperties,v4=Object.getOwnPropertyDescriptors,v9=Object.getOwnPropertySymbols,v7=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,Et=(e,t,r)=>t in e?v5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Er=(e,t)=>{for(var r in t||(t={}))v7.call(t,r)&&Et(e,r,t[r]);if(v9)for(var r of v9(t))Ee.call(t,r)&&Et(e,r,t[r]);return e},Ei=(e,t)=>v6(e,v4(t)),En=(e,t,r)=>Et(e,"symbol"!=typeof t?t+"":t,r);class Es extends gx{constructor(e,t){super(e,t),this.logger=e,this.core=t,En(this,"messages",new Map),En(this,"messagesWithoutClientAck",new Map),En(this,"name","messages"),En(this,"version","0.3"),En(this,"initialized",!1),En(this,"storagePrefix",wU),En(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let e=await this.getRelayerMessages();"u">typeof e&&(this.messages=e);let t=await this.getRelayerMessagesWithoutClientAck();"u">typeof t&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}}),En(this,"set",async(e,t,r)=>{this.isInitialized();let i=b7(t),n=this.messages.get(e);if(typeof n>"u"&&(n={}),"u">typeof n[i])return i;if(n[i]=t,this.messages.set(e,n),r===wJ.inbound){let r=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,Ei(Er({},r),{[i]:t}))}return await this.persist(),i}),En(this,"get",e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t}),En(this,"getWithoutAck",e=>{this.isInitialized();let t={};for(let r of e){let e=this.messagesWithoutClientAck.get(r)||{};t[r]=Object.values(e)}return t}),En(this,"has",(e,t)=>(this.isInitialized(),"u">typeof this.get(e)[b7(t)])),En(this,"ack",async(e,t)=>{this.isInitialized();let r=this.messagesWithoutClientAck.get(e);if(typeof r>"u")return;let i=b7(t);delete r[i],0===Object.keys(r).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,r),await this.persist()}),En(this,"del",async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()}),this.logger=(0,ez.Ep)(e,this.name),this.core=t}get context(){return(0,ez.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,mF(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,mF(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?mH(e):void 0}async getRelayerMessagesWithoutClientAck(){let e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return"u">typeof e?mH(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){let{message:e}=wm("NOT_INITIALIZED",this.name);throw Error(e)}}}var Eo=Object.defineProperty,Ea=Object.defineProperties,Ec=Object.getOwnPropertyDescriptors,El=Object.getOwnPropertySymbols,Eh=Object.prototype.hasOwnProperty,Eu=Object.prototype.propertyIsEnumerable,Ed=(e,t,r)=>t in e?Eo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ef=(e,t)=>{for(var r in t||(t={}))Eh.call(t,r)&&Ed(e,r,t[r]);if(El)for(var r of El(t))Eu.call(t,r)&&Ed(e,r,t[r]);return e},Ep=(e,t)=>Ea(e,Ec(t)),Eg=(e,t,r)=>Ed(e,"symbol"!=typeof t?t+"":t,r);class Em extends gO{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,Eg(this,"events",new ee.EventEmitter),Eg(this,"name","publisher"),Eg(this,"queue",new Map),Eg(this,"publishTimeout",(0,er.toMiliseconds)(er.ONE_MINUTE)),Eg(this,"initialPublishTimeout",(0,er.toMiliseconds)(15*er.ONE_SECOND)),Eg(this,"needsTransportRestart",!1),Eg(this,"publish",async(e,t,r)=>{var i;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});let n=r?.ttl||wF,s=ws(r),o=r?.prompt||!1,a=r?.tag||0,c=r?.id||(0,c$.getBigIntRpcId)().toString(),l={topic:e,message:t,opts:{ttl:n,relay:s,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}},h=`Failed to publish payload, please try again. id:${c} tag:${a}`;try{let i=new Promise(async i=>{let s=({id:e})=>{l.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(wW.publish,s),i(l))};this.relayer.events.on(wW.publish,s);let h=mV(new Promise((i,s)=>{this.rpcPublish({topic:e,message:t,ttl:n,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}).then(i).catch(e=>{this.logger.warn(e,e?.message),s(e)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${c} tag:${a}`);try{await h,this.events.removeListener(wW.publish,s)}catch(e){this.queue.set(c,Ep(Ef({},l),{attempt:1})),this.logger.warn(e,e?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:r}}),await mV(i,this.publishTimeout,h)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(i=r?.internal)&&i.throwOnFailedPublish)throw e}finally{this.queue.delete(c)}}),Eg(this,"on",(e,t)=>{this.events.on(e,t)}),Eg(this,"once",(e,t)=>{this.events.once(e,t)}),Eg(this,"off",(e,t)=>{this.events.off(e,t)}),Eg(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.relayer=e,this.logger=(0,ez.Ep)(t,this.name),this.registerEventListeners()}get context(){return(0,ez.Fd)(this.logger)}async rpcPublish(e){var t,r,i,n;let{topic:s,message:o,ttl:a=wF,prompt:c,tag:l,id:h,attestation:u,tvf:d}=e,f={method:wo(ws().protocol).publish,params:Ef({topic:s,message:o,ttl:a,prompt:c,tag:l,attestation:u},d),id:h};wv(null==(t=f.params)?void 0:t.prompt)&&(null==(r=f.params)||delete r.prompt),wv(null==(i=f.params)?void 0:i.tag)&&(null==(n=f.params)||delete n.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:f});let p=await this.relayer.request(f);return this.relayer.events.emit(wW.publish,e),this.logger.debug("Successfully Published Payload"),p}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,t)=>{let r=e.attempt+1;this.queue.set(t,Ep(Ef({},e),{attempt:r}));let{topic:i,message:n,opts:s,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(Ep(Ef({},e),{topic:i,message:n,ttl:s.ttl,prompt:s.prompt,tag:s.tag,id:s.id,attestation:o,tvf:s.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(eo,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(wW.connection_stalled);return}this.checkQueue()}),this.relayer.on(wW.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var Ey=Object.defineProperty,Eb=(e,t,r)=>t in e?Ey(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ew=(e,t,r)=>Eb(e,"symbol"!=typeof t?t+"":t,r);class Ev{constructor(){Ew(this,"map",new Map),Ew(this,"set",(e,t)=>{let r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])}),Ew(this,"get",e=>this.map.get(e)||[]),Ew(this,"exists",(e,t)=>this.get(e).includes(t)),Ew(this,"delete",(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let r=this.get(e);if(!this.exists(e,t))return;let i=r.filter(e=>e!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),Ew(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var EE=Object.defineProperty,EI=Object.defineProperties,E_=Object.getOwnPropertyDescriptors,EA=Object.getOwnPropertySymbols,ES=Object.prototype.hasOwnProperty,EC=Object.prototype.propertyIsEnumerable,EN=(e,t,r)=>t in e?EE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,EM=(e,t)=>{for(var r in t||(t={}))ES.call(t,r)&&EN(e,r,t[r]);if(EA)for(var r of EA(t))EC.call(t,r)&&EN(e,r,t[r]);return e},Ex=(e,t)=>EI(e,E_(t)),EO=(e,t,r)=>EN(e,"symbol"!=typeof t?t+"":t,r);class EP extends gR{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,EO(this,"subscriptions",new Map),EO(this,"topicMap",new Ev),EO(this,"events",new ee.EventEmitter),EO(this,"name","subscription"),EO(this,"version","0.3"),EO(this,"pending",new Map),EO(this,"cached",[]),EO(this,"initialized",!1),EO(this,"storagePrefix",wU),EO(this,"subscribeTimeout",(0,er.toMiliseconds)(er.ONE_MINUTE)),EO(this,"initialSubscribeTimeout",(0,er.toMiliseconds)(15*er.ONE_SECOND)),EO(this,"clientId"),EO(this,"batchSubscribeTopicsLimit",500),EO(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),EO(this,"subscribe",async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{let r=ws(t),i={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,i);let n=await this.rpcSubscribe(e,r,t);return"string"==typeof n&&(this.onSubscribe(n,i),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),n}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}}),EO(this,"unsubscribe",async(e,t)=>{this.isInitialized(),"u">typeof t?.id?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)}),EO(this,"isSubscribed",e=>new Promise(t=>{t(this.topicMap.topics.includes(e))})),EO(this,"isKnownTopic",e=>new Promise(t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some(t=>t.topic===e))})),EO(this,"on",(e,t)=>{this.events.on(e,t)}),EO(this,"once",(e,t)=>{this.events.once(e,t)}),EO(this,"off",(e,t)=>{this.events.off(e,t)}),EO(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),EO(this,"start",async()=>{await this.onConnect()}),EO(this,"stop",async()=>{await this.onDisconnect()}),EO(this,"restart",async()=>{await this.restore(),await this.onRestart()}),EO(this,"checkPending",async()=>{if(0===this.pending.size&&(!this.initialized||!this.relayer.connected))return;let e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}),EO(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(eo,async()=>{await this.checkPending()}),this.events.on(wZ.created,async e=>{let t=wZ.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(wZ.deleted,async e=>{let t=wZ.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}),this.relayer=e,this.logger=(0,ez.Ep)(t,this.name),this.clientId=""}get context(){return(0,ez.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){let r=this.topicMap.get(e);await Promise.all(r.map(async r=>await this.unsubscribeById(e,r,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{let i=ws(r);await this.restartToComplete({topic:e,id:t,relay:i}),await this.rpcUnsubscribe(e,t,i);let n=wy("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var i;r&&r?.transportType!==wY.relay||await this.restartToComplete({topic:e,id:e,relay:t});let n={method:wo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let s=null==(i=r?.internal)?void 0:i.throwOnFailedPublish;try{let t=await this.getSubscriptionId(e);if(r?.transportType===wY.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(n).catch(e=>this.logger.warn(e))},(0,er.toMiliseconds)(er.ONE_SECOND)),t;let i=new Promise(async t=>{let r=i=>{i.topic===e&&(this.events.removeListener(wZ.created,r),t(i.id))};this.events.on(wZ.created,r);try{let i=await mV(new Promise((e,t)=>{this.relayer.request(n).catch(e=>{this.logger.warn(e,e?.message),t(e)}).then(e)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(wZ.created,r),t(i)}catch{}}),o=await mV(i,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!o&&s)throw Error(`Subscribing to ${e} failed, please try again`);return o?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(wW.connection_stalled),s)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;let t={method:wo(e[0].relay.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await mV(new Promise(e=>{this.relayer.request(t).catch(e=>this.logger.warn(e)).then(e)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(wW.connection_stalled)}}async rpcBatchFetchMessages(e){let t;if(!e.length)return;let r={method:wo(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{t=await await mV(new Promise((e,t)=>{this.relayer.request(r).catch(e=>{this.logger.warn(e),t(e)}).then(e)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(wW.connection_stalled)}return t}rpcUnsubscribe(e,t,r){let i={method:wo(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,Ex(EM({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,EM({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,EM({},t)),this.topicMap.set(t.topic,e),this.events.emit(wZ.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:t}=wm("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(wZ.deleted,Ex(EM({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(wZ.sync)}async onRestart(){if(this.cached.length){let e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){let t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit(wZ.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:e}=wm("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async e=>Ex(EM({},e),{id:await this.getSubscriptionId(e.topic)})))))}async batchFetchMessages(e){var t;if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);let r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await (t=(0,er.toMiliseconds)(er.ONE_SECOND),new Promise(e=>setTimeout(e,t))),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){let{message:e}=wm("NOT_INITIALIZED",this.name);throw Error(e)}}async restartToComplete(e){this.relayer.connected||this.relayer.connecting||(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return b7(e+await this.getClientId())}}var ET=Object.defineProperty,ER=Object.getOwnPropertySymbols,ED=Object.prototype.hasOwnProperty,Ek=Object.prototype.propertyIsEnumerable,EL=(e,t,r)=>t in e?ET(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ej=(e,t)=>{for(var r in t||(t={}))ED.call(t,r)&&EL(e,r,t[r]);if(ER)for(var r of ER(t))Ek.call(t,r)&&EL(e,r,t[r]);return e},EU=(e,t,r)=>EL(e,"symbol"!=typeof t?t+"":t,r);class EB extends gP{constructor(e){super(e),EU(this,"protocol","wc"),EU(this,"version",2),EU(this,"core"),EU(this,"logger"),EU(this,"events",new ee.EventEmitter),EU(this,"provider"),EU(this,"messages"),EU(this,"subscriber"),EU(this,"publisher"),EU(this,"name","relayer"),EU(this,"transportExplicitlyClosed",!1),EU(this,"initialized",!1),EU(this,"connectionAttemptInProgress",!1),EU(this,"relayUrl"),EU(this,"projectId"),EU(this,"packageName"),EU(this,"bundleId"),EU(this,"hasExperiencedNetworkDisruption",!1),EU(this,"pingTimeout"),EU(this,"heartBeatTimeout",(0,er.toMiliseconds)(er.THIRTY_SECONDS+er.FIVE_SECONDS)),EU(this,"reconnectTimeout"),EU(this,"connectPromise"),EU(this,"reconnectInProgress",!1),EU(this,"requestsInFlight",[]),EU(this,"connectTimeout",(0,er.toMiliseconds)(15*er.ONE_SECOND)),EU(this,"request",async e=>{var t,r;this.logger.debug("Publishing Request Payload");let i=e.id||(0,c$.getBigIntRpcId)().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");let n=`${i}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(n);let s=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter(e=>e!==n),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${i}`),e}}),EU(this,"resetPingTimeout",()=>{mk()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var e,t,r,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(i=null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.terminate)||i.call(r)}catch(e){this.logger.warn(e,e?.message)}},this.heartBeatTimeout))}),EU(this,"onPayloadHandler",e=>{this.onProviderPayload(e),this.resetPingTimeout()}),EU(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \uD83D\uDEDC"),this.startPingTimeout(),this.events.emit(wW.connect)}),EU(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \uD83D\uDED1"),this.requestsInFlight=[],this.onProviderDisconnect()}),EU(this,"onProviderErrorHandler",e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit(wW.error,e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),EU(this,"registerProviderListeners",()=>{this.provider.on(wV.payload,this.onPayloadHandler),this.provider.on(wV.connect,this.onConnectHandler),this.provider.on(wV.disconnect,this.onDisconnectHandler),this.provider.on(wV.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger="u">typeof e.logger&&"string"!=typeof e.logger?(0,ez.Ep)(e.logger,this.name):(0,ez.gw)((0,ez.jI)({level:e.logger||"error"})),this.messages=new Es(this.logger,e.core),this.subscriber=new EP(this,this.logger),this.publisher=new Em(this,this.logger),this.relayUrl=e?.relayUrl||wH,this.projectId=e.projectId,mL()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)&&(null==r.g?void 0:r.g.Platform.OS)==="android"?this.packageName=mB():mL()&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)&&(null==r.g?void 0:r.g.Platform.OS)==="ios"&&(this.bundleId=mB()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return(0,ez.Fd)(this.logger)}get connected(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===1}get connecting(){var e,t,r;return(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)===0||void 0!==this.connectPromise}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:wY.relay},wJ.outbound)}async subscribe(e,t){var r,i,n;this.isInitialized(),null!=t&&t.transportType&&t?.transportType!=="relay"||await this.toEstablishConnection();let s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(i=t?.internal)?void 0:i.throwOnFailedPublish),o=(null==(n=this.subscriber.topicMap.get(e))?void 0:n[0])||"",a,c=t=>{t.topic===e&&(this.subscriber.off(wZ.created,c),a())};return await Promise.all([new Promise(e=>{a=e,this.subscriber.on(wZ.created,c)}),new Promise(async(r,i)=>{o=await this.subscriber.subscribe(e,Ej({internal:{throwOnFailedPublish:s}},t)).catch(e=>{s&&i(e)})||o,r()})]),o}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await mV(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(t,r)=>{await this.connect(e).then(t).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await wT())throw Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}let t=e.sort((e,t)=>e.publishedAt-t.publishedAt);for(let e of(this.logger.debug(`Batch of ${t.length} message events sorted`),t))try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){let{topic:r}=e;if(!t.sessionExists){let e=mJ(er.FIVE_MINUTES);await this.core.pairing.pairings.set(r,{topic:r,expiry:e,relay:{protocol:"irn"},active:!1})}this.events.emit(wW.message,e),await this.recordMessageEvent(e,wJ.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise(async(e,t)=>{let r=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(wV.disconnect,r),await mV(new Promise((e,t)=>{this.provider.connect().then(e).catch(t)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(e=>{t(e)}).finally(()=>{this.provider.off(wV.disconnect,r),clearTimeout(this.reconnectTimeout)}),await new Promise(async(e,t)=>{let r=()=>{t(Error("Connection interrupted while trying to subscribe"))};this.provider.once(wV.disconnect,r),await this.subscriber.start().then(e).catch(t).finally(()=>{this.provider.off(wV.disconnect,r)})}),this.hasExperiencedNetworkDisruption=!1,e()})}catch(e){await this.subscriber.stop(),this.logger.warn({},e.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise(e=>setTimeout(e,(0,er.toMiliseconds)(1*t))),t++}}startPingTimeout(){var e,t,r,i,n;if(mk())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(n=null==(i=null==(r=this.provider)?void 0:r.connection)?void 0:i.socket)||n.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new cz.r(new cW(function({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){let l=r.split("?"),h=m$(e,t,i),u=function(e,t){let r=new URLSearchParams(e);for(let e of Object.keys(t).sort())if(t.hasOwnProperty(e)){let i=t[e];void 0!==i&&r.set(e,i)}return r.toString()}(l[1]||"",{auth:n,ua:h,projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0});return l[0]+"?"+u}({sdkVersion:wK,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){let{topic:r,message:i}=e;await this.messages.set(r,i,t)}async shouldIgnoreMessageEvent(e){let{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;let i=this.messages.has(t,r);return i&&this.logger.warn(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,c$.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:r,message:i,publishedAt:n,attestation:s}=t.data,o={topic:r,message:i,publishedAt:n,transportType:wY.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Ej({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else(0,c$.isJsonRpcResponse)(e)&&this.events.emit(wW.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,wJ.inbound),this.events.emit(wW.message,e))}async acknowledgePayload(e){let t=(0,c$.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(wV.payload,this.onPayloadHandler),this.provider.off(wV.connect,this.onConnectHandler),this.provider.off(wV.disconnect,this.onDisconnectHandler),this.provider.off(wV.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await wT();!function(e){switch(mU()){case mD.browser:!mL()&&mj()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)));break;case mD.reactNative:mL()&&"u">typeof r.g&&null!=r.g&&r.g.NetInfo&&r.g?.NetInfo.addEventListener(t=>e(t?.isConnected));case mD.node:}}(async t=>{e!==t&&(e=t,t?await this.transportOpen().catch(e=>this.logger.error(e,e?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(wW.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e?.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},(0,er.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){let{message:e}=wm("NOT_INITIALIZED",this.name);throw Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),this.connected||await this.connect()}}function Ez(){}function E$(e){if(!e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function Eq(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function EF(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let EH="[object Arguments]",EW="[object Object]";var EV=Object.defineProperty,EK=Object.getOwnPropertySymbols,EY=Object.prototype.hasOwnProperty,EJ=Object.prototype.propertyIsEnumerable,EG=(e,t,r)=>t in e?EV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,EZ=(e,t)=>{for(var r in t||(t={}))EY.call(t,r)&&EG(e,r,t[r]);if(EK)for(var r of EK(t))EJ.call(t,r)&&EG(e,r,t[r]);return e},EQ=(e,t,r)=>EG(e,"symbol"!=typeof t?t+"":t,r);class EX extends gT{constructor(e,t,r,i=wU,n){super(e,t,r,i),this.core=e,this.logger=t,this.name=r,EQ(this,"map",new Map),EQ(this,"version","0.3"),EQ(this,"cached",[]),EQ(this,"initialized",!1),EQ(this,"getKey"),EQ(this,"storagePrefix",wU),EQ(this,"recentlyDeleted",[]),EQ(this,"recentlyDeletedLimit",200),EQ(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>{var t;this.getKey&&null!==e&&!wv(e)?this.map.set(this.getKey(e),e):(null==(t=e?.proposer)?void 0:t.publicKey)?this.map.set(e.id,e):e?.topic&&this.map.set(e.topic,e)}),this.cached=[],this.initialized=!0)}),EQ(this,"set",async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())}),EQ(this,"get",e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e))),EQ(this,"getAll",e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(r=>(function e(t,r,i,n,s,o,a){let c=a(t,r,i,n,s,o);if(void 0!==c)return c;if(typeof t==typeof r)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return t===r;case"number":return t===r||Object.is(t,r)}return function t(r,i,n,s){if(Object.is(r,i))return!0;let o=EF(r),a=EF(i);if(o===EH&&(o=EW),a===EH&&(a=EW),o!==a)return!1;switch(o){case"[object String]":return r.toString()===i.toString();case"[object Number]":{let e=r.valueOf(),t=i.valueOf();return e===t||Number.isNaN(e)&&Number.isNaN(t)}case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(r.valueOf(),i.valueOf());case"[object RegExp]":return r.source===i.source&&r.flags===i.flags;case"[object Function]":return r===i}let c=(n=n??new Map).get(r),l=n.get(i);if(null!=c&&null!=l)return c===i;n.set(r,i),n.set(i,r);try{switch(o){case"[object Map]":if(r.size!==i.size)return!1;for(let[t,o]of r.entries())if(!i.has(t)||!e(o,i.get(t),t,r,i,n,s))return!1;return!0;case"[object Set]":{if(r.size!==i.size)return!1;let t=Array.from(r.values()),o=Array.from(i.values());for(let a=0;a<t.length;a++){let c=t[a],l=o.findIndex(t=>e(c,t,void 0,r,i,n,s));if(-1===l)return!1;o.splice(l,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if("u">typeof wL&&wL.isBuffer(r)!==wL.isBuffer(i)||r.length!==i.length)return!1;for(let t=0;t<r.length;t++)if(!e(r[t],i[t],t,r,i,n,s))return!1;return!0;case"[object ArrayBuffer]":return r.byteLength===i.byteLength&&t(new Uint8Array(r),new Uint8Array(i),n,s);case"[object DataView]":return r.byteLength===i.byteLength&&r.byteOffset===i.byteOffset&&t(new Uint8Array(r),new Uint8Array(i),n,s);case"[object Error]":return r.name===i.name&&r.message===i.message;case EW:{if(!(t(r.constructor,i.constructor,n,s)||E$(r)&&E$(i)))return!1;let o=[...Object.keys(r),...Eq(r)],a=[...Object.keys(i),...Eq(i)];if(o.length!==a.length)return!1;for(let t=0;t<o.length;t++){let a=o[t],c=r[a];if(!Object.hasOwn(i,a))return!1;let l=i[a];if(!e(c,l,a,r,i,n,s))return!1}return!0}default:return!1}}finally{n.delete(r),n.delete(i)}}(t,r,o,a)})(t[r],e[r],void 0,void 0,void 0,void 0,Ez))):this.values)),EQ(this,"update",async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});let r=EZ(EZ({},this.getData(e)),t);this.map.set(e,r),await this.persist()}),EQ(this,"delete",async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())}),this.logger=(0,ez.Ep)(t,this.name),this.storagePrefix=i,this.getKey=n}get context(){return(0,ez.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){let{message:t}=wm("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),Error(t)}let{message:t}=wm("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:e}=wm("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=wm("NOT_INITIALIZED",this.name);throw Error(e)}}}var E0=Object.defineProperty,E1=(e,t,r)=>t in e?E0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E2=(e,t,r)=>E1(e,"symbol"!=typeof t?t+"":t,r);class E3{constructor(e,t){this.core=e,this.logger=t,E2(this,"name","pairing"),E2(this,"version","0.3"),E2(this,"events",new(et())),E2(this,"pairings"),E2(this,"initialized",!1),E2(this,"storagePrefix",wU),E2(this,"ignoredPayloadTypes",[1]),E2(this,"registeredMethods",[]),E2(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),E2(this,"register",({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]}),E2(this,"create",async e=>{this.isInitialized();let t=b4(),r=await this.core.crypto.setSymKey(t),i=mJ(er.FIVE_MINUTES),n={protocol:"irn"},s={topic:r,expiry:i,relay:n,active:!1,methods:e?.methods},o=wc({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:n,expiryTimestamp:i,methods:e?.methods});return this.events.emit(wX.create,s),this.core.expirer.set(r,i),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:o}}),E2(this,"pair",async e=>{let t;this.isInitialized();let r=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:[w5.pairing_started]}});this.isValidPair(e,r);let{topic:i,symKey:n,relay:s,expiryTimestamp:o,methods:a}=wa(e.uri);if(r.props.properties.topic=i,r.addTrace(w5.pairing_uri_validation_success),r.addTrace(w5.pairing_uri_not_expired),this.pairings.keys.includes(i)){if(t=this.pairings.get(i),r.addTrace(w5.existing_pairing),t.active)throw r.setError(w6.active_pairing_already_exists),Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);r.addTrace(w5.pairing_not_expired)}let c=o||mJ(er.FIVE_MINUTES),l={topic:i,relay:s,expiry:c,active:!1,methods:a};this.core.expirer.set(i,c),await this.pairings.set(i,l),r.addTrace(w5.store_new_pairing),e.activatePairing&&await this.activate({topic:i}),this.events.emit(wX.create,l),r.addTrace(w5.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(n,i),r.addTrace(w5.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{r.setError(w6.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:s})}catch(e){throw r.setError(w6.subscribe_pairing_topic_failure),e}return r.addTrace(w5.subscribe_pairing_topic_success),l}),E2(this,"activate",async({topic:e})=>{this.isInitialized();let t=mJ(er.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})}),E2(this,"ping",async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");let{topic:t}=e;if(this.pairings.keys.includes(t)){let e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:i,reject:n}=mW();this.events.once(mZ("pairing_ping",e),({error:e})=>{e?n(e):i()}),await r()}}),E2(this,"updateExpiry",async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})}),E2(this,"updateMetadata",async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})}),E2(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),E2(this,"disconnect",async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",wy("USER_DISCONNECTED")),await this.deletePairing(t))}),E2(this,"formatUriFromPairing",e=>{this.isInitialized();let{topic:t,relay:r,expiry:i,methods:n}=e,s=this.core.crypto.keychain.get(t);return wc({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:i,methods:n})}),E2(this,"sendRequest",async(e,t,r)=>{let i=(0,c$.formatJsonRpcRequest)(t,r),n=await this.core.crypto.encode(e,i),s=wQ[t].req;return this.core.history.set(e,i),this.core.relayer.publish(e,n,s),i.id}),E2(this,"sendResult",async(e,t,r)=>{let i=(0,c$.formatJsonRpcResult)(e,r),n=await this.core.crypto.encode(t,i),s=wQ[(await this.core.history.get(t,e)).request.method].res;await this.core.relayer.publish(t,n,s),await this.core.history.resolve(i)}),E2(this,"sendError",async(e,t,r)=>{let i=(0,c$.formatJsonRpcError)(e,r),n=await this.core.crypto.encode(t,i),s=(await this.core.history.get(t,e)).request.method,o=wQ[s]?wQ[s].res:wQ.unregistered_method.res;await this.core.relayer.publish(t,n,o),await this.core.history.resolve(i)}),E2(this,"deletePairing",async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,wy("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])}),E2(this,"cleanup",async()=>{let e=this.pairings.getAll().filter(e=>mG(e.expiry));await Promise.all(e.map(e=>this.deletePairing(e.topic)))}),E2(this,"onRelayEventRequest",async e=>{let{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,r);default:return await this.onUnknownRpcMethodRequest(t,r)}}),E2(this,"onRelayEventResponse",async e=>{let{topic:t,payload:r}=e,i=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===i?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(i)}),E2(this,"onPairingPingRequest",async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit(wX.ping,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),E2(this,"onPairingPingResponse",(e,t)=>{let{id:r}=t;setTimeout(()=>{(0,c$.isJsonRpcResult)(t)?this.events.emit(mZ("pairing_ping",r),{}):(0,c$.isJsonRpcError)(t)&&this.events.emit(mZ("pairing_ping",r),{error:t.error})},500)}),E2(this,"onPairingDeleteRequest",async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(wX.delete,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),E2(this,"onUnknownRpcMethodRequest",async(e,t)=>{let{id:r,method:i}=t;try{if(this.registeredMethods.includes(i))return;let t=wy("WC_METHOD_UNSUPPORTED",i);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}}),E2(this,"onUnknownRpcMethodResponse",e=>{this.registeredMethods.includes(e)||this.logger.error(wy("WC_METHOD_UNSUPPORTED",e))}),E2(this,"isValidPair",(e,t)=>{var r;if(!wM(e)){let{message:r}=wm("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(w6.malformed_pairing_uri),Error(r)}if(!function(e){function t(e){try{return"u">typeof new URL(e)}catch{return!1}}try{if(wE(e,!1)){if(t(e))return!0;let r=m8(e);return t(r)}}catch{}return!1}(e.uri)){let{message:r}=wm("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(w6.malformed_pairing_uri),Error(r)}let i=wa(e?.uri);if(!(null!=(r=i?.relay)&&r.protocol)){let{message:e}=wm("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(w6.malformed_pairing_uri),Error(e)}if(!(null!=i&&i.symKey)){let{message:e}=wm("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(w6.malformed_pairing_uri),Error(e)}if(null!=i&&i.expiryTimestamp&&(0,er.toMiliseconds)(i?.expiryTimestamp)<Date.now()){t.setError(w6.pairing_expired);let{message:e}=wm("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(e)}}),E2(this,"isValidPing",async e=>{if(!wM(e)){let{message:t}=wm("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),E2(this,"isValidDisconnect",async e=>{if(!wM(e)){let{message:t}=wm("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)}),E2(this,"isValidPairingTopic",async e=>{if(!wE(e,!1)){let{message:t}=wm("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.pairings.keys.includes(e)){let{message:t}=wm("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(mG(this.pairings.get(e).expiry)){await this.deletePairing(e);let{message:t}=wm("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}),this.core=e,this.logger=(0,ez.Ep)(t,this.name),this.pairings=new EX(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,ez.Fd)(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=wm("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(wW.message,async e=>{let{topic:t,message:r,transportType:i}=e;if(this.pairings.keys.includes(t)&&i!==wY.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{let e=await this.core.crypto.decode(t,r);(0,c$.isJsonRpcRequest)(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):(0,c$.isJsonRpcResponse)(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,r)}catch(e){this.logger.error(e)}})}registerExpirerEvents(){this.core.expirer.on(w1.expired,async e=>{let{topic:t}=mY(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(wX.expire,{topic:t}))})}}var E8=Object.defineProperty,E5=(e,t,r)=>t in e?E8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E6=(e,t,r)=>E5(e,"symbol"!=typeof t?t+"":t,r);class E4 extends gM{constructor(e,t){super(e,t),this.core=e,this.logger=t,E6(this,"records",new Map),E6(this,"events",new ee.EventEmitter),E6(this,"name","history"),E6(this,"version","0.3"),E6(this,"cached",[]),E6(this,"initialized",!1),E6(this,"storagePrefix",wU),E6(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.records.set(e.id,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),E6(this,"set",(e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;let i={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:mJ(er.THIRTY_DAYS)};this.records.set(i.id,i),this.persist(),this.events.emit(w0.created,i)}),E6(this,"resolve",async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;let t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,c$.isJsonRpcError)(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(w0.updated,t))}),E6(this,"get",async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t))),E6(this,"delete",(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(r=>{r.topic!==e||"u">typeof t&&r.id!==t||(this.records.delete(r.id),this.events.emit(w0.deleted,r))}),this.persist()}),E6(this,"exists",async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e)),E6(this,"on",(e,t)=>{this.events.on(e,t)}),E6(this,"once",(e,t)=>{this.events.once(e,t)}),E6(this,"off",(e,t)=>{this.events.off(e,t)}),E6(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=(0,ez.Ep)(t,this.name)}get context(){return(0,ez.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let r={topic:t.topic,request:(0,c$.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:t}=wm("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(w0.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:e}=wm("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(w0.created,e=>{let t=w0.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(w0.updated,e=>{let t=w0.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(w0.deleted,e=>{let t=w0.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(eo,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,er.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(w0.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=wm("NOT_INITIALIZED",this.name);throw Error(e)}}}var E9=Object.defineProperty,E7=(e,t,r)=>t in e?E9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ie=(e,t,r)=>E7(e,"symbol"!=typeof t?t+"":t,r);class It extends gD{constructor(e,t){super(e,t),this.core=e,this.logger=t,Ie(this,"expirations",new Map),Ie(this,"events",new ee.EventEmitter),Ie(this,"name","expirer"),Ie(this,"version","0.3"),Ie(this,"cached",[]),Ie(this,"initialized",!1),Ie(this,"storagePrefix",wU),Ie(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.expirations.set(e.target,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ie(this,"has",e=>{try{let t=this.formatTarget(e);return"u">typeof this.getExpiration(t)}catch{return!1}}),Ie(this,"set",(e,t)=>{this.isInitialized();let r=this.formatTarget(e),i={target:r,expiry:t};this.expirations.set(r,i),this.checkExpiry(r,i),this.events.emit(w1.created,{target:r,expiration:i})}),Ie(this,"get",e=>{this.isInitialized();let t=this.formatTarget(e);return this.getExpiration(t)}),Ie(this,"del",e=>{if(this.isInitialized(),this.has(e)){let t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(w1.deleted,{target:t,expiration:r})}}),Ie(this,"on",(e,t)=>{this.events.on(e,t)}),Ie(this,"once",(e,t)=>{this.events.once(e,t)}),Ie(this,"off",(e,t)=>{this.events.off(e,t)}),Ie(this,"removeListener",(e,t)=>{this.events.removeListener(e,t)}),this.logger=(0,ez.Ep)(t,this.name)}get context(){return(0,ez.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return mK("topic",e);if("number"==typeof e)return mK("id",e);let{message:t}=wm("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(w1.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:e}=wm("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:t}=wm("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),Error(t)}return t}checkExpiry(e,t){let{expiry:r}=t;(0,er.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(w1.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(eo,()=>this.checkExpirations()),this.events.on(w1.created,e=>{let t=w1.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(w1.expired,e=>{let t=w1.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(w1.deleted,e=>{let t=w1.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=wm("NOT_INITIALIZED",this.name);throw Error(e)}}}var Ir=Object.defineProperty,Ii=(e,t,r)=>t in e?Ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,In=(e,t,r)=>Ii(e,"symbol"!=typeof t?t+"":t,r);class Is extends gk{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,In(this,"name","verify-api"),In(this,"abortController"),In(this,"isDevEnv"),In(this,"verifyUrlV3",w3),In(this,"storagePrefix",wU),In(this,"version",2),In(this,"publicKey"),In(this,"fetchPromise"),In(this,"init",async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,er.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),In(this,"register",async e=>{if(!mj()||this.isDevEnv)return;let t=window.location.origin,{id:r,decryptedId:i}=e,n=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${i}`;try{let e=(0,iv.getDocument)(),t=this.startAbortTimer(5*er.ONE_SECOND),i=await new Promise((i,s)=>{let o=()=>{window.removeEventListener("message",c),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);let a=e.createElement("iframe");a.src=n,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});let c=n=>{if(n.data&&"string"==typeof n.data)try{let s=JSON.parse(n.data);if("verify_attestation"===s.type){if(ii(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",c),i(null===s.attestation?"":s.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",c,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",i),i}catch(e){this.logger.warn(e)}return""}),In(this,"resolve",async e=>{if(this.isDevEnv)return"";let{attestationId:t,hash:r,encryptedId:i}=e;if(""===t){this.logger.debug("resolve: attestationId is empty, skipping");return}if(t){if(ii(t).payload.id!==i)return;let e=await this.isValidJwtAttestation(t);if(e){if(!e.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return e}}if(!r)return;let n=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,n)}),In(this,"fetchAttestation",async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);let r=this.startAbortTimer(5*er.ONE_SECOND),i=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===i.status?await i.json():void 0}),In(this,"getVerifyUrl",e=>{let t=e||w2;return w8.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${w2}`),t=w2),t}),In(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);let e=this.startAbortTimer(er.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}}),In(this,"persistPublicKey",async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e}),In(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),In(this,"isValidJwtAttestation",async e=>{let t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}let r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}}),In(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),In(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async e=>{let t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))});let e=await this.fetchPromise;return this.fetchPromise=void 0,e}),In(this,"validateAttestation",(e,t)=>{let r=function(e,t){let[r,i,n]=e.split("."),s=mP.from(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r=t.length%4;return r>0&&(t+="=".repeat(4-r)),t}(n),"base64");if(64!==s.length)throw Error("Invalid signature length");let o=s.slice(0,32).toString("hex"),a=s.slice(32,64).toString("hex"),c=bP(`${r}.${i}`),l=new sT.ec("p256").keyFromPublic({x:mP.from(t.x,"base64").toString("hex"),y:mP.from(t.y,"base64").toString("hex")},"hex"),h=sP(c,b3);if(!l.verify(h,{r:o,s:a}))throw Error("Invalid signature");return ii(e).payload}(e,t.publicKey),i={hasExpired:(0,er.toMiliseconds)(r.exp)<Date.now(),payload:r};if(i.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),Error("JWT attestation expired");return{origin:i.payload.origin,isScam:i.payload.isScam,isVerified:i.payload.isVerified}}),this.logger=(0,ez.Ep)(t,this.name),this.abortController=new AbortController,this.isDevEnv=m3(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return(0,ez.Fd)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,er.toMiliseconds)(e))}}var Io=Object.defineProperty,Ia=(e,t,r)=>t in e?Io(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ic=(e,t,r)=>Ia(e,"symbol"!=typeof t?t+"":t,r);class Il extends gL{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,Ic(this,"context","echo"),Ic(this,"registerDeviceToken",async e=>{let{clientId:t,token:r,notificationType:i,enableEncrypted:n=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:i,token:r,always_raw:n})})}),this.logger=(0,ez.Ep)(t,this.context)}}var Ih=Object.defineProperty,Iu=Object.getOwnPropertySymbols,Id=Object.prototype.hasOwnProperty,If=Object.prototype.propertyIsEnumerable,Ip=(e,t,r)=>t in e?Ih(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ig=(e,t)=>{for(var r in t||(t={}))Id.call(t,r)&&Ip(e,r,t[r]);if(Iu)for(var r of Iu(t))If.call(t,r)&&Ip(e,r,t[r]);return e},Im=(e,t,r)=>Ip(e,"symbol"!=typeof t?t+"":t,r);class Iy extends gj{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,Im(this,"context","event-client"),Im(this,"storagePrefix",wU),Im(this,"storageVersion",.1),Im(this,"events",new Map),Im(this,"shouldPersist",!1),Im(this,"init",async()=>{if(!m3())try{let e={eventId:m2(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:m$(this.core.relayer.protocol,this.core.relayer.version,wK)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}}),Im(this,"createEvent",e=>{let{event:t="ERROR",type:r="",properties:{topic:i,trace:n}}=e,s=m2(),o=this.core.projectId||"",a=Ig({eventId:s,timestamp:Date.now(),props:{event:t,type:r,properties:{topic:i,trace:n}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,a),this.shouldPersist=!0),a}),Im(this,"getEvent",e=>{let{eventId:t,topic:r}=e;if(t)return this.events.get(t);let i=Array.from(this.events.values()).find(e=>e.props.properties.topic===r);if(i)return Ig(Ig({},i),this.setMethods(i.eventId))}),Im(this,"deleteEvent",e=>{let{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0}),Im(this,"setEventListeners",()=>{this.core.heartbeat.on(eo,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(e=>{(0,er.fromMiliseconds)(Date.now())-(0,er.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)})})}),Im(this,"setMethods",e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)})),Im(this,"addTrace",(e,t)=>{let r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)}),Im(this,"setError",(e,t)=>{let r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)}),Im(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Im(this,"restore",async()=>{try{let e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach(e=>{this.events.set(e.eventId,Ig(Ig({},e),this.setMethods(e.eventId)))})}catch(e){this.logger.warn(e)}}),Im(this,"submit",async()=>{if(!this.telemetryEnabled||0===this.events.size)return;let e=[];for(let[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(let t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}}),Im(this,"sendEvent",async e=>{let t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${wK}${t}`,{method:"POST",body:JSON.stringify(e)})}),Im(this,"getAppDomain",()=>mz().url),this.logger=(0,ez.Ep)(t,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var Ib=Object.defineProperty,Iw=Object.getOwnPropertySymbols,Iv=Object.prototype.hasOwnProperty,IE=Object.prototype.propertyIsEnumerable,II=(e,t,r)=>t in e?Ib(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I_=(e,t)=>{for(var r in t||(t={}))Iv.call(t,r)&&II(e,r,t[r]);if(Iw)for(var r of Iw(t))IE.call(t,r)&&II(e,r,t[r]);return e},IA=(e,t,r)=>II(e,"symbol"!=typeof t?t+"":t,r);class IS extends gA{constructor(e){var t;super(e),IA(this,"protocol","wc"),IA(this,"version",2),IA(this,"name",wj),IA(this,"relayUrl"),IA(this,"projectId"),IA(this,"customStoragePrefix"),IA(this,"events",new ee.EventEmitter),IA(this,"logger"),IA(this,"heartbeat"),IA(this,"relayer"),IA(this,"crypto"),IA(this,"storage"),IA(this,"history"),IA(this,"expirer"),IA(this,"pairing"),IA(this,"verify"),IA(this,"echoClient"),IA(this,"linkModeSupportedApps"),IA(this,"eventClient"),IA(this,"initialized",!1),IA(this,"logChunkController"),IA(this,"on",(e,t)=>this.events.on(e,t)),IA(this,"once",(e,t)=>this.events.once(e,t)),IA(this,"off",(e,t)=>this.events.off(e,t)),IA(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),IA(this,"dispatchEnvelope",({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;let i={topic:e,message:t,publishedAt:Date.now(),transportType:wY.link_mode};this.relayer.onLinkMessageEvent(i,{sessionExists:r})}),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||wH,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let r=(0,ez.jI)({level:"string"==typeof e?.logger&&e.logger?e.logger:wB.logger,name:wj}),{logger:i,chunkLoggerController:n}=(0,ez.Rt)({opts:r,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=n,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=(0,ez.Ep)(i,this.name),this.heartbeat=new ea,this.crypto=new v8(this,this.logger,e?.keychain),this.history=new E4(this,this.logger),this.expirer=new It(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new gv(I_(I_({},wz),e?.storageOptions)),this.relayer=new EB({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new E3(this,this.logger),this.verify=new Is(this,this.logger,this.storage),this.echoClient=new Il(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new Iy(this,this.logger,e?.telemetryEnabled)}static async init(e){let t=new IS(e);await t.initialize();let r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return(0,ez.Fd)(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(wG,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(wG)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}let IC="client",IN=`wc@2:${IC}:`,IM={name:IC,logger:"error"},Ix="WALLETCONNECT_DEEPLINK_CHOICE",IO="Proposal expired",IP=er.SEVEN_DAYS,IT={wc_sessionPropose:{req:{ttl:er.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:er.ONE_DAY,prompt:!1,tag:1104},res:{ttl:er.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:er.ONE_DAY,prompt:!1,tag:1106},res:{ttl:er.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:er.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:er.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:er.ONE_DAY,prompt:!1,tag:1112},res:{ttl:er.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:er.ONE_DAY,prompt:!1,tag:1114},res:{ttl:er.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:er.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:er.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:er.FIVE_MINUTES,prompt:!1,tag:1119}}},IR={min:er.FIVE_MINUTES,max:er.SEVEN_DAYS},ID={idle:"IDLE",active:"ACTIVE"},Ik={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},IL=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Ij="wc@1.5:auth:",IU=`${Ij}:PUB_KEY`;var IB=Object.defineProperty,Iz=Object.defineProperties,I$=Object.getOwnPropertyDescriptors,Iq=Object.getOwnPropertySymbols,IF=Object.prototype.hasOwnProperty,IH=Object.prototype.propertyIsEnumerable,IW=(e,t,r)=>t in e?IB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,IV=(e,t)=>{for(var r in t||(t={}))IF.call(t,r)&&IW(e,r,t[r]);if(Iq)for(var r of Iq(t))IH.call(t,r)&&IW(e,r,t[r]);return e},IK=(e,t)=>Iz(e,I$(t)),IY=(e,t,r)=>IW(e,"symbol"!=typeof t?t+"":t,r);class IJ extends gq{constructor(e){super(e),IY(this,"name","engine"),IY(this,"events",new(et())),IY(this,"initialized",!1),IY(this,"requestQueue",{state:ID.idle,queue:[]}),IY(this,"sessionRequestQueue",{state:ID.idle,queue:[]}),IY(this,"requestQueueDelay",er.ONE_SECOND),IY(this,"expectedPairingMethodMap",new Map),IY(this,"recentlyDeletedMap",new Map),IY(this,"recentlyDeletedLimit",200),IY(this,"relayMessageCache",[]),IY(this,"pendingSessions",new Map),IY(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(IT)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,er.toMiliseconds)(this.requestQueueDelay)))}),IY(this,"connect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();let t=IK(IV({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,scopedProperties:o,relays:a}=t,c=r,l,h=!1;try{if(c){let e=this.client.core.pairing.pairings.get(c);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${c}) failed`),e}if(!c||!h){let{topic:e,uri:t}=await this.client.core.pairing.create();c=e,l=t}if(!c){let{message:e}=wm("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw Error(e)}let u=await this.client.core.crypto.generateKeyPair(),d=IT.wc_sessionPropose.req.ttl||er.FIVE_MINUTES,f=mJ(d),p=IK(IV(IV({requiredNamespaces:i,optionalNamespaces:n,relays:a??[{protocol:"irn"}],proposer:{publicKey:u,metadata:this.client.metadata},expiryTimestamp:f,pairingTopic:c},s&&{sessionProperties:s}),o&&{scopedProperties:o}),{id:(0,c$.payloadId)()}),g=mZ("session_connect",p.id),{reject:m,resolve:y,done:b}=mW(d,IO),w=({id:e})=>{e===p.id&&(this.client.events.off("proposal_expire",w),this.pendingSessions.delete(p.id),this.events.emit(g,{error:{message:IO,code:0}}))};return this.client.events.on("proposal_expire",w),this.events.once(g,({error:e,session:t})=>{this.client.events.off("proposal_expire",w),e?m(e):t&&y(t)}),await this.sendRequest({topic:c,method:"wc_sessionPropose",params:p,throwOnFailedPublish:!0,clientRpcId:p.id}),await this.setProposal(p.id,p),{uri:l,approval:b}}),IY(this,"pair",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}}),IY(this,"approve",async e=>{var t,r,i;let n=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[w4.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw n.setError(w9.no_internet_connection),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),n.setError(w9.proposal_not_found),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),n.setError(w9.session_approve_namespace_validation_failure),e}let{id:s,relayProtocol:o,namespaces:a,sessionProperties:c,scopedProperties:l,sessionConfig:h}=e,u=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:n.eventId});let{pairingTopic:d,proposer:f,requiredNamespaces:p,optionalNamespaces:g}=u,m=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:d});m||(m=null==(i=this.client.core.eventClient)?void 0:i.createEvent({type:w4.session_approve_started,properties:{topic:d,trace:[w4.session_approve_started,w4.session_namespaces_validation_success]}}));let y=await this.client.core.crypto.generateKeyPair(),b=f.publicKey,w=await this.client.core.crypto.generateSharedKey(y,b),v=IV(IV(IV({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:y,metadata:this.client.metadata},expiry:mJ(IP)},c&&{sessionProperties:c}),l&&{scopedProperties:l}),h&&{sessionConfig:h}),E=wY.relay;m.addTrace(w4.subscribing_session_topic);try{await this.client.core.relayer.subscribe(w,{transportType:E})}catch(e){throw m.setError(w9.subscribe_session_topic_failure),e}m.addTrace(w4.subscribe_session_topic_success);let I=IK(IV({},v),{topic:w,requiredNamespaces:p,optionalNamespaces:g,pairingTopic:d,acknowledged:!1,self:v.controller,peer:{publicKey:f.publicKey,metadata:f.metadata},controller:y,transportType:wY.relay});await this.client.session.set(w,I),m.addTrace(w4.store_session);try{m.addTrace(w4.publishing_session_settle),await this.sendRequest({topic:w,method:"wc_sessionSettle",params:v,throwOnFailedPublish:!0}).catch(e=>{throw m?.setError(w9.session_settle_publish_failure),e}),m.addTrace(w4.session_settle_publish_success),m.addTrace(w4.publishing_session_approve),await this.sendResult({id:s,topic:d,result:{relay:{protocol:o??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch(e=>{throw m?.setError(w9.session_approve_publish_failure),e}),m.addTrace(w4.session_approve_publish_success)}catch(e){throw this.client.logger.error(e),this.client.session.delete(w,wy("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(w),e}return this.client.core.eventClient.deleteEvent({eventId:m.eventId}),await this.client.core.pairing.updateMetadata({topic:d,metadata:f.metadata}),await this.client.proposal.delete(s,wy("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:d}),await this.setExpiry(w,mJ(IP)),{topic:w,acknowledged:()=>Promise.resolve(this.client.session.get(w))}}),IY(this,"reject",async e=>{let t;this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}let{id:r,reason:i}=e;try{t=this.client.proposal.get(r).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),e}t&&(await this.sendError({id:r,topic:t,error:i,rpcOpts:IT.wc_sessionPropose.reject}),await this.client.proposal.delete(r,wy("USER_DISCONNECTED")))}),IY(this,"update",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}let{topic:t,namespaces:r}=e,{done:i,resolve:n,reject:s}=mW(),o=(0,c$.payloadId)(),a=(0,c$.getBigIntRpcId)().toString(),c=this.client.session.get(t).namespaces;return this.events.once(mZ("session_update",o),({error:e})=>{e?s(e):n()}),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch(e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),s(e)}),{acknowledged:i}}),IY(this,"extend",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}let{topic:t}=e,r=(0,c$.payloadId)(),{done:i,resolve:n,reject:s}=mW();return this.events.once(mZ("session_extend",r),({error:e})=>{e?s(e):n()}),await this.setExpiry(t,mJ(IP)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch(e=>{s(e)}),{acknowledged:i}}),IY(this,"request",async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}let{chainId:t,request:r,topic:i,expiry:n=IT.wc_sessionRequest.req.ttl}=e,s=this.client.session.get(i);s?.transportType===wY.relay&&await this.confirmOnlineStateOrThrow();let o=(0,c$.payloadId)(),a=(0,c$.getBigIntRpcId)().toString(),{done:c,resolve:l,reject:h}=mW(n,"Request expired. Please try again.");this.events.once(mZ("session_request",o),({error:e,result:t})=>{e?h(e):l(t)});let u="wc_sessionRequest",d=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);if(d)return await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:i,method:u,params:{request:IK(IV({},r),{expiryTimestamp:mJ(n)}),chainId:t},expiry:n,throwOnFailedPublish:!0,appLink:d}).catch(e=>h(e)),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),await c();let f={request:IK(IV({},r),{expiryTimestamp:mJ(n)}),chainId:t},p=this.shouldSetTVF(u,f);return await Promise.all([new Promise(async e=>{await this.sendRequest(IV({clientRpcId:o,relayRpcId:a,topic:i,method:u,params:f,expiry:n,throwOnFailedPublish:!0},p&&{tvf:this.getTVFParams(o,f)})).catch(e=>h(e)),this.client.events.emit("session_request_sent",{topic:i,request:r,chainId:t,id:o}),e()}),new Promise(async e=>{var t;if(!(null!=(t=s.sessionConfig)&&t.disableDeepLink)){let e=await m0(this.client.core.storage,Ix);await mX({id:o,topic:i,wcDeepLink:e})}e()}),c()]).then(e=>e[2])}),IY(this,"respond",async e=>{this.isInitialized(),await this.isValidRespond(e);let{topic:t,response:r}=e,{id:i}=r,n=this.client.session.get(t);n.transportType===wY.relay&&await this.confirmOnlineStateOrThrow();let s=this.getAppLinkIfEnabled(n.peer.metadata,n.transportType);(0,c$.isJsonRpcResult)(r)?await this.sendResult({id:i,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:s}):(0,c$.isJsonRpcError)(r)&&await this.sendError({id:i,topic:t,error:r.error,appLink:s}),this.cleanupAfterResponse(e)}),IY(this,"ping",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}let{topic:t}=e;if(this.client.session.keys.includes(t)){let e=(0,c$.payloadId)(),r=(0,c$.getBigIntRpcId)().toString(),{done:i,resolve:n,reject:s}=mW();this.events.once(mZ("session_ping",e),({error:e})=>{e?s(e):n()}),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),i()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))}),IY(this,"emit",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);let{topic:t,event:r,chainId:i}=e,n=(0,c$.getBigIntRpcId)().toString(),s=(0,c$.payloadId)();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:i},throwOnFailedPublish:!0,relayRpcId:n,clientRpcId:s})}),IY(this,"disconnect",async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);let{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:wy("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(t))await this.client.core.pairing.disconnect({topic:t});else{let{message:e}=wm("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw Error(e)}}),IY(this,"find",e=>(this.isInitialized(),this.client.session.getAll().filter(t=>(function(e,t){let{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),n=Object.keys(r),s=!0;return!!mq(n,i)&&(i.forEach(t=>{let{accounts:i,methods:n,events:o}=e.namespaces[t],a=wh(i),c=r[t];mq(mR(t,c),a)&&mq(c.methods,n)&&mq(c.events,o)||(s=!1)}),s)})(t,e)))),IY(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),IY(this,"authenticate",async(e,t)=>{var r,i,n;let s;this.isInitialized(),this.isValidAuthenticate(e);let o=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),a=o?wY.link_mode:wY.relay;a===wY.relay&&await this.confirmOnlineStateOrThrow();let{chains:c,statement:l="",uri:h,domain:u,nonce:d,type:f,exp:p,nbf:g,methods:m=[],expiry:y}=e,b=[...e.resources||[]],{topic:w,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:a});this.client.logger.info({message:"Generated new pairing",pairing:{topic:w,uri:v}});let E=await this.client.core.crypto.generateKeyPair(),I=b9(E);if(await Promise.all([this.client.auth.authKeys.set(IU,{responseTopic:I,publicKey:E}),this.client.auth.pairingTopics.set(I,{topic:I,pairingTopic:w})]),await this.client.core.relayer.subscribe(I,{transportType:a}),this.client.logger.info(`sending request to new pairing topic: ${w}`),m.length>0){let{namespace:e}=mT(c[0]),t=yG(function(e,t,r,i={}){return r?.sort((e,t)=>e.localeCompare(t)),{att:{[e]:function(e,t,r={}){return Object.assign({},...(t=t?.sort((e,t)=>e.localeCompare(t))).map(t=>({[`${e}/${t}`]:[r]})))}(t,r,i)}}}(e,"request",m));y0(b)&&(i=t,n=b.pop(),t=yG(function(e,t){yJ(e),yJ(t);let r=Object.keys(e.att).concat(Object.keys(t.att)).sort((e,t)=>e.localeCompare(t)),i={att:{}};return r.forEach(r=>{var n,s;Object.keys((null==(n=e.att)?void 0:n[r])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[r])||{})).sort((e,t)=>e.localeCompare(t)).forEach(n=>{var s,o;i.att[r]=yq(y$({},i.att[r]),{[n]:(null==(s=e.att[r])?void 0:s[n])||(null==(o=t.att[r])?void 0:o[n])})})}),i}(yZ(i),yZ(n)))),b.push(t)}let _=y&&y>IT.wc_sessionAuthenticate.req.ttl?y:IT.wc_sessionAuthenticate.req.ttl,A={authPayload:{type:f??"caip122",chains:c,statement:l,aud:h,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:p,nbf:g,resources:b},requester:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:mJ(_)},S={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:c,methods:[...new Set(["personal_sign",...m])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:w,proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:mJ(IT.wc_sessionPropose.req.ttl),id:(0,c$.payloadId)()},{done:C,resolve:N,reject:M}=mW(_,"Request expired"),x=(0,c$.payloadId)(),O=mZ("session_connect",S.id),P=mZ("session_request",x),T=async({error:e,session:t})=>{this.events.off(P,R),e?M(e):t&&N({session:t})},R=async e=>{var r,i,n;let s;if(await this.deletePendingAuthRequest(x,{message:"fulfilled",code:0}),e.error){let t=wy("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(O,T),M(e.error.message))}await this.deleteProposal(S.id),this.events.off(O,T);let{cacaos:o,responder:c}=e.result,l=[],h=[];for(let e of o){await yK({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),M(wy("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:t}=e,r=y0(t.resources),i=[yW(t.iss)],n=yV(t.iss);if(r){let e=yQ(r),t=yX(r);l.push(...e),i.push(...t)}for(let e of i)h.push(`${e}:${n}`)}let u=await this.client.core.crypto.generateSharedKey(E,c.publicKey);l.length>0&&(s={topic:u,acknowledged:!0,self:{publicKey:E,metadata:this.client.metadata},peer:c,controller:c.publicKey,expiry:mJ(IP),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:w,namespaces:wf([...new Set(l)],[...new Set(h)]),transportType:a},await this.client.core.relayer.subscribe(u,{transportType:a}),await this.client.session.set(u,s),w&&await this.client.core.pairing.updateMetadata({topic:w,metadata:c.metadata}),s=this.client.session.get(u)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(i=c.metadata.redirect)&&i.linkMode&&null!=(n=c.metadata.redirect)&&n.universal&&t&&(this.client.core.addLinkModeSupportedApp(c.metadata.redirect.universal),this.client.session.update(u,{transportType:wY.link_mode})),N({auths:o,session:s})};this.events.once(O,T),this.events.once(P,R);try{if(o){let e=(0,c$.formatJsonRpcRequest)("wc_sessionAuthenticate",A,x);this.client.core.history.set(w,e);let r=await this.client.core.crypto.encode("",e,{type:2,encoding:b5});s=wl(t,w,r)}else await Promise.all([this.sendRequest({topic:w,method:"wc_sessionAuthenticate",params:A,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:x}),this.sendRequest({topic:w,method:"wc_sessionPropose",params:S,expiry:IT.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(e){throw this.events.off(O,T),this.events.off(P,R),e}return await this.setProposal(S.id,S),await this.setAuthRequest(x,{request:IK(IV({},A),{verifyContext:{}}),pairingTopic:w,transportType:a}),{uri:s??v,response:C}}),IY(this,"approveSessionAuthenticate",async e=>{let t;let{id:r,auths:i}=e,n=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[w7.authenticated_session_approve_started]}});try{this.isInitialized()}catch(e){throw n.setError(ve.no_internet_connection),e}let s=this.getPendingAuthRequest(r);if(!s)throw n.setError(ve.authenticated_session_pending_request_not_found),Error(`Could not find pending auth request with id ${r}`);let o=s.transportType||wY.relay;o===wY.relay&&await this.confirmOnlineStateOrThrow();let a=s.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),l=b9(a),h={type:1,receiverPublicKey:a,senderPublicKey:c},u=[],d=[];for(let e of i){if(!await yK({cacao:e,projectId:this.client.core.projectId})){n.setError(ve.invalid_cacao);let e=wy("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:l,error:e,encodeOpts:h}),Error(e.message)}n.addTrace(w7.cacaos_verified);let{p:t}=e,i=y0(t.resources),s=[yW(t.iss)],o=yV(t.iss);if(i){let e=yQ(i),t=yX(i);u.push(...e),s.push(...t)}for(let e of s)d.push(`${e}:${o}`)}let f=await this.client.core.crypto.generateSharedKey(c,a);if(n.addTrace(w7.create_authenticated_session_topic),u?.length>0){t={topic:f,acknowledged:!0,self:{publicKey:c,metadata:this.client.metadata},peer:{publicKey:a,metadata:s.requester.metadata},controller:a,expiry:mJ(IP),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:s.pairingTopic,namespaces:wf([...new Set(u)],[...new Set(d)]),transportType:o},n.addTrace(w7.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(f,{transportType:o})}catch(e){throw n.setError(ve.subscribe_authenticated_session_topic_failure),e}n.addTrace(w7.subscribe_authenticated_session_topic_success),await this.client.session.set(f,t),n.addTrace(w7.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:s.pairingTopic,metadata:s.requester.metadata})}n.addTrace(w7.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:r,result:{cacaos:i,responder:{publicKey:c,metadata:this.client.metadata}},encodeOpts:h,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(s.requester.metadata,o)})}catch(e){throw n.setError(ve.authenticated_session_approve_publish_failure),e}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:s.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:t}}),IY(this,"rejectSessionAuthenticate",async e=>{this.isInitialized();let{id:t,reason:r}=e,i=this.getPendingAuthRequest(t);if(!i)throw Error(`Could not find pending auth request with id ${t}`);i.transportType===wY.relay&&await this.confirmOnlineStateOrThrow();let n=i.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=b9(n);await this.sendError({id:t,topic:o,error:r,encodeOpts:{type:1,receiverPublicKey:n,senderPublicKey:s},rpcOpts:IT.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,wy("USER_DISCONNECTED"))}),IY(this,"formatAuthMessage",e=>{this.isInitialized();let{request:t,iss:r}=e;return yY(t,r)}),IY(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{let e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}},50)}),IY(this,"cleanupDuplicatePairings",async e=>{if(e.pairingTopic)try{let t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter(r=>{var i,n;return(null==(i=r.peerMetadata)?void 0:i.url)&&(null==(n=r.peerMetadata)?void 0:n.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic});if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map(e=>this.client.core.pairing.disconnect({topic:e.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}}),IY(this,"deleteSession",async e=>{var t;let{topic:r,expirerHasDeleted:i=!1,emitEvent:n=!0,id:s=0}=e,{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,wy("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),i||this.client.core.expirer.del(r),this.client.core.storage.removeItem(Ix).catch(e=>this.client.logger.warn(e)),this.getPendingSessionRequests().forEach(e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,wy("USER_DISCONNECTED"))}),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=ID.idle),n&&this.client.events.emit("session_delete",{id:s,topic:r})}),IY(this,"deleteProposal",async(e,t)=>{if(t)try{let t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError(w9.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(e,wy("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")}),IY(this,"deletePendingSessionRequest",async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(t=>t.id!==e),r&&(this.sessionRequestQueue.state=ID.idle,this.client.events.emit("session_request_expire",{id:e}))}),IY(this,"deletePendingAuthRequest",async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])}),IY(this,"setExpiry",async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))}),IY(this,"setProposal",async(e,t)=>{this.client.core.expirer.set(e,mJ(IT.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)}),IY(this,"setAuthRequest",async(e,t)=>{let{request:r,pairingTopic:i,transportType:n=wY.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:i,verifyContext:r.verifyContext,transportType:n})}),IY(this,"setPendingSessionRequest",async e=>{let{id:t,topic:r,params:i,verifyContext:n}=e,s=i.request.expiryTimestamp||mJ(IT.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:r,params:i,verifyContext:n})}),IY(this,"sendRequest",async e=>{let t,i;let{topic:n,method:s,params:o,expiry:a,relayRpcId:c,clientRpcId:l,throwOnFailedPublish:h,appLink:u,tvf:d}=e,f=(0,c$.formatJsonRpcRequest)(s,o,l),p=!!u;try{let e=p?b5:b8;t=await this.client.core.crypto.encode(n,f,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),e}if(IL.includes(s)){let e=b7(JSON.stringify(f)),r=b7(t);i=await this.client.core.verify.register({id:r,decryptedId:e})}let g=IT[s].req;if(g.attestation=i,a&&(g.ttl=a),c&&(g.id=c),this.client.core.history.set(n,f),p){let e=wl(u,n,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=IT[s].req;a&&(e.ttl=a),c&&(e.id=c),e.tvf=IK(IV({},d),{correlationId:f.id}),h?(e.internal=IK(IV({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,t,e)):this.client.core.relayer.publish(n,t,e).catch(e=>this.client.logger.error(e))}return f.id}),IY(this,"sendResult",async e=>{let t,i,n;let{id:s,topic:o,result:a,throwOnFailedPublish:c,encodeOpts:l,appLink:h}=e,u=(0,c$.formatJsonRpcResult)(s,a),d=h&&"u">typeof(null==r.g?void 0:r.g.Linking);try{let e=d?b5:b8;t=await this.client.core.crypto.encode(o,u,IK(IV({},l||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${o} failed`),e}try{let e=(i=await this.client.core.history.get(o,s)).request;try{this.shouldSetTVF(e.method,e.params)&&(n=this.getTVFParams(s,e.params,a))}catch(e){this.client.logger.warn("sendResult() -> getTVFParams() failed",e)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${o}, ${s}) failed`),e}if(d){let e=wl(h,o,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=IT[i.request.method].res;e.tvf=IK(IV({},n),{correlationId:s}),c?(e.internal=IK(IV({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,t,e)):this.client.core.relayer.publish(o,t,e).catch(e=>this.client.logger.error(e))}await this.client.core.history.resolve(u)}),IY(this,"sendError",async e=>{let t,i;let{id:n,topic:s,error:o,encodeOpts:a,rpcOpts:c,appLink:l}=e,h=(0,c$.formatJsonRpcError)(n,o),u=l&&"u">typeof(null==r.g?void 0:r.g.Linking);try{let e=u?b5:b8;t=await this.client.core.crypto.encode(s,h,IK(IV({},a||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),e}try{i=await this.client.core.history.get(s,n)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${s}, ${n}) failed`),e}if(u){let e=wl(l,s,t);await r.g.Linking.openURL(e,this.client.name)}else{let e=i.request.method,r=c||IT[e].res;this.client.core.relayer.publish(s,t,r)}await this.client.core.history.resolve(h)}),IY(this,"cleanup",async()=>{let e=[],t=[];this.client.session.getAll().forEach(t=>{let r=!1;mG(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)}),this.client.proposal.getAll().forEach(e=>{mG(e.expiryTimestamp)&&t.push(e.id)}),await Promise.all([...e.map(e=>this.deleteSession({topic:e})),...t.map(e=>this.deleteProposal(e))])}),IY(this,"onProviderMessageEvent",async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)}),IY(this,"onRelayEventRequest",async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()}),IY(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ID.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ID.active;let e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=ID.idle}),IY(this,"processRequest",async e=>{let{topic:t,payload:r,attestation:i,transportType:n,encryptedId:s}=e,o=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:i,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:i,encryptedId:s,transportType:n});default:return this.client.logger.info(`Unsupported request method ${o}`)}}),IY(this,"onRelayEventResponse",async e=>{let{topic:t,payload:r,transportType:i}=e,n=(await this.client.core.history.get(t,r.id)).request.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,i);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${n}`)}}),IY(this,"onRelayEventUnknownPayload",e=>{let{topic:t}=e,{message:r}=wm("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw Error(r)}),IY(this,"shouldIgnorePairingRequest",e=>{let{topic:t,requestMethod:r}=e,i=this.expectedPairingMethodMap.get(t);return!(!i||i.includes(r))&&!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),IY(this,"onSessionProposeRequest",async e=>{let{topic:t,payload:r,attestation:i,encryptedId:n}=e,{params:s,id:o}=r;try{let e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError(w6.proposal_listener_not_found)),this.isValidConnect(IV({},r.params));let a=s.expiryTimestamp||mJ(IT.wc_sessionPropose.req.ttl),c=IV({id:o,pairingTopic:t,expiryTimestamp:a},s);await this.setProposal(o,c);let l=await this.getVerifyContext({attestationId:i,hash:b7(JSON.stringify(r)),encryptedId:n,metadata:c.proposer.metadata});e?.addTrace(w5.emit_session_proposal),this.client.events.emit("session_proposal",{id:o,params:c,verifyContext:l})}catch(e){await this.sendError({id:o,topic:t,error:e,rpcOpts:IT.wc_sessionPropose.autoReject}),this.client.logger.error(e)}}),IY(this,"onSessionProposeResponse",async(e,t,r)=>{let{id:i}=t;if((0,c$.isJsonRpcResult)(t)){let{result:n}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:n});let s=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});let o=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});let a=n.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});let c=await this.client.core.crypto.generateSharedKey(o,a);this.pendingSessions.set(i,{sessionTopic:c,pairingTopic:e,proposalId:i,publicKey:o});let l=await this.client.core.relayer.subscribe(c,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:l}),await this.client.core.pairing.activate({topic:e})}else if((0,c$.isJsonRpcError)(t)){await this.client.proposal.delete(i,wy("USER_DISCONNECTED"));let e=mZ("session_connect",i);if(0===this.events.listenerCount(e))throw Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}}),IY(this,"onSessionSettleRequest",async(e,t)=>{let{id:r,params:i}=t;try{this.isValidSessionSettleRequest(i);let{relay:r,controller:n,expiry:s,namespaces:o,sessionProperties:a,scopedProperties:c,sessionConfig:l}=t.params,h=[...this.pendingSessions.values()].find(t=>t.sessionTopic===e);if(!h)return this.client.logger.error(`Pending session not found for topic ${e}`);let u=this.client.proposal.get(h.proposalId),d=IK(IV(IV(IV({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:h.pairingTopic,requiredNamespaces:u.requiredNamespaces,optionalNamespaces:u.optionalNamespaces,controller:n.publicKey,self:{publicKey:h.publicKey,metadata:this.client.metadata},peer:{publicKey:n.publicKey,metadata:n.metadata}},a&&{sessionProperties:a}),c&&{scopedProperties:c}),l&&{sessionConfig:l}),{transportType:wY.relay});await this.client.session.set(d.topic,d),await this.setExpiry(d.topic,d.expiry),await this.client.core.pairing.updateMetadata({topic:h.pairingTopic,metadata:d.peer.metadata}),this.client.events.emit("session_connect",{session:d}),this.events.emit(mZ("session_connect",h.proposalId),{session:d}),this.pendingSessions.delete(h.proposalId),this.deleteProposal(h.proposalId,!1),this.cleanupDuplicatePairings(d),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),IY(this,"onSessionSettleResponse",async(e,t)=>{let{id:r}=t;(0,c$.isJsonRpcResult)(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(mZ("session_approve",r),{})):(0,c$.isJsonRpcError)(t)&&(await this.client.session.delete(e,wy("USER_DISCONNECTED")),this.events.emit(mZ("session_approve",r),{error:t.error}))}),IY(this,"onSessionUpdateRequest",async(e,t)=>{let{params:r,id:i}=t;try{let t=`${e}_session_update`,n=wk.get(t);if(n&&this.isRequestOutOfSync(n,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:e,error:wy("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(IV({topic:e},r));try{wk.set(t,i),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw wk.delete(t),e}this.client.events.emit("session_update",{id:i,topic:e,params:r})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}}),IY(this,"isRequestOutOfSync",(e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3)),IY(this,"onSessionUpdateResponse",(e,t)=>{let{id:r}=t,i=mZ("session_update",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);(0,c$.isJsonRpcResult)(t)?this.events.emit(mZ("session_update",r),{}):(0,c$.isJsonRpcError)(t)&&this.events.emit(mZ("session_update",r),{error:t.error})}),IY(this,"onSessionExtendRequest",async(e,t)=>{let{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,mJ(IP)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),IY(this,"onSessionExtendResponse",(e,t)=>{let{id:r}=t,i=mZ("session_extend",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);(0,c$.isJsonRpcResult)(t)?this.events.emit(mZ("session_extend",r),{}):(0,c$.isJsonRpcError)(t)&&this.events.emit(mZ("session_extend",r),{error:t.error})}),IY(this,"onSessionPingRequest",async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),IY(this,"onSessionPingResponse",(e,t)=>{let{id:r}=t,i=mZ("session_ping",r);setTimeout(()=>{if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners 2176`);(0,c$.isJsonRpcResult)(t)?this.events.emit(mZ("session_ping",r),{}):(0,c$.isJsonRpcError)(t)&&this.events.emit(mZ("session_ping",r),{error:t.error})},500)}),IY(this,"onSessionDeleteRequest",async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise(t=>{this.client.core.relayer.once(wW.publish,async()=>{t(await this.deleteSession({topic:e,id:r}))})}),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:wy("USER_DISCONNECTED")})]).catch(e=>this.client.logger.error(e))}catch(e){this.client.logger.error(e)}}),IY(this,"onSessionRequest",async e=>{var t,r,i;let{topic:n,payload:s,attestation:o,encryptedId:a,transportType:c}=e,{id:l,params:h}=s;try{await this.isValidRequest(IV({topic:n},h));let e=this.client.session.get(n),s=await this.getVerifyContext({attestationId:o,hash:b7(JSON.stringify((0,c$.formatJsonRpcRequest)("wc_sessionRequest",h,l))),encryptedId:a,metadata:e.peer.metadata,transportType:c}),u={id:l,topic:n,params:h,verifyContext:s};await this.setPendingSessionRequest(u),c===wY.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(i=this.client.signConfig)&&i.disableRequestQueue?this.emitSessionRequest(u):(this.addSessionRequestToSessionRequestQueue(u),this.processSessionRequestQueue())}catch(e){await this.sendError({id:l,topic:n,error:e}),this.client.logger.error(e)}}),IY(this,"onSessionRequestResponse",(e,t)=>{let{id:r}=t,i=mZ("session_request",r);if(0===this.events.listenerCount(i))throw Error(`emitting ${i} without any listeners`);(0,c$.isJsonRpcResult)(t)?this.events.emit(mZ("session_request",r),{result:t.result}):(0,c$.isJsonRpcError)(t)&&this.events.emit(mZ("session_request",r),{error:t.error})}),IY(this,"onSessionEventRequest",async(e,t)=>{let{id:r,params:i}=t;try{let t=`${e}_session_event_${i.event.name}`,n=wk.get(t);if(n&&this.isRequestOutOfSync(n,r)){this.client.logger.info(`Discarding out of sync request - ${r}`);return}this.isValidEmit(IV({topic:e},i)),this.client.events.emit("session_event",{id:r,topic:e,params:i}),wk.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}}),IY(this,"onSessionAuthenticateResponse",(e,t)=>{let{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),(0,c$.isJsonRpcResult)(t)?this.events.emit(mZ("session_request",r),{result:t.result}):(0,c$.isJsonRpcError)(t)&&this.events.emit(mZ("session_request",r),{error:t.error})}),IY(this,"onSessionAuthenticateRequest",async e=>{var t;let{topic:r,payload:i,attestation:n,encryptedId:s,transportType:o}=e;try{let{requester:e,authPayload:a,expiryTimestamp:c}=i.params,l=await this.getVerifyContext({attestationId:n,hash:b7(JSON.stringify(i)),encryptedId:s,metadata:e.metadata,transportType:o}),h={requester:e,pairingTopic:r,id:i.id,authPayload:a,verifyContext:l,expiryTimestamp:c};await this.setAuthRequest(i.id,{request:h,pairingTopic:r,transportType:o}),o===wY.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:i.params,id:i.id,verifyContext:l})}catch(s){this.client.logger.error(s);let e=i.params.requester.publicKey,t=await this.client.core.crypto.generateKeyPair(),n=this.getAppLinkIfEnabled(i.params.requester.metadata,o);await this.sendError({id:i.id,topic:r,error:s,encodeOpts:{type:1,receiverPublicKey:e,senderPublicKey:t},rpcOpts:IT.wc_sessionAuthenticate.autoReject,appLink:n})}}),IY(this,"addSessionRequestToSessionRequestQueue",e=>{this.sessionRequestQueue.queue.push(e)}),IY(this,"cleanupAfterResponse",e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ID.idle,this.processSessionRequestQueue()},(0,er.toMiliseconds)(this.requestQueueDelay))}),IY(this,"cleanupPendingSentRequestsForTopic",({topic:e,error:t})=>{let r=this.client.core.history.pending;r.length>0&&r.filter(t=>t.topic===e&&"wc_sessionRequest"===t.request.method).forEach(e=>{let r=mZ("session_request",e.request.id);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);this.events.emit(mZ("session_request",e.request.id),{error:t})})}),IY(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ID.active){this.client.logger.info("session request queue is already active.");return}let e=this.sessionRequestQueue.queue[0];if(!e){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ID.active,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}}),IY(this,"emitSessionRequest",e=>{this.client.events.emit("session_request",e)}),IY(this,"onPairingCreated",e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;let t=this.client.proposal.getAll().find(t=>t.pairingTopic===e.topic);t&&this.onSessionProposeRequest({topic:e.topic,payload:(0,c$.formatJsonRpcRequest)("wc_sessionPropose",IK(IV({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id)})}),IY(this,"isValidConnect",async e=>{let t;if(!wM(e)){let{message:t}=wm("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw Error(t)}let{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:n,sessionProperties:s,scopedProperties:o,relays:a}=e;if(wv(r)||await this.isValidPairingTopic(r),t=!1,a?a&&wb(a)&&a.length&&a.forEach(e=>{t=wN(e)}):t=!0,!t){let{message:e}=wm("MISSING_OR_INVALID",`connect() relays: ${a}`);throw Error(e)}if(wv(i)||0===ww(i)||this.validateNamespaces(i,"requiredNamespaces"),wv(n)||0===ww(n)||this.validateNamespaces(n,"optionalNamespaces"),wv(s)||this.validateSessionProps(s,"sessionProperties"),!wv(o)){this.validateSessionProps(o,"scopedProperties");let e=Object.keys(i||{}).concat(Object.keys(n||{}));if(!Object.keys(o).every(t=>e.includes(t)))throw Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(o)}, required/optional namespaces: ${JSON.stringify(e)}`)}}),IY(this,"validateNamespaces",(e,t)=>{let r=function(e,t,r){let i=null;if(e&&ww(e)){let n;let s=wS(e,t);s&&(i=s);let o=(n=null,Object.entries(e).forEach(([e,i])=>{var s,o;let a;if(n)return;let c=(s=mR(e,i),o=`${t} ${r}`,a=null,wb(s)&&s.length?s.forEach(e=>{a||w_(e)||(a=wy("UNSUPPORTED_CHAINS",`${o}, chain ${e} should be a string and conform to "namespace:chainId" format`))}):w_(e)||(a=wy("UNSUPPORTED_CHAINS",`${o}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),a);c&&(n=c)}),n);o&&(i=o)}else i=wm("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}(e,"connect()",t);if(r)throw Error(r.message)}),IY(this,"isValidApprove",async e=>{if(!wM(e))throw Error(wm("MISSING_OR_INVALID",`approve() params: ${e}`).message);let{id:t,namespaces:r,relayProtocol:i,sessionProperties:n,scopedProperties:s}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);let o=this.client.proposal.get(t),a=wC(r,"approve()");if(a)throw Error(a.message);let c=wO(o.requiredNamespaces,r,"approve()");if(c)throw Error(c.message);if(!wE(i,!0)){let{message:e}=wm("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw Error(e)}if(wv(n)||this.validateSessionProps(n,"sessionProperties"),!wv(s)){this.validateSessionProps(s,"scopedProperties");let e=new Set(Object.keys(r));if(!Object.keys(s).every(t=>e.has(t)))throw Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(s)}, approved namespaces: ${Array.from(e).join(", ")}`)}}),IY(this,"isValidReject",async e=>{if(!wM(e)){let{message:t}=wm("MISSING_OR_INVALID",`reject() params: ${e}`);throw Error(t)}let{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!r||"object"!=typeof r||!r.code||!wI(r.code,!1)||!r.message||!wE(r.message,!1)){let{message:e}=wm("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw Error(e)}}),IY(this,"isValidSessionSettleRequest",e=>{let t;if(!wM(e)){let{message:t}=wm("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw Error(t)}let{relay:r,controller:i,namespaces:n,expiry:s}=e;if(!wN(r)){let{message:e}=wm("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(e)}let o=(t=null,wE(i?.publicKey,!1)||(t=wm("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t);if(o)throw Error(o.message);let a=wC(n,"onSessionSettleRequest()");if(a)throw Error(a.message);if(mG(s)){let{message:e}=wm("EXPIRED","onSessionSettleRequest()");throw Error(e)}}),IY(this,"isValidUpdate",async e=>{if(!wM(e)){let{message:t}=wm("MISSING_OR_INVALID",`update() params: ${e}`);throw Error(t)}let{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);let i=this.client.session.get(t),n=wC(r,"update()");if(n)throw Error(n.message);let s=wO(i.requiredNamespaces,r,"update()");if(s)throw Error(s.message)}),IY(this,"isValidExtend",async e=>{if(!wM(e)){let{message:t}=wm("MISSING_OR_INVALID",`extend() params: ${e}`);throw Error(t)}let{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)}),IY(this,"isValidRequest",async e=>{var t;if(!wM(e)){let{message:t}=wm("MISSING_OR_INVALID",`request() params: ${e}`);throw Error(t)}let{topic:r,request:i,chainId:n,expiry:s}=e;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);let{namespaces:o}=this.client.session.get(r);if(!wx(o,n)){let{message:e}=wm("MISSING_OR_INVALID",`request() chainId: ${n}`);throw Error(e)}if(wv(i)||!wE(i.method,!1)){let{message:e}=wm("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw Error(e)}if(!(wE(t=i.method,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{wh(e.accounts).includes(t)&&r.push(...e.methods)}),r})(o,n).includes(t))){let{message:e}=wm("MISSING_OR_INVALID",`request() method: ${i.method}`);throw Error(e)}if(s&&(!wI(s,!1)||!(s<=IR.max)||!(s>=IR.min))){let{message:e}=wm("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${IR.min} and ${IR.max}`);throw Error(e)}}),IY(this,"isValidRespond",async e=>{var t;if(!wM(e)){let{message:t}=wm("MISSING_OR_INVALID",`respond() params: ${e}`);throw Error(t)}let{topic:r,response:i}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(wv(i)||wv(i.result)&&wv(i.error)||!wI(i.id,!1)||!wE(i.jsonrpc,!1)){let{message:e}=wm("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw Error(e)}}),IY(this,"isValidPing",async e=>{if(!wM(e)){let{message:t}=wm("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),IY(this,"isValidEmit",async e=>{var t;if(!wM(e)){let{message:t}=wm("MISSING_OR_INVALID",`emit() params: ${e}`);throw Error(t)}let{topic:r,event:i,chainId:n}=e;await this.isValidSessionTopic(r);let{namespaces:s}=this.client.session.get(r);if(!wx(s,n)){let{message:e}=wm("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw Error(e)}if(wv(i)||!wE(i.name,!1)){let{message:e}=wm("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}if(!(wE(t=i.name,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{wh(e.accounts).includes(t)&&r.push(...e.events)}),r})(s,n).includes(t))){let{message:e}=wm("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}}),IY(this,"isValidDisconnect",async e=>{if(!wM(e)){let{message:t}=wm("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)}),IY(this,"isValidAuthenticate",e=>{let{chains:t,uri:r,domain:i,nonce:n}=e;if(!Array.isArray(t)||0===t.length)throw Error("chains is required and must be a non-empty array");if(!wE(r,!1))throw Error("uri is required parameter");if(!wE(i,!1))throw Error("domain is required parameter");if(!wE(n,!1))throw Error("nonce is required parameter");if([...new Set(t.map(e=>mT(e).namespace))].length>1)throw Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:s}=mT(t[0]);if("eip155"!==s)throw Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),IY(this,"getVerifyContext",async e=>{let{attestationId:t,hash:r,encryptedId:i,metadata:n,transportType:s}=e,o={verified:{verifyUrl:n.verifyUrl||w2,validation:"UNKNOWN",origin:n.url||""}};try{if(s===wY.link_mode){let e=this.getAppLinkIfEnabled(n,s);return o.verified.validation=e&&new URL(e).origin===new URL(n.url).origin?"VALID":"INVALID",o}let e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:i,verifyUrl:n.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o}),IY(this,"validateSessionProps",(e,t)=>{Object.values(e).forEach((r,i)=>{if(null==r){let{message:n}=wm("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${r} for key ${Object.keys(e)[i]}`);throw Error(n)}})}),IY(this,"getPendingAuthRequest",e=>{let t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0}),IY(this,"addToRecentlyDeleted",(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0,t=this.recentlyDeletedLimit/2;for(let r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}}),IY(this,"checkRecentlyDeleted",e=>{let t=this.recentlyDeletedMap.get(e);if(t){let{message:r}=wm("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw Error(r)}}),IY(this,"isLinkModeEnabled",(e,t)=>{var i,n,s,o,a,c,l,h,u;return!!e&&t===wY.link_mode&&(null==(n=null==(i=this.client.metadata)?void 0:i.redirect)?void 0:n.linkMode)===!0&&(null==(o=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:o.universal)!==void 0&&(null==(c=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:c.universal)!==""&&(null==(l=e?.redirect)?void 0:l.universal)!==void 0&&(null==(h=e?.redirect)?void 0:h.universal)!==""&&(null==(u=e?.redirect)?void 0:u.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&"u">typeof(null==r.g?void 0:r.g.Linking)}),IY(this,"getAppLinkIfEnabled",(e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0}),IY(this,"handleLinkModeMessage",({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;let t=m1(e,"topic")||"",r=decodeURIComponent(m1(e,"wc_ev")||""),i=this.client.session.keys.includes(t);i&&this.client.session.update(t,{transportType:wY.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:i})}),IY(this,"registerLinkModeListeners",async()=>{var e;if(m3()||mL()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){let e=null==r.g?void 0:r.g.Linking;if("u">typeof e){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);let t=await e.getInitialURL();t&&setTimeout(()=>{this.handleLinkModeMessage({url:t})},50)}}}),IY(this,"shouldSetTVF",(e,t)=>{if(!t||"wc_sessionRequest"!==e)return!1;let{request:r}=t;return Object.keys(Ik).includes(r.method)}),IY(this,"getTVFParams",(e,t,r)=>{var i,n;try{let s=t.request.method,o=this.extractTxHashesFromResult(s,r);return IK(IV({correlationId:e,rpcMethods:[s],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[null==(n=null==(i=t.request.params)?void 0:i[0])?void 0:n.to]}),{txHashes:o})}catch(e){this.client.logger.warn("Error getting TVF params",e)}return{}}),IY(this,"isValidContractData",e=>{var t;if(!e)return!1;try{let r=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!r.startsWith("0x"))return!1;let i=r.slice(2);return!!/^[0-9a-fA-F]*$/.test(i)&&i.length%2==0}catch{}return!1}),IY(this,"extractTxHashesFromResult",(e,t)=>{try{let r=Ik[e];if("string"==typeof t)return[t];let i=t[r.key];if(wb(i))return"solana_signAllTransactions"===e?i.map(e=>(function(e){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);let i=r[0];if(0===i)throw Error("No signatures found");if(r.length<1+64*i)throw Error("Transaction data too short for claimed signature count");if(r.length<100)throw Error("Transaction too short");let n=mP.from(e,"base64").slice(1,65);return mx.encode(n)})(e)):i;if("string"==typeof i)return[i]}catch(e){this.client.logger.warn("Error extracting tx hashes from result",e)}return[]})}async processPendingMessageEvents(){try{let e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(let[e,r]of Object.entries(t))for(let t of r)try{await this.onProviderMessageEvent({topic:e,message:t,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${e}, message: ${t}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){let{message:e}=wm("NOT_INITIALIZED",this.name);throw Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(wW.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){let{topic:t,message:r,attestation:i,transportType:n}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(IU)?this.client.auth.authKeys.get(IU):{responseTopic:void 0,publicKey:void 0};try{let e=await this.client.core.crypto.decode(t,r,{receiverPublicKey:s,encoding:n===wY.link_mode?b5:b8});(0,c$.isJsonRpcRequest)(e)?(this.client.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e,attestation:i,transportType:n,encryptedId:b7(r)})):(0,c$.isJsonRpcResponse)(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e,transportType:n}),this.client.core.history.delete(t,e.id)):await this.onRelayEventUnknownPayload({topic:t,payload:e,transportType:n}),await this.client.core.relayer.messages.ack(t,r)}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(w1.expired,async e=>{let{topic:t,id:r}=mY(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,wm("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,wm("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))})}registerPairingEvents(){this.client.core.pairing.events.on(wX.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(wX.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!wE(e,!1)){let{message:t}=wm("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=wm("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(mG(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=wm("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}async isValidSessionTopic(e){if(!wE(e,!1)){let{message:t}=wm("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:t}=wm("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw Error(t)}if(mG(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});let{message:t}=wm("EXPIRED",`session topic: ${e}`);throw Error(t)}if(!this.client.core.crypto.keychain.has(e)){let{message:t}=wm("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(wE(e,!1)){let{message:t}=wm("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw Error(t)}else{let{message:t}=wm("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw Error(t)}}async isValidProposalId(e){if("number"!=typeof e){let{message:t}=wm("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=wm("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw Error(t)}if(mG(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);let{message:t}=wm("EXPIRED",`proposal id: ${e}`);throw Error(t)}}}class IG extends EX{constructor(e,t){super(e,t,"proposal",IN),this.core=e,this.logger=t}}class IZ extends EX{constructor(e,t){super(e,t,"session",IN),this.core=e,this.logger=t}}class IQ extends EX{constructor(e,t){super(e,t,"request",IN,e=>e.id),this.core=e,this.logger=t}}class IX extends EX{constructor(e,t){super(e,t,"authKeys",Ij,()=>IU),this.core=e,this.logger=t}}class I0 extends EX{constructor(e,t){super(e,t,"pairingTopics",Ij),this.core=e,this.logger=t}}class I1 extends EX{constructor(e,t){super(e,t,"requests",Ij,e=>e.id),this.core=e,this.logger=t}}var I2=Object.defineProperty,I3=(e,t,r)=>t in e?I2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I8=(e,t,r)=>I3(e,"symbol"!=typeof t?t+"":t,r);class I5{constructor(e,t){this.core=e,this.logger=t,I8(this,"authKeys"),I8(this,"pairingTopics"),I8(this,"requests"),this.authKeys=new IX(this.core,this.logger),this.pairingTopics=new I0(this.core,this.logger),this.requests=new I1(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var I6=Object.defineProperty,I4=(e,t,r)=>t in e?I6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,I9=(e,t,r)=>I4(e,"symbol"!=typeof t?t+"":t,r);class I7 extends g${constructor(e){super(e),I9(this,"protocol","wc"),I9(this,"version",2),I9(this,"name",IM.name),I9(this,"metadata"),I9(this,"core"),I9(this,"logger"),I9(this,"events",new ee.EventEmitter),I9(this,"engine"),I9(this,"session"),I9(this,"proposal"),I9(this,"pendingRequest"),I9(this,"auth"),I9(this,"signConfig"),I9(this,"on",(e,t)=>this.events.on(e,t)),I9(this,"once",(e,t)=>this.events.once(e,t)),I9(this,"off",(e,t)=>this.events.off(e,t)),I9(this,"removeListener",(e,t)=>this.events.removeListener(e,t)),I9(this,"removeAllListeners",e=>this.events.removeAllListeners(e)),I9(this,"connect",async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"pair",async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"approve",async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"reject",async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"update",async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"extend",async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"request",async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"respond",async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"ping",async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"emit",async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"disconnect",async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"find",e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}}),I9(this,"authenticate",async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"formatAuthMessage",e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"approveSessionAuthenticate",async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),I9(this,"rejectSessionAuthenticate",async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}}),this.name=e?.name||IM.name,this.metadata=e?.metadata||mz(),this.signConfig=e?.signConfig;let t="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,ez.gw)((0,ez.jI)({level:e?.logger||IM.logger}));this.core=e?.core||new IS(e),this.logger=(0,ez.Ep)(t,this.name),this.session=new IZ(this.core,this.logger),this.proposal=new IG(this.core,this.logger),this.pendingRequest=new IQ(this.core,this.logger),this.engine=new IJ(this),this.auth=new I5(this.core,this.logger)}static async init(e){let t=new I7(e);return await t.initialize(),t}get context(){return(0,ez.Fd)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},(0,er.toMiliseconds)(er.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var _e=r(82957).Buffer;let _t="error",_r="wc@2:universal_provider:",_i="https://rpc.walletconnect.org/v1/",_n="generic",_s=`${_i}bundler`,_o="default_chain_changed";function _a(){}function _c(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function _l(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _h(e){return"object"==typeof e&&null!==e}function _u(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function _d(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let _f="[object String]",_p="[object Number]",_g="[object Boolean]",_m="[object Arguments]";function _y(e,t,r,i=new Map,n){let s=n?.(e,t,r,i);if(null!=s)return s;if(_c(e))return e;if(i.has(e))return i.get(e);if(Array.isArray(e)){let t=Array(e.length);i.set(e,t);for(let s=0;s<e.length;s++)t[s]=_y(e[s],s,r,i,n);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){let t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){let t=new Map;for(let[s,o]of(i.set(e,t),e))t.set(s,_y(o,s,r,i,n));return t}if(e instanceof Set){let t=new Set;for(let s of(i.set(e,t),e))t.add(_y(s,void 0,r,i,n));return t}if("u">typeof _e&&_e.isBuffer(e))return e.subarray();if(_l(e)){let t=new(Object.getPrototypeOf(e)).constructor(e.length);i.set(e,t);for(let s=0;s<e.length;s++)t[s]=_y(e[s],s,r,i,n);return t}if(e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){let t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return i.set(e,t),_b(t,e,r,i,n),t}if("u">typeof File&&e instanceof File){let t=new File([e],e.name,{type:e.type});return i.set(e,t),_b(t,e,r,i,n),t}if(e instanceof Blob){let t=new Blob([e],{type:e.type});return i.set(e,t),_b(t,e,r,i,n),t}if(e instanceof Error){let t=new e.constructor;return i.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,_b(t,e,r,i,n),t}if("object"==typeof e&&function(e){switch(_d(e)){case _m:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case _g:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case _p:case"[object Object]":case"[object RegExp]":case"[object Set]":case _f:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){let t=Object.create(Object.getPrototypeOf(e));return i.set(e,t),_b(t,e,r,i,n),t}return e}function _b(e,t,r=e,i,n){let s=[...Object.keys(t),..._u(t)];for(let o=0;o<s.length;o++){let a=s[o],c=Object.getOwnPropertyDescriptor(e,a);(null==c||c.writable)&&(e[a]=_y(t[a],a,r,i,n))}}function _w(e){var t;return t=(t,r,i,n)=>{let s=void 0;if(null!=s)return s;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case _p:case _f:case _g:{let t=new e.constructor(e?.valueOf());return _b(t,e),t}case _m:{let t={};return _b(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}},_y(e,void 0,e,new Map,t)}function _v(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===_d(e)}var _E=Object.defineProperty,_I=Object.defineProperties,__=Object.getOwnPropertyDescriptors,_A=Object.getOwnPropertySymbols,_S=Object.prototype.hasOwnProperty,_C=Object.prototype.propertyIsEnumerable,_N=(e,t,r)=>t in e?_E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_M=(e,t)=>{for(var r in t||(t={}))_S.call(t,r)&&_N(e,r,t[r]);if(_A)for(var r of _A(t))_C.call(t,r)&&_N(e,r,t[r]);return e},_x=(e,t)=>_I(e,__(t));function _O(e,t,r){var i;let n=mT(e);return(null==(i=t.rpcMap)?void 0:i[n.reference])||`${_i}?chainId=${n.namespace}:${n.reference}&projectId=${r}`}function _P(e){return e.includes(":")?e.split(":")[1]:e}function _T(e){return e.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function _R(e={},t={}){return function(e,...t){return function(e,...t){let r=t.slice(0,-1),i=t[t.length-1],n=e;for(let e=0;e<r.length;e++)n=function e(t,r,i,n){if(_c(t)&&(t=Object(t)),null==r||"object"!=typeof r)return t;if(n.has(r))return function(e){if(_c(e))return e;if(Array.isArray(e)||_l(e)||e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);let t=Object.getPrototypeOf(e),r=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new r(e);if(e instanceof RegExp){let t=new r(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new r(e.buffer.slice(0));if(e instanceof Error){let t=new r(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}return"u">typeof File&&e instanceof File?new r([e],e.name,{type:e.type,lastModified:e.lastModified}):"object"==typeof e?Object.assign(Object.create(t),e):e}(n.get(r));if(n.set(r,t),Array.isArray(r)){r=r.slice();for(let e=0;e<r.length;e++)r[e]=r[e]??void 0}let s=[...Object.keys(r),..._u(r)];for(let o=0;o<s.length;o++){let a=s[o],c=r[a],l=t[a];if(_v(c)&&(c={...c}),_v(l)&&(l={...l}),"u">typeof _e&&_e.isBuffer(c)&&(c=_w(c)),Array.isArray(c)){if("object"==typeof l&&null!=l){let e=[],t=Reflect.ownKeys(l);for(let r=0;r<t.length;r++){let i=t[r];e[i]=l[i]}l=e}else l=[]}let h=i(l,c,a,t,r,n);null!=h?t[a]=h:Array.isArray(c)||_h(l)&&_h(c)?t[a]=e(l,c,i,n):null==l&&function(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){let t=e[Symbol.toStringTag];return!!(null!=t&&Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable)&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(c)?t[a]=e({},c,i,n):null==l&&_l(c)?t[a]=_w(c):(void 0===l||void 0!==c)&&(t[a]=c)}return t}(n,r[e],i,new Map);return n}(e,...t,_a)}(_D(e),_D(t))}function _D(e){var t,r,i,n;let s={};if(!ww(e))return s;for(let[o,a]of Object.entries(e)){let e=wu(o)?[o]:a.chains,c=a.methods||[],l=a.events||[],h=a.rpcMap||{},u=wd(o);s[u]=_x(_M(_M({},s[u]),a),{chains:mQ(e,null==(t=s[u])?void 0:t.chains),methods:mQ(c,null==(r=s[u])?void 0:r.methods),events:mQ(l,null==(i=s[u])?void 0:i.events),rpcMap:_M(_M({},h),null==(n=s[u])?void 0:n.rpcMap)})}return s}function _k(e){return e.includes(":")?e.split(":")[2]:e}function _L(e){let t={};for(let[r,i]of Object.entries(e)){let e=i.methods||[],n=i.events||[],s=i.accounts||[],o=wu(r)?[r]:i.chains?i.chains:_T(i.accounts);t[r]={chains:o,methods:e,events:n,accounts:s}}return t}function _j(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):isNaN(Number(e=e.includes(":")?e.split(":")[1]:e))?e:Number(e)}let _U={},_B=e=>_U[e],_z=(e,t)=>{_U[e]=t};var _$=Object.defineProperty,_q=(e,t,r)=>t in e?_$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_F=(e,t,r)=>_q(e,"symbol"!=typeof t?t+"":t,r);class _H{constructor(e){_F(this,"name","polkadot"),_F(this,"client"),_F(this,"httpProviders"),_F(this,"events"),_F(this,"namespace"),_F(this,"chainId"),this.namespace=e.namespace,this.events=_B("events"),this.client=_B("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_o,`${this.name}:${e}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=_P(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||_O(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,_B("disableProviderPing")))}}var _W=Object.defineProperty,_V=Object.defineProperties,_K=Object.getOwnPropertyDescriptors,_Y=Object.getOwnPropertySymbols,_J=Object.prototype.hasOwnProperty,_G=Object.prototype.propertyIsEnumerable,_Z=(e,t,r)=>t in e?_W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_Q=(e,t)=>{for(var r in t||(t={}))_J.call(t,r)&&_Z(e,r,t[r]);if(_Y)for(var r of _Y(t))_G.call(t,r)&&_Z(e,r,t[r]);return e},_X=(e,t)=>_V(e,_K(t)),_0=(e,t,r)=>_Z(e,"symbol"!=typeof t?t+"":t,r);class _1{constructor(e){_0(this,"name","eip155"),_0(this,"client"),_0(this,"chainId"),_0(this,"namespace"),_0(this,"httpProviders"),_0(this,"events"),this.namespace=e.namespace,this.events=_B("events"),this.client=_B("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(_o,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){let r=t||_O(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.k(r,_B("disableProviderPing")))}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=parseInt(_P(t));e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(){let e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let i=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0",n=parseInt(i=i.startsWith("0x")?i:`0x${i}`,16);if(this.isChainApproved(n))this.setDefaultChain(`${n}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${n}`);else throw Error(`Failed to switch to chain 'eip155:${n}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,i;let n=null==(r=null==(t=e.request)?void 0:t.params)?void 0:r[0];if(!n)throw Error("Missing address parameter in `wallet_getCapabilities` request");let s=this.client.session.get(e.topic),o=(null==(i=s?.sessionProperties)?void 0:i.capabilities)||{};if(null!=o&&o[n])return o?.[n];let a=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:_X(_Q({},s.sessionProperties||{}),{capabilities:_X(_Q({},o||{}),{[n]:a})})})}catch(e){console.warn("Failed to update session with capabilities",e)}return a}async getCallStatus(e){var t,r;let i=this.client.session.get(e.topic),n=null==(t=i.sessionProperties)?void 0:t.bundler_name;if(n){let t=this.getBundlerUrl(e.chainId,n);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}let s=null==(r=i.sessionProperties)?void 0:r.bundler_url;if(s)try{return await this.getUserOperationReceipt(s,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,s)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;let i=new URL(e),n=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,c$.formatJsonRpcRequest)("eth_getUserOperationReceipt",[null==(r=t.request.params)?void 0:r[0]]))});if(!n.ok)throw Error(`Failed to fetch user operation receipt - ${n.status}`);return await n.json()}getBundlerUrl(e,t){return`${_s}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var _2=Object.defineProperty,_3=(e,t,r)=>t in e?_2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_8=(e,t,r)=>_3(e,"symbol"!=typeof t?t+"":t,r);class _5{constructor(e){_8(this,"name","solana"),_8(this,"client"),_8(this,"httpProviders"),_8(this,"events"),_8(this,"namespace"),_8(this,"chainId"),this.namespace=e.namespace,this.events=_B("events"),this.client=_B("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_o,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=_P(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||_O(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,_B("disableProviderPing")))}}var _6=Object.defineProperty,_4=(e,t,r)=>t in e?_6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_9=(e,t,r)=>_4(e,"symbol"!=typeof t?t+"":t,r);class _7{constructor(e){_9(this,"name","cosmos"),_9(this,"client"),_9(this,"httpProviders"),_9(this,"events"),_9(this,"namespace"),_9(this,"chainId"),this.namespace=e.namespace,this.events=_B("events"),this.client=_B("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_o,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=_P(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||_O(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,_B("disableProviderPing")))}}var Ae=Object.defineProperty,At=(e,t,r)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ar=(e,t,r)=>At(e,"symbol"!=typeof t?t+"":t,r);class Ai{constructor(e){Ar(this,"name","algorand"),Ar(this,"client"),Ar(this,"httpProviders"),Ar(this,"events"),Ar(this,"namespace"),Ar(this,"chainId"),this.namespace=e.namespace,this.events=_B("events"),this.client=_B("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){let r=t||_O(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(_o,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||_O(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new cz.r(new di.Z(r,_B("disableProviderPing")))}}var An=Object.defineProperty,As=(e,t,r)=>t in e?An(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ao=(e,t,r)=>As(e,"symbol"!=typeof t?t+"":t,r);class Aa{constructor(e){Ao(this,"name","cip34"),Ao(this,"client"),Ao(this,"httpProviders"),Ao(this,"events"),Ao(this,"namespace"),Ao(this,"chainId"),this.namespace=e.namespace,this.events=_B("events"),this.client=_B("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_o,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let r=this.getCardanoRPCUrl(t),i=_P(t);e[i]=this.createHttpProvider(i,r)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){let t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||this.getCardanoRPCUrl(e);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,_B("disableProviderPing")))}}var Ac=Object.defineProperty,Al=(e,t,r)=>t in e?Ac(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ah=(e,t,r)=>Al(e,"symbol"!=typeof t?t+"":t,r);class Au{constructor(e){Ah(this,"name","elrond"),Ah(this,"client"),Ah(this,"httpProviders"),Ah(this,"events"),Ah(this,"namespace"),Ah(this,"chainId"),this.namespace=e.namespace,this.events=_B("events"),this.client=_B("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_o,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=_P(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||_O(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,_B("disableProviderPing")))}}var Ad=Object.defineProperty,Af=(e,t,r)=>t in e?Ad(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ap=(e,t,r)=>Af(e,"symbol"!=typeof t?t+"":t,r);class Ag{constructor(e){Ap(this,"name","multiversx"),Ap(this,"client"),Ap(this,"httpProviders"),Ap(this,"events"),Ap(this,"namespace"),Ap(this,"chainId"),this.namespace=e.namespace,this.events=_B("events"),this.client=_B("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_o,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let i=_P(t);e[i]=this.createHttpProvider(i,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||_O(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,_B("disableProviderPing")))}}var Am=Object.defineProperty,Ay=(e,t,r)=>t in e?Am(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ab=(e,t,r)=>Ay(e,"symbol"!=typeof t?t+"":t,r);class Aw{constructor(e){Ab(this,"name","near"),Ab(this,"client"),Ab(this,"httpProviders"),Ab(this,"events"),Ab(this,"namespace"),Ab(this,"chainId"),this.namespace=e.namespace,this.events=_B("events"),this.client=_B("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let r=t||_O(`${this.name}:${e}`,this.namespace);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(_o,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||_O(e,this.namespace);return typeof r>"u"?void 0:new cz.r(new di.Z(r,_B("disableProviderPing")))}}var Av=Object.defineProperty,AE=(e,t,r)=>t in e?Av(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,AI=(e,t,r)=>AE(e,"symbol"!=typeof t?t+"":t,r);class A_{constructor(e){AI(this,"name","tezos"),AI(this,"client"),AI(this,"httpProviders"),AI(this,"events"),AI(this,"namespace"),AI(this,"chainId"),this.namespace=e.namespace,this.events=_B("events"),this.client=_B("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let r=t||_O(`${this.name}:${e}`,this.namespace);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(_o,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||_O(e,this.namespace);return typeof r>"u"?void 0:new cz.r(new di.Z(r))}}var AA=Object.defineProperty,AS=(e,t,r)=>t in e?AA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,AC=(e,t,r)=>AS(e,"symbol"!=typeof t?t+"":t,r);class AN{constructor(e){AC(this,"name",_n),AC(this,"client"),AC(this,"httpProviders"),AC(this,"events"),AC(this,"namespace"),AC(this,"chainId"),this.namespace=e.namespace,this.events=_B("events"),this.client=_B("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(_o,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){var e,t;let r={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach(e=>{let t=mT(e);r[`${t.namespace}:${t.reference}`]=this.createHttpProvider(e)}),r}getHttpProvider(e){let t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||_O(e,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);return new cz.r(new di.Z(r,_B("disableProviderPing")))}}var AM=Object.defineProperty,Ax=Object.defineProperties,AO=Object.getOwnPropertyDescriptors,AP=Object.getOwnPropertySymbols,AT=Object.prototype.hasOwnProperty,AR=Object.prototype.propertyIsEnumerable,AD=(e,t,r)=>t in e?AM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ak=(e,t)=>{for(var r in t||(t={}))AT.call(t,r)&&AD(e,r,t[r]);if(AP)for(var r of AP(t))AR.call(t,r)&&AD(e,r,t[r]);return e},AL=(e,t)=>Ax(e,AO(t)),Aj=(e,t,r)=>AD(e,"symbol"!=typeof t?t+"":t,r);class AU{constructor(e){Aj(this,"client"),Aj(this,"namespaces"),Aj(this,"optionalNamespaces"),Aj(this,"sessionProperties"),Aj(this,"scopedProperties"),Aj(this,"events",new(et())),Aj(this,"rpcProviders",{}),Aj(this,"session"),Aj(this,"providerOpts"),Aj(this,"logger"),Aj(this,"uri"),Aj(this,"disableProviderPing",!1),this.providerOpts=e,this.logger="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,ez.gw)((0,ez.jI)({level:e?.logger||_t})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){let t=new AU(e);return await t.initialize(),t}async request(e,t,r){let[i,n]=this.validateChain(t);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(i).request({request:Ak({},e),chainId:`${i}:${n}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,i){let n=new Date().getTime();this.request(e,r,i).then(e=>t(null,(0,c$.formatJsonRpcResult)(n,e))).catch(e=>t(e,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:wy("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();let{uri:r,response:i}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));let n=await i();if(this.session=n.session,this.session){let e=_L(this.session.namespaces);this.namespaces=_R(this.namespaces,e),await this.persist("namespaces",this.namespaces),this.onConnect()}return n}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){let{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));let i=await r();this.session=i;let n=_L(i.namespaces);return this.namespaces=_R(this.namespaces,n),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;let[r,i]=this.validateChain(e),n=this.getProvider(r);n.name===_n?n.setDefaultChain(`${r}:${i}`,t):n.setDefaultChain(i,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");let t=this.client.pairing.getAll();if(wb(t)){for(let r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await I7.init({core:this.providerOpts.core,logger:this.providerOpts.logger||_t,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),Error(`The provided session: ${null==(t=null==(e=this.providerOpts)?void 0:e.session)?void 0:t.topic} doesn't exist in the Sign client`)}else{let e=this.client.session.getAll();this.session=e[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).map(e=>wd(e)))];_z("client",this.client),_z("events",this.events),_z("disableProviderPing",this.disableProviderPing),e.forEach(e=>{if(!this.session)return;let t=function(e,t){let r=Object.keys(t.namespaces).filter(t=>t.includes(e));if(!r.length)return[];let i=[];return r.forEach(e=>{let r=t.namespaces[e].accounts;i.push(...r)}),i}(e,this.session),r=_T(t),i=AL(Ak({},_R(this.namespaces,this.optionalNamespaces)[e]),{accounts:t,chains:r});switch(e){case"eip155":this.rpcProviders[e]=new _1({namespace:i});break;case"algorand":this.rpcProviders[e]=new Ai({namespace:i});break;case"solana":this.rpcProviders[e]=new _5({namespace:i});break;case"cosmos":this.rpcProviders[e]=new _7({namespace:i});break;case"polkadot":this.rpcProviders[e]=new _H({namespace:i});break;case"cip34":this.rpcProviders[e]=new Aa({namespace:i});break;case"elrond":this.rpcProviders[e]=new Au({namespace:i});break;case"multiversx":this.rpcProviders[e]=new Ag({namespace:i});break;case"near":this.rpcProviders[e]=new Aw({namespace:i});break;case"tezos":this.rpcProviders[e]=new A_({namespace:i});break;default:this.rpcProviders[_n]?this.rpcProviders[_n].updateNamespace(i):this.rpcProviders[_n]=new AN({namespace:i})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;let{topic:r}=e;r===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;let{params:r,topic:i}=e;if(i!==(null==(t=this.session)?void 0:t.topic))return;let{event:n}=r;if("accountsChanged"===n.name){let e=n.data;e&&wb(e)&&this.events.emit("accountsChanged",e.map(_k))}else if("chainChanged"===n.name){let e=r.chainId,t=r.event.data,i=wd(e),n=_j(e)!==_j(t)?`${i}:${_j(t)}`:e;this.onChainChanged(n)}else this.events.emit(n.name,n.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r,i;if(e!==(null==(r=this.session)?void 0:r.topic))return;let{namespaces:n}=t,s=null==(i=this.client)?void 0:i.session.get(e);this.session=AL(Ak({},s),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===(null==(t=this.session)?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",AL(Ak({},wy("USER_DISCONNECTED")),{data:e.topic})))}),this.on(_o,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[_n]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){let{namespaces:t,optionalNamespaces:r,sessionProperties:i,scopedProperties:n}=e;t&&Object.keys(t).length&&(this.namespaces=t),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=i,this.scopedProperties=n}validateChain(e){let[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(e=>wd(e)).includes(t))throw Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];let i=wd(Object.keys(this.namespaces)[0]),n=this.rpcProviders[i].getDefaultChain();return[i,n]}async requestAccounts(){let[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;let[r,i]=this.validateChain(e);i&&(t||this.getProvider(r).setDefaultChain(i),this.namespaces[r]?this.namespaces[r].defaultChain=i:this.namespaces[`${r}:${i}`]?this.namespaces[`${r}:${i}`].defaultChain=i:this.namespaces[`${r}:${i}`]={defaultChain:i},this.events.emit("chainChanged",i),await this.persist("namespaces",this.namespaces))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;let i=(null==(r=this.session)?void 0:r.topic)||"";await this.client.core.storage.setItem(`${_r}/${e}${i}`,t)}async getFromStore(e){var t;let r=(null==(t=this.session)?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${_r}/${e}${r}`)}async deleteFromStore(e){var t;let r=(null==(t=this.session)?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${_r}/${e}${r}`)}async cleanupStorage(){var e;try{if((null==(e=this.client)?void 0:e.session.length)>0)return;for(let e of(await this.client.core.storage.getKeys()))e.startsWith(_r)&&await this.client.core.storage.removeItem(e)}catch(e){this.logger.warn("Failed to cleanup storage",e)}}}var AB=r(44649);let Az={validateCaipAddress(e){if(e.split(":")?.length!==3)throw Error("Invalid CAIP Address");return e},parseCaipAddress(e){let t=e.split(":");if(3!==t.length)throw Error(`Invalid CAIP-10 address: ${e}`);let[r,i,n]=t;if(!r||!i||!n)throw Error(`Invalid CAIP-10 address: ${e}`);return{chainNamespace:r,chainId:i,address:n}},parseCaipNetworkId(e){let t=e.split(":");if(2!==t.length)throw Error(`Invalid CAIP-2 network id: ${e}`);let[r,i]=t;if(!r||!i)throw Error(`Invalid CAIP-2 network id: ${e}`);return{chainNamespace:r,chainId:i}}};var A$=r(68903),Aq=r(92144),AF=r(61704),AH=r(68584),AW=r(89512),AV=r(36801),AK=r(33085),AY=r(55543);let AJ={convertEVMChainIdToCoinType(e){if(e>=2147483648)throw Error("Invalid chainId");return(2147483648|e)>>>0}};var AG=r(86777);let AZ=(0,AK.sj)({suggestions:[],loading:!1}),AQ={state:AZ,subscribe:e=>(0,AK.Ld)(AZ,()=>e(AZ)),subscribeKey:(e,t)=>(0,AY.VW)(AZ,e,t),async resolveName(e){try{return await AF.L.lookupEnsName(e)}catch(e){throw Error(e?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(e){try{return await AF.L.lookupEnsName(e),!0}catch{return!1}},async getSuggestions(e){try{AZ.loading=!0,AZ.suggestions=[];let t=await AF.L.getEnsNameSuggestions(e);return AZ.suggestions=t.suggestions.map(e=>({...e,name:e.name}))||[],AZ.suggestions}catch(e){throw Error(this.parseEnsApiError(e,"Error fetching name suggestions"))}finally{AZ.loading=!1}},async getNamesForAddress(e){try{if(!Aq.R.state.activeCaipNetwork)return[];let t=AV.M.getEnsFromCacheForAddress(e);if(t)return t;let r=await AF.L.reverseLookupEnsName({address:e});return AV.M.updateEnsCache({address:e,ens:r,timestamp:Date.now()}),r}catch(e){throw Error(this.parseEnsApiError(e,"Error fetching names for address"))}},async registerName(e){let t=Aq.R.state.activeCaipNetwork;if(!t)throw Error("Network not found");let r=AH.N.state.address,i=p7.ConnectorController.getAuthConnector();if(!r||!i)throw Error("Address or auth connector not found");AZ.loading=!0;try{let i=JSON.stringify({name:e,attributes:{},timestamp:Math.floor(Date.now()/1e3)});AG.RouterController.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){AZ.loading=!1}});let n=await ge.ConnectionController.signMessage(i),s=t.id;if(!s)throw Error("Network not found");let o=AJ.convertEVMChainIdToCoinType(Number(s));await AF.L.registerEnsName({coinType:o,address:r,signature:n,message:i}),AH.N.setProfileName(e,t.chainNamespace),AG.RouterController.replace("RegisterAccountNameSuccess")}catch(r){let t=this.parseEnsApiError(r,`Error registering name ${e}`);throw AG.RouterController.replace("RegisterAccountName"),Error(t)}finally{AZ.loading=!1}},validateName:e=>/^[a-zA-Z0-9-]{4,}$/u.test(e),parseEnsApiError:(e,t)=>e?.reasons?.[0]?.description||t};var AX=r(63043),A0=r(96986),A1=r(31929),A2=r(52005),A3=r(72723),A8=r(66909);r(46773),r(54946);var A5=r(70768),A6=r(30795);let A4={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${"undefined"!=typeof window?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}},A9=(e,t,r)=>JSON.stringify(e,(e,r)=>{let i="bigint"==typeof r?r.toString():r;return"function"==typeof t?t(e,i):i},r),A7="2.45.1",Se={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,version:`viem@${A7}`};class St extends Error{constructor(e,t={}){let r=t.cause instanceof St?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof St&&t.cause.docsPath||t.docsPath,n=Se.getDocsUrl?.({...t,docsPath:i});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...n?[`Docs: ${n}`]:[],...r?[`Details: ${r}`]:[],...Se.version?[`Version: ${Se.version}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=A7}walk(e){return function e(t,r){return r?.(t)?t:t&&"object"==typeof t&&"cause"in t&&void 0!==t.cause?e(t.cause,r):r?null:t}(this,e)}}let Sr=e=>e;class Si extends St{constructor({body:e,cause:t,details:r,headers:i,status:n,url:s}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[n&&`Status: ${n}`,`URL: ${Sr(s)}`,e&&`Request body: ${A9(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=n,this.url=s}}class Sn extends St{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${Sr(r)}`,`Request body: ${A9(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data,this.url=r}}class Ss extends St{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Sr(t)}`,`Request body: ${A9(e)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=t}}class So extends St{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}let Sa=new Map,Sc={current:0,take(){return this.current++},reset(){this.current=0}};class Sl extends St{constructor(e,{code:t,docsPath:r,metaMessages:i,name:n,shortMessage:s}){super(s,{cause:e,docsPath:r,metaMessages:i||e?.metaMessages,name:n||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=n||e.name,this.code=e instanceof Sn?e.code:t??-1}}class Sh extends Sl{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class Su extends Sl{constructor(e){super(e,{code:Su.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Su,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Sd extends Sl{constructor(e){super(e,{code:Sd.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Sd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Sf extends Sl{constructor(e,{method:t}={}){super(e,{code:Sf.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(Sf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Sp extends Sl{constructor(e){super(e,{code:Sp.code,name:"InvalidParamsRpcError",shortMessage:"Invalid parameters were provided to the RPC method.\nDouble check you have provided the correct parameters."})}}Object.defineProperty(Sp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Sg extends Sl{constructor(e){super(e,{code:Sg.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Sg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Sm extends Sl{constructor(e){super(e,{code:Sm.code,name:"InvalidInputRpcError",shortMessage:"Missing or invalid parameters.\nDouble check you have provided the correct parameters."})}}Object.defineProperty(Sm,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Sy extends Sl{constructor(e){super(e,{code:Sy.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Sy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Sb extends Sl{constructor(e){super(e,{code:Sb.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Sb,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Sw extends Sl{constructor(e){super(e,{code:Sw.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Sw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Sv extends Sl{constructor(e,{method:t}={}){super(e,{code:Sv.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(Sv,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class SE extends Sl{constructor(e){super(e,{code:SE.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(SE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class SI extends Sl{constructor(e){super(e,{code:SI.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(SI,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class S_ extends Sh{constructor(e){super(e,{code:S_.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(S_,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class SA extends Sh{constructor(e){super(e,{code:SA.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(SA,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class SS extends Sh{constructor(e,{method:t}={}){super(e,{code:SS.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(SS,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class SC extends Sh{constructor(e){super(e,{code:SC.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(SC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class SN extends Sh{constructor(e){super(e,{code:SN.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(SN,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class SM extends Sh{constructor(e){super(e,{code:SM.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(SM,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Sx extends Sh{constructor(e){super(e,{code:Sx.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Sx,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class SO extends Sh{constructor(e){super(e,{code:SO.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(SO,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class SP extends Sh{constructor(e){super(e,{code:SP.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(SP,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class ST extends Sh{constructor(e){super(e,{code:ST.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(ST,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class SR extends Sh{constructor(e){super(e,{code:SR.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(SR,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class SD extends Sh{constructor(e){super(e,{code:SD.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(SD,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Sk extends Sh{constructor(e){super(e,{code:Sk.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Sk,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class SL extends Sl{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class Sj extends St{constructor({max:e,min:t,signed:r,size:i,value:n}){super(`Number "${n}" is not in safe ${i?`${8*i}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class SU extends St{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}class SB extends St{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function Sz(e,{dir:t,size:r=32}={}){return"string"==typeof e?function(e,{dir:t,size:r=32}={}){if(null===r)return e;let i=e.replace("0x","");if(i.length>2*r)throw new SB({size:Math.ceil(i.length/2),targetSize:r,type:"hex"});return`0x${i["right"===t?"padEnd":"padStart"](2*r,"0")}`}(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new SB({size:e.length,targetSize:r,type:"bytes"});let i=new Uint8Array(r);for(let n=0;n<r;n++){let s="right"===t;i[s?n:r-n-1]=e[s?n:e.length-n-1]}return i}(e,{dir:t,size:r})}function S$(e){return!function(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}(e,{strict:!1})?e.length:Math.ceil((e.length-2)/2)}function Sq(e,{size:t}){if(S$(e)>t)throw new SU({givenSize:S$(e),maxSize:t})}let SF=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function SH(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t={}){let r;let{signed:i,size:n}=t,s=BigInt(e);n?r=i?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));let o="bigint"==typeof r&&i?-r-1n:0;if(r&&s>r||s<o){let t="bigint"==typeof e?"n":"";throw new Sj({max:r?`${r}${t}`:void 0,min:`${o}${t}`,signed:i,size:n,value:`${e}${t}`})}let a=`0x${(i&&s<0?(1n<<BigInt(8*n))+BigInt(s):s).toString(16)}`;return n?Sz(a,{size:n}):a}(e,t):"string"==typeof e?SK(e,t):"boolean"==typeof e?function(e,t={}){let r=`0x${Number(e)}`;return"number"==typeof t.size?(Sq(r,{size:t.size}),Sz(r,{size:t.size})):r}(e,t):SW(e,t)}function SW(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=SF[e[t]];let i=`0x${r}`;return"number"==typeof t.size?(Sq(i,{size:t.size}),Sz(i,{dir:"right",size:t.size})):i}let SV=new TextEncoder;function SK(e,t={}){return SW(SV.encode(e),t)}class SY extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=this.keys().next().value;e&&this.delete(e)}return this}}let SJ=new SY(8192);async function SG(e){return new Promise(t=>setTimeout(t,e))}let SZ=256;function SQ({key:e,methods:t,name:r,request:i,retryCount:s=3,retryDelay:o=150,timeout:a,type:c},l){return{config:{key:e,methods:t,name:r,request:i,retryCount:s,retryDelay:o,timeout:a,type:c},request:function(e,t={}){return async(r,i={})=>{let{dedupe:n=!1,methods:s,retryDelay:o=150,retryCount:a=3,uid:c}={...t,...i},{method:l}=r;if(s?.exclude?.includes(l)||s?.include&&!s.include.includes(l))throw new Sv(Error("method not supported"),{method:l});let h=n?SK(`${c}.${A9(r)}`):void 0;return function(e,{enabled:t=!0,id:r}){if(!t||!r)return e();if(SJ.get(r))return SJ.get(r);let i=e().finally(()=>SJ.delete(r));return SJ.set(r,i),i}(()=>(function(e,{delay:t=100,retryCount:r=2,shouldRetry:i=()=>!0}={}){return new Promise((n,s)=>{let o=async({count:a=0}={})=>{let c=async({error:e})=>{let r="function"==typeof t?t({count:a,error:e}):t;r&&await SG(r),o({count:a+1})};try{let t=await e();n(t)}catch(e){if(a<r&&await i({count:a,error:e}))return c({error:e});s(e)}};o()})})(async()=>{try{return await e(r)}catch(e){switch(e.code){case Su.code:throw new Su(e);case Sd.code:throw new Sd(e);case Sf.code:throw new Sf(e,{method:r.method});case Sp.code:throw new Sp(e);case Sg.code:throw new Sg(e);case Sm.code:throw new Sm(e);case Sy.code:throw new Sy(e);case Sb.code:throw new Sb(e);case Sw.code:throw new Sw(e);case Sv.code:throw new Sv(e,{method:r.method});case SE.code:throw new SE(e);case SI.code:throw new SI(e);case S_.code:throw new S_(e);case SA.code:throw new SA(e);case SS.code:throw new SS(e);case SC.code:throw new SC(e);case SN.code:throw new SN(e);case SM.code:throw new SM(e);case Sx.code:throw new Sx(e);case SO.code:throw new SO(e);case SP.code:throw new SP(e);case ST.code:throw new ST(e);case SR.code:throw new SR(e);case SD.code:throw new SD(e);case Sk.code:throw new Sk(e);case 5e3:throw new S_(e);default:if(e instanceof St)throw e;throw new SL(e)}}},{delay:({count:e,error:t})=>{if(t&&t instanceof Si){let e=t?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*Number.parseInt(e,10)}return~~(1<<e)*o},retryCount:a,shouldRetry:({error:e})=>"code"in e&&"number"==typeof e.code?-1===e.code||e.code===SE.code||e.code===Sg.code:!(e instanceof Si)||!e.status||403===e.status||408===e.status||413===e.status||429===e.status||500===e.status||502===e.status||503===e.status||504===e.status}),{enabled:n,id:h})}}(i,{methods:t,retryCount:s,retryDelay:o,uid:function(e=11){if(!n||SZ+e>512){n="",SZ=0;for(let e=0;e<256;e++)n+=(256+256*Math.random()|0).toString(16).substring(1)}return n.substring(SZ,SZ+++e)}()}),value:l}}function SX(e,t={}){let{batch:r,fetchFn:i,fetchOptions:n,key:s="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:l,retryDelay:h,raw:u}=t;return({chain:d,retryCount:f,timeout:p})=>{let{batchSize:g=1e3,wait:m=0}="object"==typeof r?r:{},y=t.retryCount??f,b=p??t.timeout??1e4,w=e||d?.rpcUrls.default.http[0];if(!w)throw new So;let v=function(e,t={}){let{url:r,headers:i}=function(e){try{let t=new URL(e),r=(()=>{if(t.username){let e=`${decodeURIComponent(t.username)}:${decodeURIComponent(t.password)}`;return t.username="",t.password="",{url:t.toString(),headers:{Authorization:`Basic ${btoa(e)}`}}}})();return{url:t.toString(),...r}}catch{return{url:e}}}(e);return{async request(e){let{body:n,fetchFn:s=t.fetchFn??fetch,onRequest:o=t.onRequest,onResponse:a=t.onResponse,timeout:c=t.timeout??1e4}=e,l={...t.fetchOptions??{},...e.fetchOptions??{}},{headers:h,method:u,signal:d}=l;try{let e;let t=await function(e,{errorInstance:t=Error("timed out"),timeout:r,signal:i}){return new Promise((n,s)=>{(async()=>{let o;try{let a=new AbortController;r>0&&(o=setTimeout(()=>{i?a.abort():s(t)},r)),n(await e({signal:a?.signal||null}))}catch(e){e?.name==="AbortError"&&s(t),s(e)}finally{clearTimeout(o)}})()})}(async({signal:e})=>{let t={...l,body:Array.isArray(n)?A9(n.map(e=>({jsonrpc:"2.0",id:e.id??Sc.take(),...e}))):A9({jsonrpc:"2.0",id:n.id??Sc.take(),...n}),headers:{...i,"Content-Type":"application/json",...h},method:u||"POST",signal:d||(c>0?e:null)},a=new Request(r,t),f=await o?.(a,t)??{...t,url:r};return await s(f.url??r,f)},{errorInstance:new Ss({body:n,url:r}),timeout:c,signal:!0});if(a&&await a(t),t.headers.get("Content-Type")?.startsWith("application/json"))e=await t.json();else{e=await t.text();try{e=JSON.parse(e||"{}")}catch(r){if(t.ok)throw r;e={error:e}}}if(!t.ok)throw new Si({body:n,details:A9(e.error)||t.statusText,headers:t.headers,status:t.status,url:r});return e}catch(e){if(e instanceof Si||e instanceof Ss)throw e;throw new Si({body:n,cause:e,url:r})}}}}(w,{fetchFn:i,fetchOptions:n,onRequest:c,onResponse:l,timeout:b});return SQ({key:s,methods:o,name:a,async request({method:e,params:t}){let i={method:e,params:t},{schedule:n}=function({fn:e,id:t,shouldSplitBatch:r,wait:i=0,sort:n}){let s=async()=>{let t=c();o();let r=t.map(({args:e})=>e);0!==r.length&&e(r).then(e=>{n&&Array.isArray(e)&&e.sort(n);for(let r=0;r<t.length;r++){let{resolve:i}=t[r];i?.([e[r],e])}}).catch(e=>{for(let r=0;r<t.length;r++){let{reject:i}=t[r];i?.(e)}})},o=()=>Sa.delete(t),a=()=>c().map(({args:e})=>e),c=()=>Sa.get(t)||[],l=e=>Sa.set(t,[...c(),e]);return{flush:o,async schedule(e){let t,n;let{promise:o,resolve:h,reject:u}=(t=()=>void 0,n=()=>void 0,{promise:new Promise((e,r)=>{t=e,n=r}),resolve:t,reject:n});return(r?.([...a(),e])&&s(),c().length>0)?l({args:e,resolve:h,reject:u}):(l({args:e,resolve:h,reject:u}),setTimeout(s,i)),o}}}({id:w,wait:m,shouldSplitBatch:e=>e.length>g,fn:e=>v.request({body:e}),sort:(e,t)=>e.id-t.id}),s=async e=>r?n(e):[await v.request({body:e})],[{error:o,result:a}]=await s(i);if(u)return{error:o,result:a};if(o)throw new Sn({body:i,error:o,url:w});return a},retryCount:y,retryDelay:h,timeout:b,type:"http"},{fetchOptions:n,url:w})}}let S0={ether:-9,wei:9};var S1=r(39502);function S2(e,t="wei"){return(0,S1.b)(e,S0[t])}class S3 extends St{constructor({cause:e,message:t}={}){let r=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(S3,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(S3,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted|gas required exceeds allowance/});class S8 extends St{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${S2(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(S8,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class S5 extends St{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${S2(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(S5,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class S6 extends St{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(S6,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class S4 extends St{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.
Try increasing the nonce or find the latest nonce with \`getTransactionCount\`.`,{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(S4,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class S9 extends St{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(S9,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class S7 extends St{constructor({cause:e}={}){super("The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account.",{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(S7,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Ce extends St{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Ce,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Ct extends St{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Ct,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Cr extends St{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Cr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Ci extends St{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:r}={}){super(`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${S2(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${S2(r)} gwei`:""}).`,{cause:e,name:"TipAboveFeeCapError"})}}function Cn(e,t={}){let{key:r="fallback",name:i="Fallback",rank:n=!1,shouldThrow:s=Cs,retryCount:o,retryDelay:a}=t;return({chain:t,pollingInterval:c=4e3,timeout:l,...h})=>{let u=e,d=()=>{},f=SQ({key:r,name:i,async request({method:e,params:r}){let i;let n=async(o=0)=>{let a=u[o]({...h,chain:t,retryCount:0,timeout:l});try{let t=await a.request({method:e,params:r});return d({method:e,params:r,response:t,transport:a,status:"success"}),t}catch(c){if(d({error:c,method:e,params:r,transport:a,status:"error"}),s(c)||o===u.length-1||!(i??=u.slice(o+1).some(r=>{let{include:i,exclude:n}=r({chain:t}).config.methods||{};return i?i.includes(e):!n||!n.includes(e)})))throw c;return n(o+1)}};return n()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:e=>d=e,transports:u.map(e=>e({chain:t,retryCount:0}))});if(n){let e="object"==typeof n?n:{};!function({chain:e,interval:t=4e3,onTransports:r,ping:i,sampleCount:n=10,timeout:s=1e3,transports:o,weights:a={}}){let{stability:c=.7,latency:l=.3}=a,h=[],u=async()=>{let a=await Promise.all(o.map(async t=>{let r,n;let o=t({chain:e,retryCount:0,timeout:s}),a=Date.now();try{await (i?i({transport:o}):o.request({method:"net_listening"})),n=1}catch{n=0}finally{r=Date.now()}return{latency:r-a,success:n}}));h.push(a),h.length>n&&h.shift();let d=Math.max(...h.map(e=>Math.max(...e.map(({latency:e})=>e))));r(o.map((e,t)=>{let r=h.map(e=>e[t].latency),i=r.reduce((e,t)=>e+t,0)/r.length,n=h.map(e=>e[t].success),s=n.reduce((e,t)=>e+t,0)/n.length;return 0===s?[0,t]:[l*(1-i/d)+c*s,t]}).sort((e,t)=>t[0]-e[0]).map(([,e])=>o[e])),await SG(t),u()};u()}({chain:t,interval:e.interval??c,onTransports:e=>u=e,ping:e.ping,sampleCount:e.sampleCount,timeout:e.timeout,transports:u,weights:e.weights})}return f}}function Cs(e){return!!("code"in e&&"number"==typeof e.code&&(e.code===Sw.code||e.code===S_.code||S3.nodeMessage.test(e.message)||5e3===e.code))}Object.defineProperty(Ci,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});var Co=r(88578);AB.b.CONNECTOR_ID.COINBASE,AB.b.CONNECTOR_ID.COINBASE_SDK,AB.b.CONNECTOR_ID.SAFE,AB.b.CONNECTOR_ID.LEDGER,AB.b.CONNECTOR_ID.OKX,Co.b.METMASK_CONNECTOR_NAME,Co.b.TRUST_CONNECTOR_NAME,Co.b.SOLFLARE_CONNECTOR_NAME,Co.b.PHANTOM_CONNECTOR_NAME,Co.b.COIN98_CONNECTOR_NAME,Co.b.MAGIC_EDEN_CONNECTOR_NAME,Co.b.BACKPACK_CONNECTOR_NAME,Co.b.BITGET_CONNECTOR_NAME,Co.b.FRONTIER_CONNECTOR_NAME,Co.b.XVERSE_CONNECTOR_NAME,Co.b.LEATHER_CONNECTOR_NAME;let Ca={1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},Cc={[AB.b.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[AB.b.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[AB.b.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[AB.b.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[AB.b.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[AB.b.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},Cl={[AB.b.CONNECTOR_ID.INJECTED]:"Browser Wallet",[AB.b.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[AB.b.CONNECTOR_ID.COINBASE]:"Coinbase",[AB.b.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[AB.b.CONNECTOR_ID.LEDGER]:"Ledger",[AB.b.CONNECTOR_ID.SAFE]:"Safe"},Ch=(AB.b.CONNECTOR_ID.INJECTED,AB.b.CONNECTOR_ID.WALLET_CONNECT,AB.b.CONNECTOR_ID.EIP6963,AB.b.CONNECTOR_ID.AUTH,["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"]),Cu={extendRpcUrlWithProjectId(e,t){let r=!1;try{r="rpc.walletconnect.org"===new URL(e).host}catch(e){r=!1}if(r){let r=new URL(e);return r.searchParams.has("projectId")||r.searchParams.set("projectId",t),r.toString()}return e},isCaipNetwork:e=>"chainNamespace"in e&&"caipNetworkId"in e,getChainNamespace(e){return this.isCaipNetwork(e)?e.chainNamespace:AB.b.CHAIN.EVM},getCaipNetworkId(e){return this.isCaipNetwork(e)?e.caipNetworkId:`${AB.b.CHAIN.EVM}:${e.id}`},getDefaultRpcUrl(e,t,r){let i=e.rpcUrls?.default?.http?.[0];return Ch.includes(t)?function(e,t){let r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",e),r.searchParams.set("projectId",t),r.toString()}(t,r):i||""},extendCaipNetwork(e,{customNetworkImageUrls:t,projectId:r,customRpcUrls:i}){let n=this.getChainNamespace(e),s=this.getCaipNetworkId(e),o=e.rpcUrls.default.http?.[0],a=this.getDefaultRpcUrl(e,s,r),c=e?.rpcUrls?.chainDefault?.http?.[0]||o,l=i?.[s]?.map(e=>e.url)||[],h=[...l,a],u=[...l];return c&&!u.includes(c)&&u.push(c),{...e,chainNamespace:n,caipNetworkId:s,assets:{imageId:Ca[e.id],imageUrl:t?.[e.id]},rpcUrls:{...e.rpcUrls,default:{http:h},chainDefault:{http:u}}}},extendCaipNetworks:(e,{customNetworkImageUrls:t,projectId:r,customRpcUrls:i})=>e.map(e=>Cu.extendCaipNetwork(e,{customNetworkImageUrls:t,customRpcUrls:i,projectId:r})),getViemTransport(e,t,r){let i=[];if(r?.forEach(e=>{i.push(SX(e.url,e.config))}),Ch.includes(e.caipNetworkId)){let r=this.getDefaultRpcUrl(e,e.caipNetworkId,t);i.push(SX(r,{fetchOptions:{headers:{"Content-Type":"text/plain"}}}))}return Cn(i)},extendWagmiTransports(e,t,r){return Ch.includes(e.caipNetworkId)?Cn([r,SX(this.getDefaultRpcUrl(e,e.caipNetworkId,t))]):r},getUnsupportedNetwork:e=>({id:e.split(":")[1],caipNetworkId:e,name:AB.b.UNSUPPORTED_NETWORK_NAME,chainNamespace:e.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}),getCaipNetworkFromStorage(e){let t=AV.M.getActiveCaipNetworkId(),r=Aq.R.getAllRequestedCaipNetworks(),i=Array.from(Aq.R.state.chains?.keys()||[]),n=t?.split(":")[0],s=!!n&&i.includes(n),o=r?.find(e=>e.caipNetworkId===t);return s&&!o&&t?this.getUnsupportedNetwork(t):o||e||r?.[0]}};var Cd=r(54090);let Cf={createLogger(e,t="error"){let r=(0,ez.jI)({level:t}),{logger:i}=(0,ez.Rt)({opts:r});return i.error=(...t)=>{for(let r of t)if(r instanceof Error){e(r,...t);return}e(void 0,...t)},i}},Cp={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},Cg=(0,AK.sj)({providers:{...Cp},providerIds:{...Cp}}),Cm={state:Cg,subscribeKey:(e,t)=>(0,AY.VW)(Cg,e,t),subscribe:e=>(0,AK.Ld)(Cg,()=>{e(Cg)}),subscribeProviders:e=>(0,AK.Ld)(Cg.providers,()=>e(Cg.providers)),setProvider(e,t){t&&(Cg.providers[e]=(0,AK.iH)(t))},getProvider:e=>Cg.providers[e],setProviderId(e,t){t&&(Cg.providerIds[e]=t)},getProviderId(e){if(e)return Cg.providerIds[e]},reset(){Cg.providers={...Cp},Cg.providerIds={...Cp}},resetChain(e){Cg.providers[e]=void 0,Cg.providerIds[e]=void 0}};var Cy=r(59712),Cb=r(41505);let Cw={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};function Cv(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}let CE=Cv({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),CI=Cv({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),C_=Cv({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Cv({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),Cv({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});let CA={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},CS={getMethodsByChainNamespace:e=>CA[e]||[],createDefaultNamespace(e){return{methods:this.getMethodsByChainNamespace(e),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(e,t){if(!t)return{...e};let r={...e},i=new Set;if(t.methods&&Object.keys(t.methods).forEach(e=>i.add(e)),t.chains&&Object.keys(t.chains).forEach(e=>i.add(e)),t.events&&Object.keys(t.events).forEach(e=>i.add(e)),t.rpcMap&&Object.keys(t.rpcMap).forEach(e=>{let[t]=e.split(":");t&&i.add(t)}),i.forEach(e=>{r[e]||(r[e]=this.createDefaultNamespace(e))}),t.methods&&Object.entries(t.methods).forEach(([e,t])=>{r[e]&&(r[e].methods=t)}),t.chains&&Object.entries(t.chains).forEach(([e,t])=>{r[e]&&(r[e].chains=t)}),t.events&&Object.entries(t.events).forEach(([e,t])=>{r[e]&&(r[e].events=t)}),t.rpcMap){let e=new Set;Object.entries(t.rpcMap).forEach(([t,i])=>{let[n,s]=t.split(":");n&&s&&r[n]&&(r[n].rpcMap||(r[n].rpcMap={}),e.has(n)||(r[n].rpcMap={},e.add(n)),r[n].rpcMap[s]=i)})}return r},createNamespaces(e,t){let r=e.reduce((e,t)=>{let{id:r,chainNamespace:i,rpcUrls:n}=t,s=n.default.http[0];e[i]||(e[i]=this.createDefaultNamespace(i));let o=`${i}:${r}`,a=e[i];switch(a.chains.push(o),o){case CE.caipNetworkId:a.chains.push(CE.deprecatedCaipNetworkId);break;case CI.caipNetworkId:a.chains.push(CI.deprecatedCaipNetworkId)}return a?.rpcMap&&s&&(a.rpcMap[r]=s),e},{});return this.applyNamespaceOverrides(r,t)},resolveReownName:async e=>{let t=await AQ.resolveName(e),r=Object.values(t?.addresses)||[];return r[0]?.address||!1},getChainsFromNamespaces:(e={})=>Object.values(e).flatMap(e=>Array.from(new Set([...e.chains||[],...e.accounts.map(e=>{let[t,r]=e.split(":");return`${t}:${r}`})]))),isSessionEventData:e=>"object"==typeof e&&null!==e&&"id"in e&&"topic"in e&&"params"in e&&"object"==typeof e.params&&null!==e.params&&"chainId"in e.params&&"event"in e.params&&"object"==typeof e.params.event&&null!==e.params.event};class CC{constructor({provider:e,caipNetworks:t,namespace:r}){this.id=AB.b.CONNECTOR_ID.WALLET_CONNECT,this.name=Cl[AB.b.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Cc[AB.b.CONNECTOR_ID.WALLET_CONNECT],this.caipNetworks=t,this.provider=e,this.chain=r}get chains(){return this.caipNetworks}async connectWalletConnect(){if(!await this.authenticate()){let e=gr.OptionsController.state.universalProviderConfigOverride,t=CS.createNamespaces(this.caipNetworks,e);await this.provider.connect({optionalNamespaces:t})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){let e=this.chains.map(e=>e.caipNetworkId);return Cb.w.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:CN})}}let CN=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class CM{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,e&&this.construct(e)}construct(e){this.caipNetworks=e.networks,this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.caipNetworks||[]}setAuthProvider(e){this.addConnector({id:AB.b.CONNECTOR_ID.AUTH,type:"AUTH",name:AB.b.CONNECTOR_NAMES.AUTH,provider:e,imageId:Cc[AB.b.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){let t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(e=>!t.has(e.id)&&(t.add(e.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,t){AH.N.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){let r=this.eventListeners.get(e);r&&r.delete(t)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,t){let r=this.eventListeners.get(e);r&&r.forEach(e=>e(t))}async connectWalletConnect(e){let t=this.getWalletConnectConnector();return{clientId:(await t.connectWalletConnect()).clientId}}async switchNetwork(e){let{caipNetwork:t,providerType:r}=e;if(!e.provider)return;let i="provider"in e.provider?e.provider.provider:e.provider;if("WALLET_CONNECT"===r){i.setDefaultChain(t.caipNetworkId);return}if(i&&"AUTH"===r){await i.switchNetwork(t.caipNetworkId);let e=await i.getUser({chainId:t.caipNetworkId,preferredAccountType:gr.OptionsController.state.defaultAccountTypes[t.chainNamespace]});this.emit("switchNetwork",e)}}getWalletConnectConnector(){let e=this.connectors.find(e=>e instanceof CC);if(!e)throw Error("WalletConnectConnector not found");return e}}class Cx extends CM{setUniversalProvider(e){this.addConnector(new CC({provider:e,caipNetworks:this.caipNetworks||[],namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{let e=this.getWalletConnectConnector();await e.disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){let t=this.provider;return Promise.resolve({accounts:(t?.session?.namespaces?.[e]?.accounts?.map(e=>{let[,,t]=e.split(":");return t}).filter((e,t,r)=>r.indexOf(e)===t)||[]).map(t=>gt.j.createAccount(e,t,"bip122"===e?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!(e.caipNetwork&&Cy.bq.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace))||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(AH.N.state.balanceLoading&&e.chainId===Aq.R.state.activeCaipNetwork?.id)return{balance:AH.N.state.balance||"0.00",symbol:AH.N.state.balanceSymbol||""};let t=(await AH.N.fetchTokenBalance()).find(t=>t.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&t.symbol===e.caipNetwork?.nativeCurrency.symbol);return{balance:t?.quantity.numeric||"0.00",symbol:t?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){let{provider:t,message:r,address:i}=e;if(!t)throw Error("UniversalAdapter:signMessage - provider is undefined");return{signature:Aq.R.state.activeCaipNetwork?.chainNamespace===AB.b.CHAIN.SOLANA?(await t.request({method:"solana_signMessage",params:{message:mx.encode(new TextEncoder().encode(r)),pubkey:i}},Aq.R.state.activeCaipNetwork?.caipNetworkId)).signature:await t.request({method:"personal_sign",params:[r,i]},Aq.R.state.activeCaipNetwork?.caipNetworkId)}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){let{caipNetwork:t}=e,r=this.getWalletConnectConnector();if(t.chainNamespace===AB.b.CHAIN.EVM)try{await r.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:SH(t.id)}]})}catch(e){if(e.code===Cw.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||e.code===Cw.ERROR_INVALID_CHAIN_ID||e.code===Cw.ERROR_CODE_DEFAULT||e?.data?.originalError?.code===Cw.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await r.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:SH(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]})}catch(e){throw Error("Chain is not supported")}}r.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){let e=this.connectors.find(e=>"WALLET_CONNECT"===e.type);return e?.provider}}class CO{constructor(e){this.hasSwitchedToPreferredAccountTypeOnConnect=!1,this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=e=>e?Aq.R.getNetworkData(e)?.caipNetwork||Aq.R.getRequestedCaipNetworks(e).filter(t=>t.chainNamespace===e)?.[0]:Aq.R.state.activeCaipNetwork||this.defaultCaipNetwork,this.getCaipNetworkId=()=>{let e=this.getCaipNetwork();if(e)return e.id},this.getCaipNetworks=e=>Aq.R.getRequestedCaipNetworks(e),this.getActiveChainNamespace=()=>Aq.R.state.activeChain,this.setRequestedCaipNetworks=(e,t)=>{Aq.R.setRequestedCaipNetworks(e,t)},this.getApprovedCaipNetworkIds=()=>Aq.R.getAllApprovedCaipNetworkIds(),this.getCaipAddress=e=>Aq.R.state.activeChain!==e&&e?Aq.R.getAccountProp("caipAddress",e):Aq.R.state.activeCaipAddress,this.setClientId=e=>{AF.L.setClientId(e)},this.getProvider=e=>Cm.getProvider(e),this.getProviderType=e=>Cm.getProviderId(e),this.getPreferredAccountType=()=>AH.N.state.preferredAccountType,this.setCaipAddress=(e,t)=>{AH.N.setCaipAddress(e,t)},this.setBalance=(e,t,r)=>{AH.N.setBalance(e,t,r)},this.setProfileName=(e,t)=>{AH.N.setProfileName(e,t)},this.setProfileImage=(e,t)=>{AH.N.setProfileImage(e,t)},this.setUser=(e,t)=>{AH.N.setUser(e,t),gr.OptionsController.state.enableEmbedded&&AW.I.close()},this.resetAccount=e=>{AH.N.resetAccount(e)},this.setCaipNetwork=e=>{Aq.R.setActiveCaipNetwork(e)},this.setCaipNetworkOfNamespace=(e,t)=>{Aq.R.setChainNetworkData(t,{caipNetwork:e})},this.setAllAccounts=(e,t)=>{AH.N.setAllAccounts(e,t),gr.OptionsController.setHasMultipleAddresses(e?.length>1)},this.setStatus=(e,t)=>{AH.N.setStatus(e,t),p7.ConnectorController.isConnected()?AV.M.setConnectionStatus("connected"):AV.M.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=e=>Aq.R.getAccountProp("address",e),this.setConnectors=e=>{let t=[...p7.ConnectorController.getConnectors(),...e];p7.ConnectorController.setConnectors(t)},this.fetchIdentity=e=>AF.L.fetchIdentity(e),this.getReownName=e=>AQ.getNamesForAddress(e),this.getConnectors=()=>p7.ConnectorController.getConnectors(),this.getConnectorImage=e=>AX.f.getConnectorImage(e),this.setConnectedWalletInfo=(e,t)=>{let r=Cm.getProviderId(t),i=e?{...e,type:r}:void 0;AH.N.setConnectedWalletInfo(i,t)},this.getIsConnectedState=()=>!!Aq.R.state.activeCaipAddress,this.addAddressLabel=(e,t,r)=>{AH.N.addAddressLabel(e,t,r)},this.removeAddressLabel=(e,t)=>{AH.N.removeAddressLabel(e,t)},this.getAddress=e=>Aq.R.state.activeChain!==e&&e?Aq.R.getAccountProp("address",e):AH.N.state.address,this.setApprovedCaipNetworksData=e=>Aq.R.setApprovedCaipNetworksData(e),this.resetNetwork=e=>{Aq.R.resetNetwork(e)},this.addConnector=e=>{p7.ConnectorController.addConnector(e)},this.resetWcConnection=()=>{ge.ConnectionController.resetWcConnection()},this.setAddressExplorerUrl=(e,t)=>{AH.N.setAddressExplorerUrl(e,t)},this.setSmartAccountDeployed=(e,t)=>{AH.N.setSmartAccountDeployed(e,t)},this.setSmartAccountEnabledNetworks=(e,t)=>{Aq.R.setSmartAccountEnabledNetworks(e,t)},this.setPreferredAccountType=(e,t)=>{AH.N.setPreferredAccountType(e,t)},this.setEIP6963Enabled=e=>{gr.OptionsController.setEIP6963Enabled(e)},this.handleUnsafeRPCRequest=()=>{this.isOpen()?this.isTransactionStackEmpty()||this.redirect("ApproveTransaction"):this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=[...new Set(this.caipNetworks?.map(e=>e.chainNamespace))],this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e),this.sendInitializeEvent(e)}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),await this.syncExistingConnection(),A0.I.set({initialized:!0})}sendInitializeEvent(e){let{...t}=e;delete t.adapters,A1.X.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map(e=>e.id),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&A2.ThemeController.setThemeMode(e.themeMode),e.themeVariables&&A2.ThemeController.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw Error("ConnectionControllerClient and NetworkControllerClient must be set");Aq.R.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});let t=this.getDefaultNetwork();t&&Aq.R.setActiveCaipNetwork(t)}initializeConnectionController(e){ge.ConnectionController.setWcBasic(e.basic??!1)}initializeConnectorController(){p7.ConnectorController.initialize(this.chainNamespaces)}initializeOptionsController(e){gr.OptionsController.setDebug(!1!==e.debug),gr.OptionsController.setEnableWalletConnect(!1!==e.enableWalletConnect),gr.OptionsController.setEnableWalletGuide(!1!==e.enableWalletGuide),gr.OptionsController.setEnableWallets(!1!==e.enableWallets),gr.OptionsController.setEIP6963Enabled(!1!==e.enableEIP6963),gr.OptionsController.setEnableNetworkSwitch(!1!==e.enableNetworkSwitch),gr.OptionsController.setEnableAuthLogger(!1!==e.enableAuthLogger),gr.OptionsController.setCustomRpcUrls(e.customRpcUrls),gr.OptionsController.setSdkVersion(e.sdkVersion),gr.OptionsController.setProjectId(e.projectId),gr.OptionsController.setEnableEmbedded(e.enableEmbedded),gr.OptionsController.setAllWallets(e.allWallets),gr.OptionsController.setIncludeWalletIds(e.includeWalletIds),gr.OptionsController.setExcludeWalletIds(e.excludeWalletIds),gr.OptionsController.setFeaturedWalletIds(e.featuredWalletIds),gr.OptionsController.setTokens(e.tokens),gr.OptionsController.setTermsConditionsUrl(e.termsConditionsUrl),gr.OptionsController.setPrivacyPolicyUrl(e.privacyPolicyUrl),gr.OptionsController.setCustomWallets(e.customWallets),gr.OptionsController.setFeatures(e.features),gr.OptionsController.setAllowUnsupportedChain(e.allowUnsupportedChain),gr.OptionsController.setDefaultAccountTypes(e.defaultAccountTypes),gr.OptionsController.setUniversalProviderConfigOverride(e.universalProviderConfigOverride);let t=this.getDefaultMetaData();if(!e.metadata&&t&&(e.metadata=t),gr.OptionsController.setMetadata(e.metadata),gr.OptionsController.setDisableAppend(e.disableAppend),gr.OptionsController.setEnableEmbedded(e.enableEmbedded),gr.OptionsController.setSIWX(e.siwx),!e.projectId){A3.AlertController.open(A4.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(e.adapters?.find(e=>e.namespace===AB.b.CHAIN.EVM)&&e.siweConfig){if(e.siwx)throw Error("Cannot set both `siweConfig` and `siwx` options");gr.OptionsController.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return"undefined"!=typeof window&&"undefined"!=typeof document?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){let t=this.getActiveChainNamespace();if(t){let r=Cu.getUnsupportedNetwork(`${t}:${e}`);Aq.R.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Cu.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return Cu.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return Cu.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){let t=e.networks.find(t=>t.id===e.defaultNetwork?.id);return t?Cu.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{let e=Aq.R.state.activeChain,t=this.getAdapter(e),r=this.getCaipNetwork(e)?.id;if(!t)throw Error("Adapter not found");let i=await t.connectWalletConnect(r);this.close(),this.setClientId(i?.clientId||null),AV.M.setConnectedNamespaces([...Aq.R.state.chains.keys()]),this.chainNamespaces.forEach(e=>{p7.ConnectorController.setConnectorId(Co.b.CONNECTOR_TYPE_WALLET_CONNECT,e)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:t,type:r,provider:i,chain:n,caipNetwork:s})=>{let o=Aq.R.state.activeChain,a=n||o,c=this.getAdapter(a);if(n&&n!==o&&!s){let e=this.caipNetworks?.find(e=>e.chainNamespace===n);e&&this.setCaipNetwork(e)}if(!c)throw Error("Adapter not found");let l=this.getCaipNetwork(a),h=await c.connect({id:e,info:t,type:r,provider:i,chainId:s?.id||l?.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]||l?.rpcUrls?.default?.http?.[0]});if(!h)return;AV.M.addConnectedNamespace(a),this.syncProvider({...h,chainNamespace:a}),await this.syncAccount({...h,chainNamespace:a});let{accounts:u}=await c.getAccounts({namespace:a,id:e});this.setAllAccounts(u,a)},reconnectExternal:async({id:e,info:t,type:r,provider:i})=>{let n=Aq.R.state.activeChain,s=this.getAdapter(n);s?.reconnect&&(await s?.reconnect({id:e,info:t,type:r,provider:i,chainId:this.getCaipNetwork()?.id}),AV.M.addConnectedNamespace(n))},disconnect:async e=>{let t=e||Aq.R.state.activeChain,r=this.getAdapter(t),i=Cm.getProvider(t),n=Cm.getProviderId(t);await r?.disconnect({provider:i,providerType:n}),AV.M.removeConnectedNamespace(t),Cm.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t),this.hasSwitchedToPreferredAccountTypeOnConnect=!1},checkInstalled:e=>e?e.some(e=>!!window.ethereum?.[String(e)]):!!window.ethereum,signMessage:async e=>{let t=this.getAdapter(Aq.R.state.activeChain),r=await t?.signMessage({message:e,address:AH.N.state.address,provider:Cm.getProvider(Aq.R.state.activeChain)});return r?.signature||""},sendTransaction:async e=>{if(e.chainNamespace===AB.b.CHAIN.EVM){let t=this.getAdapter(Aq.R.state.activeChain),r=Cm.getProvider(Aq.R.state.activeChain),i=await t?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:r});return i?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===AB.b.CHAIN.EVM){let t=this.getAdapter(Aq.R.state.activeChain),r=Cm.getProvider(Aq.R.state.activeChain),i=this.getCaipNetwork();if(!i)throw Error("CaipNetwork is undefined");let n=await t?.estimateGas({...e,provider:r,caipNetwork:i});return n?.gas||0n}return 0n},getEnsAvatar:async()=>{let e=this.getAdapter(Aq.R.state.activeChain),t=await e?.getProfile({address:AH.N.state.address,chainId:Number(this.getCaipNetwork()?.id)});return t?.profileImage||!1},getEnsAddress:async e=>{let t=this.getAdapter(Aq.R.state.activeChain),r=this.getCaipNetwork();if(!r)return!1;let i=await t?.getEnsAddress({name:e,caipNetwork:r});return i?.address||!1},writeContract:async e=>{let t=this.getAdapter(Aq.R.state.activeChain),r=this.getCaipNetwork(),i=this.getCaipAddress(),n=Cm.getProvider(Aq.R.state.activeChain);if(!r||!i)throw Error("CaipNetwork or CaipAddress is undefined");let s=await t?.writeContract({...e,caipNetwork:r,provider:n,caipAddress:i});return s?.hash},parseUnits:(e,t)=>{let r=this.getAdapter(Aq.R.state.activeChain);return r?.parseUnits({value:e,decimals:t})??0n},formatUnits:(e,t)=>{let r=this.getAdapter(Aq.R.state.activeChain);return r?.formatUnits({value:e,decimals:t})??"0"},getCapabilities:async e=>{let t=this.getAdapter(Aq.R.state.activeChain);return await t?.getCapabilities(e)},grantPermissions:async e=>{let t=this.getAdapter(Aq.R.state.activeChain);return await t?.grantPermissions(e)},revokePermissions:async e=>{let t=this.getAdapter(Aq.R.state.activeChain);return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>{let t=this.getAdapter(Aq.R.state.activeChain);return await t?.walletGetAssets(e)??{}}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ge.ConnectionController.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(Cm.getProviderId(Aq.R.state.activeChain)===Co.b.CONNECTOR_TYPE_WALLET_CONNECT){let e=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:this.universalProvider?.session?.peer?.metadata.name==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(e)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;let t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){let r=Cm.getProvider(t),i=Cm.getProviderId(t);if(e.chainNamespace===Aq.R.state.activeChain){let n=this.getAdapter(t);await n?.switchNetwork({caipNetwork:e,provider:r,providerType:i})}else if(this.setCaipNetwork(e),i===Co.b.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{let r=this.getAddressByChainNamespace(t);r&&this.syncAccount({address:r,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(e=>Array.from(new Set([...e.chains||[],...e.accounts.map(e=>{let{chainId:t,chainNamespace:r}=Az.parseCaipAddress(e);return`${r}:${t}`})])))}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((t,r)=>{let i=e?.find(e=>e.namespace===r);return i?(t[r]=i,t[r].namespace=r,t[r].construct({namespace:r,projectId:this.options?.projectId,networks:this.caipNetworks})):t[r]=new Cx({namespace:r,networks:this.caipNetworks}),t},{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){let t=this.getAdapter(e);t?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){let t=this.getAdapter(e);if(!t)return;let r=AV.M.getConnectionStatus();"connected"===r?this.setStatus("connecting",e):("disconnected"===r&&AV.M.clearAddressCache(),this.setStatus(r,e)),t.on("switchNetwork",({address:t,chainId:r})=>{let i=this.caipNetworks?.find(e=>e.id===r||e.caipNetworkId===r),n=Aq.R.state.activeChain===e,s=Aq.R.getAccountProp("address",e);if(i){let i=n&&t?t:s;i&&this.syncAccount({address:i,chainId:r,chainNamespace:e})}else this.setUnsupportedNetwork(r)}),t.on("disconnect",this.disconnect.bind(this,e)),t.on("pendingTransactions",()=>{let e=AH.N.state.address,t=Aq.R.state.activeCaipNetwork;e&&t?.id&&this.updateNativeBalance(e,t.id,t.chainNamespace)}),t.on("accountChanged",({address:t,chainId:r})=>{let i=Aq.R.state.activeChain===e;i&&r?this.syncAccount({address:t,chainId:r,chainNamespace:e}):i&&Aq.R.state.activeCaipNetwork?.id?this.syncAccount({address:t,chainId:Aq.R.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(t,r,e)})}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{let t=p7.ConnectorController.getConnectorId(e);switch(this.setStatus("connecting",e),t){case AB.b.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case AB.b.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){let t=this.getAdapter(e),r=p7.ConnectorController.getConnectorId(e),i=this.getCaipNetwork(e),n=p7.ConnectorController.getConnectors(e).find(e=>e.id===r);try{if(!t||!n)throw Error(`Adapter or connector not found for namespace ${e}`);if(!i?.id)throw Error("CaipNetwork not found");let r=await t?.syncConnection({namespace:e,id:n.id,chainId:i.id,rpcUrl:i?.rpcUrls?.default?.http?.[0]});if(r){let i=await t?.getAccounts({namespace:e,id:n.id});i&&i.accounts.length>0?this.setAllAccounts(i.accounts,e):this.setAllAccounts([gt.j.createAccount(e,r.address,"eoa")],e),this.syncProvider({...r,chainNamespace:e}),await this.syncAccount({...r,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch(t){this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){let e=this.chainNamespaces.map(async e=>{let t=this.getAdapter(e),r=this.universalProvider?.session?.namespaces?.[e]?.accounts||[],i=Aq.R.state.activeCaipNetwork?.id,n=r.find(e=>{let{chainId:t}=Az.parseCaipAddress(e);return t===i?.toString()})||r[0];if(n){let r=Az.validateCaipAddress(n),{chainId:i,address:s}=Az.parseCaipAddress(r);if(Cm.setProviderId(e,Co.b.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&Aq.R.state.activeCaipNetwork&&t?.namespace!==AB.b.CHAIN.EVM){let r=t?.getWalletConnectProvider({caipNetworks:this.caipNetworks,provider:this.universalProvider,activeCaipNetwork:Aq.R.state.activeCaipNetwork});Cm.setProvider(e,r)}else Cm.setProvider(e,this.universalProvider);p7.ConnectorController.setConnectorId(AB.b.CONNECTOR_ID.WALLET_CONNECT,e),AV.M.addConnectedNamespace(e),this.syncWalletConnectAccounts(e),await this.syncAccount({address:s,chainId:i,chainNamespace:e})}else this.setStatus("disconnected",e);await Aq.R.setApprovedCaipNetworksData(e)});await Promise.all(e)}syncWalletConnectAccounts(e){let t=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map(e=>{let{address:t}=Az.parseCaipAddress(e);return t}).filter((e,t,r)=>r.indexOf(e)===t);t&&this.setAllAccounts(t.map(t=>gt.j.createAccount(e,t,"bip122"===e?"payment":"eoa")),e)}syncProvider({type:e,provider:t,id:r,chainNamespace:i}){Cm.setProviderId(i,e),Cm.setProvider(i,t),p7.ConnectorController.setConnectorId(r,i)}async syncAccount(e){let t=e.chainNamespace===Aq.R.state.activeChain,r=Aq.R.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:n,chainNamespace:s}=e,{chainId:o}=AV.M.getActiveNetworkProps(),a=n||o,c=Aq.R.state.activeCaipNetwork?.name===AB.b.UNSUPPORTED_NETWORK_NAME,l=Aq.R.getNetworkProp("supportsAllNetworks",s);if(this.setStatus("connected",s),(!c||l)&&a){let e=this.caipNetworks?.find(e=>e.id.toString()===a.toString()),n=this.caipNetworks?.find(e=>e.chainNamespace===s);if(!l&&!e&&!n){let t=this.getApprovedCaipNetworkIds()||[],r=t.find(e=>Az.parseCaipNetworkId(e)?.chainId===a.toString()),i=t.find(e=>Az.parseCaipNetworkId(e)?.chainNamespace===s);e=this.caipNetworks?.find(e=>e.caipNetworkId===r),n=this.caipNetworks?.find(e=>e.caipNetworkId===i||"deprecatedCaipNetworkId"in e&&e.deprecatedCaipNetworkId===i)}let o=e||n;o?.chainNamespace===Aq.R.state.activeChain?gr.OptionsController.state.enableNetworkSwitch&&!gr.OptionsController.state.allowUnsupportedChain&&Aq.R.state.activeCaipNetwork?.name===AB.b.UNSUPPORTED_NETWORK_NAME?Aq.R.showUnsupportedChainUI():this.setCaipNetwork(o):!t&&r&&this.setCaipNetworkOfNamespace(r,s),this.syncConnectedWalletInfo(s),Cd.g.isLowerCaseMatch(i,AH.N.state.address)||this.syncAccountInfo(i,o?.id,s),t?await this.syncBalance({address:i,chainId:o?.id,chainNamespace:s}):await this.syncBalance({address:i,chainId:r?.id,chainNamespace:s})}}async syncAccountInfo(e,t,r){let i=this.getCaipAddress(r),n=t||i?.split(":")[1];if(!n)return;let s=`${r}:${n}:${e}`;this.setCaipAddress(s,r),await this.syncIdentity({address:e,chainId:n,chainNamespace:r})}async syncReownName(e,t){try{let r=await this.getReownName(e);if(r[0]){let e=r[0];this.setProfileName(e.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){let t=p7.ConnectorController.getConnectorId(e),r=Cm.getProviderId(e);if(r===Co.b.CONNECTOR_TYPE_ANNOUNCED||r===Co.b.CONNECTOR_TYPE_INJECTED){if(t){let r=this.getConnectors().find(e=>e.id===t);if(r){let{info:t,name:i,imageUrl:n}=r,s=n||this.getConnectorImage(r);this.setConnectedWalletInfo({name:i,icon:s,...t},e)}}}else if(r===Co.b.CONNECTOR_TYPE_WALLET_CONNECT){let t=Cm.getProvider(e);t?.session&&this.setConnectedWalletInfo({...t.session.peer.metadata,name:t.session.peer.metadata.name,icon:t.session.peer.metadata.icons?.[0]},e)}else if(t){if(t===AB.b.CONNECTOR_ID.COINBASE){let t=this.getConnectors().find(e=>e.id===AB.b.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(t)},e)}else this.setConnectedWalletInfo({name:t},e)}}async syncBalance(e){A$.p.getNetworksByNamespace(this.caipNetworks,e.chainNamespace).find(t=>t.id.toString()===e.chainId?.toString())&&e.chainId&&await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,t,r){let i=this.getAdapter(r);if(i){let n=await i.getBalance({address:e,chainId:t,caipNetwork:this.getCaipNetwork(r),tokens:this.options.tokens});this.setBalance(n.balance,n.symbol,r)}}async initializeUniversalAdapter(){let e=Cf.createLogger((e,...t)=>{e&&this.handleAlertError(e),console.error(...t)}),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};gr.OptionsController.setManualWCControl(!!this.options?.manualWCControl),this.universalProvider=this.options.universalProvider??await AU.init(t),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{ge.ConnectionController.setUri(e)}),this.universalProvider.on("connect",ge.ConnectionController.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),ge.ConnectionController.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{let t=this.caipNetworks?.find(t=>t.id==e),r=this.getCaipNetwork();if(!t){this.setUnsupportedNetwork(e);return}r?.id!==t?.id&&this.setCaipNetwork(t)}),this.universalProvider.on("session_event",e=>{if(CS.isSessionEventData(e)){let{name:t,data:r}=e.params.event;"accountsChanged"===t&&Array.isArray(r)&&gt.j.isCaipAddress(r[0])&&this.syncAccount(Az.parseCaipAddress(r[0]))}}))}createUniversalProvider(){return!this.universalProviderInitPromise&&gt.j.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){A1.X.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){let[t,r]=Object.entries(A4.UniversalProviderErrors).find(([,{message:t}])=>e.message.includes(t))??[],{message:i,alertErrorKey:n}=r??{};if(t&&i&&!this.reportedAlertErrors[t]){let e=A4.ALERT_ERRORS[n];e&&(A3.AlertController.open(e,"error"),this.reportedAlertErrors[t]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;let t=e.namespace;t&&(this.createClients(),e.namespace=t,e.construct({namespace:t,projectId:this.options?.projectId,networks:this.caipNetworks}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=e))}async open(e){await this.injectModalUi(),e?.uri&&ge.ConnectionController.setUri(e.uri),await AW.I.open(e)}async close(){await this.injectModalUi(),AW.I.close()}setLoading(e,t){AW.I.setLoading(e,t)}async disconnect(e){await ge.ConnectionController.disconnect(e)}getError(){return""}getChainId(){return Aq.R.state.activeCaipNetwork?.id}async switchNetwork(e){let t=this.caipNetworks?.find(t=>t.id===e.id);if(!t){A3.AlertController.open(A4.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await Aq.R.switchActiveNetwork(t)}getWalletProvider(){return Aq.R.state.activeChain?Cm.state.providers[Aq.R.state.activeChain]:null}getWalletProviderType(){return Cm.getProviderId(Aq.R.state.activeChain)}subscribeProviders(e){return Cm.subscribeProviders(e)}getThemeMode(){return A2.ThemeController.state.themeMode}getThemeVariables(){return A2.ThemeController.state.themeVariables}setThemeMode(e){A2.ThemeController.setThemeMode(e),(0,A6.Hs)(A2.ThemeController.state.themeMode)}setTermsConditionsUrl(e){gr.OptionsController.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){gr.OptionsController.setPrivacyPolicyUrl(e)}setThemeVariables(e){A2.ThemeController.setThemeVariables(e),(0,A6.R)(A2.ThemeController.state.themeVariables)}subscribeTheme(e){return A2.ThemeController.subscribe(e)}getWalletInfo(){return AH.N.state.connectedWalletInfo}getAccount(e){let t=p7.ConnectorController.getAuthConnector(e),r=Aq.R.getAccountData(e);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:gt.j.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:t?{user:r.user,authProvider:r.socialProvider||"email",accountType:r.preferredAccountType,isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,t){let r=()=>{let r=this.getAccount(t);r&&e(r)};t?Aq.R.subscribeChainProp("accountState",r,t):Aq.R.subscribe(r),p7.ConnectorController.subscribe(r)}subscribeNetwork(e){return Aq.R.subscribe(({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})})}subscribeWalletInfo(e){return AH.N.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){AH.N.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){Aq.R.subscribeKey("activeCaipNetwork",e)}getState(){return A0.I.state}subscribeState(e){return A0.I.subscribe(e)}showErrorMessage(e){A8.SnackController.showError(e)}showSuccessMessage(e){A8.SnackController.showSuccess(e)}getEvent(){return{...A1.X.state}}subscribeEvents(e){return A1.X.subscribe(e)}replace(e){AG.RouterController.replace(e)}redirect(e){AG.RouterController.push(e)}popTransactionStack(e){AG.RouterController.popTransactionStack(e)}isOpen(){return AW.I.state.open}isTransactionStackEmpty(){return 0===AG.RouterController.state.transactionStack.length}isTransactionShouldReplaceView(){return AG.RouterController.state.transactionStack[AG.RouterController.state.transactionStack.length-1]?.replace}static getInstance(){return this.instance}updateFeatures(e){gr.OptionsController.setFeatures(e)}updateOptions(e){let t={...gr.OptionsController.state||{},...e};gr.OptionsController.setOptions(t)}setConnectMethodsOrder(e){gr.OptionsController.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){gr.OptionsController.setWalletFeaturesOrder(e)}setCollapseWallets(e){gr.OptionsController.setCollapseWallets(e)}setSocialsOrder(e){gr.OptionsController.setSocialsOrder(e)}getConnectMethodsOrder(){return A5.J.getConnectOrderMethod(gr.OptionsController.state.features,p7.ConnectorController.getConnectors())}removeAdapter(e){let t=this.getIsConnectedState(),r=this.getAdapter(e);if(!r||!this.chainAdapters||t)return;let i=this.caipNetworks?.filter(t=>t.chainNamespace!==e);Aq.R.removeAdapter(e),p7.ConnectorController.removeAdapter(e),this.chainNamespaces=this.chainNamespaces.filter(t=>t!==e),this.caipNetworks=i,r.removeAllEventListeners(),Reflect.deleteProperty(this.chainAdapters,e)}addAdapter(e,t){let r=e.namespace;if(!this.connectionControllerClient||!this.networkControllerClient||!this.chainAdapters||!r)return;let i=this.extendCaipNetworks({...this.options,networks:t});this.caipNetworks=[...this.caipNetworks||[],...i],this.createAdapter(e),this.initChainAdapter(r),Aq.R.addAdapter(e,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient},i)}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw Error(`Adapter for namespace ${e} doesn't exist`);let r=this.extendCaipNetwork(t,this.options);Aq.R.addNetwork(r),this.caipNetworks&&!this.caipNetworks?.find(e=>e.id===r.id)&&this.caipNetworks.push(r)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw Error(`Adapter for namespace ${e} doesn't exist`);if(!this.caipNetworks?.find(e=>e.id===t))throw Error(`Network with ID ${t} not found`);if(!this.caipNetworks)return;let r=this.caipNetworks.filter(r=>r.chainNamespace===e&&r.id!==t);if(!r?.length)throw Error("Cannot remove last network for a namespace");Aq.R.removeNetwork(e,t),this.caipNetworks=[...r]}}let CP=!1;class CT extends CO{async open(e){p7.ConnectorController.isConnected()||await super.open(e)}async close(){await super.close(),this.options.manualWCControl&&ge.ConnectionController.finalizeWcConnection()}async syncIdentity(e){return Promise.resolve()}async syncBalance(e){return Promise.resolve()}async injectModalUi(){if(!CP&&gt.j.isClient()){if(await Promise.all([r.e(3409),r.e(7406)]).then(r.bind(r,17406)),await Promise.all([r.e(3409),r.e(864)]).then(r.bind(r,80864)),!document.querySelector("w3m-modal")){let e=document.createElement("w3m-modal");gr.OptionsController.state.disableAppend||gr.OptionsController.state.enableEmbedded||document.body.insertAdjacentElement("beforeend",e)}CP=!0}}}var CR=function(e){if(e.length>=255)throw TypeError("Alphabet too long");let t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){let i=e.charAt(r),n=i.charCodeAt(0);if(255!==t[n])throw TypeError(i+" is ambiguous");t[n]=r}let r=e.length,i=e.charAt(0),n=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;let s=0,o=0,a=0;for(;e[s]===i;)o++,s++;let c=(e.length-s)*n+1>>>0,l=new Uint8Array(c);for(;s<e.length;){let i=e.charCodeAt(s);if(i>255)return;let n=t[i];if(255===n)return;let o=0;for(let e=c-1;(0!==n||o<a)&&-1!==e;e--,o++)n+=r*l[e]>>>0,l[e]=n%256>>>0,n=n/256>>>0;if(0!==n)throw Error("Non-zero carry");a=o,s++}let h=c-a;for(;h!==c&&0===l[h];)h++;let u=new Uint8Array(o+(c-h)),d=o;for(;h!==c;)u[d++]=l[h++];return u}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";let n=0,o=0,a=0,c=t.length;for(;a!==c&&0===t[a];)a++,n++;let l=(c-a)*s+1>>>0,h=new Uint8Array(l);for(;a!==c;){let e=t[a],i=0;for(let t=l-1;(0!==e||i<o)&&-1!==t;t--,i++)e+=256*h[t]>>>0,h[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw Error("Non-zero carry");o=i,a++}let u=l-o;for(;u!==l&&0===h[u];)u++;let d=i.repeat(n);for(;u<l;++u)d+=e.charAt(h[u]);return d},decodeUnsafe:o,decode:function(e){let t=o(e);if(t)return t;throw Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");class CD extends Error{constructor(){super(),Object.setPrototypeOf(this,CD.prototype)}}class Ck extends Error{constructor(e){super(`WalletConnect Adapter - Method ${e} is not supported by the wallet`),this.name="WalletConnectFeatureNotSupportedError"}}let CL={mainnet:`You are using a deprecated chain ID for Solana Mainnet, please use ${Z.Mainnet} instead.`,devnet:`You are using a deprecated chain ID for Solana Devnet, please use ${Z.Devnet} instead.`,wallet:"The connected wallet is using a deprecated chain ID for Solana. Please, contact them to upgrade. You can learn more at https://github.com/ChainAgnostic/namespaces/blob/main/solana/caip10.md#chain-ids"};function Cj(e,t){let r=e.namespaces.solana?.accounts.map(e=>`solana:${e.split(":")[1]}`);if(t===Z.Mainnet)return r?.find(e=>e===Z.Mainnet)?Z.Mainnet:(console.warn(CL.wallet),Z.Deprecated_Mainnet);if(t===Z.Devnet)return r?.find(e=>e===Z.Devnet)?Z.Devnet:(console.warn(CL.wallet),Z.Deprecated_Devnet);throw Error("WalletConnect Solana Adapter: Unable to get a default chain from the session.")}class CU extends Error{constructor(){super("QR Code Modal was closed by user"),Object.setPrototypeOf(this,CU.prototype),this.name="QRCodeModalError"}}var CB=r(82957).Buffer;class Cz{_UniversalProvider;_session;_modal;_projectId;_network;_ConnectQueueResolver;constructor(e){if(this.initClient(e.options),this._network=e.network,!e.options.projectId)throw Error("WalletConnect Adapter: Project ID is undefined");this._projectId=e.options.projectId}async connect(){var e;let t;if(this._UniversalProvider||await new Promise(e=>{this._ConnectQueueResolver=e}),!this._UniversalProvider)throw Error("WalletConnect Adapter - Universal Provider was undefined while calling 'connect()'");if(this._UniversalProvider.session){this._session=this._UniversalProvider.session;let e=Cj(this._session,this._network);return this._network=e,this._UniversalProvider.setDefaultChain(e),{publicKey:this.publicKey}}await this.initModal();let r={optionalNamespaces:{solana:{chains:(t=[e=this._network],e===Z.Mainnet||e===Z.Deprecated_Mainnet?(t=[Z.Mainnet,Z.Deprecated_Mainnet],e===Z.Deprecated_Mainnet&&console.warn(CL.mainnet)):(e===Z.Deprecated_Devnet||e===Z.Devnet)&&(t=[Z.Devnet,Z.Deprecated_Devnet],Z.Deprecated_Devnet&&console.warn(CL.devnet)),t),methods:[T.signTransaction,T.signMessage],events:[]}}};this._modal?.open();let i=new AbortController,n=i.signal;this._modal?.subscribeState(e=>{e.open||i.abort(new CU)});try{let e=await Promise.race([this._UniversalProvider?.connect(r),new Promise((e,t)=>{n.addEventListener("abort",()=>{t(n.reason)})})]);if(this._modal?.close(),this._session=e,!e)throw new J.$w;let t=Cj(e,this._network);return this._network=t,this._UniversalProvider?.setDefaultChain(t),{publicKey:this.publicKey}}catch(e){throw this._modal?.close(),e}}async disconnect(){if(this._UniversalProvider?.session){if(await this.initModal(),!this._modal)throw Error("WalletConnect Adapter -Modal is undefined: unable to disconnect");await this.client.disconnect(),this._session=void 0}else throw new CD}get client(){if(this._UniversalProvider)return this._UniversalProvider;throw new CD}get session(){if(!this._session)throw new CD;return this._session}get publicKey(){if(this._UniversalProvider?.session&&this._session){let{address:e}=function(e){let[t,r,i]=e.split(":");return{namespace:t,reference:r,address:i}}(this._session?.namespaces.solana?.accounts[0]??"");return new X.nh(e)}throw new CD}async signTransaction(e){this.checkIfWalletSupportsMethod(T.signTransaction);let t=(0,Q.W)(e),r=t?{}:e,{signature:i,transaction:n}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:T.signTransaction,params:{...r,transaction:this.serialize(e)}}});return n?this.deserialize(n,t):(e.addSignature(this.publicKey,CB.from(CR.decode(i))),e)}async signMessage(e){this.checkIfWalletSupportsMethod(T.signMessage);let{signature:t}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:T.signMessage,params:{pubkey:this.publicKey.toString(),message:CR.encode(e)}}});return CR.decode(t)}async signAndSendTransaction(e){this.checkIfWalletSupportsMethod(T.signAndSendTransaction);let{signature:t}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:T.signAndSendTransaction,params:{transaction:this.serialize(e)}}});return t}async signAllTransactions(e){try{this.checkIfWalletSupportsMethod(T.signAllTransactions);let t=e.map(e=>this.serialize(e)),{transactions:r}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:T.signAllTransactions,params:{transactions:t}}});return e.map((e,t)=>(0,Q.W)(e)?this.deserialize(r[t]??"",!0):this.deserialize(r[t]??""))}catch(t){if(t instanceof Ck){let t=e.map(e=>this.signTransaction(e));return await Promise.all(t)}throw t}}async initClient(e){let t=await p9.init(e);this._UniversalProvider=t,this._ConnectQueueResolver&&this._ConnectQueueResolver(!0)}async initModal(){if(!this._modal){if(!this._UniversalProvider)throw Error("WalletConnect Adapter - cannot init modal when Universal Provider is undefined");this._modal=new CT({projectId:this._projectId,universalProvider:this._UniversalProvider,networks:[CE,CI,C_],manualWCControl:!0,basic:!0,sdkVersion:"html-core-1.7.2"})}}serialize(e){return CB.from(e.serialize({verifySignatures:!1})).toString("base64")}deserialize(e,t=!1){return t?X.GS.deserialize(CB.from(e,"base64")):X.YW.from(CB.from(e,"base64"))}checkIfWalletSupportsMethod(e){if(!this.session.namespaces.solana?.methods.includes(e))throw new Ck(e)}}class C$ extends K.sz{name="WalletConnect";url="https://walletconnect.org";icon="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4NSIgdmlld0JveD0iMCAwIDMwMCAxODUiIHdpZHRoPSIzMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYxLjQzODU0MjkgMzYuMjU2MjYxMmM0OC45MTEyMjQxLTQ3Ljg4ODE2NjMgMTI4LjIxMTk4NzEtNDcuODg4MTY2MyAxNzcuMTIzMjA5MSAwbDUuODg2NTQ1IDUuNzYzNDE3NGMyLjQ0NTU2MSAyLjM5NDQwODEgMi40NDU1NjEgNi4yNzY1MTEyIDAgOC42NzA5MjA0bC0yMC4xMzY2OTUgMTkuNzE1NTAzYy0xLjIyMjc4MSAxLjE5NzIwNTEtMy4yMDUzIDEuMTk3MjA1MS00LjQyODA4MSAwbC04LjEwMDU4NC03LjkzMTE0NzljLTM0LjEyMTY5Mi0zMy40MDc5ODE3LTg5LjQ0Mzg4Ni0zMy40MDc5ODE3LTEyMy41NjU1Nzg4IDBsLTguNjc1MDU2MiA4LjQ5MzYwNTFjLTEuMjIyNzgxNiAxLjE5NzIwNDEtMy4yMDUzMDEgMS4xOTcyMDQxLTQuNDI4MDgwNiAwbC0yMC4xMzY2OTQ5LTE5LjcxNTUwMzFjLTIuNDQ1NTYxMi0yLjM5NDQwOTItMi40NDU1NjEyLTYuMjc2NTEyMiAwLTguNjcwOTIwNHptMjE4Ljc2Nzc5NjEgNDAuNzczNzQ0OSAxNy45MjE2OTcgMTcuNTQ2ODk3YzIuNDQ1NTQ5IDIuMzk0Mzk2OSAyLjQ0NTU2MyA2LjI3NjQ3NjkuMDAwMDMxIDguNjcwODg5OWwtODAuODEwMTcxIDc5LjEyMTEzNGMtMi40NDU1NDQgMi4zOTQ0MjYtNi40MTA1ODIgMi4zOTQ0NTMtOC44NTYxNi4wMDAwNjItLjAwMDAxLS4wMDAwMS0uMDAwMDIyLS4wMDAwMjItLjAwMDAzMi0uMDAwMDMybC01Ny4zNTQxNDMtNTYuMTU0NTcyYy0uNjExMzktLjU5ODYwMi0xLjYwMjY1LS41OTg2MDItMi4yMTQwNCAwLS4wMDAwMDQuMDAwMDA0LS4wMDAwMDcuMDAwMDA4LS4wMDAwMTEuMDAwMDExbC01Ny4zNTI5MjEyIDU2LjE1NDUzMWMtMi40NDU1MzY4IDIuMzk0NDMyLTYuNDEwNTc1NSAyLjM5NDQ3Mi04Ljg1NjE2MTIuMDAwMDg3LS4wMDAwMTQzLS4wMDAwMTQtLjAwMDAyOTYtLjAwMDAyOC0uMDAwMDQ0OS0uMDAwMDQ0bC04MC44MTI0MTk0My03OS4xMjIxODVjLTIuNDQ1NTYwMjEtMi4zOTQ0MDgtMi40NDU1NjAyMS02LjI3NjUxMTUgMC04LjY3MDkxOTdsMTcuOTIxNzI5NjMtMTcuNTQ2ODY3M2MyLjQ0NTU2MDItMi4zOTQ0MDgyIDYuNDEwNTk4OS0yLjM5NDQwODIgOC44NTYxNjAyIDBsNTcuMzU0OTc3NSA1Ni4xNTUzNTdjLjYxMTM5MDguNTk4NjAyIDEuNjAyNjQ5LjU5ODYwMiAyLjIxNDAzOTggMCAuMDAwMDA5Mi0uMDAwMDA5LjAwMDAxNzQtLjAwMDAxNy4wMDAwMjY1LS4wMDAwMjRsNTcuMzUyMTAzMS01Ni4xNTUzMzNjMi40NDU1MDUtMi4zOTQ0NjMzIDYuNDEwNTQ0LTIuMzk0NTUzMSA4Ljg1NjE2MS0uMDAwMi4wMDAwMzQuMDAwMDMzNi4wMDAwNjguMDAwMDY3My4wMDAxMDEuMDAwMTAxbDU3LjM1NDkwMiA1Ni4xNTU0MzJjLjYxMTM5LjU5ODYwMSAxLjYwMjY1LjU5ODYwMSAyLjIxNDA0IDBsNTcuMzUzOTc1LTU2LjE1NDMyNDljMi40NDU1NjEtMi4zOTQ0MDkyIDYuNDEwNTk5LTIuMzk0NDA5MiA4Ljg1NjE2IDB6IiBmaWxsPSIjM2I5OWZjIi8+PC9zdmc+";supportedTransactionVersions=new Set(["legacy",0]);_publicKey;_connecting;_wallet;_config;_readyState;_onDisconnect;constructor(e){super(),this._publicKey=null,this._connecting=!1,this._config=e,this._wallet=null,this._readyState="undefined"==typeof window?Y.i1.Unsupported:Y.i1.Loadable,this._onDisconnect=this.disconnect.bind(this)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Y.i1.Loadable)throw new J.OZ;this._connecting=!0,this._wallet=new Cz({network:this._config.network===G.Q.Mainnet?P.Mainnet:P.Devnet,options:this._config.options});let{publicKey:e}=await this._wallet.connect();this._publicKey=e,this.emit("connect",e),this._wallet.client.on("session_delete",this._onDisconnect)}catch(e){if("QRCodeModalError"===e.constructor.name||e instanceof Error&&"QRCodeModalError"===e.name)throw new J.hd;throw this._connecting=!1,e}finally{this._connecting=!1}}async disconnect(){let e=this._wallet;if(e){e.client.off("session_delete",this._onDisconnect),this._publicKey=null;try{e.client.session&&await e.disconnect()}catch(e){console.error("WalletConnectWalletAdapter: disconnect error",e),this.emit("error",new J.UG(e?.message,e))}}this.emit("disconnect")}async signTransaction(e){try{let t=this._wallet;if(!t)throw new J.oS;try{return await t.signTransaction(e)}catch(e){throw new J.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(e){try{let t=this._wallet;if(!t)throw new J.oS;try{return await t.signMessage(e)}catch(e){throw new J.fk(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAndSendTransaction(e){try{let t=this._wallet;if(!t)throw new J.oS;try{return await t.signAndSendTransaction(e)}catch(e){throw new J.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(e){try{let t=this._wallet;if(!t)throw new J.oS;try{return await t.signAllTransactions(e)}catch(e){throw new J.PY(e?.message,e)}}catch(e){throw this.emit("error",e),e}}}},85689:function(e,t,r){"use strict";function i(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function n(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");i(e.outputLen),i(e.blockLen)}function o(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function a(e,t){n(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{$h:function(){return o},eB:function(){return a},gk:function(){return n},k8:function(){return i},z3:function(){return s}})},38043:function(e,t,r){"use strict";r.d(t,{kb:function(){return d},l1:function(){return l},eV:function(){return u},GL:function(){return o},iA:function(){return c},O6:function(){return p},np:function(){return a},O0:function(){return h},Jq:function(){return s},hE:function(){return f}});let i="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var n=r(85689);function s(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function a(e,t){return e<<32-t|e>>>t}let c=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function l(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}}function h(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}(e)),(0,n.gk)(e),e}function u(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];(0,n.gk)(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){let n=e[t];r.set(n,i),i+=n.length}return r}class d{clone(){return this._cloneInto()}}function f(e){let t=t=>e().update(h(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function p(e=32){if(i&&"function"==typeof i.getRandomValues)return i.getRandomValues(new Uint8Array(e));if(i&&"function"==typeof i.randomBytes)return i.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}},81997:function(e,t,r){"use strict";r.d(t,{Jb:function(){return N},Ld:function(){return M},YP:function(){return C},_$LH:function(){return q},dy:function(){return S},sY:function(){return H}});let i=globalThis,n=e=>e,s=i.trustedTypes,o=s?s.createPolicy("lit-html",{createHTML:e=>e}):void 0,a="$lit$",c=`lit$${Math.random().toFixed(9).slice(2)}$`,l="?"+c,h=`<${l}>`,u=document,d=()=>u.createComment(""),f=e=>null===e||"object"!=typeof e&&"function"!=typeof e,p=Array.isArray,g=e=>p(e)||"function"==typeof e?.[Symbol.iterator],m="[ 	\n\f\r]",y=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,b=/-->/g,w=/>/g,v=RegExp(`>|${m}(?:([^\\s"'>=/]+)(${m}*=${m}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),E=/'/g,I=/"/g,_=/^(?:script|style|textarea|title)$/i,A=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),S=A(1),C=A(2),N=(A(3),Symbol.for("lit-noChange")),M=Symbol.for("lit-nothing"),x=new WeakMap,O=u.createTreeWalker(u,129);function P(e,t){if(!p(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==o?o.createHTML(t):t}let T=(e,t)=>{let r=e.length-1,i=[],n,s=2===t?"<svg>":3===t?"<math>":"",o=y;for(let t=0;t<r;t++){let r=e[t],l,u,d=-1,f=0;for(;f<r.length&&(o.lastIndex=f,null!==(u=o.exec(r)));)f=o.lastIndex,o===y?"!--"===u[1]?o=b:void 0!==u[1]?o=w:void 0!==u[2]?(_.test(u[2])&&(n=RegExp("</"+u[2],"g")),o=v):void 0!==u[3]&&(o=v):o===v?">"===u[0]?(o=n??y,d=-1):void 0===u[1]?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=void 0===u[3]?v:'"'===u[3]?I:E):o===I||o===E?o=v:o===b||o===w?o=y:(o=v,n=void 0);let p=o===v&&e[t+1].startsWith("/>")?" ":"";s+=o===y?r+h:d>=0?(i.push(l),r.slice(0,d)+a+r.slice(d)+c+p):r+c+(-2===d?t:p)}return[P(e,s+(e[r]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),i]};class R{constructor({strings:e,_$litType$:t},r){let i;this.parts=[];let n=0,o=0,h=e.length-1,u=this.parts,[f,p]=T(e,t);if(this.el=R.createElement(f,r),O.currentNode=this.el.content,2===t||3===t){let e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(i=O.nextNode())&&u.length<h;){if(1===i.nodeType){if(i.hasAttributes())for(let e of i.getAttributeNames())if(e.endsWith(a)){let t=p[o++],r=i.getAttribute(e).split(c),s=/([.?@])?(.*)/.exec(t);u.push({type:1,index:n,name:s[2],strings:r,ctor:"."===s[1]?U:"?"===s[1]?B:"@"===s[1]?z:j}),i.removeAttribute(e)}else e.startsWith(c)&&(u.push({type:6,index:n}),i.removeAttribute(e));if(_.test(i.tagName)){let e=i.textContent.split(c),t=e.length-1;if(t>0){i.textContent=s?s.emptyScript:"";for(let r=0;r<t;r++)i.append(e[r],d()),O.nextNode(),u.push({type:2,index:++n});i.append(e[t],d())}}}else if(8===i.nodeType){if(i.data===l)u.push({type:2,index:n});else{let e=-1;for(;-1!==(e=i.data.indexOf(c,e+1));)u.push({type:7,index:n}),e+=c.length-1}}n++}}static createElement(e,t){let r=u.createElement("template");return r.innerHTML=e,r}}function D(e,t,r=e,i){if(t===N)return t;let n=void 0!==i?r._$Co?.[i]:r._$Cl,s=f(t)?void 0:t._$litDirective$;return n?.constructor!==s&&(n?._$AO?.(!1),void 0===s?n=void 0:(n=new s(e))._$AT(e,r,i),void 0!==i?(r._$Co??=[])[i]=n:r._$Cl=n),void 0!==n&&(t=D(e,n._$AS(e,t.values),n,i)),t}class k{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:t},parts:r}=this._$AD,i=(e?.creationScope??u).importNode(t,!0);O.currentNode=i;let n=O.nextNode(),s=0,o=0,a=r[0];for(;void 0!==a;){if(s===a.index){let t;2===a.type?t=new L(n,n.nextSibling,this,e):1===a.type?t=new a.ctor(n,a.name,a.strings,this,e):6===a.type&&(t=new $(n,this,e)),this._$AV.push(t),a=r[++o]}s!==a?.index&&(n=O.nextNode(),s++)}return O.currentNode=u,i}p(e){let t=0;for(let r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class L{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,r,i){this.type=2,this._$AH=M,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode,t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){f(e=D(this,e,t))?e===M||null==e||""===e?(this._$AH!==M&&this._$AR(),this._$AH=M):e!==this._$AH&&e!==N&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):g(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==M&&f(this._$AH)?this._$AA.nextSibling.data=e:this.T(u.createTextNode(e)),this._$AH=e}$(e){let{values:t,_$litType$:r}=e,i="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=R.createElement(P(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(t);else{let e=new k(i,this),r=e.u(this.options);e.p(t),this.T(r),this._$AH=e}}_$AC(e){let t=x.get(e.strings);return void 0===t&&x.set(e.strings,t=new R(e)),t}k(e){p(this._$AH)||(this._$AH=[],this._$AR());let t=this._$AH,r,i=0;for(let n of e)i===t.length?t.push(r=new L(this.O(d()),this.O(d()),this,this.options)):r=t[i],r._$AI(n),i++;i<t.length&&(this._$AR(r&&r._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){let t=n(e).nextSibling;n(e).remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class j{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,i,n){this.type=1,this._$AH=M,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=n,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=M}_$AI(e,t=this,r,i){let n=this.strings,s=!1;if(void 0===n)(s=!f(e=D(this,e,t,0))||e!==this._$AH&&e!==N)&&(this._$AH=e);else{let i,o;let a=e;for(e=n[0],i=0;i<n.length-1;i++)(o=D(this,a[r+i],t,i))===N&&(o=this._$AH[i]),s||=!f(o)||o!==this._$AH[i],o===M?e=M:e!==M&&(e+=(o??"")+n[i+1]),this._$AH[i]=o}s&&!i&&this.j(e)}j(e){e===M?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class U extends j{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===M?void 0:e}}class B extends j{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==M)}}class z extends j{constructor(e,t,r,i,n){super(e,t,r,i,n),this.type=5}_$AI(e,t=this){if((e=D(this,e,t,0)??M)===N)return;let r=this._$AH,i=e===M&&r!==M||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,n=e!==M&&(r===M||i);i&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class ${constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){D(this,e)}}let q={M:a,P:c,A:l,C:1,L:T,R:k,D:g,V:D,I:L,H:j,N:B,U:z,B:U,F:$},F=i.litHtmlPolyfillSupport;F?.(R,L),(i.litHtmlVersions??=[]).push("3.3.2");let H=(e,t,r)=>{let i=r?.renderBefore??t,n=i._$litPart$;if(void 0===n){let e=r?.renderBefore??null;i._$litPart$=n=new L(t.insertBefore(d(),e),e,void 0,r??{})}return n._$AI(e),n}},31133:function(e,t,r){"use strict";r.d(t,{oi:function(){return o},iv:function(){return i.iv},dy:function(){return n.dy},YP:function(){return n.YP},$m:function(){return i.$m}});var i=r(93511),n=r(81997);let s=globalThis;class o extends i.fl{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){let t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=(0,n.sY)(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return n.Jb}}o._$litElement$=!0,o.finalized=!0,s.litElementHydrateSupport?.({LitElement:o});let a=s.litElementPolyfillSupport;a?.({LitElement:o}),(s.litElementVersions??=[]).push("4.2.2")},12603:function(e,t,r){"use strict";r.d(t,{Ey:function(){return c},XY:function(){return o}});var i=r(82957),n=r(27658),s=class extends n{socket;constructor(e,t){super(),this.socket=new window.WebSocket(e,t.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,r){let i=r||t;try{this.socket.send(e),i()}catch(e){i(e)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};function o(e,t){return new s(e,t)}var a=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},c=class extends n{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:n=1e3,max_reconnects:s=5,...o}={},c,l){super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=n,this.max_reconnects=s,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=c||(()=>"number"==typeof this.rpc_id?++this.rpc_id:Number(this.rpc_id)+1),l?this.dataPack=l:this.dataPack=new a,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,i){return i||"object"!=typeof r||(i=r,r=null),new Promise((n,s)=>{if(!this.ready)return s(Error("socket not ready"));let o=this.generate_request_id(e,t);this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:e,params:t||void 0,id:o}),i,e=>{if(e)return s(e);this.queue[o]={promise:[n,s]},r&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],s(Error("reply timeout"))},r))})})}async login(e){let t=await this.call("rpc.login",e);if(!t)throw Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,i)=>{if(!this.ready)return i(Error("socket not ready"));this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:e,params:t}),e=>{if(e)return i(e);r()})})}async subscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==t[e])throw Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==t[e])throw Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket&&this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return void 0!==this.reconnect_timer_id}willReconnect(){return this.reconnect&&(0===this.max_reconnects||this.current_reconnects<this.max_reconnects)}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=i.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch(e){return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);let t=[e.notification];if(e.params.constructor===Object)t.push(e.params);else for(let r=0;r<e.params.length;r++)t.push(e.params[r]);return Promise.resolve().then(()=>{this.emit.apply(this,t)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,i),1))})}}},59367:function(e,t,r){"use strict";r.d(t,{AG:function(){return b},G0:function(){return S},IM:function(){return E},IX:function(){return p},O7:function(){return g},Rx:function(){return w},Ue:function(){return h},Yj:function(){return f},Z_:function(){return I},_4:function(){return C},bc:function(){return _},dt:function(){return A},eE:function(){return m},i0:function(){return y},jt:function(){return v},oQ:function(){return N}});class i extends TypeError{constructor(e,t){let r;let{message:i,explanation:n,...s}=e,{path:o}=e,a=0===o.length?i:`At path: ${o.join(".")} -- ${i}`;super(n??a),null!=n&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function n(e){return"object"==typeof e&&null!=e}function s(e){return n(e)&&!Array.isArray(e)}function o(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function*a(e,t,r,i){var s;for(let a of(n(s=e)&&"function"==typeof s[Symbol.iterator]||(e=[e]),e)){let e=function(e,t,r,i){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});let{path:n,branch:s}=t,{type:a}=r,{refinement:c,message:l=`Expected a value of type \`${a}\`${c?` with refinement \`${c}\``:""}, but received: \`${o(i)}\``}=e;return{value:i,type:a,refinement:c,key:n[n.length-1],path:n,branch:s,...e,message:l}}(a,t,r,i);e&&(yield e)}}function*c(e,t,r={}){let{path:i=[],branch:s=[e],coerce:o=!1,mask:a=!1}=r,l={path:i,branch:s,mask:a};o&&(e=t.coercer(e,l));let h="valid";for(let i of t.validator(e,l))i.explanation=r.message,h="not_valid",yield[i,void 0];for(let[u,d,f]of t.entries(e,l))for(let t of c(d,f,{path:void 0===u?i:[...i,u],branch:void 0===u?s:[...s,d],coerce:o,mask:a,message:r.message}))t[0]?(h=null!=t[0].refinement?"not_refined":"not_valid",yield[t[0],void 0]):o&&(d=t[1],void 0===u?e=d:e instanceof Map?e.set(u,d):e instanceof Set?e.add(d):n(e)&&(void 0!==d||u in e)&&(e[u]=d));if("not_valid"!==h)for(let i of t.refiner(e,l))i.explanation=r.message,h="not_refined",yield[i,void 0];"valid"===h&&(yield[void 0,e])}class l{constructor(e){let{type:t,schema:r,validator:i,refiner:n,coercer:s=e=>e,entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=s,i?this.validator=(e,t)=>a(i(e,t),t,this,e):this.validator=()=>[],n?this.refiner=(e,t)=>a(n(e,t),t,this,e):this.refiner=()=>[]}assert(e,t){return function(e,t,r){let i=u(e,t,{message:r});if(i[0])throw i[0]}(e,this,t)}create(e,t){return h(e,this,t)}is(e){return!u(e,this)[0]}mask(e,t){return function(e,t,r){let i=u(e,t,{coerce:!0,mask:!0,message:r});if(!i[0])return i[1];throw i[0]}(e,this,t)}validate(e,t={}){return u(e,this,t)}}function h(e,t,r){let i=u(e,t,{coerce:!0,message:r});if(!i[0])return i[1];throw i[0]}function u(e,t,r={}){let n=c(e,t,r),s=function(e){let{done:t,value:r}=e.next();return t?void 0:r}(n);return s[0]?[new i(s[0],function*(){for(let e of n)e[0]&&(yield e[0])}),void 0]:[void 0,s[1]]}function d(e,t){return new l({type:e,schema:null,validator:t})}function f(){return d("any",()=>!0)}function p(e){return new l({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[r,i]of t.entries())yield[r,i,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${o(e)}`})}function g(){return d("boolean",e=>"boolean"==typeof e)}function m(e){return d("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${o(t)}`)}function y(e){let t=o(e),r=typeof e;return new l({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${o(r)}`})}function b(e){return new l({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function w(){return d("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${o(e)}`)}function v(e){return new l({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function E(e,t){return new l({type:"record",schema:null,*entries(r){if(n(r))for(let i in r){let n=r[i];yield[i,i,e],yield[i,n,t]}},validator:e=>s(e)||`Expected an object, but received: ${o(e)}`,coercer:e=>s(e)?{...e}:e})}function I(){return d("string",e=>"string"==typeof e||`Expected a string, but received: ${o(e)}`)}function _(e){let t=d("never",()=>!1);return new l({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let i=Math.max(e.length,r.length);for(let n=0;n<i;n++)yield[n,r[n],e[n]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${o(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function A(e){let t=Object.keys(e);return new l({type:"type",schema:e,*entries(r){if(n(r))for(let i of t)yield[i,r[i],e[i]]},validator:e=>s(e)||`Expected an object, but received: ${o(e)}`,coercer:e=>s(e)?{...e}:e})}function S(e){let t=e.map(e=>e.type).join(" | ");return new l({type:"union",schema:null,coercer(t,r){for(let i of e){let[e,n]=i.validate(t,{coerce:!0,mask:r.mask});if(!e)return n}return t},validator(r,i){let n=[];for(let t of e){let[...e]=c(r,t,i),[s]=e;if(!s[0])return[];for(let[t]of e)t&&n.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${o(r)}`,...n]}})}function C(){return d("unknown",()=>!0)}function N(e,t,r){return new l({...e,coercer:(i,n)=>u(i,t)[0]?e.coercer(i,n):e.coercer(r(i,n),n)})}},33085:function(e,t,r){"use strict";r.d(t,{sj:function(){return f},iH:function(){return m},CO:function(){return g},Ld:function(){return p}}),Symbol();let i=Symbol(),n=Object.getPrototypeOf,s=new WeakMap,o=e=>e&&(s.has(e)?s.get(e):n(e)===Object.prototype||n(e)===Array.prototype),a=e=>o(e)&&e[i]||null,c=(e,t=!0)=>{s.set(e,t)},l=e=>"object"==typeof e&&null!==e,h=new WeakMap,u=new WeakSet,[d]=((e=Object.is,t=(e,t)=>new Proxy(e,t),r=e=>l(e)&&!u.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),i=e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},n=new WeakMap,s=(e,t,r=i)=>{let o=n.get(e);if((null==o?void 0:o[0])===t)return o[1];let a=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return c(a,!0),n.set(e,[t,a]),Reflect.ownKeys(e).forEach(t=>{if(Object.getOwnPropertyDescriptor(a,t))return;let i=Reflect.get(e,t),{enumerable:n}=Reflect.getOwnPropertyDescriptor(e,t),o={value:i,enumerable:n,configurable:!0};if(u.has(i))c(i,!1);else if(i instanceof Promise)delete o.value,o.get=()=>r(i);else if(h.has(i)){let[e,t]=h.get(i);o.value=s(e,t(),r)}Object.defineProperty(a,t,o)}),Object.preventExtensions(a)},o=new WeakMap,d=[1,1],f=i=>{if(!l(i))throw Error("object required");let n=o.get(i);if(n)return n;let c=d[0],p=new Set,g=(e,t=++d[0])=>{c!==t&&(c=t,p.forEach(r=>r(e,t)))},m=d[1],y=(e=++d[1])=>(m===e||p.size||(m=e,w.forEach(([t])=>{let r=t[1](e);r>c&&(c=r)})),c),b=e=>(t,r)=>{let i=[...t];i[1]=[e,...i[1]],g(i,r)},w=new Map,v=(e,t)=>{if(w.has(e))throw Error("prop listener already exists");if(p.size){let r=t[3](b(e));w.set(e,[t,r])}else w.set(e,[t])},E=e=>{var t;let r=w.get(e);r&&(w.delete(e),null==(t=r[1])||t.call(r))},I=e=>{p.add(e),1===p.size&&w.forEach(([e,t],r)=>{if(t)throw Error("remove already exists");let i=e[3](b(r));w.set(r,[e,i])});let t=()=>{p.delete(e),0===p.size&&w.forEach(([e,t],r)=>{t&&(t(),w.set(r,[e]))})};return t},_=Array.isArray(i)?[]:Object.create(Object.getPrototypeOf(i)),A={deleteProperty(e,t){let r=Reflect.get(e,t);E(t);let i=Reflect.deleteProperty(e,t);return i&&g(["delete",[t],r]),i},set(t,i,n,s){let c=Reflect.has(t,i),d=Reflect.get(t,i,s);if(c&&(e(d,n)||o.has(n)&&e(d,o.get(n))))return!0;E(i),l(n)&&(n=a(n)||n);let p=n;if(n instanceof Promise)n.then(e=>{n.status="fulfilled",n.value=e,g(["resolve",[i],e])}).catch(e=>{n.status="rejected",n.reason=e,g(["reject",[i],e])});else{!h.has(n)&&r(n)&&(p=f(n));let e=!u.has(p)&&h.get(p);e&&v(i,e)}return Reflect.set(t,i,p,s),g(["set",[i],n,d]),!0}},S=t(_,A);o.set(i,S);let C=[_,y,s,I];return h.set(S,C),Reflect.ownKeys(i).forEach(e=>{let t=Object.getOwnPropertyDescriptor(i,e);"value"in t&&(S[e]=i[e],delete t.value,delete t.writable),Object.defineProperty(_,e,t)}),S})=>[f,h,u,e,t,r,i,n,s,o,d])();function f(e={}){return d(e)}function p(e,t,r){let i;let n=h.get(e);n||console.warn("Please use proxy object");let s=[],o=n[3],a=!1,c=o(e=>{if(s.push(e),r){t(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,a&&t(s.splice(0))}))});return a=!0,()=>{a=!1,c()}}function g(e,t){let r=h.get(e);r||console.warn("Please use proxy object");let[i,n,s]=r;return s(i,n(),t)}function m(e){return u.add(e),e}},55543:function(e,t,r){"use strict";r.d(t,{VW:function(){return n},Yr:function(){return s}});var i=r(33085);function n(e,t,r,n){let s=e[t];return(0,i.Ld)(e,()=>{let i=e[t];Object.is(s,i)||r(s=i)},n)}function s(e){let t=(0,i.sj)({data:Array.from(e||[]),has(e){return this.data.some(t=>t[0]===e)},set(e,t){let r=this.data.find(t=>t[0]===e);return r?r[1]=t:this.data.push([e,t]),this},get(e){var t;return null==(t=this.data.find(t=>t[0]===e))?void 0:t[1]},delete(e){let t=this.data.findIndex(t=>t[0]===e);return -1!==t&&(this.data.splice(t,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(e){this.data.forEach(t=>{e(t[1],t[0],this)})},keys(){return this.data.map(e=>e[0]).values()},values(){return this.data.map(e=>e[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(t,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(t),t}Symbol()},39502:function(e,t,r){"use strict";function i(e,t){let r=e.toString(),i=r.startsWith("-");i&&(r=r.slice(1));let[n,s]=[(r=r.padStart(t,"0")).slice(0,r.length-t),r.slice(r.length-t)];return s=s.replace(/(0+)$/,""),`${i?"-":""}${n||"0"}${s?`.${s}`:""}`}r.d(t,{b:function(){return i}})},58274:function(e){"use strict";e.exports={i8:"6.6.1"}}}]);